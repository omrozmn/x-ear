# Type Definition Files

This directory contains TypeScript type definitions for the X-Ear web application.

## File Overview

### Core Type Files

- **`invoice.ts`** - Complete invoice type definitions including items, addresses, payments, and government-specific fields
- **`utils.ts`** - Common utility types for forms, events, and generic helpers

### Shim Files (.d.ts)

Shim files provide temporary type declarations for modules that lack proper TypeScript support. These files use `any` types, which is acceptable in this specific context.

#### `global.d.ts`
Global type shims for internal types not yet properly exported from their source modules.

**Why `any` is acceptable here:**
1. Temporary placeholders during type migration process
2. Prevents cascading type errors while systematically fixing real types
3. Isolated to shim file and doesn't leak into application code
4. Will be replaced with proper imports once source modules export correct types

**Temporary types:**
- `Communication`, `PartyReport`, `EReceiptRecord` ‚Üí from `party-communication.types.ts`
- `Appointment` ‚Üí from `appointment.types.ts`
- `Installment`, `Sale` ‚Üí from `sales.types.ts`
- `SGKInfo`, `SGKWorkflow` ‚Üí from `party-sgk.types.ts`

#### `shims-orval.d.ts`
Type declarations for Orval-generated API client.

**Why `any` is acceptable here:**
1. Temporary shim for third-party generated module
2. Actual types are generated by Orval and should be imported from `@/api/generated`
3. Exists only for backwards compatibility during migration
4. Consumers should use properly typed Orval hooks instead

**Migration path:** Remove this file once all code uses `@/api/generated` imports directly.

#### `shims-ui-web.d.ts`
Type declarations for the `@x-ear/ui-web` package.

**Why `any` is acceptable here:**
1. Temporary shim for internal package lacking proper type exports
2. UI components are React components with complex prop types
3. Exists only for module resolution during migration period
4. Consumers should refer to Storybook documentation for component APIs

**Migration path:**
1. Add proper TypeScript definitions to `@x-ear/ui-web` package
2. Export component prop types from the package
3. Remove this shim file once the package has proper types

## Best Practices

### When to Use `any`

**‚úÖ ACCEPTABLE:**
- In `.d.ts` shim files for third-party or untyped modules
- Documented with `eslint-disable-next-line` and explanation
- Temporary during migration with clear TODO

**‚ùå NOT ACCEPTABLE:**
- In application code (`.ts`, `.tsx` files)
- Without documentation explaining why
- As a permanent solution

### Proper Type Usage

Instead of `any`, use:

1. **`unknown`** - For truly dynamic data that needs runtime validation
   ```typescript
   const data: unknown = JSON.parse(response);
   // Must validate before use
   ```

2. **Generics** - For reusable type-safe functions
   ```typescript
   function mapItems<T, R>(items: T[], mapper: (item: T) => R): R[] { ... }
   ```

3. **Union Types** - For known possible types
   ```typescript
   type Status = 'pending' | 'approved' | 'rejected';
   ```

4. **Proper Interfaces** - For structured data
   ```typescript
   interface InvoiceFormData {
     partyId: string;
     items: InvoiceItem[];
     // ...
   }
   ```

## Migration Status

### Completed ‚úÖ
- [x] `global.d.ts` - Documented all `any` types with explanations
- [x] `shims-orval.d.ts` - Documented temporary shim purpose
- [x] `shims-ui-web.d.ts` - Documented and fixed unused directives
- [x] `invoice.ts` - Uses `unknown` instead of `any` for dynamic data

### Pending üîÑ
- [ ] Export proper types from `party-communication.types.ts`
- [ ] Export proper types from `appointment.types.ts`
- [ ] Export proper types from `sales.types.ts`
- [ ] Export proper types from `party-sgk.types.ts`
- [ ] Add TypeScript definitions to `@x-ear/ui-web` package
- [ ] Remove shim files once source modules have proper types

## Related Documentation

- [Lint Error Elimination Spec](../../../../.kiro/specs/lint-error-elimination/)
- [Project Rules](../../../../.kiro/steering/project-rules.md)
- [Tech Stack](../../../../.kiro/steering/tech.md)
