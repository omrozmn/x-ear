var S_=Object.defineProperty;var T_=(e,t,r)=>t in e?S_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var qe=(e,t,r)=>(T_(e,typeof t!="symbol"?t+"":t,r),r),lm=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var ne=(e,t,r)=>(lm(e,t,"read from private field"),r?r.call(e):t.get(e)),Be=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Re=(e,t,r,s)=>(lm(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var Xu=(e,t,r,s)=>({set _(n){Re(e,t,n,r)},get _(){return ne(e,t,s)}}),nt=(e,t,r)=>(lm(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dN={exports:{}},Nf={},uN={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=Symbol.for("react.element"),E_=Symbol.for("react.portal"),C_=Symbol.for("react.fragment"),D_=Symbol.for("react.strict_mode"),A_=Symbol.for("react.profiler"),P_=Symbol.for("react.provider"),R_=Symbol.for("react.context"),F_=Symbol.for("react.forward_ref"),I_=Symbol.for("react.suspense"),M_=Symbol.for("react.memo"),O_=Symbol.for("react.lazy"),Tv=Symbol.iterator;function L_(e){return e===null||typeof e!="object"?null:(e=Tv&&e[Tv]||e["@@iterator"],typeof e=="function"?e:null)}var hN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fN=Object.assign,mN={};function wc(e,t,r){this.props=e,this.context=t,this.refs=mN,this.updater=r||hN}wc.prototype.isReactComponent={};wc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xN(){}xN.prototype=wc.prototype;function ag(e,t,r){this.props=e,this.context=t,this.refs=mN,this.updater=r||hN}var ng=ag.prototype=new xN;ng.constructor=ag;fN(ng,wc.prototype);ng.isPureReactComponent=!0;var _v=Array.isArray,pN=Object.prototype.hasOwnProperty,ig={current:null},gN={key:!0,ref:!0,__self:!0,__source:!0};function yN(e,t,r){var s,n={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)pN.call(t,s)&&!gN.hasOwnProperty(s)&&(n[s]=t[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:Cu,type:e,key:i,ref:l,props:n,_owner:ig.current}}function B_(e,t){return{$$typeof:Cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cu}function z_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ev=/\/+/g;function om(e,t){return typeof e=="object"&&e!==null&&e.key!=null?z_(""+e.key):t.toString(36)}function z0(e,t,r,s,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Cu:case E_:l=!0}}if(l)return l=e,n=n(l),e=s===""?"."+om(l,0):s,_v(n)?(r="",e!=null&&(r=e.replace(Ev,"$&/")+"/"),z0(n,t,r,"",function(d){return d})):n!=null&&(lg(n)&&(n=B_(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Ev,"$&/")+"/")+e)),t.push(n)),1;if(l=0,s=s===""?".":s+":",_v(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+om(i,o);l+=z0(i,t,r,c,n)}else if(c=L_(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+om(i,o++),l+=z0(i,t,r,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Qu(e,t,r){if(e==null)return e;var s=[],n=0;return z0(e,s,"","",function(i){return t.call(r,i,n++)}),s}function $_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var hs={current:null},$0={transition:null},U_={ReactCurrentDispatcher:hs,ReactCurrentBatchConfig:$0,ReactCurrentOwner:ig};function vN(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Qu,forEach:function(e,t,r){Qu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qu(e,function(){t++}),t},toArray:function(e){return Qu(e,function(t){return t})||[]},only:function(e){if(!lg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ot.Component=wc;ot.Fragment=C_;ot.Profiler=A_;ot.PureComponent=ag;ot.StrictMode=D_;ot.Suspense=I_;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U_;ot.act=vN;ot.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=fN({},e.props),n=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=ig.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)pN.call(t,c)&&!gN.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:Cu,type:e.type,key:n,ref:i,props:s,_owner:l}};ot.createContext=function(e){return e={$$typeof:R_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:P_,_context:e},e.Consumer=e};ot.createElement=yN;ot.createFactory=function(e){var t=yN.bind(null,e);return t.type=e,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(e){return{$$typeof:F_,render:e}};ot.isValidElement=lg;ot.lazy=function(e){return{$$typeof:O_,_payload:{_status:-1,_result:e},_init:$_}};ot.memo=function(e,t){return{$$typeof:M_,type:e,compare:t===void 0?null:t}};ot.startTransition=function(e){var t=$0.transition;$0.transition={};try{e()}finally{$0.transition=t}};ot.unstable_act=vN;ot.useCallback=function(e,t){return hs.current.useCallback(e,t)};ot.useContext=function(e){return hs.current.useContext(e)};ot.useDebugValue=function(){};ot.useDeferredValue=function(e){return hs.current.useDeferredValue(e)};ot.useEffect=function(e,t){return hs.current.useEffect(e,t)};ot.useId=function(){return hs.current.useId()};ot.useImperativeHandle=function(e,t,r){return hs.current.useImperativeHandle(e,t,r)};ot.useInsertionEffect=function(e,t){return hs.current.useInsertionEffect(e,t)};ot.useLayoutEffect=function(e,t){return hs.current.useLayoutEffect(e,t)};ot.useMemo=function(e,t){return hs.current.useMemo(e,t)};ot.useReducer=function(e,t,r){return hs.current.useReducer(e,t,r)};ot.useRef=function(e){return hs.current.useRef(e)};ot.useState=function(e){return hs.current.useState(e)};ot.useSyncExternalStore=function(e,t,r){return hs.current.useSyncExternalStore(e,t,r)};ot.useTransition=function(){return hs.current.useTransition()};ot.version="18.3.1";uN.exports=ot;var k=uN.exports;const bt=sg(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_=k,H_=Symbol.for("react.element"),K_=Symbol.for("react.fragment"),G_=Object.prototype.hasOwnProperty,W_=V_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y_={key:!0,ref:!0,__self:!0,__source:!0};function bN(e,t,r){var s,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)G_.call(t,s)&&!Y_.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:H_,type:e,key:i,ref:l,props:n,_owner:W_.current}}Nf.Fragment=K_;Nf.jsx=bN;Nf.jsxs=bN;dN.exports=Nf;var a=dN.exports,uh={},wN={exports:{}},Bs={},NN={exports:{}},kN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,A){var V=H.length;H.push(A);e:for(;0<V;){var L=V-1>>>1,P=H[L];if(0<n(P,A))H[L]=A,H[V]=P,V=L;else break e}}function r(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var A=H[0],V=H.pop();if(V!==A){H[0]=V;e:for(var L=0,P=H.length,I=P>>>1;L<I;){var R=2*(L+1)-1,U=H[R],M=R+1,J=H[M];if(0>n(U,V))M<P&&0>n(J,U)?(H[L]=J,H[M]=V,L=M):(H[L]=U,H[R]=V,L=R);else if(M<P&&0>n(J,V))H[L]=J,H[M]=V,L=M;else break e}}return A}function n(H,A){var V=H.sortIndex-A.sortIndex;return V!==0?V:H.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,x=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var A=r(d);A!==null;){if(A.callback===null)s(d);else if(A.startTime<=H)s(d),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(d)}}function S(H){if(m=!1,b(H),!p)if(r(c)!==null)p=!0,G(D);else{var A=r(d);A!==null&&q(S,A.startTime-H)}}function D(H,A){p=!1,m&&(m=!1,g(w),w=-1),x=!0;var V=f;try{for(b(A),h=r(c);h!==null&&(!(h.expirationTime>A)||H&&!T());){var L=h.callback;if(typeof L=="function"){h.callback=null,f=h.priorityLevel;var P=L(h.expirationTime<=A);A=e.unstable_now(),typeof P=="function"?h.callback=P:h===r(c)&&s(c),b(A)}else s(c);h=r(c)}if(h!==null)var I=!0;else{var R=r(d);R!==null&&q(S,R.startTime-A),I=!1}return I}finally{h=null,f=V,x=!1}}var N=!1,E=null,w=-1,_=5,C=-1;function T(){return!(e.unstable_now()-C<_)}function j(){if(E!==null){var H=e.unstable_now();C=H;var A=!0;try{A=E(!0,H)}finally{A?F():(N=!1,E=null)}}else N=!1}var F;if(typeof v=="function")F=function(){v(j)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,z=O.port2;O.port1.onmessage=j,F=function(){z.postMessage(null)}}else F=function(){y(j,0)};function G(H){E=H,N||(N=!0,F())}function q(H,A){w=y(function(){H(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){p||x||(p=!0,G(D))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var V=f;f=A;try{return H()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,A){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=f;f=H;try{return A()}finally{f=V}},e.unstable_scheduleCallback=function(H,A,V){var L=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?L+V:L):V=L,H){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=V+P,H={id:u++,callback:A,priorityLevel:H,startTime:V,expirationTime:P,sortIndex:-1},V>L?(H.sortIndex=V,t(d,H),r(c)===null&&H===r(d)&&(m?(g(w),w=-1):m=!0,q(S,V-L))):(H.sortIndex=P,t(c,H),p||x||(p=!0,G(D))),H},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(H){var A=f;return function(){var V=f;f=A;try{return H.apply(this,arguments)}finally{f=V}}}})(kN);NN.exports=kN;var q_=NN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=k,Ms=q_;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jN=new Set,Od={};function Ul(e,t){rc(e,t),rc(e+"Capture",t)}function rc(e,t){for(Od[e]=t,e=0;e<t.length;e++)jN.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lx=Object.prototype.hasOwnProperty,Q_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cv={},Dv={};function Z_(e){return lx.call(Dv,e)?!0:lx.call(Cv,e)?!1:Q_.test(e)?Dv[e]=!0:(Cv[e]=!0,!1)}function J_(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eE(e,t,r,s){if(t===null||typeof t>"u"||J_(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fs(e,t,r,s,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mr[e]=new fs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mr[t]=new fs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mr[e]=new fs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mr[e]=new fs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mr[e]=new fs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mr[e]=new fs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mr[e]=new fs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mr[e]=new fs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mr[e]=new fs(e,5,!1,e.toLowerCase(),null,!1,!1)});var og=/[\-:]([a-z])/g;function cg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(og,cg);Mr[t]=new fs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(og,cg);Mr[t]=new fs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(og,cg);Mr[t]=new fs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mr[e]=new fs(e,1,!1,e.toLowerCase(),null,!1,!1)});Mr.xlinkHref=new fs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mr[e]=new fs(e,1,!1,e.toLowerCase(),null,!0,!0)});function dg(e,t,r,s){var n=Mr.hasOwnProperty(t)?Mr[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eE(t,r,n,s)&&(r=null),s||n===null?Z_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Fn=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),fo=Symbol.for("react.portal"),mo=Symbol.for("react.fragment"),ug=Symbol.for("react.strict_mode"),ox=Symbol.for("react.profiler"),SN=Symbol.for("react.provider"),TN=Symbol.for("react.context"),hg=Symbol.for("react.forward_ref"),cx=Symbol.for("react.suspense"),dx=Symbol.for("react.suspense_list"),fg=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),_N=Symbol.for("react.offscreen"),Av=Symbol.iterator;function Ic(e){return e===null||typeof e!="object"?null:(e=Av&&e[Av]||e["@@iterator"],typeof e=="function"?e:null)}var Kt=Object.assign,cm;function Xc(e){if(cm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);cm=t&&t[1]||""}return`
`+cm+e}var dm=!1;function um(e,t){if(!e||dm)return"";dm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=s.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{dm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Xc(e):""}function tE(e){switch(e.tag){case 5:return Xc(e.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return e=um(e.type,!1),e;case 11:return e=um(e.type.render,!1),e;case 1:return e=um(e.type,!0),e;default:return""}}function ux(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mo:return"Fragment";case fo:return"Portal";case ox:return"Profiler";case ug:return"StrictMode";case cx:return"Suspense";case dx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TN:return(e.displayName||"Context")+".Consumer";case SN:return(e._context.displayName||"Context")+".Provider";case hg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fg:return t=e.displayName||null,t!==null?t:ux(e.type)||"Memo";case Gn:t=e._payload,e=e._init;try{return ux(e(t))}catch{}}return null}function rE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ux(t);case 8:return t===ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ri(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function EN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sE(e){var t=EN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ju(e){e._valueTracker||(e._valueTracker=sE(e))}function CN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=EN(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function hh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hx(e,t){var r=t.checked;return Kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pv(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ri(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function DN(e,t){t=t.checked,t!=null&&dg(e,"checked",t,!1)}function fx(e,t){DN(e,t);var r=Ri(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mx(e,t.type,r):t.hasOwnProperty("defaultValue")&&mx(e,t.type,Ri(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mx(e,t,r){(t!=="number"||hh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Qc=Array.isArray;function _o(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ri(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function xx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Se(92));if(Qc(r)){if(1<r.length)throw Error(Se(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ri(r)}}function AN(e,t){var r=Ri(t.value),s=Ri(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Iv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function PN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function px(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?PN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var e0,RN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(e0=e0||document.createElement("div"),e0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=e0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ld(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aE=["Webkit","ms","Moz","O"];Object.keys(cd).forEach(function(e){aE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cd[t]=cd[e]})});function FN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||cd.hasOwnProperty(e)&&cd[e]?(""+t).trim():t+"px"}function IN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=FN(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var nE=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gx(e,t){if(t){if(nE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function yx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vx=null;function mg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bx=null,Eo=null,Co=null;function Mv(e){if(e=Pu(e)){if(typeof bx!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=_f(t),bx(e.stateNode,e.type,t))}}function MN(e){Eo?Co?Co.push(e):Co=[e]:Eo=e}function ON(){if(Eo){var e=Eo,t=Co;if(Co=Eo=null,Mv(e),t)for(e=0;e<t.length;e++)Mv(t[e])}}function LN(e,t){return e(t)}function BN(){}var hm=!1;function zN(e,t,r){if(hm)return e(t,r);hm=!0;try{return LN(e,t,r)}finally{hm=!1,(Eo!==null||Co!==null)&&(BN(),ON())}}function Bd(e,t){var r=e.stateNode;if(r===null)return null;var s=_f(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Se(231,t,typeof r));return r}var wx=!1;if(Tn)try{var Mc={};Object.defineProperty(Mc,"passive",{get:function(){wx=!0}}),window.addEventListener("test",Mc,Mc),window.removeEventListener("test",Mc,Mc)}catch{wx=!1}function iE(e,t,r,s,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var dd=!1,fh=null,mh=!1,Nx=null,lE={onError:function(e){dd=!0,fh=e}};function oE(e,t,r,s,n,i,l,o,c){dd=!1,fh=null,iE.apply(lE,arguments)}function cE(e,t,r,s,n,i,l,o,c){if(oE.apply(this,arguments),dd){if(dd){var d=fh;dd=!1,fh=null}else throw Error(Se(198));mh||(mh=!0,Nx=d)}}function Vl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $N(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ov(e){if(Vl(e)!==e)throw Error(Se(188))}function dE(e){var t=e.alternate;if(!t){if(t=Vl(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Ov(n),e;if(i===s)return Ov(n),t;i=i.sibling}throw Error(Se(188))}if(r.return!==s.return)r=n,s=i;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,s=i;break}if(o===s){l=!0,s=n,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,s=n;break}if(o===s){l=!0,s=i,r=n;break}o=o.sibling}if(!l)throw Error(Se(189))}}if(r.alternate!==s)throw Error(Se(190))}if(r.tag!==3)throw Error(Se(188));return r.stateNode.current===r?e:t}function UN(e){return e=dE(e),e!==null?VN(e):null}function VN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VN(e);if(t!==null)return t;e=e.sibling}return null}var HN=Ms.unstable_scheduleCallback,Lv=Ms.unstable_cancelCallback,uE=Ms.unstable_shouldYield,hE=Ms.unstable_requestPaint,tr=Ms.unstable_now,fE=Ms.unstable_getCurrentPriorityLevel,xg=Ms.unstable_ImmediatePriority,KN=Ms.unstable_UserBlockingPriority,xh=Ms.unstable_NormalPriority,mE=Ms.unstable_LowPriority,GN=Ms.unstable_IdlePriority,kf=null,qa=null;function xE(e){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot(kf,e,void 0,(e.current.flags&128)===128)}catch{}}var wa=Math.clz32?Math.clz32:yE,pE=Math.log,gE=Math.LN2;function yE(e){return e>>>=0,e===0?32:31-(pE(e)/gE|0)|0}var t0=64,r0=4194304;function Zc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ph(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?s=Zc(o):(i&=l,i!==0&&(s=Zc(i)))}else l=r&~n,l!==0?s=Zc(l):i!==0&&(s=Zc(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-wa(t),n=1<<r,s|=e[r],t&=~n;return s}function vE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bE(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-wa(i),o=1<<l,c=n[l];c===-1?(!(o&r)||o&s)&&(n[l]=vE(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function kx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WN(){var e=t0;return t0<<=1,!(t0&4194240)&&(t0=64),e}function fm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Du(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wa(t),e[t]=r}function wE(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-wa(r),i=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~i}}function pg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-wa(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var Et=0;function YN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qN,gg,XN,QN,ZN,jx=!1,s0=[],gi=null,yi=null,vi=null,zd=new Map,$d=new Map,Xn=[],NE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bv(e,t){switch(e){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":zd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(t.pointerId)}}function Oc(e,t,r,s,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Pu(t),t!==null&&gg(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function kE(e,t,r,s,n){switch(t){case"focusin":return gi=Oc(gi,e,t,r,s,n),!0;case"dragenter":return yi=Oc(yi,e,t,r,s,n),!0;case"mouseover":return vi=Oc(vi,e,t,r,s,n),!0;case"pointerover":var i=n.pointerId;return zd.set(i,Oc(zd.get(i)||null,e,t,r,s,n)),!0;case"gotpointercapture":return i=n.pointerId,$d.set(i,Oc($d.get(i)||null,e,t,r,s,n)),!0}return!1}function JN(e){var t=rl(e.target);if(t!==null){var r=Vl(t);if(r!==null){if(t=r.tag,t===13){if(t=$N(r),t!==null){e.blockedOn=t,ZN(e.priority,function(){XN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function U0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Sx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);vx=s,r.target.dispatchEvent(s),vx=null}else return t=Pu(r),t!==null&&gg(t),e.blockedOn=r,!1;t.shift()}return!0}function zv(e,t,r){U0(e)&&r.delete(t)}function jE(){jx=!1,gi!==null&&U0(gi)&&(gi=null),yi!==null&&U0(yi)&&(yi=null),vi!==null&&U0(vi)&&(vi=null),zd.forEach(zv),$d.forEach(zv)}function Lc(e,t){e.blockedOn===t&&(e.blockedOn=null,jx||(jx=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,jE)))}function Ud(e){function t(n){return Lc(n,e)}if(0<s0.length){Lc(s0[0],e);for(var r=1;r<s0.length;r++){var s=s0[r];s.blockedOn===e&&(s.blockedOn=null)}}for(gi!==null&&Lc(gi,e),yi!==null&&Lc(yi,e),vi!==null&&Lc(vi,e),zd.forEach(t),$d.forEach(t),r=0;r<Xn.length;r++)s=Xn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Xn.length&&(r=Xn[0],r.blockedOn===null);)JN(r),r.blockedOn===null&&Xn.shift()}var Do=Fn.ReactCurrentBatchConfig,gh=!0;function SE(e,t,r,s){var n=Et,i=Do.transition;Do.transition=null;try{Et=1,yg(e,t,r,s)}finally{Et=n,Do.transition=i}}function TE(e,t,r,s){var n=Et,i=Do.transition;Do.transition=null;try{Et=4,yg(e,t,r,s)}finally{Et=n,Do.transition=i}}function yg(e,t,r,s){if(gh){var n=Sx(e,t,r,s);if(n===null)km(e,t,s,yh,r),Bv(e,s);else if(kE(n,e,t,r,s))s.stopPropagation();else if(Bv(e,s),t&4&&-1<NE.indexOf(e)){for(;n!==null;){var i=Pu(n);if(i!==null&&qN(i),i=Sx(e,t,r,s),i===null&&km(e,t,s,yh,r),i===n)break;n=i}n!==null&&s.stopPropagation()}else km(e,t,s,null,r)}}var yh=null;function Sx(e,t,r,s){if(yh=null,e=mg(s),e=rl(e),e!==null)if(t=Vl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$N(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yh=e,null}function ek(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fE()){case xg:return 1;case KN:return 4;case xh:case mE:return 16;case GN:return 536870912;default:return 16}default:return 16}}var di=null,vg=null,V0=null;function tk(){if(V0)return V0;var e,t=vg,r=t.length,s,n="value"in di?di.value:di.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===n[i-s];s++);return V0=n.slice(e,1<s?1-s:void 0)}function H0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function a0(){return!0}function $v(){return!1}function zs(e){function t(r,s,n,i,l){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?a0:$v,this.isPropagationStopped=$v,this}return Kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=a0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=a0)},persist:function(){},isPersistent:a0}),t}var Nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bg=zs(Nc),Au=Kt({},Nc,{view:0,detail:0}),_E=zs(Au),mm,xm,Bc,jf=Kt({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bc&&(Bc&&e.type==="mousemove"?(mm=e.screenX-Bc.screenX,xm=e.screenY-Bc.screenY):xm=mm=0,Bc=e),mm)},movementY:function(e){return"movementY"in e?e.movementY:xm}}),Uv=zs(jf),EE=Kt({},jf,{dataTransfer:0}),CE=zs(EE),DE=Kt({},Au,{relatedTarget:0}),pm=zs(DE),AE=Kt({},Nc,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=zs(AE),RE=Kt({},Nc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),FE=zs(RE),IE=Kt({},Nc,{data:0}),Vv=zs(IE),ME={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LE[e])?!!t[e]:!1}function wg(){return BE}var zE=Kt({},Au,{key:function(e){if(e.key){var t=ME[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=H0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wg,charCode:function(e){return e.type==="keypress"?H0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?H0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$E=zs(zE),UE=Kt({},jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=zs(UE),VE=Kt({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wg}),HE=zs(VE),KE=Kt({},Nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),GE=zs(KE),WE=Kt({},jf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),YE=zs(WE),qE=[9,13,27,32],Ng=Tn&&"CompositionEvent"in window,ud=null;Tn&&"documentMode"in document&&(ud=document.documentMode);var XE=Tn&&"TextEvent"in window&&!ud,rk=Tn&&(!Ng||ud&&8<ud&&11>=ud),Kv=String.fromCharCode(32),Gv=!1;function sk(e,t){switch(e){case"keyup":return qE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ak(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xo=!1;function QE(e,t){switch(e){case"compositionend":return ak(t);case"keypress":return t.which!==32?null:(Gv=!0,Kv);case"textInput":return e=t.data,e===Kv&&Gv?null:e;default:return null}}function ZE(e,t){if(xo)return e==="compositionend"||!Ng&&sk(e,t)?(e=tk(),V0=vg=di=null,xo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rk&&t.locale!=="ko"?null:t.data;default:return null}}var JE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!JE[e.type]:t==="textarea"}function nk(e,t,r,s){MN(s),t=vh(t,"onChange"),0<t.length&&(r=new bg("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var hd=null,Vd=null;function eC(e){pk(e,0)}function Sf(e){var t=yo(e);if(CN(t))return e}function tC(e,t){if(e==="change")return t}var ik=!1;if(Tn){var gm;if(Tn){var ym="oninput"in document;if(!ym){var Yv=document.createElement("div");Yv.setAttribute("oninput","return;"),ym=typeof Yv.oninput=="function"}gm=ym}else gm=!1;ik=gm&&(!document.documentMode||9<document.documentMode)}function qv(){hd&&(hd.detachEvent("onpropertychange",lk),Vd=hd=null)}function lk(e){if(e.propertyName==="value"&&Sf(Vd)){var t=[];nk(t,Vd,e,mg(e)),zN(eC,t)}}function rC(e,t,r){e==="focusin"?(qv(),hd=t,Vd=r,hd.attachEvent("onpropertychange",lk)):e==="focusout"&&qv()}function sC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sf(Vd)}function aC(e,t){if(e==="click")return Sf(t)}function nC(e,t){if(e==="input"||e==="change")return Sf(t)}function iC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ta=typeof Object.is=="function"?Object.is:iC;function Hd(e,t){if(Ta(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!lx.call(t,n)||!Ta(e[n],t[n]))return!1}return!0}function Xv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qv(e,t){var r=Xv(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xv(r)}}function ok(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ok(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ck(){for(var e=window,t=hh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hh(e.document)}return t}function kg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lC(e){var t=ck(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ok(r.ownerDocument.documentElement,r)){if(s!==null&&kg(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(s.start,n);s=s.end===void 0?i:Math.min(s.end,n),!e.extend&&i>s&&(n=s,s=i,i=n),n=Qv(r,i);var l=Qv(r,s);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oC=Tn&&"documentMode"in document&&11>=document.documentMode,po=null,Tx=null,fd=null,_x=!1;function Zv(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_x||po==null||po!==hh(s)||(s=po,"selectionStart"in s&&kg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),fd&&Hd(fd,s)||(fd=s,s=vh(Tx,"onSelect"),0<s.length&&(t=new bg("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=po)))}function n0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var go={animationend:n0("Animation","AnimationEnd"),animationiteration:n0("Animation","AnimationIteration"),animationstart:n0("Animation","AnimationStart"),transitionend:n0("Transition","TransitionEnd")},vm={},dk={};Tn&&(dk=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function Tf(e){if(vm[e])return vm[e];if(!go[e])return e;var t=go[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in dk)return vm[e]=t[r];return e}var uk=Tf("animationend"),hk=Tf("animationiteration"),fk=Tf("animationstart"),mk=Tf("transitionend"),xk=new Map,Jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(e,t){xk.set(e,t),Ul(t,[e])}for(var bm=0;bm<Jv.length;bm++){var wm=Jv[bm],cC=wm.toLowerCase(),dC=wm[0].toUpperCase()+wm.slice(1);$i(cC,"on"+dC)}$i(uk,"onAnimationEnd");$i(hk,"onAnimationIteration");$i(fk,"onAnimationStart");$i("dblclick","onDoubleClick");$i("focusin","onFocus");$i("focusout","onBlur");$i(mk,"onTransitionEnd");rc("onMouseEnter",["mouseout","mouseover"]);rc("onMouseLeave",["mouseout","mouseover"]);rc("onPointerEnter",["pointerout","pointerover"]);rc("onPointerLeave",["pointerout","pointerover"]);Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jc));function e1(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,cE(s,t,void 0,e),e.currentTarget=null}function pk(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;e1(n,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;e1(n,o,d),i=c}}}if(mh)throw e=Nx,mh=!1,Nx=null,e}function Ft(e,t){var r=t[Px];r===void 0&&(r=t[Px]=new Set);var s=e+"__bubble";r.has(s)||(gk(t,e,2,!1),r.add(s))}function Nm(e,t,r){var s=0;t&&(s|=4),gk(r,e,s,t)}var i0="_reactListening"+Math.random().toString(36).slice(2);function Kd(e){if(!e[i0]){e[i0]=!0,jN.forEach(function(r){r!=="selectionchange"&&(uC.has(r)||Nm(r,!1,e),Nm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[i0]||(t[i0]=!0,Nm("selectionchange",!1,t))}}function gk(e,t,r,s){switch(ek(t)){case 1:var n=SE;break;case 4:n=TE;break;default:n=yg}r=n.bind(null,t,r,e),n=void 0,!wx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function km(e,t,r,s,n){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=rl(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}zN(function(){var d=i,u=mg(r),h=[];e:{var f=xk.get(e);if(f!==void 0){var x=bg,p=e;switch(e){case"keypress":if(H0(r)===0)break e;case"keydown":case"keyup":x=$E;break;case"focusin":p="focus",x=pm;break;case"focusout":p="blur",x=pm;break;case"beforeblur":case"afterblur":x=pm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Uv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=CE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=HE;break;case uk:case hk:case fk:x=PE;break;case mk:x=GE;break;case"scroll":x=_E;break;case"wheel":x=YE;break;case"copy":case"cut":case"paste":x=FE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Hv}var m=(t&4)!==0,y=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var v=d,b;v!==null;){b=v;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,g!==null&&(S=Bd(v,g),S!=null&&m.push(Gd(v,S,b)))),y)break;v=v.return}0<m.length&&(f=new x(f,p,null,r,u),h.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==vx&&(p=r.relatedTarget||r.fromElement)&&(rl(p)||p[_n]))break e;if((x||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,x?(p=r.relatedTarget||r.toElement,x=d,p=p?rl(p):null,p!==null&&(y=Vl(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(x=null,p=d),x!==p)){if(m=Uv,S="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Hv,S="onPointerLeave",g="onPointerEnter",v="pointer"),y=x==null?f:yo(x),b=p==null?f:yo(p),f=new m(S,v+"leave",x,r,u),f.target=y,f.relatedTarget=b,S=null,rl(u)===d&&(m=new m(g,v+"enter",p,r,u),m.target=b,m.relatedTarget=y,S=m),y=S,x&&p)t:{for(m=x,g=p,v=0,b=m;b;b=ro(b))v++;for(b=0,S=g;S;S=ro(S))b++;for(;0<v-b;)m=ro(m),v--;for(;0<b-v;)g=ro(g),b--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=ro(m),g=ro(g)}m=null}else m=null;x!==null&&t1(h,f,x,m,!1),p!==null&&y!==null&&t1(h,y,p,m,!0)}}e:{if(f=d?yo(d):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var D=tC;else if(Wv(f))if(ik)D=nC;else{D=sC;var N=rC}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=aC);if(D&&(D=D(e,d))){nk(h,D,r,u);break e}N&&N(e,f,d),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&mx(f,"number",f.value)}switch(N=d?yo(d):window,e){case"focusin":(Wv(N)||N.contentEditable==="true")&&(po=N,Tx=d,fd=null);break;case"focusout":fd=Tx=po=null;break;case"mousedown":_x=!0;break;case"contextmenu":case"mouseup":case"dragend":_x=!1,Zv(h,r,u);break;case"selectionchange":if(oC)break;case"keydown":case"keyup":Zv(h,r,u)}var E;if(Ng)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else xo?sk(e,r)&&(w="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(rk&&r.locale!=="ko"&&(xo||w!=="onCompositionStart"?w==="onCompositionEnd"&&xo&&(E=tk()):(di=u,vg="value"in di?di.value:di.textContent,xo=!0)),N=vh(d,w),0<N.length&&(w=new Vv(w,e,null,r,u),h.push({event:w,listeners:N}),E?w.data=E:(E=ak(r),E!==null&&(w.data=E)))),(E=XE?QE(e,r):ZE(e,r))&&(d=vh(d,"onBeforeInput"),0<d.length&&(u=new Vv("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=E))}pk(h,t)})}function Gd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vh(e,t){for(var r=t+"Capture",s=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Bd(e,r),i!=null&&s.unshift(Gd(e,i,n)),i=Bd(e,t),i!=null&&s.push(Gd(e,i,n))),e=e.return}return s}function ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function t1(e,t,r,s,n){for(var i=t._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,n?(c=Bd(r,i),c!=null&&l.unshift(Gd(r,c,o))):n||(c=Bd(r,i),c!=null&&l.push(Gd(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var hC=/\r\n?/g,fC=/\u0000|\uFFFD/g;function r1(e){return(typeof e=="string"?e:""+e).replace(hC,`
`).replace(fC,"")}function l0(e,t,r){if(t=r1(t),r1(e)!==t&&r)throw Error(Se(425))}function bh(){}var Ex=null,Cx=null;function Dx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ax=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,s1=typeof Promise=="function"?Promise:void 0,xC=typeof queueMicrotask=="function"?queueMicrotask:typeof s1<"u"?function(e){return s1.resolve(null).then(e).catch(pC)}:Ax;function pC(e){setTimeout(function(){throw e})}function jm(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),Ud(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);Ud(t)}function bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function a1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var kc=Math.random().toString(36).slice(2),Ua="__reactFiber$"+kc,Wd="__reactProps$"+kc,_n="__reactContainer$"+kc,Px="__reactEvents$"+kc,gC="__reactListeners$"+kc,yC="__reactHandles$"+kc;function rl(e){var t=e[Ua];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_n]||r[Ua]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=a1(e);e!==null;){if(r=e[Ua])return r;e=a1(e)}return t}e=r,r=e.parentNode}return null}function Pu(e){return e=e[Ua]||e[_n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function _f(e){return e[Wd]||null}var Rx=[],vo=-1;function Ui(e){return{current:e}}function It(e){0>vo||(e.current=Rx[vo],Rx[vo]=null,vo--)}function Pt(e,t){vo++,Rx[vo]=e.current,e.current=t}var Fi={},qr=Ui(Fi),Ns=Ui(!1),El=Fi;function sc(e,t){var r=e.type.contextTypes;if(!r)return Fi;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function ks(e){return e=e.childContextTypes,e!=null}function wh(){It(Ns),It(qr)}function n1(e,t,r){if(qr.current!==Fi)throw Error(Se(168));Pt(qr,t),Pt(Ns,r)}function yk(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(Se(108,rE(e)||"Unknown",n));return Kt({},r,s)}function Nh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fi,El=qr.current,Pt(qr,e),Pt(Ns,Ns.current),!0}function i1(e,t,r){var s=e.stateNode;if(!s)throw Error(Se(169));r?(e=yk(e,t,El),s.__reactInternalMemoizedMergedChildContext=e,It(Ns),It(qr),Pt(qr,e)):It(Ns),Pt(Ns,r)}var fn=null,Ef=!1,Sm=!1;function vk(e){fn===null?fn=[e]:fn.push(e)}function vC(e){Ef=!0,vk(e)}function Vi(){if(!Sm&&fn!==null){Sm=!0;var e=0,t=Et;try{var r=fn;for(Et=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}fn=null,Ef=!1}catch(n){throw fn!==null&&(fn=fn.slice(e+1)),HN(xg,Vi),n}finally{Et=t,Sm=!1}}return null}var bo=[],wo=0,kh=null,jh=0,qs=[],Xs=0,Cl=null,yn=1,vn="";function qi(e,t){bo[wo++]=jh,bo[wo++]=kh,kh=e,jh=t}function bk(e,t,r){qs[Xs++]=yn,qs[Xs++]=vn,qs[Xs++]=Cl,Cl=e;var s=yn;e=vn;var n=32-wa(s)-1;s&=~(1<<n),r+=1;var i=32-wa(t)+n;if(30<i){var l=n-n%5;i=(s&(1<<l)-1).toString(32),s>>=l,n-=l,yn=1<<32-wa(t)+n|r<<n|s,vn=i+e}else yn=1<<i|r<<n|s,vn=e}function jg(e){e.return!==null&&(qi(e,1),bk(e,1,0))}function Sg(e){for(;e===kh;)kh=bo[--wo],bo[wo]=null,jh=bo[--wo],bo[wo]=null;for(;e===Cl;)Cl=qs[--Xs],qs[Xs]=null,vn=qs[--Xs],qs[Xs]=null,yn=qs[--Xs],qs[Xs]=null}var Is=null,Fs=null,$t=!1,ma=null;function wk(e,t){var r=Qs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function l1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Is=e,Fs=bi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Is=e,Fs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Cl!==null?{id:yn,overflow:vn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Is=e,Fs=null,!0):!1;default:return!1}}function Fx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ix(e){if($t){var t=Fs;if(t){var r=t;if(!l1(e,t)){if(Fx(e))throw Error(Se(418));t=bi(r.nextSibling);var s=Is;t&&l1(e,t)?wk(s,r):(e.flags=e.flags&-4097|2,$t=!1,Is=e)}}else{if(Fx(e))throw Error(Se(418));e.flags=e.flags&-4097|2,$t=!1,Is=e}}}function o1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Is=e}function o0(e){if(e!==Is)return!1;if(!$t)return o1(e),$t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dx(e.type,e.memoizedProps)),t&&(t=Fs)){if(Fx(e))throw Nk(),Error(Se(418));for(;t;)wk(e,t),t=bi(t.nextSibling)}if(o1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Fs=bi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Fs=null}}else Fs=Is?bi(e.stateNode.nextSibling):null;return!0}function Nk(){for(var e=Fs;e;)e=bi(e.nextSibling)}function ac(){Fs=Is=null,$t=!1}function Tg(e){ma===null?ma=[e]:ma.push(e)}var bC=Fn.ReactCurrentBatchConfig;function zc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Se(309));var s=r.stateNode}if(!s)throw Error(Se(147,e));var n=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Se(284));if(!r._owner)throw Error(Se(290,e))}return e}function c0(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function c1(e){var t=e._init;return t(e._payload)}function kk(e){function t(g,v){if(e){var b=g.deletions;b===null?(g.deletions=[v],g.flags|=16):b.push(v)}}function r(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function s(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function n(g,v){return g=ji(g,v),g.index=0,g.sibling=null,g}function i(g,v,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags|=2,v):b):(g.flags|=2,v)):(g.flags|=1048576,v)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,v,b,S){return v===null||v.tag!==6?(v=Pm(b,g.mode,S),v.return=g,v):(v=n(v,b),v.return=g,v)}function c(g,v,b,S){var D=b.type;return D===mo?u(g,v,b.props.children,S,b.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Gn&&c1(D)===v.type)?(S=n(v,b.props),S.ref=zc(g,v,b),S.return=g,S):(S=Q0(b.type,b.key,b.props,null,g.mode,S),S.ref=zc(g,v,b),S.return=g,S)}function d(g,v,b,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Rm(b,g.mode,S),v.return=g,v):(v=n(v,b.children||[]),v.return=g,v)}function u(g,v,b,S,D){return v===null||v.tag!==7?(v=wl(b,g.mode,S,D),v.return=g,v):(v=n(v,b),v.return=g,v)}function h(g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Pm(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zu:return b=Q0(v.type,v.key,v.props,null,g.mode,b),b.ref=zc(g,null,v),b.return=g,b;case fo:return v=Rm(v,g.mode,b),v.return=g,v;case Gn:var S=v._init;return h(g,S(v._payload),b)}if(Qc(v)||Ic(v))return v=wl(v,g.mode,b,null),v.return=g,v;c0(g,v)}return null}function f(g,v,b,S){var D=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:o(g,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:return b.key===D?c(g,v,b,S):null;case fo:return b.key===D?d(g,v,b,S):null;case Gn:return D=b._init,f(g,v,D(b._payload),S)}if(Qc(b)||Ic(b))return D!==null?null:u(g,v,b,S,null);c0(g,b)}return null}function x(g,v,b,S,D){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(b)||null,o(v,g,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zu:return g=g.get(S.key===null?b:S.key)||null,c(v,g,S,D);case fo:return g=g.get(S.key===null?b:S.key)||null,d(v,g,S,D);case Gn:var N=S._init;return x(g,v,b,N(S._payload),D)}if(Qc(S)||Ic(S))return g=g.get(b)||null,u(v,g,S,D,null);c0(v,S)}return null}function p(g,v,b,S){for(var D=null,N=null,E=v,w=v=0,_=null;E!==null&&w<b.length;w++){E.index>w?(_=E,E=null):_=E.sibling;var C=f(g,E,b[w],S);if(C===null){E===null&&(E=_);break}e&&E&&C.alternate===null&&t(g,E),v=i(C,v,w),N===null?D=C:N.sibling=C,N=C,E=_}if(w===b.length)return r(g,E),$t&&qi(g,w),D;if(E===null){for(;w<b.length;w++)E=h(g,b[w],S),E!==null&&(v=i(E,v,w),N===null?D=E:N.sibling=E,N=E);return $t&&qi(g,w),D}for(E=s(g,E);w<b.length;w++)_=x(E,g,w,b[w],S),_!==null&&(e&&_.alternate!==null&&E.delete(_.key===null?w:_.key),v=i(_,v,w),N===null?D=_:N.sibling=_,N=_);return e&&E.forEach(function(T){return t(g,T)}),$t&&qi(g,w),D}function m(g,v,b,S){var D=Ic(b);if(typeof D!="function")throw Error(Se(150));if(b=D.call(b),b==null)throw Error(Se(151));for(var N=D=null,E=v,w=v=0,_=null,C=b.next();E!==null&&!C.done;w++,C=b.next()){E.index>w?(_=E,E=null):_=E.sibling;var T=f(g,E,C.value,S);if(T===null){E===null&&(E=_);break}e&&E&&T.alternate===null&&t(g,E),v=i(T,v,w),N===null?D=T:N.sibling=T,N=T,E=_}if(C.done)return r(g,E),$t&&qi(g,w),D;if(E===null){for(;!C.done;w++,C=b.next())C=h(g,C.value,S),C!==null&&(v=i(C,v,w),N===null?D=C:N.sibling=C,N=C);return $t&&qi(g,w),D}for(E=s(g,E);!C.done;w++,C=b.next())C=x(E,g,w,C.value,S),C!==null&&(e&&C.alternate!==null&&E.delete(C.key===null?w:C.key),v=i(C,v,w),N===null?D=C:N.sibling=C,N=C);return e&&E.forEach(function(j){return t(g,j)}),$t&&qi(g,w),D}function y(g,v,b,S){if(typeof b=="object"&&b!==null&&b.type===mo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:e:{for(var D=b.key,N=v;N!==null;){if(N.key===D){if(D=b.type,D===mo){if(N.tag===7){r(g,N.sibling),v=n(N,b.props.children),v.return=g,g=v;break e}}else if(N.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Gn&&c1(D)===N.type){r(g,N.sibling),v=n(N,b.props),v.ref=zc(g,N,b),v.return=g,g=v;break e}r(g,N);break}else t(g,N);N=N.sibling}b.type===mo?(v=wl(b.props.children,g.mode,S,b.key),v.return=g,g=v):(S=Q0(b.type,b.key,b.props,null,g.mode,S),S.ref=zc(g,v,b),S.return=g,g=S)}return l(g);case fo:e:{for(N=b.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(g,v.sibling),v=n(v,b.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else t(g,v);v=v.sibling}v=Rm(b,g.mode,S),v.return=g,g=v}return l(g);case Gn:return N=b._init,y(g,v,N(b._payload),S)}if(Qc(b))return p(g,v,b,S);if(Ic(b))return m(g,v,b,S);c0(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(g,v.sibling),v=n(v,b),v.return=g,g=v):(r(g,v),v=Pm(b,g.mode,S),v.return=g,g=v),l(g)):r(g,v)}return y}var nc=kk(!0),jk=kk(!1),Sh=Ui(null),Th=null,No=null,_g=null;function Eg(){_g=No=Th=null}function Cg(e){var t=Sh.current;It(Sh),e._currentValue=t}function Mx(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Ao(e,t){Th=e,_g=No=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ws=!0),e.firstContext=null)}function ta(e){var t=e._currentValue;if(_g!==e)if(e={context:e,memoizedValue:t,next:null},No===null){if(Th===null)throw Error(Se(308));No=e,Th.dependencies={lanes:0,firstContext:e}}else No=No.next=e;return t}var sl=null;function Dg(e){sl===null?sl=[e]:sl.push(e)}function Sk(e,t,r,s){var n=t.interleaved;return n===null?(r.next=r,Dg(t)):(r.next=n.next,n.next=r),t.interleaved=r,En(e,s)}function En(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Wn=!1;function Ag(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wi(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,gt&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,En(e,r)}return n=s.interleaved,n===null?(t.next=t,Dg(s)):(t.next=n.next,n.next=t),s.interleaved=t,En(e,r)}function K0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,pg(e,r)}}function d1(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function _h(e,t,r,s){var n=e.updateQueue;Wn=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,x=o.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(f=t,x=r,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(x,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(x,h,f):p,f==null)break e;h=Kt({},h,f);break e;case 2:Wn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else x={eventTime:x,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=x,c=h):u=u.next=x,l|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);Al|=l,e.lanes=l,e.memoizedState=h}}function u1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(Se(191,n));n.call(s)}}}var Ru={},Xa=Ui(Ru),Yd=Ui(Ru),qd=Ui(Ru);function al(e){if(e===Ru)throw Error(Se(174));return e}function Pg(e,t){switch(Pt(qd,t),Pt(Yd,e),Pt(Xa,Ru),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:px(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=px(t,e)}It(Xa),Pt(Xa,t)}function ic(){It(Xa),It(Yd),It(qd)}function _k(e){al(qd.current);var t=al(Xa.current),r=px(t,e.type);t!==r&&(Pt(Yd,e),Pt(Xa,r))}function Rg(e){Yd.current===e&&(It(Xa),It(Yd))}var Vt=Ui(0);function Eh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tm=[];function Fg(){for(var e=0;e<Tm.length;e++)Tm[e]._workInProgressVersionPrimary=null;Tm.length=0}var G0=Fn.ReactCurrentDispatcher,_m=Fn.ReactCurrentBatchConfig,Dl=0,Ht=null,mr=null,Tr=null,Ch=!1,md=!1,Xd=0,wC=0;function Br(){throw Error(Se(321))}function Ig(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ta(e[r],t[r]))return!1;return!0}function Mg(e,t,r,s,n,i){if(Dl=i,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G0.current=e===null||e.memoizedState===null?SC:TC,e=r(s,n),md){i=0;do{if(md=!1,Xd=0,25<=i)throw Error(Se(301));i+=1,Tr=mr=null,t.updateQueue=null,G0.current=_C,e=r(s,n)}while(md)}if(G0.current=Dh,t=mr!==null&&mr.next!==null,Dl=0,Tr=mr=Ht=null,Ch=!1,t)throw Error(Se(300));return e}function Og(){var e=Xd!==0;return Xd=0,e}function Oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Ht.memoizedState=Tr=e:Tr=Tr.next=e,Tr}function ra(){if(mr===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=mr.next;var t=Tr===null?Ht.memoizedState:Tr.next;if(t!==null)Tr=t,mr=e;else{if(e===null)throw Error(Se(310));mr=e,e={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Tr===null?Ht.memoizedState=Tr=e:Tr=Tr.next=e}return Tr}function Qd(e,t){return typeof t=="function"?t(e):t}function Em(e){var t=ra(),r=t.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=e;var s=mr,n=s.baseQueue,i=r.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}s.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Dl&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=s):c=c.next=h,Ht.lanes|=u,Al|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,Ta(s,t.memoizedState)||(ws=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do i=n.lane,Ht.lanes|=i,Al|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cm(e){var t=ra(),r=t.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do i=e(i,l.action),l=l.next;while(l!==n);Ta(i,t.memoizedState)||(ws=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function Ek(){}function Ck(e,t){var r=Ht,s=ra(),n=t(),i=!Ta(s.memoizedState,n);if(i&&(s.memoizedState=n,ws=!0),s=s.queue,Lg(Pk.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||Tr!==null&&Tr.memoizedState.tag&1){if(r.flags|=2048,Zd(9,Ak.bind(null,r,s,n,t),void 0,null),_r===null)throw Error(Se(349));Dl&30||Dk(r,t,n)}return n}function Dk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ak(e,t,r,s){t.value=r,t.getSnapshot=s,Rk(t)&&Fk(e)}function Pk(e,t,r){return r(function(){Rk(t)&&Fk(e)})}function Rk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ta(e,r)}catch{return!0}}function Fk(e){var t=En(e,1);t!==null&&Na(t,e,1,-1)}function h1(e){var t=Oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:e},t.queue=e,e=e.dispatch=jC.bind(null,Ht,e),[t.memoizedState,e]}function Zd(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Ik(){return ra().memoizedState}function W0(e,t,r,s){var n=Oa();Ht.flags|=e,n.memoizedState=Zd(1|t,r,void 0,s===void 0?null:s)}function Cf(e,t,r,s){var n=ra();s=s===void 0?null:s;var i=void 0;if(mr!==null){var l=mr.memoizedState;if(i=l.destroy,s!==null&&Ig(s,l.deps)){n.memoizedState=Zd(t,r,i,s);return}}Ht.flags|=e,n.memoizedState=Zd(1|t,r,i,s)}function f1(e,t){return W0(8390656,8,e,t)}function Lg(e,t){return Cf(2048,8,e,t)}function Mk(e,t){return Cf(4,2,e,t)}function Ok(e,t){return Cf(4,4,e,t)}function Lk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bk(e,t,r){return r=r!=null?r.concat([e]):null,Cf(4,4,Lk.bind(null,t,e),r)}function Bg(){}function zk(e,t){var r=ra();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ig(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function $k(e,t){var r=ra();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ig(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Uk(e,t,r){return Dl&21?(Ta(r,t)||(r=WN(),Ht.lanes|=r,Al|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=r)}function NC(e,t){var r=Et;Et=r!==0&&4>r?r:4,e(!0);var s=_m.transition;_m.transition={};try{e(!1),t()}finally{Et=r,_m.transition=s}}function Vk(){return ra().memoizedState}function kC(e,t,r){var s=ki(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Hk(e))Kk(t,r);else if(r=Sk(e,t,r,s),r!==null){var n=ls();Na(r,e,s,n),Gk(r,t,s)}}function jC(e,t,r){var s=ki(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hk(e))Kk(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(n.hasEagerState=!0,n.eagerState=o,Ta(o,l)){var c=t.interleaved;c===null?(n.next=n,Dg(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=Sk(e,t,n,s),r!==null&&(n=ls(),Na(r,e,s,n),Gk(r,t,s))}}function Hk(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function Kk(e,t){md=Ch=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gk(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,pg(e,r)}}var Dh={readContext:ta,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},SC={readContext:ta,useCallback:function(e,t){return Oa().memoizedState=[e,t===void 0?null:t],e},useContext:ta,useEffect:f1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,W0(4194308,4,Lk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return W0(4194308,4,e,t)},useInsertionEffect:function(e,t){return W0(4,2,e,t)},useMemo:function(e,t){var r=Oa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Oa();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=kC.bind(null,Ht,e),[s.memoizedState,e]},useRef:function(e){var t=Oa();return e={current:e},t.memoizedState=e},useState:h1,useDebugValue:Bg,useDeferredValue:function(e){return Oa().memoizedState=e},useTransition:function(){var e=h1(!1),t=e[0];return e=NC.bind(null,e[1]),Oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ht,n=Oa();if($t){if(r===void 0)throw Error(Se(407));r=r()}else{if(r=t(),_r===null)throw Error(Se(349));Dl&30||Dk(s,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,f1(Pk.bind(null,s,i,e),[e]),s.flags|=2048,Zd(9,Ak.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Oa(),t=_r.identifierPrefix;if($t){var r=vn,s=yn;r=(s&~(1<<32-wa(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},TC={readContext:ta,useCallback:zk,useContext:ta,useEffect:Lg,useImperativeHandle:Bk,useInsertionEffect:Mk,useLayoutEffect:Ok,useMemo:$k,useReducer:Em,useRef:Ik,useState:function(){return Em(Qd)},useDebugValue:Bg,useDeferredValue:function(e){var t=ra();return Uk(t,mr.memoizedState,e)},useTransition:function(){var e=Em(Qd)[0],t=ra().memoizedState;return[e,t]},useMutableSource:Ek,useSyncExternalStore:Ck,useId:Vk,unstable_isNewReconciler:!1},_C={readContext:ta,useCallback:zk,useContext:ta,useEffect:Lg,useImperativeHandle:Bk,useInsertionEffect:Mk,useLayoutEffect:Ok,useMemo:$k,useReducer:Cm,useRef:Ik,useState:function(){return Cm(Qd)},useDebugValue:Bg,useDeferredValue:function(e){var t=ra();return mr===null?t.memoizedState=e:Uk(t,mr.memoizedState,e)},useTransition:function(){var e=Cm(Qd)[0],t=ra().memoizedState;return[e,t]},useMutableSource:Ek,useSyncExternalStore:Ck,useId:Vk,unstable_isNewReconciler:!1};function da(e,t){if(e&&e.defaultProps){t=Kt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ox(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Kt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Df={isMounted:function(e){return(e=e._reactInternals)?Vl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ls(),n=ki(e),i=wn(s,n);i.payload=t,r!=null&&(i.callback=r),t=wi(e,i,n),t!==null&&(Na(t,e,n,s),K0(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ls(),n=ki(e),i=wn(s,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=wi(e,i,n),t!==null&&(Na(t,e,n,s),K0(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ls(),s=ki(e),n=wn(r,s);n.tag=2,t!=null&&(n.callback=t),t=wi(e,n,s),t!==null&&(Na(t,e,s,r),K0(t,e,s))}};function m1(e,t,r,s,n,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!Hd(r,s)||!Hd(n,i):!0}function Wk(e,t,r){var s=!1,n=Fi,i=t.contextType;return typeof i=="object"&&i!==null?i=ta(i):(n=ks(t)?El:qr.current,s=t.contextTypes,i=(s=s!=null)?sc(e,n):Fi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Df,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function x1(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Df.enqueueReplaceState(t,t.state,null)}function Lx(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Ag(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=ta(i):(i=ks(t)?El:qr.current,n.context=sc(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ox(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Df.enqueueReplaceState(n,n.state,null),_h(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function lc(e,t){try{var r="",s=t;do r+=tE(s),s=s.return;while(s);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function Dm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Bx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var EC=typeof WeakMap=="function"?WeakMap:Map;function Yk(e,t,r){r=wn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Ph||(Ph=!0,qx=s),Bx(e,t)},r}function qk(e,t,r){r=wn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){Bx(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Bx(e,t),typeof s!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function p1(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new EC;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=UC.bind(null,e,t,r),t.then(e,e))}function g1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function y1(e,t,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wn(-1,1),t.tag=2,wi(r,t,1))),r.lanes|=1),e)}var CC=Fn.ReactCurrentOwner,ws=!1;function rs(e,t,r,s){t.child=e===null?jk(t,null,r,s):nc(t,e.child,r,s)}function v1(e,t,r,s,n){r=r.render;var i=t.ref;return Ao(t,n),s=Mg(e,t,r,s,i,n),r=Og(),e!==null&&!ws?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Cn(e,t,n)):($t&&r&&jg(t),t.flags|=1,rs(e,t,s,n),t.child)}function b1(e,t,r,s,n){if(e===null){var i=r.type;return typeof i=="function"&&!Wg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Xk(e,t,i,s,n)):(e=Q0(r.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:Hd,r(l,s)&&e.ref===t.ref)return Cn(e,t,n)}return t.flags|=1,e=ji(i,s),e.ref=t.ref,e.return=t,t.child=e}function Xk(e,t,r,s,n){if(e!==null){var i=e.memoizedProps;if(Hd(i,s)&&e.ref===t.ref)if(ws=!1,t.pendingProps=s=i,(e.lanes&n)!==0)e.flags&131072&&(ws=!0);else return t.lanes=e.lanes,Cn(e,t,n)}return zx(e,t,r,s,n)}function Qk(e,t,r){var s=t.pendingProps,n=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(jo,Cs),Cs|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pt(jo,Cs),Cs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Pt(jo,Cs),Cs|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Pt(jo,Cs),Cs|=s;return rs(e,t,n,r),t.child}function Zk(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zx(e,t,r,s,n){var i=ks(r)?El:qr.current;return i=sc(t,i),Ao(t,n),r=Mg(e,t,r,s,i,n),s=Og(),e!==null&&!ws?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Cn(e,t,n)):($t&&s&&jg(t),t.flags|=1,rs(e,t,r,n),t.child)}function w1(e,t,r,s,n){if(ks(r)){var i=!0;Nh(t)}else i=!1;if(Ao(t,n),t.stateNode===null)Y0(e,t),Wk(t,r,s),Lx(t,r,s,n),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=ta(d):(d=ks(r)?El:qr.current,d=sc(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&x1(t,l,s,d),Wn=!1;var f=t.memoizedState;l.state=f,_h(t,s,l,n),c=t.memoizedState,o!==s||f!==c||Ns.current||Wn?(typeof u=="function"&&(Ox(t,r,u,s),c=t.memoizedState),(o=Wn||m1(t,r,o,s,f,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Tk(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:da(t.type,o),l.props=d,h=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=ta(c):(c=ks(r)?El:qr.current,c=sc(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&x1(t,l,s,c),Wn=!1,f=t.memoizedState,l.state=f,_h(t,s,l,n);var p=t.memoizedState;o!==h||f!==p||Ns.current||Wn?(typeof x=="function"&&(Ox(t,r,x,s),p=t.memoizedState),(d=Wn||m1(t,r,d,s,f,p,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,p,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,p,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),l.props=s,l.state=p,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return $x(e,t,r,s,i,n)}function $x(e,t,r,s,n,i){Zk(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return n&&i1(t,r,!1),Cn(e,t,i);s=t.stateNode,CC.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=nc(t,e.child,null,i),t.child=nc(t,null,o,i)):rs(e,t,o,i),t.memoizedState=s.state,n&&i1(t,r,!0),t.child}function Jk(e){var t=e.stateNode;t.pendingContext?n1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&n1(e,t.context,!1),Pg(e,t.containerInfo)}function N1(e,t,r,s,n){return ac(),Tg(n),t.flags|=256,rs(e,t,r,s),t.child}var Ux={dehydrated:null,treeContext:null,retryLane:0};function Vx(e){return{baseLanes:e,cachePool:null,transitions:null}}function ej(e,t,r){var s=t.pendingProps,n=Vt.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Pt(Vt,n&1),e===null)return Ix(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Rf(l,s,0,null),e=wl(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Vx(r),t.memoizedState=Ux,e):zg(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return DC(e,t,l,s,o,n,r);if(i){i=s.fallback,l=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ji(n,c),s.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=ji(o,i):(i=wl(i,l,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?Vx(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Ux,s}return i=e.child,e=i.sibling,s=ji(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function zg(e,t){return t=Rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function d0(e,t,r,s){return s!==null&&Tg(s),nc(t,e.child,null,r),e=zg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function DC(e,t,r,s,n,i,l){if(r)return t.flags&256?(t.flags&=-257,s=Dm(Error(Se(422))),d0(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Rf({mode:"visible",children:s.children},n,0,null),i=wl(i,n,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&nc(t,e.child,null,l),t.child.memoizedState=Vx(l),t.memoizedState=Ux,i);if(!(t.mode&1))return d0(e,t,l,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(Se(419)),s=Dm(i,s,void 0),d0(e,t,l,s)}if(o=(l&e.childLanes)!==0,ws||o){if(s=_r,s!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,En(e,n),Na(s,e,n,-1))}return Gg(),s=Dm(Error(Se(421))),d0(e,t,l,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=VC.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,Fs=bi(n.nextSibling),Is=t,$t=!0,ma=null,e!==null&&(qs[Xs++]=yn,qs[Xs++]=vn,qs[Xs++]=Cl,yn=e.id,vn=e.overflow,Cl=t),t=zg(t,s.children),t.flags|=4096,t)}function k1(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Mx(e.return,t,r)}function Am(e,t,r,s,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=n)}function tj(e,t,r){var s=t.pendingProps,n=s.revealOrder,i=s.tail;if(rs(e,t,s.children,r),s=Vt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&k1(e,r,t);else if(e.tag===19)k1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Pt(Vt,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Eh(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Am(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Eh(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Am(t,!0,r,null,i);break;case"together":Am(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Y0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Al|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,r=ji(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ji(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function AC(e,t,r){switch(t.tag){case 3:Jk(t),ac();break;case 5:_k(t);break;case 1:ks(t.type)&&Nh(t);break;case 4:Pg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Pt(Sh,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Pt(Vt,Vt.current&1),t.flags|=128,null):r&t.child.childLanes?ej(e,t,r):(Pt(Vt,Vt.current&1),e=Cn(e,t,r),e!==null?e.sibling:null);Pt(Vt,Vt.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return tj(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Pt(Vt,Vt.current),s)break;return null;case 22:case 23:return t.lanes=0,Qk(e,t,r)}return Cn(e,t,r)}var rj,Hx,sj,aj;rj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Hx=function(){};sj=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,al(Xa.current);var i=null;switch(r){case"input":n=hx(e,n),s=hx(e,s),i=[];break;case"select":n=Kt({},n,{value:void 0}),s=Kt({},s,{value:void 0}),i=[];break;case"textarea":n=xx(e,n),s=xx(e,s),i=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=bh)}gx(r,s);var l;r=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Od.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Od.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ft("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};aj=function(e,t,r,s){r!==s&&(t.flags|=4)};function $c(e,t){if(!$t)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function zr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function PC(e,t,r){var s=t.pendingProps;switch(Sg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(t),null;case 1:return ks(t.type)&&wh(),zr(t),null;case 3:return s=t.stateNode,ic(),It(Ns),It(qr),Fg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(o0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ma!==null&&(Zx(ma),ma=null))),Hx(e,t),zr(t),null;case 5:Rg(t);var n=al(qd.current);if(r=t.type,e!==null&&t.stateNode!=null)sj(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Se(166));return zr(t),null}if(e=al(Xa.current),o0(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Ua]=t,s[Wd]=i,e=(t.mode&1)!==0,r){case"dialog":Ft("cancel",s),Ft("close",s);break;case"iframe":case"object":case"embed":Ft("load",s);break;case"video":case"audio":for(n=0;n<Jc.length;n++)Ft(Jc[n],s);break;case"source":Ft("error",s);break;case"img":case"image":case"link":Ft("error",s),Ft("load",s);break;case"details":Ft("toggle",s);break;case"input":Pv(s,i),Ft("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ft("invalid",s);break;case"textarea":Fv(s,i),Ft("invalid",s)}gx(r,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&l0(s.textContent,o,e),n=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&l0(s.textContent,o,e),n=["children",""+o]):Od.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ft("scroll",s)}switch(r){case"input":Ju(s),Rv(s,i,!0);break;case"textarea":Ju(s),Iv(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=bh)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=PN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[Ua]=t,e[Wd]=s,rj(e,t,!1,!1),t.stateNode=e;e:{switch(l=yx(r,s),r){case"dialog":Ft("cancel",e),Ft("close",e),n=s;break;case"iframe":case"object":case"embed":Ft("load",e),n=s;break;case"video":case"audio":for(n=0;n<Jc.length;n++)Ft(Jc[n],e);n=s;break;case"source":Ft("error",e),n=s;break;case"img":case"image":case"link":Ft("error",e),Ft("load",e),n=s;break;case"details":Ft("toggle",e),n=s;break;case"input":Pv(e,s),n=hx(e,s),Ft("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=Kt({},s,{value:void 0}),Ft("invalid",e);break;case"textarea":Fv(e,s),n=xx(e,s),Ft("invalid",e);break;default:n=s}gx(r,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?IN(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&RN(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ld(e,c):typeof c=="number"&&Ld(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Od.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ft("scroll",e):c!=null&&dg(e,i,c,l))}switch(r){case"input":Ju(e),Rv(e,s,!1);break;case"textarea":Ju(e),Iv(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ri(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?_o(e,!!s.multiple,i,!1):s.defaultValue!=null&&_o(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=bh)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zr(t),null;case 6:if(e&&t.stateNode!=null)aj(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Se(166));if(r=al(qd.current),al(Xa.current),o0(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ua]=t,(i=s.nodeValue!==r)&&(e=Is,e!==null))switch(e.tag){case 3:l0(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&l0(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ua]=t,t.stateNode=s}return zr(t),null;case 13:if(It(Vt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($t&&Fs!==null&&t.mode&1&&!(t.flags&128))Nk(),ac(),t.flags|=98560,i=!1;else if(i=o0(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Se(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Se(317));i[Ua]=t}else ac(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zr(t),i=!1}else ma!==null&&(Zx(ma),ma=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Vt.current&1?pr===0&&(pr=3):Gg())),t.updateQueue!==null&&(t.flags|=4),zr(t),null);case 4:return ic(),Hx(e,t),e===null&&Kd(t.stateNode.containerInfo),zr(t),null;case 10:return Cg(t.type._context),zr(t),null;case 17:return ks(t.type)&&wh(),zr(t),null;case 19:if(It(Vt),i=t.memoizedState,i===null)return zr(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)$c(i,!1);else{if(pr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Eh(e),l!==null){for(t.flags|=128,$c(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pt(Vt,Vt.current&1|2),t.child}e=e.sibling}i.tail!==null&&tr()>oc&&(t.flags|=128,s=!0,$c(i,!1),t.lanes=4194304)}else{if(!s)if(e=Eh(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$c(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$t)return zr(t),null}else 2*tr()-i.renderingStartTime>oc&&r!==1073741824&&(t.flags|=128,s=!0,$c(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=tr(),t.sibling=null,r=Vt.current,Pt(Vt,s?r&1|2:r&1),t):(zr(t),null);case 22:case 23:return Kg(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Cs&1073741824&&(zr(t),t.subtreeFlags&6&&(t.flags|=8192)):zr(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function RC(e,t){switch(Sg(t),t.tag){case 1:return ks(t.type)&&wh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ic(),It(Ns),It(qr),Fg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rg(t),null;case 13:if(It(Vt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));ac()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return It(Vt),null;case 4:return ic(),null;case 10:return Cg(t.type._context),null;case 22:case 23:return Kg(),null;case 24:return null;default:return null}}var u0=!1,Vr=!1,FC=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function ko(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Yt(e,t,s)}else r.current=null}function Kx(e,t,r){try{r()}catch(s){Yt(e,t,s)}}var j1=!1;function IC(e,t){if(Ex=gh,e=ck(),kg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var x;h!==r||n!==0&&h.nodeType!==3||(o=l+n),h!==i||s!==0&&h.nodeType!==3||(c=l+s),h.nodeType===3&&(l+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===e)break t;if(f===r&&++d===n&&(o=l),f===i&&++u===s&&(c=l),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Cx={focusedElem:e,selectionRange:r},gh=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:da(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(S){Yt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return p=j1,j1=!1,p}function xd(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&Kx(t,r,i)}n=n.next}while(n!==s)}}function Af(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Gx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nj(e){var t=e.alternate;t!==null&&(e.alternate=null,nj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ua],delete t[Wd],delete t[Px],delete t[gC],delete t[yC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ij(e){return e.tag===5||e.tag===3||e.tag===4}function S1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ij(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=bh));else if(s!==4&&(e=e.child,e!==null))for(Wx(e,t,r),e=e.sibling;e!==null;)Wx(e,t,r),e=e.sibling}function Yx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Yx(e,t,r),e=e.sibling;e!==null;)Yx(e,t,r),e=e.sibling}var Ar=null,fa=!1;function zn(e,t,r){for(r=r.child;r!==null;)lj(e,t,r),r=r.sibling}function lj(e,t,r){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount(kf,r)}catch{}switch(r.tag){case 5:Vr||ko(r,t);case 6:var s=Ar,n=fa;Ar=null,zn(e,t,r),Ar=s,fa=n,Ar!==null&&(fa?(e=Ar,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ar.removeChild(r.stateNode));break;case 18:Ar!==null&&(fa?(e=Ar,r=r.stateNode,e.nodeType===8?jm(e.parentNode,r):e.nodeType===1&&jm(e,r),Ud(e)):jm(Ar,r.stateNode));break;case 4:s=Ar,n=fa,Ar=r.stateNode.containerInfo,fa=!0,zn(e,t,r),Ar=s,fa=n;break;case 0:case 11:case 14:case 15:if(!Vr&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Kx(r,t,l),n=n.next}while(n!==s)}zn(e,t,r);break;case 1:if(!Vr&&(ko(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Yt(r,t,o)}zn(e,t,r);break;case 21:zn(e,t,r);break;case 22:r.mode&1?(Vr=(s=Vr)||r.memoizedState!==null,zn(e,t,r),Vr=s):zn(e,t,r);break;default:zn(e,t,r)}}function T1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new FC),t.forEach(function(s){var n=HC.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function ia(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ar=o.stateNode,fa=!1;break e;case 3:Ar=o.stateNode.containerInfo,fa=!0;break e;case 4:Ar=o.stateNode.containerInfo,fa=!0;break e}o=o.return}if(Ar===null)throw Error(Se(160));lj(i,l,n),Ar=null,fa=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Yt(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oj(t,e),t=t.sibling}function oj(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ia(t,e),Pa(e),s&4){try{xd(3,e,e.return),Af(3,e)}catch(m){Yt(e,e.return,m)}try{xd(5,e,e.return)}catch(m){Yt(e,e.return,m)}}break;case 1:ia(t,e),Pa(e),s&512&&r!==null&&ko(r,r.return);break;case 5:if(ia(t,e),Pa(e),s&512&&r!==null&&ko(r,r.return),e.flags&32){var n=e.stateNode;try{Ld(n,"")}catch(m){Yt(e,e.return,m)}}if(s&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&DN(n,i),yx(o,l);var d=yx(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?IN(n,h):u==="dangerouslySetInnerHTML"?RN(n,h):u==="children"?Ld(n,h):dg(n,u,h,d)}switch(o){case"input":fx(n,i);break;case"textarea":AN(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?_o(n,!!i.multiple,x,!1):f!==!!i.multiple&&(i.defaultValue!=null?_o(n,!!i.multiple,i.defaultValue,!0):_o(n,!!i.multiple,i.multiple?[]:"",!1))}n[Wd]=i}catch(m){Yt(e,e.return,m)}}break;case 6:if(ia(t,e),Pa(e),s&4){if(e.stateNode===null)throw Error(Se(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(m){Yt(e,e.return,m)}}break;case 3:if(ia(t,e),Pa(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ud(t.containerInfo)}catch(m){Yt(e,e.return,m)}break;case 4:ia(t,e),Pa(e);break;case 13:ia(t,e),Pa(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Vg=tr())),s&4&&T1(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Vr=(d=Vr)||u,ia(t,e),Vr=d):ia(t,e),Pa(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Oe=e,u=e.child;u!==null;){for(h=Oe=u;Oe!==null;){switch(f=Oe,x=f.child,f.tag){case 0:case 11:case 14:case 15:xd(4,f,f.return);break;case 1:ko(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Yt(s,r,m)}}break;case 5:ko(f,f.return);break;case 22:if(f.memoizedState!==null){E1(h);continue}}x!==null?(x.return=f,Oe=x):E1(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=FN("display",l))}catch(m){Yt(e,e.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){Yt(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ia(t,e),Pa(e),s&4&&T1(e);break;case 21:break;default:ia(t,e),Pa(e)}}function Pa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ij(r)){var s=r;break e}r=r.return}throw Error(Se(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Ld(n,""),s.flags&=-33);var i=S1(e);Yx(e,i,n);break;case 3:case 4:var l=s.stateNode.containerInfo,o=S1(e);Wx(e,o,l);break;default:throw Error(Se(161))}}catch(c){Yt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function MC(e,t,r){Oe=e,cj(e)}function cj(e,t,r){for(var s=(e.mode&1)!==0;Oe!==null;){var n=Oe,i=n.child;if(n.tag===22&&s){var l=n.memoizedState!==null||u0;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Vr;o=u0;var d=Vr;if(u0=l,(Vr=c)&&!d)for(Oe=n;Oe!==null;)l=Oe,c=l.child,l.tag===22&&l.memoizedState!==null?C1(n):c!==null?(c.return=l,Oe=c):C1(n);for(;i!==null;)Oe=i,cj(i),i=i.sibling;Oe=n,u0=o,Vr=d}_1(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Oe=i):_1(e)}}function _1(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vr||Af(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Vr)if(r===null)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:da(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&u1(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}u1(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ud(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Vr||t.flags&512&&Gx(t)}catch(f){Yt(t,t.return,f)}}if(t===e){Oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Oe=r;break}Oe=t.return}}function E1(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Oe=r;break}Oe=t.return}}function C1(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Af(4,t)}catch(c){Yt(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(c){Yt(t,n,c)}}var i=t.return;try{Gx(t)}catch(c){Yt(t,i,c)}break;case 5:var l=t.return;try{Gx(t)}catch(c){Yt(t,l,c)}}}catch(c){Yt(t,t.return,c)}if(t===e){Oe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Oe=o;break}Oe=t.return}}var OC=Math.ceil,Ah=Fn.ReactCurrentDispatcher,$g=Fn.ReactCurrentOwner,Js=Fn.ReactCurrentBatchConfig,gt=0,_r=null,or=null,Rr=0,Cs=0,jo=Ui(0),pr=0,Jd=null,Al=0,Pf=0,Ug=0,pd=null,bs=null,Vg=0,oc=1/0,hn=null,Ph=!1,qx=null,Ni=null,h0=!1,ui=null,Rh=0,gd=0,Xx=null,q0=-1,X0=0;function ls(){return gt&6?tr():q0!==-1?q0:q0=tr()}function ki(e){return e.mode&1?gt&2&&Rr!==0?Rr&-Rr:bC.transition!==null?(X0===0&&(X0=WN()),X0):(e=Et,e!==0||(e=window.event,e=e===void 0?16:ek(e.type)),e):1}function Na(e,t,r,s){if(50<gd)throw gd=0,Xx=null,Error(Se(185));Du(e,r,s),(!(gt&2)||e!==_r)&&(e===_r&&(!(gt&2)&&(Pf|=r),pr===4&&Qn(e,Rr)),js(e,s),r===1&&gt===0&&!(t.mode&1)&&(oc=tr()+500,Ef&&Vi()))}function js(e,t){var r=e.callbackNode;bE(e,t);var s=ph(e,e===_r?Rr:0);if(s===0)r!==null&&Lv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Lv(r),t===1)e.tag===0?vC(D1.bind(null,e)):vk(D1.bind(null,e)),xC(function(){!(gt&6)&&Vi()}),r=null;else{switch(YN(s)){case 1:r=xg;break;case 4:r=KN;break;case 16:r=xh;break;case 536870912:r=GN;break;default:r=xh}r=gj(r,dj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dj(e,t){if(q0=-1,X0=0,gt&6)throw Error(Se(327));var r=e.callbackNode;if(Po()&&e.callbackNode!==r)return null;var s=ph(e,e===_r?Rr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Fh(e,s);else{t=s;var n=gt;gt|=2;var i=hj();(_r!==e||Rr!==t)&&(hn=null,oc=tr()+500,bl(e,t));do try{zC();break}catch(o){uj(e,o)}while(1);Eg(),Ah.current=i,gt=n,or!==null?t=0:(_r=null,Rr=0,t=pr)}if(t!==0){if(t===2&&(n=kx(e),n!==0&&(s=n,t=Qx(e,n))),t===1)throw r=Jd,bl(e,0),Qn(e,s),js(e,tr()),r;if(t===6)Qn(e,s);else{if(n=e.current.alternate,!(s&30)&&!LC(n)&&(t=Fh(e,s),t===2&&(i=kx(e),i!==0&&(s=i,t=Qx(e,i))),t===1))throw r=Jd,bl(e,0),Qn(e,s),js(e,tr()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(Se(345));case 2:Xi(e,bs,hn);break;case 3:if(Qn(e,s),(s&130023424)===s&&(t=Vg+500-tr(),10<t)){if(ph(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){ls(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Ax(Xi.bind(null,e,bs,hn),t);break}Xi(e,bs,hn);break;case 4:if(Qn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var l=31-wa(s);i=1<<l,l=t[l],l>n&&(n=l),s&=~i}if(s=n,s=tr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*OC(s/1960))-s,10<s){e.timeoutHandle=Ax(Xi.bind(null,e,bs,hn),s);break}Xi(e,bs,hn);break;case 5:Xi(e,bs,hn);break;default:throw Error(Se(329))}}}return js(e,tr()),e.callbackNode===r?dj.bind(null,e):null}function Qx(e,t){var r=pd;return e.current.memoizedState.isDehydrated&&(bl(e,t).flags|=256),e=Fh(e,t),e!==2&&(t=bs,bs=r,t!==null&&Zx(t)),e}function Zx(e){bs===null?bs=e:bs.push.apply(bs,e)}function LC(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],i=n.getSnapshot;n=n.value;try{if(!Ta(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t){for(t&=~Ug,t&=~Pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wa(t),s=1<<r;e[r]=-1,t&=~s}}function D1(e){if(gt&6)throw Error(Se(327));Po();var t=ph(e,0);if(!(t&1))return js(e,tr()),null;var r=Fh(e,t);if(e.tag!==0&&r===2){var s=kx(e);s!==0&&(t=s,r=Qx(e,s))}if(r===1)throw r=Jd,bl(e,0),Qn(e,t),js(e,tr()),r;if(r===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xi(e,bs,hn),js(e,tr()),null}function Hg(e,t){var r=gt;gt|=1;try{return e(t)}finally{gt=r,gt===0&&(oc=tr()+500,Ef&&Vi())}}function Pl(e){ui!==null&&ui.tag===0&&!(gt&6)&&Po();var t=gt;gt|=1;var r=Js.transition,s=Et;try{if(Js.transition=null,Et=1,e)return e()}finally{Et=s,Js.transition=r,gt=t,!(gt&6)&&Vi()}}function Kg(){Cs=jo.current,It(jo)}function bl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mC(r)),or!==null)for(r=or.return;r!==null;){var s=r;switch(Sg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&wh();break;case 3:ic(),It(Ns),It(qr),Fg();break;case 5:Rg(s);break;case 4:ic();break;case 13:It(Vt);break;case 19:It(Vt);break;case 10:Cg(s.type._context);break;case 22:case 23:Kg()}r=r.return}if(_r=e,or=e=ji(e.current,null),Rr=Cs=t,pr=0,Jd=null,Ug=Pf=Al=0,bs=pd=null,sl!==null){for(t=0;t<sl.length;t++)if(r=sl[t],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,i=r.pending;if(i!==null){var l=i.next;i.next=n,s.next=l}r.pending=s}sl=null}return e}function uj(e,t){do{var r=or;try{if(Eg(),G0.current=Dh,Ch){for(var s=Ht.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Ch=!1}if(Dl=0,Tr=mr=Ht=null,md=!1,Xd=0,$g.current=null,r===null||r.return===null){pr=1,Jd=t,or=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Rr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=g1(l);if(x!==null){x.flags&=-257,y1(x,l,o,i,t),x.mode&1&&p1(i,d,t),t=x,c=d;var p=t.updateQueue;if(p===null){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}else{if(!(t&1)){p1(i,d,t),Gg();break e}c=Error(Se(426))}}else if($t&&o.mode&1){var y=g1(l);if(y!==null){!(y.flags&65536)&&(y.flags|=256),y1(y,l,o,i,t),Tg(lc(c,o));break e}}i=c=lc(c,o),pr!==4&&(pr=2),pd===null?pd=[i]:pd.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Yk(i,c,t);d1(i,g);break e;case 1:o=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ni===null||!Ni.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=qk(i,o,t);d1(i,S);break e}}i=i.return}while(i!==null)}mj(r)}catch(D){t=D,or===r&&r!==null&&(or=r=r.return);continue}break}while(1)}function hj(){var e=Ah.current;return Ah.current=Dh,e===null?Dh:e}function Gg(){(pr===0||pr===3||pr===2)&&(pr=4),_r===null||!(Al&268435455)&&!(Pf&268435455)||Qn(_r,Rr)}function Fh(e,t){var r=gt;gt|=2;var s=hj();(_r!==e||Rr!==t)&&(hn=null,bl(e,t));do try{BC();break}catch(n){uj(e,n)}while(1);if(Eg(),gt=r,Ah.current=s,or!==null)throw Error(Se(261));return _r=null,Rr=0,pr}function BC(){for(;or!==null;)fj(or)}function zC(){for(;or!==null&&!uE();)fj(or)}function fj(e){var t=pj(e.alternate,e,Cs);e.memoizedProps=e.pendingProps,t===null?mj(e):or=t,$g.current=null}function mj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=RC(r,t),r!==null){r.flags&=32767,or=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pr=6,or=null;return}}else if(r=PC(r,t,Cs),r!==null){or=r;return}if(t=t.sibling,t!==null){or=t;return}or=t=e}while(t!==null);pr===0&&(pr=5)}function Xi(e,t,r){var s=Et,n=Js.transition;try{Js.transition=null,Et=1,$C(e,t,r,s)}finally{Js.transition=n,Et=s}return null}function $C(e,t,r,s){do Po();while(ui!==null);if(gt&6)throw Error(Se(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(wE(e,i),e===_r&&(or=_r=null,Rr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||h0||(h0=!0,gj(xh,function(){return Po(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Js.transition,Js.transition=null;var l=Et;Et=1;var o=gt;gt|=4,$g.current=null,IC(e,r),oj(r,e),lC(Cx),gh=!!Ex,Cx=Ex=null,e.current=r,MC(r),hE(),gt=o,Et=l,Js.transition=i}else e.current=r;if(h0&&(h0=!1,ui=e,Rh=n),i=e.pendingLanes,i===0&&(Ni=null),xE(r.stateNode),js(e,tr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Ph)throw Ph=!1,e=qx,qx=null,e;return Rh&1&&e.tag!==0&&Po(),i=e.pendingLanes,i&1?e===Xx?gd++:(gd=0,Xx=e):gd=0,Vi(),null}function Po(){if(ui!==null){var e=YN(Rh),t=Js.transition,r=Et;try{if(Js.transition=null,Et=16>e?16:e,ui===null)var s=!1;else{if(e=ui,ui=null,Rh=0,gt&6)throw Error(Se(331));var n=gt;for(gt|=4,Oe=e.current;Oe!==null;){var i=Oe,l=i.child;if(Oe.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Oe=d;Oe!==null;){var u=Oe;switch(u.tag){case 0:case 11:case 15:xd(8,u,i)}var h=u.child;if(h!==null)h.return=u,Oe=h;else for(;Oe!==null;){u=Oe;var f=u.sibling,x=u.return;if(nj(u),u===d){Oe=null;break}if(f!==null){f.return=x,Oe=f;break}Oe=x}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Oe=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Oe=l;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xd(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Oe=g;break e}Oe=i.return}}var v=e.current;for(Oe=v;Oe!==null;){l=Oe;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,Oe=b;else e:for(l=v;Oe!==null;){if(o=Oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Af(9,o)}}catch(D){Yt(o,o.return,D)}if(o===l){Oe=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Oe=S;break e}Oe=o.return}}if(gt=n,Vi(),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot(kf,e)}catch{}s=!0}return s}finally{Et=r,Js.transition=t}}return!1}function A1(e,t,r){t=lc(r,t),t=Yk(e,t,1),e=wi(e,t,1),t=ls(),e!==null&&(Du(e,1,t),js(e,t))}function Yt(e,t,r){if(e.tag===3)A1(e,e,r);else for(;t!==null;){if(t.tag===3){A1(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ni===null||!Ni.has(s))){e=lc(r,e),e=qk(t,e,1),t=wi(t,e,1),e=ls(),t!==null&&(Du(t,1,e),js(t,e));break}}t=t.return}}function UC(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ls(),e.pingedLanes|=e.suspendedLanes&r,_r===e&&(Rr&r)===r&&(pr===4||pr===3&&(Rr&130023424)===Rr&&500>tr()-Vg?bl(e,0):Ug|=r),js(e,t)}function xj(e,t){t===0&&(e.mode&1?(t=r0,r0<<=1,!(r0&130023424)&&(r0=4194304)):t=1);var r=ls();e=En(e,t),e!==null&&(Du(e,t,r),js(e,r))}function VC(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xj(e,r)}function HC(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Se(314))}s!==null&&s.delete(t),xj(e,r)}var pj;pj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ns.current)ws=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ws=!1,AC(e,t,r);ws=!!(e.flags&131072)}else ws=!1,$t&&t.flags&1048576&&bk(t,jh,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Y0(e,t),e=t.pendingProps;var n=sc(t,qr.current);Ao(t,r),n=Mg(null,t,s,e,n,r);var i=Og();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ks(s)?(i=!0,Nh(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Ag(t),n.updater=Df,t.stateNode=n,n._reactInternals=t,Lx(t,s,e,r),t=$x(null,t,s,!0,i,r)):(t.tag=0,$t&&i&&jg(t),rs(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Y0(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=GC(s),e=da(s,e),n){case 0:t=zx(null,t,s,e,r);break e;case 1:t=w1(null,t,s,e,r);break e;case 11:t=v1(null,t,s,e,r);break e;case 14:t=b1(null,t,s,da(s.type,e),r);break e}throw Error(Se(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:da(s,n),zx(e,t,s,n,r);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:da(s,n),w1(e,t,s,n,r);case 3:e:{if(Jk(t),e===null)throw Error(Se(387));s=t.pendingProps,i=t.memoizedState,n=i.element,Tk(e,t),_h(t,s,null,r);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=lc(Error(Se(423)),t),t=N1(e,t,s,r,n);break e}else if(s!==n){n=lc(Error(Se(424)),t),t=N1(e,t,s,r,n);break e}else for(Fs=bi(t.stateNode.containerInfo.firstChild),Is=t,$t=!0,ma=null,r=jk(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ac(),s===n){t=Cn(e,t,r);break e}rs(e,t,s,r)}t=t.child}return t;case 5:return _k(t),e===null&&Ix(t),s=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,l=n.children,Dx(s,n)?l=null:i!==null&&Dx(s,i)&&(t.flags|=32),Zk(e,t),rs(e,t,l,r),t.child;case 6:return e===null&&Ix(t),null;case 13:return ej(e,t,r);case 4:return Pg(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=nc(t,null,s,r):rs(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:da(s,n),v1(e,t,s,n,r);case 7:return rs(e,t,t.pendingProps,r),t.child;case 8:return rs(e,t,t.pendingProps.children,r),t.child;case 12:return rs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Pt(Sh,s._currentValue),s._currentValue=l,i!==null)if(Ta(i.value,l)){if(i.children===n.children&&!Ns.current){t=Cn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=wn(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Mx(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Se(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Mx(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}rs(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Ao(t,r),n=ta(n),s=s(n),t.flags|=1,rs(e,t,s,r),t.child;case 14:return s=t.type,n=da(s,t.pendingProps),n=da(s.type,n),b1(e,t,s,n,r);case 15:return Xk(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:da(s,n),Y0(e,t),t.tag=1,ks(s)?(e=!0,Nh(t)):e=!1,Ao(t,r),Wk(t,s,n),Lx(t,s,n,r),$x(null,t,s,!0,e,r);case 19:return tj(e,t,r);case 22:return Qk(e,t,r)}throw Error(Se(156,t.tag))};function gj(e,t){return HN(e,t)}function KC(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(e,t,r,s){return new KC(e,t,r,s)}function Wg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function GC(e){if(typeof e=="function")return Wg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hg)return 11;if(e===fg)return 14}return 2}function ji(e,t){var r=e.alternate;return r===null?(r=Qs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Q0(e,t,r,s,n,i){var l=2;if(s=e,typeof e=="function")Wg(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case mo:return wl(r.children,n,i,t);case ug:l=8,n|=8;break;case ox:return e=Qs(12,r,t,n|2),e.elementType=ox,e.lanes=i,e;case cx:return e=Qs(13,r,t,n),e.elementType=cx,e.lanes=i,e;case dx:return e=Qs(19,r,t,n),e.elementType=dx,e.lanes=i,e;case _N:return Rf(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SN:l=10;break e;case TN:l=9;break e;case hg:l=11;break e;case fg:l=14;break e;case Gn:l=16,s=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=Qs(l,r,t,n),t.elementType=e,t.type=s,t.lanes=i,t}function wl(e,t,r,s){return e=Qs(7,e,s,t),e.lanes=r,e}function Rf(e,t,r,s){return e=Qs(22,e,s,t),e.elementType=_N,e.lanes=r,e.stateNode={isHidden:!1},e}function Pm(e,t,r){return e=Qs(6,e,null,t),e.lanes=r,e}function Rm(e,t,r){return t=Qs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WC(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fm(0),this.expirationTimes=fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Yg(e,t,r,s,n,i,l,o,c){return e=new WC(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ag(i),e}function YC(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function yj(e){if(!e)return Fi;e=e._reactInternals;e:{if(Vl(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ks(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var r=e.type;if(ks(r))return yk(e,r,t)}return t}function vj(e,t,r,s,n,i,l,o,c){return e=Yg(r,s,!0,e,n,i,l,o,c),e.context=yj(null),r=e.current,s=ls(),n=ki(r),i=wn(s,n),i.callback=t??null,wi(r,i,n),e.current.lanes=n,Du(e,n,s),js(e,s),e}function Ff(e,t,r,s){var n=t.current,i=ls(),l=ki(n);return r=yj(r),t.context===null?t.context=r:t.pendingContext=r,t=wn(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=wi(n,t,l),e!==null&&(Na(e,n,l,i),K0(e,n,l)),l}function Ih(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function P1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qg(e,t){P1(e,t),(e=e.alternate)&&P1(e,t)}function qC(){return null}var bj=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xg(e){this._internalRoot=e}If.prototype.render=Xg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));Ff(e,t,null,null)};If.prototype.unmount=Xg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pl(function(){Ff(null,e,null,null)}),t[_n]=null}};function If(e){this._internalRoot=e}If.prototype.unstable_scheduleHydration=function(e){if(e){var t=QN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xn.length&&t!==0&&t<Xn[r].priority;r++);Xn.splice(r,0,e),r===0&&JN(e)}};function Qg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Mf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function R1(){}function XC(e,t,r,s,n){if(n){if(typeof s=="function"){var i=s;s=function(){var d=Ih(l);i.call(d)}}var l=vj(t,s,e,0,null,!1,!1,"",R1);return e._reactRootContainer=l,e[_n]=l.current,Kd(e.nodeType===8?e.parentNode:e),Pl(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var o=s;s=function(){var d=Ih(c);o.call(d)}}var c=Yg(e,0,!1,null,null,!1,!1,"",R1);return e._reactRootContainer=c,e[_n]=c.current,Kd(e.nodeType===8?e.parentNode:e),Pl(function(){Ff(t,c,r,s)}),c}function Of(e,t,r,s,n){var i=r._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=Ih(l);o.call(c)}}Ff(t,l,e,n)}else l=XC(r,t,e,n,s);return Ih(l)}qN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zc(t.pendingLanes);r!==0&&(pg(t,r|1),js(t,tr()),!(gt&6)&&(oc=tr()+500,Vi()))}break;case 13:Pl(function(){var s=En(e,1);if(s!==null){var n=ls();Na(s,e,1,n)}}),qg(e,1)}};gg=function(e){if(e.tag===13){var t=En(e,134217728);if(t!==null){var r=ls();Na(t,e,134217728,r)}qg(e,134217728)}};XN=function(e){if(e.tag===13){var t=ki(e),r=En(e,t);if(r!==null){var s=ls();Na(r,e,t,s)}qg(e,t)}};QN=function(){return Et};ZN=function(e,t){var r=Et;try{return Et=e,t()}finally{Et=r}};bx=function(e,t,r){switch(t){case"input":if(fx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=_f(s);if(!n)throw Error(Se(90));CN(s),fx(s,n)}}}break;case"textarea":AN(e,r);break;case"select":t=r.value,t!=null&&_o(e,!!r.multiple,t,!1)}};LN=Hg;BN=Pl;var QC={usingClientEntryPoint:!1,Events:[Pu,yo,_f,MN,ON,Hg]},Uc={findFiberByHostInstance:rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZC={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=UN(e),e===null?null:e.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||qC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f0.isDisabled&&f0.supportsFiber)try{kf=f0.inject(ZC),qa=f0}catch{}}Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QC;Bs.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qg(t))throw Error(Se(200));return YC(e,t,null,r)};Bs.createRoot=function(e,t){if(!Qg(e))throw Error(Se(299));var r=!1,s="",n=bj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Yg(e,1,!1,null,null,r,!1,s,n),e[_n]=t.current,Kd(e.nodeType===8?e.parentNode:e),new Xg(t)};Bs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=UN(t),e=e===null?null:e.stateNode,e};Bs.flushSync=function(e){return Pl(e)};Bs.hydrate=function(e,t,r){if(!Mf(t))throw Error(Se(200));return Of(null,e,t,!0,r)};Bs.hydrateRoot=function(e,t,r){if(!Qg(e))throw Error(Se(405));var s=r!=null&&r.hydratedSources||null,n=!1,i="",l=bj;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=vj(t,null,e,1,r??null,n,!1,i,l),e[_n]=t.current,Kd(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new If(t)};Bs.render=function(e,t,r){if(!Mf(t))throw Error(Se(200));return Of(null,e,t,!1,r)};Bs.unmountComponentAtNode=function(e){if(!Mf(e))throw Error(Se(40));return e._reactRootContainer?(Pl(function(){Of(null,null,e,!1,function(){e._reactRootContainer=null,e[_n]=null})}),!0):!1};Bs.unstable_batchedUpdates=Hg;Bs.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Mf(r))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return Of(e,t,r,!1,s)};Bs.version="18.3.1-next-f1338f8080-20240426";function wj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wj)}catch(e){console.error(e)}}wj(),wN.exports=Bs;var Zg=wN.exports,F1=Zg;uh.createRoot=F1.createRoot,uh.hydrateRoot=F1.hydrateRoot;var jc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},JC={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ti,rg,J2,e3=(J2=class{constructor(){Be(this,ti,JC);Be(this,rg,!1)}setTimeoutProvider(e){Re(this,ti,e)}setTimeout(e,t){return ne(this,ti).setTimeout(e,t)}clearTimeout(e){ne(this,ti).clearTimeout(e)}setInterval(e,t){return ne(this,ti).setInterval(e,t)}clearInterval(e){ne(this,ti).clearInterval(e)}},ti=new WeakMap,rg=new WeakMap,J2),nl=new e3;function t3(e){setTimeout(e,0)}var Rl=typeof window>"u"||"Deno"in globalThis;function ss(){}function r3(e,t){return typeof e=="function"?e(t):e}function Jx(e){return typeof e=="number"&&e>=0&&e!==1/0}function Nj(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Si(e,t){return typeof e=="function"?e(t):e}function Ys(e,t){return typeof e=="function"?e(t):e}function I1(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:l,stale:o}=e;if(l){if(s){if(t.queryHash!==Jg(l,t.options))return!1}else if(!eu(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||n&&n!==t.state.fetchStatus||i&&!i(t))}function M1(e,t){const{exact:r,status:s,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Fl(t.options.mutationKey)!==Fl(i))return!1}else if(!eu(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function Jg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Fl)(e)}function Fl(e){return JSON.stringify(e,(t,r)=>ep(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function eu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>eu(e[r],t[r])):!1}var s3=Object.prototype.hasOwnProperty;function kj(e,t){if(e===t)return e;const r=O1(e)&&O1(t);if(!r&&!(ep(e)&&ep(t)))return t;const n=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),l=i.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const u=r?d:i[d],h=e[u],f=t[u];if(h===f){o[u]=h,(r?d<n:s3.call(e,u))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){o[u]=f;continue}const x=kj(h,f);o[u]=x,x===h&&c++}return n===l&&c===n?e:o}function Mh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function O1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ep(e){if(!L1(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!L1(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function L1(e){return Object.prototype.toString.call(e)==="[object Object]"}function a3(e){return new Promise(t=>{nl.setTimeout(t,e)})}function tp(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?kj(e,t):t}function n3(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function i3(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ey=Symbol();function jj(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ey?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Sj(e,t){return typeof e=="function"?e(...t):!!e}var dl,ri,Vo,eN,l3=(eN=class extends jc{constructor(){super();Be(this,dl,void 0);Be(this,ri,void 0);Be(this,Vo,void 0);Re(this,Vo,t=>{if(!Rl&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ne(this,ri)||this.setEventListener(ne(this,Vo))}onUnsubscribe(){var t;this.hasListeners()||((t=ne(this,ri))==null||t.call(this),Re(this,ri,void 0))}setEventListener(t){var r;Re(this,Vo,t),(r=ne(this,ri))==null||r.call(this),Re(this,ri,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){ne(this,dl)!==t&&(Re(this,dl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ne(this,dl)=="boolean"?ne(this,dl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dl=new WeakMap,ri=new WeakMap,Vo=new WeakMap,eN),ty=new l3;function rp(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}var o3=t3;function c3(){let e=[],t=0,r=o=>{o()},s=o=>{o()},n=o3;const i=o=>{t?e.push(o):n(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&n(()=>{s(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var xr=c3(),Ho,si,Ko,tN,d3=(tN=class extends jc{constructor(){super();Be(this,Ho,!0);Be(this,si,void 0);Be(this,Ko,void 0);Re(this,Ko,t=>{if(!Rl&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){ne(this,si)||this.setEventListener(ne(this,Ko))}onUnsubscribe(){var t;this.hasListeners()||((t=ne(this,si))==null||t.call(this),Re(this,si,void 0))}setEventListener(t){var r;Re(this,Ko,t),(r=ne(this,si))==null||r.call(this),Re(this,si,t(this.setOnline.bind(this)))}setOnline(t){ne(this,Ho)!==t&&(Re(this,Ho,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return ne(this,Ho)}},Ho=new WeakMap,si=new WeakMap,Ko=new WeakMap,tN),Oh=new d3;function u3(e){return Math.min(1e3*2**e,3e4)}function Tj(e){return(e??"online")==="online"?Oh.isOnline():!0}var sp=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function _j(e){let t=!1,r=0,s;const n=rp(),i=()=>n.status!=="pending",l=m=>{var y;if(!i()){const g=new sp(m);f(g),(y=e.onCancel)==null||y.call(e,g)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>ty.isFocused()&&(e.networkMode==="always"||Oh.isOnline())&&e.canRun(),u=()=>Tj(e.networkMode)&&e.canRun(),h=m=>{i()||(s==null||s(),n.resolve(m))},f=m=>{i()||(s==null||s(),n.reject(m))},x=()=>new Promise(m=>{var y;s=g=>{(i()||d())&&m(g)},(y=e.onPause)==null||y.call(e)}).then(()=>{var m;s=void 0,i()||(m=e.onContinue)==null||m.call(e)}),p=()=>{if(i())return;let m;const y=r===0?e.initialPromise:void 0;try{m=y??e.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(h).catch(g=>{var N;if(i())return;const v=e.retry??(Rl?0:3),b=e.retryDelay??u3,S=typeof b=="function"?b(r,g):b,D=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,g);if(t||!D){f(g);return}r++,(N=e.onFail)==null||N.call(e,r,g),a3(S).then(()=>d()?void 0:x()).then(()=>{t?f(g):p()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(s==null||s(),n),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?p():x().then(p),n)}}var ul,rN,Ej=(rN=class{constructor(){Be(this,ul,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jx(this.gcTime)&&Re(this,ul,nl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Rl?1/0:5*60*1e3))}clearGcTimeout(){ne(this,ul)&&(nl.clearTimeout(ne(this,ul)),Re(this,ul,void 0))}},ul=new WeakMap,rN),hl,Go,Ws,fl,jr,pu,ml,ua,un,sN,h3=(sN=class extends Ej{constructor(t){super();Be(this,ua);Be(this,hl,void 0);Be(this,Go,void 0);Be(this,Ws,void 0);Be(this,fl,void 0);Be(this,jr,void 0);Be(this,pu,void 0);Be(this,ml,void 0);Re(this,ml,!1),Re(this,pu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Re(this,fl,t.client),Re(this,Ws,ne(this,fl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Re(this,hl,B1(this.options)),this.state=t.state??ne(this,hl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ne(this,jr))==null?void 0:t.promise}setOptions(t){if(this.options={...ne(this,pu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=B1(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Re(this,hl,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ne(this,Ws).remove(this)}setData(t,r){const s=tp(this.state.data,t,this.options);return nt(this,ua,un).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){nt(this,ua,un).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,n;const r=(s=ne(this,jr))==null?void 0:s.promise;return(n=ne(this,jr))==null||n.cancel(t),r?r.then(ss).catch(ss):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ne(this,hl))}isActive(){return this.observers.some(t=>Ys(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ey||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Si(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Nj(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ne(this,jr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ne(this,jr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ne(this,Ws).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ne(this,jr)&&(ne(this,ml)?ne(this,jr).cancel({revert:!0}):ne(this,jr).cancelRetry()),this.scheduleGc()),ne(this,Ws).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||nt(this,ua,un).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,h,f,x,p,m,y,g,v,b;if(this.state.fetchStatus!=="idle"&&((c=ne(this,jr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ne(this,jr))return ne(this,jr).continueRetry(),ne(this,jr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(D=>D.options.queryFn);S&&this.setOptions(S.options)}const s=new AbortController,n=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(Re(this,ml,!0),s.signal)})},i=()=>{const S=jj(this.options,r),N=(()=>{const E={client:ne(this,fl),queryKey:this.queryKey,meta:this.meta};return n(E),E})();return Re(this,ml,!1),this.options.persister?this.options.persister(S,N,this):S(N)},o=(()=>{const S={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ne(this,fl),state:this.state,fetchFn:i};return n(S),S})();(d=this.options.behavior)==null||d.onFetch(o,this),Re(this,Go,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&nt(this,ua,un).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),Re(this,jr,_j({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:S=>{S instanceof sp&&S.revert&&this.setState({...ne(this,Go),fetchStatus:"idle"}),s.abort()},onFail:(S,D)=>{nt(this,ua,un).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{nt(this,ua,un).call(this,{type:"pause"})},onContinue:()=>{nt(this,ua,un).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const S=await ne(this,jr).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(x=(f=ne(this,Ws).config).onSuccess)==null||x.call(f,S,this),(m=(p=ne(this,Ws).config).onSettled)==null||m.call(p,S,this.state.error,this),S}catch(S){if(S instanceof sp){if(S.silent)return ne(this,jr).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw nt(this,ua,un).call(this,{type:"error",error:S}),(g=(y=ne(this,Ws).config).onError)==null||g.call(y,S,this),(b=(v=ne(this,Ws).config).onSettled)==null||b.call(v,this.state.data,S,this),S}finally{this.scheduleGc()}}},hl=new WeakMap,Go=new WeakMap,Ws=new WeakMap,fl=new WeakMap,jr=new WeakMap,pu=new WeakMap,ml=new WeakMap,ua=new WeakSet,un=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Cj(s.data,this.options),fetchMeta:t.meta??null};case"success":const n={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Re(this,Go,t.manual?n:void 0),n;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),xr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ne(this,Ws).notify({query:this,type:"updated",action:t})})},sN);function Cj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Tj(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function B1(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ms,ct,gu,Jr,xl,Wo,mn,ai,yu,Yo,qo,pl,gl,ni,Xo,yl,ed,vu,ap,bu,np,wu,ip,Nu,lp,ku,op,ju,cp,Su,dp,wf,Dj,aN,f3=(aN=class extends jc{constructor(t,r){super();Be(this,yl);Be(this,vu);Be(this,bu);Be(this,wu);Be(this,Nu);Be(this,ku);Be(this,ju);Be(this,Su);Be(this,wf);Be(this,ms,void 0);Be(this,ct,void 0);Be(this,gu,void 0);Be(this,Jr,void 0);Be(this,xl,void 0);Be(this,Wo,void 0);Be(this,mn,void 0);Be(this,ai,void 0);Be(this,yu,void 0);Be(this,Yo,void 0);Be(this,qo,void 0);Be(this,pl,void 0);Be(this,gl,void 0);Be(this,ni,void 0);Be(this,Xo,new Set);this.options=r,Re(this,ms,t),Re(this,ai,null),Re(this,mn,rp()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ne(this,ct).addObserver(this),z1(ne(this,ct),this.options)?nt(this,yl,ed).call(this):this.updateResult(),nt(this,Nu,lp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return up(ne(this,ct),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return up(ne(this,ct),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,nt(this,ku,op).call(this),nt(this,ju,cp).call(this),ne(this,ct).removeObserver(this)}setOptions(t){const r=this.options,s=ne(this,ct);if(this.options=ne(this,ms).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ys(this.options.enabled,ne(this,ct))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");nt(this,Su,dp).call(this),ne(this,ct).setOptions(this.options),r._defaulted&&!Mh(this.options,r)&&ne(this,ms).getQueryCache().notify({type:"observerOptionsUpdated",query:ne(this,ct),observer:this});const n=this.hasListeners();n&&$1(ne(this,ct),s,this.options,r)&&nt(this,yl,ed).call(this),this.updateResult(),n&&(ne(this,ct)!==s||Ys(this.options.enabled,ne(this,ct))!==Ys(r.enabled,ne(this,ct))||Si(this.options.staleTime,ne(this,ct))!==Si(r.staleTime,ne(this,ct)))&&nt(this,vu,ap).call(this);const i=nt(this,bu,np).call(this);n&&(ne(this,ct)!==s||Ys(this.options.enabled,ne(this,ct))!==Ys(r.enabled,ne(this,ct))||i!==ne(this,ni))&&nt(this,wu,ip).call(this,i)}getOptimisticResult(t){const r=ne(this,ms).getQueryCache().build(ne(this,ms),t),s=this.createResult(r,t);return x3(this,s)&&(Re(this,Jr,s),Re(this,Wo,this.options),Re(this,xl,ne(this,ct).state)),s}getCurrentResult(){return ne(this,Jr)}trackResult(t,r){return new Proxy(t,{get:(s,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ne(this,mn).status==="pending"&&ne(this,mn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,n))})}trackProp(t){ne(this,Xo).add(t)}getCurrentQuery(){return ne(this,ct)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=ne(this,ms).defaultQueryOptions(t),s=ne(this,ms).getQueryCache().build(ne(this,ms),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return nt(this,yl,ed).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ne(this,Jr)))}createResult(t,r){var _;const s=ne(this,ct),n=this.options,i=ne(this,Jr),l=ne(this,xl),o=ne(this,Wo),d=t!==s?t.state:ne(this,gu),{state:u}=t;let h={...u},f=!1,x;if(r._optimisticResults){const C=this.hasListeners(),T=!C&&z1(t,r),j=C&&$1(t,s,r,n);(T||j)&&(h={...h,...Cj(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:y}=h;x=h.data;let g=!1;if(r.placeholderData!==void 0&&x===void 0&&y==="pending"){let C;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(C=i.data,g=!0):C=typeof r.placeholderData=="function"?r.placeholderData((_=ne(this,qo))==null?void 0:_.state.data,ne(this,qo)):r.placeholderData,C!==void 0&&(y="success",x=tp(i==null?void 0:i.data,C,r),f=!0)}if(r.select&&x!==void 0&&!g)if(i&&x===(l==null?void 0:l.data)&&r.select===ne(this,yu))x=ne(this,Yo);else try{Re(this,yu,r.select),x=r.select(x),x=tp(i==null?void 0:i.data,x,r),Re(this,Yo,x),Re(this,ai,null)}catch(C){Re(this,ai,C)}ne(this,ai)&&(p=ne(this,ai),x=ne(this,Yo),m=Date.now(),y="error");const v=h.fetchStatus==="fetching",b=y==="pending",S=y==="error",D=b&&v,N=x!==void 0,w={status:y,fetchStatus:h.fetchStatus,isPending:b,isSuccess:y==="success",isError:S,isInitialLoading:D,isLoading:D,data:x,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:S&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:S&&N,isStale:ry(t,r),refetch:this.refetch,promise:ne(this,mn),isEnabled:Ys(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const C=F=>{w.status==="error"?F.reject(w.error):w.data!==void 0&&F.resolve(w.data)},T=()=>{const F=Re(this,mn,w.promise=rp());C(F)},j=ne(this,mn);switch(j.status){case"pending":t.queryHash===s.queryHash&&C(j);break;case"fulfilled":(w.status==="error"||w.data!==j.value)&&T();break;case"rejected":(w.status!=="error"||w.error!==j.reason)&&T();break}}return w}updateResult(){const t=ne(this,Jr),r=this.createResult(ne(this,ct),this.options);if(Re(this,xl,ne(this,ct).state),Re(this,Wo,this.options),ne(this,xl).data!==void 0&&Re(this,qo,ne(this,ct)),Mh(r,t))return;Re(this,Jr,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!ne(this,Xo).size)return!0;const l=new Set(i??ne(this,Xo));return this.options.throwOnError&&l.add("error"),Object.keys(ne(this,Jr)).some(o=>{const c=o;return ne(this,Jr)[c]!==t[c]&&l.has(c)})};nt(this,wf,Dj).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&nt(this,Nu,lp).call(this)}},ms=new WeakMap,ct=new WeakMap,gu=new WeakMap,Jr=new WeakMap,xl=new WeakMap,Wo=new WeakMap,mn=new WeakMap,ai=new WeakMap,yu=new WeakMap,Yo=new WeakMap,qo=new WeakMap,pl=new WeakMap,gl=new WeakMap,ni=new WeakMap,Xo=new WeakMap,yl=new WeakSet,ed=function(t){nt(this,Su,dp).call(this);let r=ne(this,ct).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ss)),r},vu=new WeakSet,ap=function(){nt(this,ku,op).call(this);const t=Si(this.options.staleTime,ne(this,ct));if(Rl||ne(this,Jr).isStale||!Jx(t))return;const s=Nj(ne(this,Jr).dataUpdatedAt,t)+1;Re(this,pl,nl.setTimeout(()=>{ne(this,Jr).isStale||this.updateResult()},s))},bu=new WeakSet,np=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ne(this,ct)):this.options.refetchInterval)??!1},wu=new WeakSet,ip=function(t){nt(this,ju,cp).call(this),Re(this,ni,t),!(Rl||Ys(this.options.enabled,ne(this,ct))===!1||!Jx(ne(this,ni))||ne(this,ni)===0)&&Re(this,gl,nl.setInterval(()=>{(this.options.refetchIntervalInBackground||ty.isFocused())&&nt(this,yl,ed).call(this)},ne(this,ni)))},Nu=new WeakSet,lp=function(){nt(this,vu,ap).call(this),nt(this,wu,ip).call(this,nt(this,bu,np).call(this))},ku=new WeakSet,op=function(){ne(this,pl)&&(nl.clearTimeout(ne(this,pl)),Re(this,pl,void 0))},ju=new WeakSet,cp=function(){ne(this,gl)&&(nl.clearInterval(ne(this,gl)),Re(this,gl,void 0))},Su=new WeakSet,dp=function(){const t=ne(this,ms).getQueryCache().build(ne(this,ms),this.options);if(t===ne(this,ct))return;const r=ne(this,ct);Re(this,ct,t),Re(this,gu,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},wf=new WeakSet,Dj=function(t){xr.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(ne(this,Jr))}),ne(this,ms).getQueryCache().notify({query:ne(this,ct),type:"observerResultsUpdated"})})},aN);function m3(e,t){return Ys(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function z1(e,t){return m3(e,t)||e.state.data!==void 0&&up(e,t,t.refetchOnMount)}function up(e,t,r){if(Ys(t.enabled,e)!==!1&&Si(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&ry(e,t)}return!1}function $1(e,t,r,s){return(e!==t||Ys(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ry(e,r)}function ry(e,t){return Ys(t.enabled,e)!==!1&&e.isStaleByTime(Si(t.staleTime,e))}function x3(e,t){return!Mh(e.getCurrentResult(),t)}function U1(e){return{onFetch:(t,r)=>{var u,h,f,x,p;const s=t.options,n=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],l=((p=t.state.data)==null?void 0:p.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let m=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},g=jj(t.options,t.fetchOptions),v=async(b,S,D)=>{if(m)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:S,direction:D?"backward":"forward",meta:t.options.meta};return y(T),T})(),w=await g(E),{maxPages:_}=t.options,C=D?i3:n3;return{pages:C(b.pages,w,_),pageParams:C(b.pageParams,S,_)}};if(n&&i.length){const b=n==="backward",S=b?p3:V1,D={pages:i,pageParams:l},N=S(s,D);o=await v(D,N,b)}else{const b=e??i.length;do{const S=c===0?l[0]??s.initialPageParam:V1(s,o);if(c>0&&S==null)break;o=await v(o,S),c++}while(c<b)}return o};t.options.persister?t.fetchFn=()=>{var m,y;return(y=(m=t.options).persister)==null?void 0:y.call(m,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function V1(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function p3(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Tu,Ba,es,vl,za,Kn,nN,g3=(nN=class extends Ej{constructor(t){super();Be(this,za);Be(this,Tu,void 0);Be(this,Ba,void 0);Be(this,es,void 0);Be(this,vl,void 0);Re(this,Tu,t.client),this.mutationId=t.mutationId,Re(this,es,t.mutationCache),Re(this,Ba,[]),this.state=t.state||Aj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ne(this,Ba).includes(t)||(ne(this,Ba).push(t),this.clearGcTimeout(),ne(this,es).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Re(this,Ba,ne(this,Ba).filter(r=>r!==t)),this.scheduleGc(),ne(this,es).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ne(this,Ba).length||(this.state.status==="pending"?this.scheduleGc():ne(this,es).remove(this))}continue(){var t;return((t=ne(this,vl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,u,h,f,x,p,m,y,g,v,b,S,D,N,E,w,_;const r=()=>{nt(this,za,Kn).call(this,{type:"continue"})},s={client:ne(this,Tu),meta:this.options.meta,mutationKey:this.options.mutationKey};Re(this,vl,_j({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(C,T)=>{nt(this,za,Kn).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{nt(this,za,Kn).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ne(this,es).canRun(this)}));const n=this.state.status==="pending",i=!ne(this,vl).canStart();try{if(n)r();else{nt(this,za,Kn).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=ne(this,es).config).onMutate)==null?void 0:o.call(l,t,this,s));const T=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,s));T!==this.state.context&&nt(this,za,Kn).call(this,{type:"pending",context:T,variables:t,isPaused:i})}const C=await ne(this,vl).start();return await((h=(u=ne(this,es).config).onSuccess)==null?void 0:h.call(u,C,t,this.state.context,this,s)),await((x=(f=this.options).onSuccess)==null?void 0:x.call(f,C,t,this.state.context,s)),await((m=(p=ne(this,es).config).onSettled)==null?void 0:m.call(p,C,null,this.state.variables,this.state.context,this,s)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,C,null,t,this.state.context,s)),nt(this,za,Kn).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(v=ne(this,es).config).onError)==null?void 0:b.call(v,C,t,this.state.context,this,s)),await((D=(S=this.options).onError)==null?void 0:D.call(S,C,t,this.state.context,s)),await((E=(N=ne(this,es).config).onSettled)==null?void 0:E.call(N,void 0,C,this.state.variables,this.state.context,this,s)),await((_=(w=this.options).onSettled)==null?void 0:_.call(w,void 0,C,t,this.state.context,s)),C}finally{nt(this,za,Kn).call(this,{type:"error",error:C})}}finally{ne(this,es).runNext(this)}}},Tu=new WeakMap,Ba=new WeakMap,es=new WeakMap,vl=new WeakMap,za=new WeakSet,Kn=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xr.batch(()=>{ne(this,Ba).forEach(s=>{s.onMutationUpdate(t)}),ne(this,es).notify({mutation:this,type:"updated",action:t})})},nN);function Aj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xn,ha,_u,iN,y3=(iN=class extends jc{constructor(t={}){super();Be(this,xn,void 0);Be(this,ha,void 0);Be(this,_u,void 0);this.config=t,Re(this,xn,new Set),Re(this,ha,new Map),Re(this,_u,0)}build(t,r,s){const n=new g3({client:t,mutationCache:this,mutationId:++Xu(this,_u)._,options:t.defaultMutationOptions(r),state:s});return this.add(n),n}add(t){ne(this,xn).add(t);const r=m0(t);if(typeof r=="string"){const s=ne(this,ha).get(r);s?s.push(t):ne(this,ha).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ne(this,xn).delete(t)){const r=m0(t);if(typeof r=="string"){const s=ne(this,ha).get(r);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&ne(this,ha).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=m0(t);if(typeof r=="string"){const s=ne(this,ha).get(r),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const r=m0(t);if(typeof r=="string"){const n=(s=ne(this,ha).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xr.batch(()=>{ne(this,xn).forEach(t=>{this.notify({type:"removed",mutation:t})}),ne(this,xn).clear(),ne(this,ha).clear()})}getAll(){return Array.from(ne(this,xn))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>M1(r,s))}findAll(t={}){return this.getAll().filter(r=>M1(t,r))}notify(t){xr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return xr.batch(()=>Promise.all(t.map(r=>r.continue().catch(ss))))}},xn=new WeakMap,ha=new WeakMap,_u=new WeakMap,iN);function m0(e){var t;return(t=e.options.scope)==null?void 0:t.id}var pn,ii,xs,gn,Qo,Z0,Eu,hp,lN,v3=(lN=class extends jc{constructor(r,s){super();Be(this,Qo);Be(this,Eu);Be(this,pn,void 0);Be(this,ii,void 0);Be(this,xs,void 0);Be(this,gn,void 0);Re(this,pn,r),this.setOptions(s),this.bindMethods(),nt(this,Qo,Z0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const s=this.options;this.options=ne(this,pn).defaultMutationOptions(r),Mh(this.options,s)||ne(this,pn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ne(this,xs),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Fl(s.mutationKey)!==Fl(this.options.mutationKey)?this.reset():((n=ne(this,xs))==null?void 0:n.state.status)==="pending"&&ne(this,xs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=ne(this,xs))==null||r.removeObserver(this)}onMutationUpdate(r){nt(this,Qo,Z0).call(this),nt(this,Eu,hp).call(this,r)}getCurrentResult(){return ne(this,ii)}reset(){var r;(r=ne(this,xs))==null||r.removeObserver(this),Re(this,xs,void 0),nt(this,Qo,Z0).call(this),nt(this,Eu,hp).call(this)}mutate(r,s){var n;return Re(this,gn,s),(n=ne(this,xs))==null||n.removeObserver(this),Re(this,xs,ne(this,pn).getMutationCache().build(ne(this,pn),this.options)),ne(this,xs).addObserver(this),ne(this,xs).execute(r)}},pn=new WeakMap,ii=new WeakMap,xs=new WeakMap,gn=new WeakMap,Qo=new WeakSet,Z0=function(){var s;const r=((s=ne(this,xs))==null?void 0:s.state)??Aj();Re(this,ii,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Eu=new WeakSet,hp=function(r){xr.batch(()=>{var s,n,i,l,o,c,d,u;if(ne(this,gn)&&this.hasListeners()){const h=ne(this,ii).variables,f=ne(this,ii).context,x={client:ne(this,pn),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((n=(s=ne(this,gn)).onSuccess)==null||n.call(s,r.data,h,f,x),(l=(i=ne(this,gn)).onSettled)==null||l.call(i,r.data,null,h,f,x)):(r==null?void 0:r.type)==="error"&&((c=(o=ne(this,gn)).onError)==null||c.call(o,r.error,h,f,x),(u=(d=ne(this,gn)).onSettled)==null||u.call(d,void 0,r.error,h,f,x))}this.listeners.forEach(h=>{h(ne(this,ii))})})},lN),$a,oN,b3=(oN=class extends jc{constructor(t={}){super();Be(this,$a,void 0);this.config=t,Re(this,$a,new Map)}build(t,r,s){const n=r.queryKey,i=r.queryHash??Jg(n,r);let l=this.get(i);return l||(l=new h3({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(l)),l}add(t){ne(this,$a).has(t.queryHash)||(ne(this,$a).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ne(this,$a).get(t.queryHash);r&&(t.destroy(),r===t&&ne(this,$a).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ne(this,$a).get(t)}getAll(){return[...ne(this,$a).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>I1(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>I1(t,s)):r}notify(t){xr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){xr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$a=new WeakMap,oN),Gt,li,oi,Zo,Jo,ci,ec,tc,cN,w3=(cN=class{constructor(e={}){Be(this,Gt,void 0);Be(this,li,void 0);Be(this,oi,void 0);Be(this,Zo,void 0);Be(this,Jo,void 0);Be(this,ci,void 0);Be(this,ec,void 0);Be(this,tc,void 0);Re(this,Gt,e.queryCache||new b3),Re(this,li,e.mutationCache||new y3),Re(this,oi,e.defaultOptions||{}),Re(this,Zo,new Map),Re(this,Jo,new Map),Re(this,ci,0)}mount(){Xu(this,ci)._++,ne(this,ci)===1&&(Re(this,ec,ty.subscribe(async e=>{e&&(await this.resumePausedMutations(),ne(this,Gt).onFocus())})),Re(this,tc,Oh.subscribe(async e=>{e&&(await this.resumePausedMutations(),ne(this,Gt).onOnline())})))}unmount(){var e,t;Xu(this,ci)._--,ne(this,ci)===0&&((e=ne(this,ec))==null||e.call(this),Re(this,ec,void 0),(t=ne(this,tc))==null||t.call(this),Re(this,tc,void 0))}isFetching(e){return ne(this,Gt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ne(this,li).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ne(this,Gt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ne(this,Gt).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Si(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return ne(this,Gt).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),n=ne(this,Gt).get(s.queryHash),i=n==null?void 0:n.state.data,l=r3(t,i);if(l!==void 0)return ne(this,Gt).build(this,s).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return xr.batch(()=>ne(this,Gt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ne(this,Gt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ne(this,Gt);xr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ne(this,Gt);return xr.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=xr.batch(()=>ne(this,Gt).findAll(e).map(n=>n.cancel(r)));return Promise.all(s).then(ss).catch(ss)}invalidateQueries(e,t={}){return xr.batch(()=>(ne(this,Gt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=xr.batch(()=>ne(this,Gt).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(ss)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ss)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ne(this,Gt).build(this,t);return r.isStaleByTime(Si(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ss).catch(ss)}fetchInfiniteQuery(e){return e.behavior=U1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ss).catch(ss)}ensureInfiniteQueryData(e){return e.behavior=U1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Oh.isOnline()?ne(this,li).resumePausedMutations():Promise.resolve()}getQueryCache(){return ne(this,Gt)}getMutationCache(){return ne(this,li)}getDefaultOptions(){return ne(this,oi)}setDefaultOptions(e){Re(this,oi,e)}setQueryDefaults(e,t){ne(this,Zo).set(Fl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ne(this,Zo).values()],r={};return t.forEach(s=>{eu(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){ne(this,Jo).set(Fl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ne(this,Jo).values()],r={};return t.forEach(s=>{eu(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ne(this,oi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Jg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ey&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ne(this,oi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ne(this,Gt).clear(),ne(this,li).clear()}},Gt=new WeakMap,li=new WeakMap,oi=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,ci=new WeakMap,ec=new WeakMap,tc=new WeakMap,cN),Pj=k.createContext(void 0),sy=e=>{const t=k.useContext(Pj);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},N3=({client:e,children:t})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Pj.Provider,{value:e,children:t})),Rj=k.createContext(!1),k3=()=>k.useContext(Rj);Rj.Provider;function j3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var S3=k.createContext(j3()),T3=()=>k.useContext(S3),_3=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},E3=e=>{k.useEffect(()=>{e.clearReset()},[e])},C3=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(n&&e.data===void 0||Sj(r,[e.error,s])),D3=e=>{if(e.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...n)=>r(s(...n)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},A3=(e,t)=>e.isLoading&&e.isFetching&&!t,P3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,H1=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function R3(e,t,r){var h,f,x,p,m;const s=k3(),n=T3(),i=sy(r),l=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,l),l._optimisticResults=s?"isRestoring":"optimistic",D3(l),_3(l,n),E3(n);const o=!i.getQueryCache().get(l.queryHash),[c]=k.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),u=!s&&e.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(y=>{const g=u?c.subscribe(xr.batchCalls(y)):ss;return c.updateResult(),g},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(l)},[l,c]),P3(l,d))throw H1(l,c,n);if(C3({result:d,errorResetBoundary:n,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((p=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||p.call(x,l,d),l.experimental_prefetchInRender&&!Rl&&A3(d,s)){const y=o?H1(l,c,n):(m=i.getQueryCache().get(l.queryHash))==null?void 0:m.promise;y==null||y.catch(ss).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function ay(e,t){return R3(e,f3,t)}function Fj(e,t){const r=sy(t),[s]=k.useState(()=>new v3(r,e));k.useEffect(()=>{s.setOptions(e)},[s,e]);const n=k.useSyncExternalStore(k.useCallback(l=>s.subscribe(xr.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=k.useCallback((l,o)=>{s.mutate(l,o).catch(ss)},[s]);if(n.error&&Sj(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const F3="modulepreload",I3=function(e){return"/"+e},K1={},Ij=function(t,r,s){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=I3(i),i in K1)return;K1[i]=!0;const l=i.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(!!s)for(let u=n.length-1;u>=0;u--){const h=n[u];if(h.href===i&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":F3,l||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),l)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i})};var M3=function(){return null};const Ro=new WeakMap,J0=new WeakMap,Lh={current:[]};let Fm=!1,yd=0;const td=new Set,x0=new Map;function Mj(e){const t=Array.from(e).sort((r,s)=>r instanceof Fo&&r.options.deps.includes(s)?1:s instanceof Fo&&s.options.deps.includes(r)?-1:0);for(const r of t){if(Lh.current.includes(r))continue;Lh.current.push(r),r.recompute();const s=J0.get(r);if(s)for(const n of s){const i=Ro.get(n);i&&Mj(i)}}}function O3(e){const t={prevVal:e.prevState,currentVal:e.state};for(const r of e.listeners)r(t)}function L3(e){const t={prevVal:e.prevState,currentVal:e.state};for(const r of e.listeners)r(t)}function Oj(e){if(yd>0&&!x0.has(e)&&x0.set(e,e.prevState),td.add(e),!(yd>0)&&!Fm)try{for(Fm=!0;td.size>0;){const t=Array.from(td);td.clear();for(const r of t){const s=x0.get(r)??r.prevState;r.prevState=s,O3(r)}for(const r of t){const s=Ro.get(r);s&&(Lh.current.push(r),Mj(s))}for(const r of t){const s=Ro.get(r);if(s)for(const n of s)L3(n)}}}finally{Fm=!1,Lh.current=[],x0.clear()}}function vd(e){yd++;try{e()}finally{if(yd--,yd===0){const t=td.values().next().value;t&&Oj(t)}}}function B3(e){return typeof e=="function"}class fp{constructor(t,r){this.listeners=new Set,this.subscribe=s=>{var n,i;this.listeners.add(s);const l=(i=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:i.call(n,s,this);return()=>{this.listeners.delete(s),l==null||l()}},this.prevState=t,this.state=t,this.options=r}setState(t){var r,s,n;this.prevState=this.state,(r=this.options)!=null&&r.updateFn?this.state=this.options.updateFn(this.prevState)(t):B3(t)?this.state=t(this.prevState):this.state=t,(n=(s=this.options)==null?void 0:s.onUpdate)==null||n.call(s),Oj(this)}}class Fo{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const r=this.options.deps.length,s=new Array(r),n=new Array(r);for(let i=0;i<r;i++){const l=this.options.deps[i];s[i]=l.prevState,n[i]=l.state}return this.lastSeenDepValues=n,{prevDepVals:s,currDepVals:n,prevVal:this.prevState??void 0}},this.recompute=()=>{var r,s;this.prevState=this.state;const n=this.getDepVals();this.state=this.options.fn(n),(s=(r=this.options).onUpdate)==null||s.call(r)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof Fo&&i.checkIfRecalculationNeededDeeply();let r=!1;const s=this.lastSeenDepValues,{currDepVals:n}=this.getDepVals();for(let i=0;i<n.length;i++)if(n[i]!==s[i]){r=!0;break}r&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const r of this._subscriptions)r()}),this.subscribe=r=>{var s,n;this.listeners.add(r);const i=(n=(s=this.options).onSubscribe)==null?void 0:n.call(s,r,this);return()=>{this.listeners.delete(r),i==null||i()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const r of t)if(r instanceof Fo)r.registerOnGraph(),this.registerOnGraph(r.options.deps);else if(r instanceof fp){let s=Ro.get(r);s||(s=new Set,Ro.set(r,s)),s.add(this);let n=J0.get(this);n||(n=new Set,J0.set(this,n)),n.add(r)}}unregisterFromGraph(t=this.options.deps){for(const r of t)if(r instanceof Fo)this.unregisterFromGraph(r.options.deps);else if(r instanceof fp){const s=Ro.get(r);s&&s.delete(this);const n=J0.get(this);n&&n.delete(r)}}}const Ti="__TSR_index",G1="popstate",W1="beforeunload";function z3(e){let t=e.getLocation();const r=new Set,s=l=>{t=e.getLocation(),r.forEach(o=>o({location:t,action:l}))},n=l=>{e.notifyOnIndexChange??!0?s(l):t=e.getLocation()},i=async({task:l,navigateOpts:o,...c})=>{var f,x;if((o==null?void 0:o.ignoreBlocker)??!1){l();return}const u=((f=e.getBlockers)==null?void 0:f.call(e))??[],h=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&u.length&&h)for(const p of u){const m=Bh(c.path,c.state);if(await p.blockerFn({currentLocation:t,nextLocation:m,action:c.type})){(x=e.onBlocked)==null||x.call(e);return}}l()};return{get location(){return t},get length(){return e.getLength()},subscribers:r,subscribe:l=>(r.add(l),()=>{r.delete(l)}),push:(l,o,c)=>{const d=t.state[Ti];o=Y1(d+1,o),i({task:()=>{e.pushState(l,o),s({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:l,state:o})},replace:(l,o,c)=>{const d=t.state[Ti];o=Y1(d,o),i({task:()=>{e.replaceState(l,o),s({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:l,state:o})},go:(l,o)=>{i({task:()=>{e.go(l),n({type:"GO",index:l})},navigateOpts:o,type:"GO"})},back:l=>{i({task:()=>{e.back((l==null?void 0:l.ignoreBlocker)??!1),n({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{i({task:()=>{e.forward((l==null?void 0:l.ignoreBlocker)??!1),n({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>t.state[Ti]!==0,createHref:l=>e.createHref(l),block:l=>{var c;if(!e.setBlockers)return()=>{};const o=((c=e.getBlockers)==null?void 0:c.call(e))??[];return e.setBlockers([...o,l]),()=>{var u,h;const d=((u=e.getBlockers)==null?void 0:u.call(e))??[];(h=e.setBlockers)==null||h.call(e,d.filter(f=>f!==l))}},flush:()=>{var l;return(l=e.flush)==null?void 0:l.call(e)},destroy:()=>{var l;return(l=e.destroy)==null?void 0:l.call(e)},notify:s}}function Y1(e,t){t||(t={});const r=ny();return{...t,key:r,__TSR_key:r,[Ti]:e}}function $3(e){var w,_;const t=(e==null?void 0:e.window)??(typeof document<"u"?window:void 0),r=t.history.pushState,s=t.history.replaceState;let n=[];const i=()=>n,l=C=>n=C,o=(e==null?void 0:e.createHref)??(C=>C),c=(e==null?void 0:e.parseLocation)??(()=>Bh(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!((w=t.history.state)!=null&&w.__TSR_key)&&!((_=t.history.state)!=null&&_.key)){const C=ny();t.history.replaceState({[Ti]:0,key:C,__TSR_key:C},"")}let d=c(),u,h=!1,f=!1,x=!1,p=!1;const m=()=>d;let y,g;const v=()=>{y&&(E._ignoreSubscribers=!0,(y.isPush?t.history.pushState:t.history.replaceState)(y.state,"",y.href),E._ignoreSubscribers=!1,y=void 0,g=void 0,u=void 0)},b=(C,T,j)=>{const F=o(T);g||(u=d),d=Bh(T,j),y={href:F,state:j,isPush:(y==null?void 0:y.isPush)||C==="push"},g||(g=Promise.resolve().then(()=>v()))},S=C=>{d=c(),E.notify({type:C})},D=async()=>{if(f){f=!1;return}const C=c(),T=C.state[Ti]-d.state[Ti],j=T===1,F=T===-1,O=!j&&!F||h;h=!1;const z=O?"GO":F?"BACK":"FORWARD",G=O?{type:"GO",index:T}:{type:F?"BACK":"FORWARD"};if(x)x=!1;else{const q=i();if(typeof document<"u"&&q.length){for(const H of q)if(await H.blockerFn({currentLocation:d,nextLocation:C,action:z})){f=!0,t.history.go(1),E.notify(G);return}}}d=c(),E.notify(G)},N=C=>{if(p){p=!1;return}let T=!1;const j=i();if(typeof document<"u"&&j.length)for(const F of j){const O=F.enableBeforeUnload??!0;if(O===!0){T=!0;break}if(typeof O=="function"&&O()===!0){T=!0;break}}if(T)return C.preventDefault(),C.returnValue=""},E=z3({getLocation:m,getLength:()=>t.history.length,pushState:(C,T)=>b("push",C,T),replaceState:(C,T)=>b("replace",C,T),back:C=>(C&&(x=!0),p=!0,t.history.back()),forward:C=>{C&&(x=!0),p=!0,t.history.forward()},go:C=>{h=!0,t.history.go(C)},createHref:C=>o(C),flush:v,destroy:()=>{t.history.pushState=r,t.history.replaceState=s,t.removeEventListener(W1,N,{capture:!0}),t.removeEventListener(G1,D)},onBlocked:()=>{u&&d!==u&&(d=u)},getBlockers:i,setBlockers:l,notifyOnIndexChange:!1});return t.addEventListener(W1,N,{capture:!0}),t.addEventListener(G1,D),t.history.pushState=function(...C){const T=r.apply(t.history,C);return E._ignoreSubscribers||S("PUSH"),T},t.history.replaceState=function(...C){const T=s.apply(t.history,C);return E._ignoreSubscribers||S("REPLACE"),T},E}function Bh(e,t){const r=e.indexOf("#"),s=e.indexOf("?"),n=ny();return{href:e,pathname:e.substring(0,r>0?s>0?Math.min(r,s):r:s>0?s:e.length),hash:r>-1?e.substring(r):"",search:s>-1?e.slice(s,r===-1?void 0:r):"",state:t||{[Ti]:0,key:n,__TSR_key:n}}}function ny(){return(Math.random()+1).toString(36).substring(7)}function mp(e){return e[e.length-1]}function U3(e){return typeof e=="function"}function Nl(e,t){return U3(e)?e(t):e}const V3=Object.prototype.hasOwnProperty;function Ks(e,t){if(e===t)return e;const r=t,s=Q1(e)&&Q1(r);if(!s&&!(zh(e)&&zh(r)))return r;const n=s?e:q1(e);if(!n)return r;const i=s?r:q1(r);if(!i)return r;const l=n.length,o=i.length,c=s?new Array(o):{};let d=0;for(let u=0;u<o;u++){const h=s?u:i[u],f=e[h],x=r[h];if(f===x){c[h]=f,(s?u<l:V3.call(e,h))&&d++;continue}if(f===null||x===null||typeof f!="object"||typeof x!="object"){c[h]=x;continue}const p=Ks(f,x);c[h]=p,p===f&&d++}return l===o&&d===l?e:c}function q1(e){const t=[],r=Object.getOwnPropertyNames(e);for(const n of r){if(!Object.prototype.propertyIsEnumerable.call(e,n))return!1;t.push(n)}const s=Object.getOwnPropertySymbols(e);for(const n of s){if(!Object.prototype.propertyIsEnumerable.call(e,n))return!1;t.push(n)}return t}function zh(e){if(!X1(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const r=t.prototype;return!(!X1(r)||!r.hasOwnProperty("isPrototypeOf"))}function X1(e){return Object.prototype.toString.call(e)==="[object Object]"}function Q1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kl(e,t,r){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let s=0,n=e.length;s<n;s++)if(!kl(e[s],t[s],r))return!1;return!0}if(zh(e)&&zh(t)){const s=(r==null?void 0:r.ignoreUndefined)??!0;if(r!=null&&r.partial){for(const l in t)if((!s||t[l]!==void 0)&&!kl(e[l],t[l],r))return!1;return!0}let n=0;if(!s)n=Object.keys(e).length;else for(const l in e)e[l]!==void 0&&n++;let i=0;for(const l in t)if((!s||t[l]!==void 0)&&(i++,i>n||!kl(e[l],t[l],r)))return!1;return n===i}return!1}function cc(e){let t,r;const s=new Promise((n,i)=>{t=n,r=i});return s.status="pending",s.resolve=n=>{s.status="resolved",s.value=n,t(n),e==null||e(n)},s.reject=n=>{s.status="rejected",r(n)},s}function _i(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}var H3="Invariant failed";function Dn(e,t){if(!e)throw new Error(H3)}const vs="__root__",Qa=0,Il=1,dc=2,uc=3;function Nn(e){return iy(e.filter(t=>t!==void 0).join("/"))}function iy(e){return e.replace(/\/{2,}/g,"/")}function ly(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Ei(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function eh(e){return Ei(ly(e))}function $h(e,t){return e!=null&&e.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function K3(e,t,r){return $h(e,r)===$h(t,r)}function G3(e){const{type:t,value:r}=e;if(t===Qa)return r;const{prefixSegment:s,suffixSegment:n}=e;if(t===Il){const i=r.substring(1);if(s&&n)return`${s}{$${i}}${n}`;if(s)return`${s}{$${i}}`;if(n)return`{$${i}}${n}`}if(t===uc){const i=r.substring(1);return s&&n?`${s}{-$${i}}${n}`:s?`${s}{-$${i}}`:n?`{-$${i}}${n}`:`{-$${i}}`}if(t===dc){if(s&&n)return`${s}{$}${n}`;if(s)return`${s}{$}`;if(n)return`{$}${n}`}return r}function W3({base:e,to:t,trailingSlash:r="never",parseCache:s}){var c;let n=Lj(e,s).slice();const i=Lf(t,s);n.length>1&&((c=mp(n))==null?void 0:c.value)==="/"&&n.pop();for(let d=0,u=i.length;d<u;d++){const h=i[d],f=h.value;f==="/"?d?d===u-1&&n.push(h):n=[h]:f===".."?n.pop():f==="."||n.push(h)}n.length>1&&(mp(n).value==="/"?r==="never"&&n.pop():r==="always"&&n.push({type:Qa,value:"/"}));const l=n.map(G3);return Nn(l)}const Lj=(e,t)=>Bj(e,t,!0),Lf=(e,t)=>Bj(e,t,!1),Bj=(e,t,r)=>{if(!e)return[];const s=t==null?void 0:t.get(e);if(s)return s;const n=J3(e,r);return t==null||t.set(e,n),n},Y3=/^\$.{1,}$/,q3=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,X3=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,Q3=/^\$$/,Z3=/^(.*?)\{\$\}(.*)$/;function J3(e,t){e=iy(e);const r=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),r.push({type:Qa,value:"/"})),!e)return r;const s=e.split("/").filter(Boolean);return r.push(...s.map(n=>{const i=!t&&n!==vs&&n.slice(-1)==="_"?n.slice(0,-1):n,l=i.match(Z3);if(l){const d=l[1],u=l[2];return{type:dc,value:"$",prefixSegment:d||void 0,suffixSegment:u||void 0}}const o=i.match(X3);if(o){const d=o[1],u=o[2],h=o[3];return{type:uc,value:u,prefixSegment:d||void 0,suffixSegment:h||void 0}}const c=i.match(q3);if(c){const d=c[1],u=c[2],h=c[3];return{type:Il,value:""+u,prefixSegment:d||void 0,suffixSegment:h||void 0}}if(Y3.test(i)){const d=i.substring(1);return{type:Il,value:"$"+d,prefixSegment:void 0,suffixSegment:void 0}}return Q3.test(i)?{type:dc,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:Qa,value:i.includes("%25")?i.split("%25").map(d=>decodeURI(d)).join("%25"):decodeURI(i)}})),e.slice(-1)==="/"&&(e=e.substring(1),r.push({type:Qa,value:"/"})),r}function p0({path:e,params:t,leaveWildcards:r,leaveParams:s,decodeCharMap:n,parseCache:i}){const l=Lf(e,i);function o(h){const f=t[h],x=typeof f=="string";return h==="*"||h==="_splat"?x?encodeURI(f):f:x?eD(f,n):f}let c=!1;const d={},u=Nn(l.map(h=>{if(h.type===Qa)return h.value;if(h.type===dc){d._splat=t._splat,d["*"]=t._splat;const f=h.prefixSegment||"",x=h.suffixSegment||"";if(!("_splat"in t))return c=!0,r?`${f}${h.value}${x}`:f||x?`${f}${x}`:void 0;const p=o("_splat");return r?`${f}${h.value}${p??""}${x}`:`${f}${p}${x}`}if(h.type===Il){const f=h.value.substring(1);!c&&!(f in t)&&(c=!0),d[f]=t[f];const x=h.prefixSegment||"",p=h.suffixSegment||"";if(s){const m=o(h.value);return`${x}${h.value}${m??""}${p}`}return`${x}${o(f)??"undefined"}${p}`}if(h.type===uc){const f=h.value.substring(1),x=h.prefixSegment||"",p=h.suffixSegment||"";if(!(f in t)||t[f]==null)return r?`${x}${f}${p}`:x||p?`${x}${p}`:void 0;if(d[f]=t[f],s){const m=o(h.value);return`${x}${h.value}${m??""}${p}`}return r?`${x}${f}${o(f)??""}${p}`:`${x}${o(f)??""}${p}`}return h.value}));return{usedParams:d,interpolatedPath:u,isMissingParams:c}}function eD(e,t){let r=encodeURIComponent(e);if(t)for(const[s,n]of t)r=r.replaceAll(s,n);return r}function xp(e,t,r){const s=tD(e,t,r);if(!(t.to&&!s))return s??{}}function tD(e,{to:t,fuzzy:r,caseSensitive:s},n){const i=t,l=Lj(e.startsWith("/")?e:`/${e}`,n),o=Lf(i.startsWith("/")?i:`/${i}`,n),c={};return rD(l,o,c,r,s)?c:void 0}function rD(e,t,r,s,n){var o,c,d;let i=0,l=0;for(;i<e.length||l<t.length;){const u=e[i],h=t[l];if(h){if(h.type===dc){const f=e.slice(i);let x;if(h.prefixSegment||h.suffixSegment){if(!u)return!1;const p=h.prefixSegment||"",m=h.suffixSegment||"",y=u.value;if("prefixSegment"in h&&!y.startsWith(p)||"suffixSegment"in h&&!((o=e[e.length-1])!=null&&o.value.endsWith(m)))return!1;let g=decodeURI(Nn(f.map(v=>v.value)));p&&g.startsWith(p)&&(g=g.slice(p.length)),m&&g.endsWith(m)&&(g=g.slice(0,g.length-m.length)),x=g}else x=decodeURI(Nn(f.map(p=>p.value)));return r["*"]=x,r._splat=x,!0}if(h.type===Qa){if(h.value==="/"&&!(u!=null&&u.value)){l++;continue}if(u){if(n){if(h.value!==u.value)return!1}else if(h.value.toLowerCase()!==u.value.toLowerCase())return!1;i++,l++;continue}else return!1}if(h.type===Il){if(!u||u.value==="/")return!1;let f="",x=!1;if(h.prefixSegment||h.suffixSegment){const p=h.prefixSegment||"",m=h.suffixSegment||"",y=u.value;if(p&&!y.startsWith(p)||m&&!y.endsWith(m))return!1;let g=y;p&&g.startsWith(p)&&(g=g.slice(p.length)),m&&g.endsWith(m)&&(g=g.slice(0,g.length-m.length)),f=decodeURIComponent(g),x=!0}else f=decodeURIComponent(u.value),x=!0;x&&(r[h.value.substring(1)]=f,i++),l++;continue}if(h.type===uc){if(!u){l++;continue}if(u.value==="/"){l++;continue}let f="",x=!1;if(h.prefixSegment||h.suffixSegment){const p=h.prefixSegment||"",m=h.suffixSegment||"",y=u.value;if((!p||y.startsWith(p))&&(!m||y.endsWith(m))){let g=y;p&&g.startsWith(p)&&(g=g.slice(p.length)),m&&g.endsWith(m)&&(g=g.slice(0,g.length-m.length)),f=decodeURIComponent(g),x=!0}}else{let p=!0;for(let m=l+1;m<t.length;m++){const y=t[m];if((y==null?void 0:y.type)===Qa&&y.value===u.value){p=!1;break}if((y==null?void 0:y.type)===Il||(y==null?void 0:y.type)===dc){e.length<t.length&&(p=!1);break}}p&&(f=decodeURIComponent(u.value),x=!0)}x&&(r[h.value.substring(1)]=f,i++),l++;continue}}if(i<e.length&&l>=t.length)return r["**"]=Nn(e.slice(i).map(f=>f.value)),!!s&&((c=t[t.length-1])==null?void 0:c.value)!=="/";if(l<t.length&&i>=e.length){for(let f=l;f<t.length;f++)if(((d=t[f])==null?void 0:d.type)!==uc)return!1;break}break}return!0}const sD=.75,aD=1,nD=.5,iD=.4,lD=.25,oD=.2,cD=.05,dD=.02,uD=.01,Z1=2e-4,J1=1e-4;function eb(e,t){return e.prefixSegment&&e.suffixSegment?t+cD+Z1*e.prefixSegment.length+J1*e.suffixSegment.length:e.prefixSegment?t+dD+Z1*e.prefixSegment.length:e.suffixSegment?t+uD+J1*e.suffixSegment.length:t}function hD(e){const t=[];return e.forEach((s,n)=>{var h;if(s.isRoot||!s.path)return;const i=ly(s.fullPath);let l=Lf(i),o=0;for(;l.length>o+1&&((h=l[o])==null?void 0:h.value)==="/";)o++;o>0&&(l=l.slice(o));let c=0,d=!1;const u=l.map((f,x)=>{if(f.value==="/")return sD;if(f.type===Qa)return aD;let p;f.type===Il?p=nD:f.type===uc?(p=iD,c++):p=lD;for(let m=x+1;m<l.length;m++){const y=l[m];if(y.type===Qa&&y.value!=="/")return d=!0,eb(f,p+oD)}return eb(f,p)});t.push({child:s,trimmed:i,parsed:l,index:n,scores:u,optionalParamCount:c,hasStaticAfter:d})}),t.sort((s,n)=>{const i=Math.min(s.scores.length,n.scores.length);for(let l=0;l<i;l++)if(s.scores[l]!==n.scores[l])return n.scores[l]-s.scores[l];if(s.scores.length!==n.scores.length){if(s.optionalParamCount!==n.optionalParamCount){if(s.hasStaticAfter===n.hasStaticAfter)return s.optionalParamCount-n.optionalParamCount;if(s.hasStaticAfter&&!n.hasStaticAfter)return-1;if(!s.hasStaticAfter&&n.hasStaticAfter)return 1}return n.scores.length-s.scores.length}for(let l=0;l<i;l++)if(s.parsed[l].value!==n.parsed[l].value)return s.parsed[l].value>n.parsed[l].value?1:-1;return s.index-n.index}).map((s,n)=>(s.child.rank=n,s.child))}function fD({routeTree:e,initRoute:t}){const r={},s={},n=l=>{l.forEach((o,c)=>{t==null||t(o,c);const d=r[o.id];if(Dn(!d,`Duplicate routes found with id: ${String(o.id)}`),r[o.id]=o,!o.isRoot&&o.path){const h=Ei(o.fullPath);(!s[h]||o.fullPath.endsWith("/"))&&(s[h]=o)}const u=o.children;u!=null&&u.length&&n(u)})};n([e]);const i=hD(Object.values(r));return{routesById:r,routesByPath:s,flatRoutes:i}}function en(e){return!!(e!=null&&e.isNotFound)}function mD(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Uh="tsr-scroll-restoration-v1_3",xD=(e,t)=>{let r;return(...s)=>{r||(r=setTimeout(()=>{e(...s),r=null},t))}};function pD(){const e=mD();if(!e)return null;const t=e.getItem(Uh);let r=t?JSON.parse(t):{};return{state:r,set:s=>(r=Nl(s,r)||r,e.setItem(Uh,JSON.stringify(r)))}}const g0=pD(),pp=e=>e.state.__TSR_key||e.href;function gD(e){const t=[];let r;for(;r=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(r.children,e)+1})`),e=r;return`${t.reverse().join(" > ")}`.toLowerCase()}let Vh=!1;function zj({storageKey:e,key:t,behavior:r,shouldScrollRestoration:s,scrollToTopSelectors:n,location:i}){var d,u;let l;try{l=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(h){console.error(h);return}const o=t||((d=window.history.state)==null?void 0:d.__TSR_key),c=l[o];Vh=!0;e:{if(s&&c&&Object.keys(c).length>0){for(const x in c){const p=c[x];if(x==="window")window.scrollTo({top:p.scrollY,left:p.scrollX,behavior:r});else if(x){const m=document.querySelector(x);m&&(m.scrollLeft=p.scrollX,m.scrollTop=p.scrollY)}}break e}const h=(i??window.location).hash.split("#",2)[1];if(h){const x=((u=window.history.state)==null?void 0:u.__hashScrollIntoViewOptions)??!0;if(x){const p=document.getElementById(h);p&&p.scrollIntoView(x)}break e}const f={top:0,left:0,behavior:r};if(window.scrollTo(f),n)for(const x of n){if(x==="window")continue;const p=typeof x=="function"?x():document.querySelector(x);p&&p.scrollTo(f)}}Vh=!1}function yD(e,t){if(!g0&&!e.isServer||((t??e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!g0))return;e.isScrollRestorationSetup=!0,Vh=!1;const s=e.options.getScrollRestorationKey||pp;window.history.scrollRestoration="manual";const n=i=>{if(Vh||!e.isScrollRestoring)return;let l="";if(i.target===document||i.target===window)l="window";else{const c=i.target.getAttribute("data-scroll-restoration-id");c?l=`[data-scroll-restoration-id="${c}"]`:l=gD(i.target)}const o=s(e.state.location);g0.set(c=>{const d=c[o]||(c[o]={}),u=d[l]||(d[l]={});if(l==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(l){const h=document.querySelector(l);h&&(u.scrollX=h.scrollLeft||0,u.scrollY=h.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",xD(n,100),!0),e.subscribe("onRendered",i=>{const l=s(i.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(zj({storageKey:Uh,key:l,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&g0.set(o=>(o[l]||(o[l]={}),o)))})}function vD(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const r=document.getElementById(e.state.location.hash);r&&r.scrollIntoView(t)}}}function bD(e,t=String){const r=new URLSearchParams;for(const s in e){const n=e[s];n!==void 0&&r.set(s,t(n))}return r.toString()}function Im(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function wD(e){const t=new URLSearchParams(e),r={};for(const[s,n]of t.entries()){const i=r[s];i==null?r[s]=Im(n):Array.isArray(i)?i.push(Im(n)):r[s]=[i,Im(n)]}return r}const ND=jD(JSON.parse),kD=SD(JSON.stringify,JSON.parse);function jD(e){return t=>{t[0]==="?"&&(t=t.substring(1));const r=wD(t);for(const s in r){const n=r[s];if(typeof n=="string")try{r[s]=e(n)}catch{}}return r}}function SD(e,t){const r=typeof t=="function";function s(n){if(typeof n=="object"&&n!==null)try{return e(n)}catch{}else if(r&&typeof n=="string")try{return t(n),e(n)}catch{}return n}return n=>{const i=bD(n,s);return i?`?${i}`:""}}function TD(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const r=new Response(null,{status:e.statusCode,headers:t});if(r.options=e,e.throw)throw r;return r}function Wa(e){return e instanceof Response&&!!e.options}function _D(e){const t=new Map;let r,s;const n=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,s&&(s.next=i,i.prev=s)):(i.next.prev=void 0,r=i.next,i.next=void 0,s&&(i.prev=s,s.next=i)),s=i)};return{get(i){const l=t.get(i);if(l)return n(l),l.value},set(i,l){if(t.size>=e&&r){const c=r;t.delete(c.key),c.next&&(r=c.next,c.next.prev=void 0),c===s&&(s=void 0)}const o=t.get(i);if(o)o.value=l,n(o);else{const c={key:i,value:l,prev:s};s&&(s.next=c),s=c,r||(r=c),t.set(i,c)}}}}const th=e=>{var t;if(!e.rendered)return e.rendered=!0,(t=e.onReady)==null?void 0:t.call(e)},Bf=(e,t)=>!!(e.preload&&!e.router.state.matches.some(r=>r.id===t)),$j=(e,t)=>{var n;const r=e.router.routesById[t.routeId??""]??e.router.routeTree;!r.options.notFoundComponent&&((n=e.router.options)!=null&&n.defaultNotFoundComponent)&&(r.options.notFoundComponent=e.router.options.defaultNotFoundComponent),Dn(r.options.notFoundComponent);const s=e.matches.find(i=>i.routeId===r.id);Dn(s,"Could not find match for route: "+r.id),e.updateMatch(s.id,i=>({...i,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&r.parentRoute&&(t.routeId=r.parentRoute.id,$j(e,t))},hi=(e,t,r)=>{var s,n,i;if(!(!Wa(r)&&!en(r))){if(Wa(r)&&r.redirectHandled&&!r.options.reloadDocument)throw r;if(t){(s=t._nonReactive.beforeLoadPromise)==null||s.resolve(),(n=t._nonReactive.loaderPromise)==null||n.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const l=Wa(r)?"redirected":"notFound";e.updateMatch(t.id,o=>({...o,status:l,isFetching:!1,error:r})),en(r)&&!r.routeId&&(r.routeId=t.routeId),(i=t._nonReactive.loadPromise)==null||i.resolve()}throw Wa(r)?(e.rendered=!0,r.options._fromLocation=e.location,r.redirectHandled=!0,r=e.router.resolveRedirect(r),r):($j(e,r),r)}},Uj=(e,t)=>{const r=e.router.getMatch(t);return!!(!e.router.isServer&&r._nonReactive.dehydrated||e.router.isServer&&r.ssr===!1)},Vc=(e,t,r,s)=>{var o,c;const{id:n,routeId:i}=e.matches[t],l=e.router.looseRoutesById[i];if(r instanceof Promise)throw r;r.routerCode=s,e.firstBadMatchIndex??(e.firstBadMatchIndex=t),hi(e,e.router.getMatch(n),r);try{(c=(o=l.options).onError)==null||c.call(o,r)}catch(d){r=d,hi(e,e.router.getMatch(n),r)}e.updateMatch(n,d=>{var u,h;return(u=d._nonReactive.beforeLoadPromise)==null||u.resolve(),d._nonReactive.beforeLoadPromise=void 0,(h=d._nonReactive.loadPromise)==null||h.resolve(),{...d,error:r,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}})},ED=(e,t,r,s)=>{var x;const n=e.router.getMatch(t),i=(x=e.matches[r-1])==null?void 0:x.id,l=i?e.router.getMatch(i):void 0;if(e.router.isShell()){n.ssr=t===vs;return}if((l==null?void 0:l.ssr)===!1){n.ssr=!1;return}const o=p=>p===!0&&(l==null?void 0:l.ssr)==="data-only"?"data-only":p,c=e.router.options.defaultSsr??!0;if(s.options.ssr===void 0){n.ssr=o(c);return}if(typeof s.options.ssr!="function"){n.ssr=o(s.options.ssr);return}const{search:d,params:u}=n,h={search:y0(d,n.searchError),params:y0(u,n.paramsError),location:e.location,matches:e.matches.map(p=>({index:p.index,pathname:p.pathname,fullPath:p.fullPath,staticData:p.staticData,id:p.id,routeId:p.routeId,search:y0(p.search,p.searchError),params:y0(p.params,p.paramsError),ssr:p.ssr}))},f=s.options.ssr(h);if(_i(f))return f.then(p=>{n.ssr=o(p??c)});n.ssr=o(f??c)},Vj=(e,t,r,s)=>{var l;if(s._nonReactive.pendingTimeout!==void 0)return;const n=r.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!Bf(e,t)&&(r.options.loader||r.options.beforeLoad||Gj(r))&&typeof n=="number"&&n!==1/0&&(r.options.pendingComponent??((l=e.router.options)==null?void 0:l.defaultPendingComponent)))){const o=setTimeout(()=>{th(e)},n);s._nonReactive.pendingTimeout=o}},CD=(e,t,r)=>{const s=e.router.getMatch(t);if(!s._nonReactive.beforeLoadPromise&&!s._nonReactive.loaderPromise)return;Vj(e,t,r,s);const n=()=>{const i=e.router.getMatch(t);i.preload&&(i.status==="redirected"||i.status==="notFound")&&hi(e,i,i.error)};return s._nonReactive.beforeLoadPromise?s._nonReactive.beforeLoadPromise.then(n):n()},DD=(e,t,r,s)=>{var E;const n=e.router.getMatch(t),i=n._nonReactive.loadPromise;n._nonReactive.loadPromise=cc(()=>{i==null||i.resolve()});const{paramsError:l,searchError:o}=n;l&&Vc(e,r,l,"PARSE_PARAMS"),o&&Vc(e,r,o,"VALIDATE_SEARCH"),Vj(e,t,s,n);const c=new AbortController,d=(E=e.matches[r-1])==null?void 0:E.id,u=d?e.router.getMatch(d):void 0,f={...(u==null?void 0:u.context)??e.router.options.context??void 0,...n.__routeContext};let x=!1;const p=()=>{x||(x=!0,e.updateMatch(t,w=>({...w,isFetching:"beforeLoad",fetchCount:w.fetchCount+1,abortController:c,context:f})))},m=()=>{var w;(w=n._nonReactive.beforeLoadPromise)==null||w.resolve(),n._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,_=>({..._,isFetching:!1}))};if(!s.options.beforeLoad){vd(()=>{p(),m()});return}n._nonReactive.beforeLoadPromise=cc();const{search:y,params:g,cause:v}=n,b=Bf(e,t),S={search:y,abortController:c,params:g,preload:b,context:f,location:e.location,navigate:w=>e.router.navigate({...w,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:b?"preload":v,matches:e.matches,...e.router.options.additionalContext},D=w=>{if(w===void 0){vd(()=>{p(),m()});return}(Wa(w)||en(w))&&(p(),Vc(e,r,w,"BEFORE_LOAD")),vd(()=>{p(),e.updateMatch(t,_=>({..._,__beforeLoadContext:w,context:{..._.context,...w}})),m()})};let N;try{if(N=s.options.beforeLoad(S),_i(N))return p(),N.catch(w=>{Vc(e,r,w,"BEFORE_LOAD")}).then(D)}catch(w){p(),Vc(e,r,w,"BEFORE_LOAD")}D(N)},AD=(e,t)=>{const{id:r,routeId:s}=e.matches[t],n=e.router.looseRoutesById[s],i=()=>{if(e.router.isServer){const c=ED(e,r,t,n);if(_i(c))return c.then(o)}return o()},l=()=>DD(e,r,t,n),o=()=>{if(Uj(e,r))return;const c=CD(e,r,n);return _i(c)?c.then(l):l()};return i()},bd=(e,t,r)=>{var i,l,o,c,d,u;const s=e.router.getMatch(t);if(!s||!r.options.head&&!r.options.scripts&&!r.options.headers)return;const n={matches:e.matches,match:s,params:s.params,loaderData:s.loaderData};return Promise.all([(l=(i=r.options).head)==null?void 0:l.call(i,n),(c=(o=r.options).scripts)==null?void 0:c.call(o,n),(u=(d=r.options).headers)==null?void 0:u.call(d,n)]).then(([h,f,x])=>{const p=h==null?void 0:h.meta,m=h==null?void 0:h.links,y=h==null?void 0:h.scripts,g=h==null?void 0:h.styles;return{meta:p,links:m,headScripts:y,headers:x,scripts:f,styles:g}})},Hj=(e,t,r,s)=>{const n=e.matchPromises[r-1],{params:i,loaderDeps:l,abortController:o,context:c,cause:d}=e.router.getMatch(t),u=Bf(e,t);return{params:i,deps:l,preload:!!u,parentMatchPromise:n,abortController:o,context:c,location:e.location,navigate:h=>e.router.navigate({...h,_fromLocation:e.location}),cause:u?"preload":d,route:s,...e.router.options.additionalContext}},tb=async(e,t,r,s)=>{var n,i,l,o;try{const c=e.router.getMatch(t);try{(!e.router.isServer||c.ssr===!0)&&Kj(s);const d=(i=(n=s.options).loader)==null?void 0:i.call(n,Hj(e,t,r,s)),u=s.options.loader&&_i(d);if(!!(u||s._lazyPromise||s._componentsPromise||s.options.head||s.options.scripts||s.options.headers||c._nonReactive.minPendingPromise)&&e.updateMatch(t,m=>({...m,isFetching:"loader"})),s.options.loader){const m=u?await d:d;hi(e,e.router.getMatch(t),m),m!==void 0&&e.updateMatch(t,y=>({...y,loaderData:m}))}s._lazyPromise&&await s._lazyPromise;const f=bd(e,t,s),x=f?await f:void 0,p=c._nonReactive.minPendingPromise;p&&await p,s._componentsPromise&&await s._componentsPromise,e.updateMatch(t,m=>({...m,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...x}))}catch(d){let u=d;const h=c._nonReactive.minPendingPromise;h&&await h,hi(e,e.router.getMatch(t),d);try{(o=(l=s.options).onError)==null||o.call(l,d)}catch(p){u=p,hi(e,e.router.getMatch(t),p)}const f=bd(e,t,s),x=f?await f:void 0;e.updateMatch(t,p=>({...p,error:u,status:"error",isFetching:!1,...x}))}}catch(c){const d=e.router.getMatch(t);if(d){const u=bd(e,t,s);if(u){const h=await u;e.updateMatch(t,f=>({...f,...h}))}d._nonReactive.loaderPromise=void 0}hi(e,d,c)}},PD=async(e,t)=>{var d,u;const{id:r,routeId:s}=e.matches[t];let n=!1,i=!1;const l=e.router.looseRoutesById[s];if(Uj(e,r)){if(e.router.isServer){const h=bd(e,r,l);if(h){const f=await h;e.updateMatch(r,x=>({...x,...f}))}return e.router.getMatch(r)}}else{const h=e.router.getMatch(r);if(h._nonReactive.loaderPromise){if(h.status==="success"&&!e.sync&&!h.preload)return h;await h._nonReactive.loaderPromise;const f=e.router.getMatch(r);f.error&&hi(e,f,f.error)}else{const f=Date.now()-h.updatedAt,x=Bf(e,r),p=x?l.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??e.router.options.defaultStaleTime??0,m=l.options.shouldReload,y=typeof m=="function"?m(Hj(e,r,t,l)):m,g=!!x&&!e.router.state.matches.some(D=>D.id===r),v=e.router.getMatch(r);v._nonReactive.loaderPromise=cc(),g!==v.preload&&e.updateMatch(r,D=>({...D,preload:g}));const{status:b,invalid:S}=v;if(n=b==="success"&&(S||(y??f>p)),!(x&&l.options.preload===!1))if(n&&!e.sync)i=!0,(async()=>{var D,N;try{await tb(e,r,t,l);const E=e.router.getMatch(r);(D=E._nonReactive.loaderPromise)==null||D.resolve(),(N=E._nonReactive.loadPromise)==null||N.resolve(),E._nonReactive.loaderPromise=void 0}catch(E){Wa(E)&&await e.router.navigate(E.options)}})();else if(b!=="success"||n&&e.sync)await tb(e,r,t,l);else{const D=bd(e,r,l);if(D){const N=await D;e.updateMatch(r,E=>({...E,...N}))}}}}const o=e.router.getMatch(r);i||((d=o._nonReactive.loaderPromise)==null||d.resolve(),(u=o._nonReactive.loadPromise)==null||u.resolve()),clearTimeout(o._nonReactive.pendingTimeout),o._nonReactive.pendingTimeout=void 0,i||(o._nonReactive.loaderPromise=void 0),o._nonReactive.dehydrated=void 0;const c=i?o.isFetching:!1;return c!==o.isFetching||o.invalid!==!1?(e.updateMatch(r,h=>({...h,isFetching:c,invalid:!1})),e.router.getMatch(r)):o};async function rb(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(r=>r._forcePending)&&th(t);try{for(let n=0;n<t.matches.length;n++){const i=AD(t,n);_i(i)&&await i}const r=t.firstBadMatchIndex??t.matches.length;for(let n=0;n<r;n++)t.matchPromises.push(PD(t,n));await Promise.all(t.matchPromises);const s=th(t);_i(s)&&await s}catch(r){if(en(r)&&!t.preload){const s=th(t);throw _i(s)&&await s,r}if(Wa(r))throw r}return t.matches}async function Kj(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:r,...s}=t.options;Object.assign(e.options,s),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{var s;const r=[];for(const n of Wj){const i=(s=e.options[n])==null?void 0:s.preload;i&&r.push(i())}if(r.length)return Promise.all(r).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function y0(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function Gj(e){var t;for(const r of Wj)if((t=e.options[r])!=null&&t.preload)return!0;return!1}const Wj=["component","errorComponent","pendingComponent","notFoundComponent"];function RD(e){return{input:({url:t})=>{for(const r of e)t=Yj(r,t);return t},output:({url:t})=>{for(let r=e.length-1;r>=0;r--)t=qj(e[r],t);return t}}}function FD(e){const t=eh(e.basepath),r=`/${t}`,s=`${r}/`,n=e.caseSensitive?r:r.toLowerCase(),i=e.caseSensitive?s:s.toLowerCase();return{input:({url:l})=>{const o=e.caseSensitive?l.pathname:l.pathname.toLowerCase();return o===n?l.pathname="/":o.startsWith(i)&&(l.pathname=l.pathname.slice(r.length)),l},output:({url:l})=>(l.pathname=Nn(["/",t,l.pathname]),l)}}function Yj(e,t){var s;const r=(s=e==null?void 0:e.input)==null?void 0:s.call(e,{url:t});if(r){if(typeof r=="string")return new URL(r);if(r instanceof URL)return r}return t}function qj(e,t){var s;const r=(s=e==null?void 0:e.output)==null?void 0:s.call(e,{url:t});if(r){if(typeof r=="string")return new URL(r);if(r instanceof URL)return r}return t}function jl(e){const t=e.resolvedLocation,r=e.location,s=(t==null?void 0:t.pathname)!==r.pathname,n=(t==null?void 0:t.href)!==r.href,i=(t==null?void 0:t.hash)!==r.hash;return{fromLocation:t,toLocation:r,pathChanged:s,hrefChanged:n,hashChanged:i}}class ID{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=r=>r(),this.update=r=>{var f;r.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const s=this.options,n=this.basepath??(s==null?void 0:s.basepath)??"/",i=this.basepath===void 0,l=s==null?void 0:s.rewrite;this.options={...s,...r},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(x=>[encodeURIComponent(x),x])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=$3())),this.origin=this.options.origin,this.origin||(!this.isServer&&(window!=null&&window.origin)&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new fp(OD(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(x=>!["redirected"].includes(x.status))}}}),yD(this));let o=!1;const c=this.options.basepath??"/",d=this.options.rewrite;if(i||n!==c||l!==d){this.basepath=c;const x=[];eh(c)!==""&&x.push(FD({basepath:c})),d&&x.push(d),this.rewrite=x.length===0?void 0:x.length===1?x[0]:RD(x),this.history&&this.updateLatestLocation(),o=!0}o&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof((f=window.CSS)==null?void 0:f.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:r,routesByPath:s,flatRoutes:n}=fD({routeTree:this.routeTree,initRoute:(l,o)=>{l.init({originalIndex:o})}});this.routesById=r,this.routesByPath=s,this.flatRoutes=n;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(r,s)=>{const n={eventType:r,fn:s};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=r=>{this.subscribers.forEach(s=>{s.eventType===r.type&&s.fn(r)})},this.parseLocation=(r,s)=>{const n=({href:c,state:d})=>{const u=new URL(c,this.origin),h=Yj(this.rewrite,u),f=this.options.parseSearch(h.search),x=this.options.stringifySearch(f);h.search=x;const p=h.href.replace(h.origin,""),{pathname:m,hash:y}=h;return{href:p,publicHref:c,url:h.href,pathname:m,searchStr:x,search:Ks(s==null?void 0:s.search,f),hash:y.split("#").reverse()[0]??"",state:Ks(s==null?void 0:s.state,d)}},i=n(r),{__tempLocation:l,__tempKey:o}=i.state;if(l&&(!o||o===this.tempLocationKey)){const c=n(l);return c.state.key=i.state.key,c.state.__TSR_key=i.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:i}}return i},this.resolvePathWithBase=(r,s)=>W3({base:r,to:iy(s),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(r,s,n)=>typeof r=="string"?this.matchRoutesInternal({pathname:r,search:s},n):this.matchRoutesInternal(r,s),this.parsePathnameCache=_D(1e3),this.getMatchedRoutes=(r,s)=>LD({pathname:r,routePathname:s,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=r=>{const s=this.getMatch(r);s&&(s.abortController.abort(),clearTimeout(s._nonReactive.pendingTimeout),s._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{var r;(r=this.state.pendingMatches)==null||r.forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=r=>{const s=(i={})=>{var C,T;const l=i._fromLocation||this.latestLocation,o=this.matchRoutes(l,{_buildLocation:!0}),c=mp(o);i.from;const d=i.unsafeRelative==="path"?l.pathname:i.from??c.fullPath,u=this.resolvePathWithBase(d,"."),h=c.search,f={...c.params},x=i.to?this.resolvePathWithBase(u,`${i.to}`):this.resolvePathWithBase(u,"."),p=i.params===!1||i.params===null?{}:(i.params??!0)===!0?f:Object.assign(f,Nl(i.params,f)),m=p0({path:x,params:p,parseCache:this.parsePathnameCache}).interpolatedPath,y=this.matchRoutes(m,void 0,{_buildLocation:!0}).map(j=>this.looseRoutesById[j.routeId]);if(Object.keys(p).length>0)for(const j of y){const F=((C=j.options.params)==null?void 0:C.stringify)??j.options.stringifyParams;F&&Object.assign(p,F(p))}const g=p0({path:x,params:p,leaveWildcards:!1,leaveParams:r.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let v=h;if(r._includeValidateSearch&&((T=this.options.search)!=null&&T.strict)){const j={};y.forEach(F=>{if(F.options.validateSearch)try{Object.assign(j,gp(F.options.validateSearch,{...j,...v}))}catch{}}),v=j}v=BD({search:v,dest:i,destRoutes:y,_includeValidateSearch:r._includeValidateSearch}),v=Ks(h,v);const b=this.options.stringifySearch(v),S=i.hash===!0?l.hash:i.hash?Nl(i.hash,l.hash):void 0,D=S?`#${S}`:"";let N=i.state===!0?l.state:i.state?Nl(i.state,l.state):{};N=Ks(l.state,N);const E=`${g}${b}${D}`,w=new URL(E,this.origin),_=qj(this.rewrite,w);return{publicHref:_.pathname+_.search+_.hash,href:E,url:_.href,pathname:g,search:v,searchStr:b,state:N,hash:S??"",unmaskOnReload:i.unmaskOnReload}},n=(i={},l)=>{var d;const o=s(i);let c=l?s(l):void 0;if(!c){let u={};const h=(d=this.options.routeMasks)==null?void 0:d.find(f=>{const x=xp(o.pathname,{to:f.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return x?(u=x,!0):!1});if(h){const{from:f,...x}=h;l={from:r.from,...x,params:u},c=s(l)}}return c&&(o.maskedLocation=c),o};return r.mask?n(r,{from:r.from,...r.mask}):n(r)},this.commitLocation=({viewTransition:r,ignoreBlocker:s,...n})=>{const i=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(u=>{n.state[u]=this.latestLocation.state[u]});const d=kl(n.state,this.latestLocation.state);return c.forEach(u=>{delete n.state[u]}),d},l=Ei(this.latestLocation.href)===Ei(n.href),o=this.commitLocationPromise;if(this.commitLocationPromise=cc(()=>{o==null||o.resolve()}),l&&i())this.load();else{let{maskedLocation:c,hashScrollIntoView:d,...u}=n;c&&(u={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=r,this.history[n.replace?"replace":"push"](u.publicHref,u.state,{ignoreBlocker:s})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:r,resetScroll:s,hashScrollIntoView:n,viewTransition:i,ignoreBlocker:l,href:o,...c}={})=>{if(o){const u=this.history.location.state.__TSR_index,h=Bh(o,{__TSR_index:r?u:u+1});c.to=h.pathname,c.search=this.options.parseSearch(h.search),c.hash=h.hash.slice(1)}const d=this.buildLocation({...c,_includeValidateSearch:!0});return this.commitLocation({...d,viewTransition:i,replace:r,resetScroll:s,hashScrollIntoView:n,ignoreBlocker:l})},this.navigate=({to:r,reloadDocument:s,href:n,...i})=>{if(!s&&n)try{new URL(`${n}`),s=!0}catch{}return s?(n||(n=this.buildLocation({to:r,...i}).url),i.replace?window.location.replace(n):window.location.href=n,Promise.resolve()):this.buildAndCommitLocation({...i,href:n,to:r,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const s=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),n=i=>{try{return encodeURI(decodeURI(i))}catch{return i}};if(eh(n(this.latestLocation.href))!==eh(n(s.href))){let i=s.url;throw this.origin&&i.startsWith(this.origin)&&(i=i.replace(this.origin,"")||"/"),TD({href:i})}}const r=this.matchRoutes(this.latestLocation);this.__store.setState(s=>({...s,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:r,cachedMatches:s.cachedMatches.filter(n=>!r.some(i=>i.id===n.id))}))},this.load=async r=>{let s,n,i;for(i=new Promise(l=>{this.startTransition(async()=>{var o;try{this.beforeLoad();const c=this.latestLocation,d=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...jl({resolvedLocation:d,location:c})}),this.emit({type:"onBeforeLoad",...jl({resolvedLocation:d,location:c})}),await rb({router:this,sync:r==null?void 0:r.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let u,h,f;vd(()=>{this.__store.setState(x=>{const p=x.matches,m=x.pendingMatches||x.matches;return u=p.filter(y=>!m.some(g=>g.id===y.id)),h=m.filter(y=>!p.some(g=>g.id===y.id)),f=p.filter(y=>m.some(g=>g.id===y.id)),{...x,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...x.cachedMatches,...u.filter(y=>y.status!=="error")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[h,"onEnter"],[f,"onStay"]].forEach(([x,p])=>{x.forEach(m=>{var y,g;(g=(y=this.looseRoutesById[m.routeId].options)[p])==null||g.call(y,m)})})})}})}catch(c){Wa(c)?(s=c,this.isServer||this.navigate({...s.options,replace:!0,ignoreBlocker:!0})):en(c)&&(n=c),this.__store.setState(d=>({...d,statusCode:s?s.status:n?404:d.matches.some(u=>u.status==="error")?500:200,redirect:s}))}this.latestLoadPromise===i&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),l()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(l=>({...l,statusCode:404}))},this.startViewTransition=r=>{const s=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,s&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let n;if(typeof s=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,l=this.state.resolvedLocation,o=typeof s.types=="function"?s.types(jl({resolvedLocation:l,location:i})):s.types;if(o===!1){r();return}n={update:r,types:o}}else n=r;document.startViewTransition(n)}else r()},this.updateMatch=(r,s)=>{var i;const n=(i=this.state.pendingMatches)!=null&&i.some(l=>l.id===r)?"pendingMatches":this.state.matches.some(l=>l.id===r)?"matches":this.state.cachedMatches.some(l=>l.id===r)?"cachedMatches":"";n&&this.__store.setState(l=>{var o;return{...l,[n]:(o=l[n])==null?void 0:o.map(c=>c.id===r?s(c):c)}})},this.getMatch=r=>{var n;const s=i=>i.id===r;return this.state.cachedMatches.find(s)??((n=this.state.pendingMatches)==null?void 0:n.find(s))??this.state.matches.find(s)},this.invalidate=r=>{const s=n=>{var i;return((i=r==null?void 0:r.filter)==null?void 0:i.call(r,n))??!0?{...n,invalid:!0,...r!=null&&r.forcePending||n.status==="error"?{status:"pending",error:void 0}:void 0}:n};return this.__store.setState(n=>{var i;return{...n,matches:n.matches.map(s),cachedMatches:n.cachedMatches.map(s),pendingMatches:(i=n.pendingMatches)==null?void 0:i.map(s)}}),this.shouldViewTransition=!1,this.load({sync:r==null?void 0:r.sync})},this.resolveRedirect=r=>{if(!r.options.href){const s=this.buildLocation(r.options);let n=s.url;this.origin&&n.startsWith(this.origin)&&(n=n.replace(this.origin,"")||"/"),r.options.href=s.href,r.headers.set("Location",n)}return r.headers.get("Location")||r.headers.set("Location",r.options.href),r},this.clearCache=r=>{const s=r==null?void 0:r.filter;s!==void 0?this.__store.setState(n=>({...n,cachedMatches:n.cachedMatches.filter(i=>!s(i))})):this.__store.setState(n=>({...n,cachedMatches:[]}))},this.clearExpiredCache=()=>{const r=s=>{const n=this.looseRoutesById[s.routeId];if(!n.options.loader)return!0;const i=(s.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return s.status==="error"?!0:Date.now()-s.updatedAt>=i};this.clearCache({filter:r})},this.loadRouteChunk=Kj,this.preloadRoute=async r=>{const s=this.buildLocation(r);let n=this.matchRoutes(s,{throwOnError:!0,preload:!0,dest:r});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(o=>o.id)),l=new Set([...i,...this.state.cachedMatches.map(o=>o.id)]);vd(()=>{n.forEach(o=>{l.has(o.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,o]}))})});try{return n=await rb({router:this,matches:n,location:s,preload:!0,updateMatch:(o,c)=>{i.has(o)?n=n.map(d=>d.id===o?c(d):d):this.updateMatch(o,c)}}),n}catch(o){if(Wa(o))return o.options.reloadDocument?void 0:await this.preloadRoute({...o.options,_fromLocation:s});en(o)||console.error(o);return}},this.matchRoute=(r,s)=>{const n={...r,to:r.to?this.resolvePathWithBase(r.from||"",r.to):void 0,params:r.params||{},leaveParams:!0},i=this.buildLocation(n);if(s!=null&&s.pending&&this.state.status!=="pending")return!1;const o=((s==null?void 0:s.pending)===void 0?!this.state.isLoading:s.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=xp(o.pathname,{...s,to:i.pathname},this.parsePathnameCache);return!c||r.params&&!kl(c,r.params,{partial:!0})?!1:c&&((s==null?void 0:s.includeSearch)??!0)?kl(o.search,i.search,{partial:!0})?c:!1:c},this.hasNotFoundMatch=()=>this.__store.state.matches.some(r=>r.status==="notFound"||r.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??kD,parseSearch:t.parseSearch??ND}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,r){var u;const{foundRoute:s,matchedRoutes:n,routeParams:i}=this.getMatchedRoutes(t.pathname,(u=r==null?void 0:r.dest)==null?void 0:u.to);let l=!1;(s?s.path!=="/"&&i["**"]:Ei(t.pathname))&&(this.options.notFoundRoute?n.push(this.options.notFoundRoute):l=!0);const o=(()=>{if(l){if(this.options.notFoundMode!=="root")for(let h=n.length-1;h>=0;h--){const f=n[h];if(f.children)return f.id}return vs}})(),c=[],d=h=>(h==null?void 0:h.id)?h.context??this.options.context??void 0:this.options.context??void 0;return n.forEach((h,f)=>{var F,O,z;const x=c[f-1],[p,m,y]=(()=>{const G=(x==null?void 0:x.search)??t.search,q=(x==null?void 0:x._strictSearch)??void 0;try{const H=gp(h.options.validateSearch,{...G})??void 0;return[{...G,...H},{...q,...H},void 0]}catch(H){let A=H;if(H instanceof Hh||(A=new Hh(H.message,{cause:H})),r!=null&&r.throwOnError)throw A;return[G,{},A]}})(),g=((O=(F=h.options).loaderDeps)==null?void 0:O.call(F,{search:p}))??"",v=g?JSON.stringify(g):"",{interpolatedPath:b,usedParams:S}=p0({path:h.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),D=p0({path:h.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+v,N=this.getMatch(D),E=this.state.matches.find(G=>G.routeId===h.id),w=(N==null?void 0:N._strictParams)??S;let _;if(!N){const G=((z=h.options.params)==null?void 0:z.parse)??h.options.parseParams;if(G)try{Object.assign(w,G(w))}catch(q){if(_=new MD(q.message,{cause:q}),r!=null&&r.throwOnError)throw _}}Object.assign(i,w);const C=E?"stay":"enter";let T;if(N)T={...N,cause:C,params:E?Ks(E.params,i):i,_strictParams:w,search:Ks(E?E.search:N.search,p),_strictSearch:m};else{const G=h.options.loader||h.options.beforeLoad||h.lazyFn||Gj(h)?"pending":"success";T={id:D,index:f,routeId:h.id,params:E?Ks(E.params,i):i,_strictParams:w,pathname:b,updatedAt:Date.now(),search:E?Ks(E.search,p):p,_strictSearch:m,searchError:void 0,status:G,isFetching:!1,error:void 0,paramsError:_,__routeContext:void 0,_nonReactive:{loadPromise:cc()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:C,loaderDeps:E?Ks(E.loaderDeps,g):g,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:h.options.staticData||{},fullPath:h.fullPath}}r!=null&&r.preload||(T.globalNotFound=o===h.id),T.searchError=y;const j=d(x);T.context={...j,...T.__routeContext,...T.__beforeLoadContext},c.push(T)}),c.forEach((h,f)=>{const x=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&(r==null?void 0:r._buildLocation)!==!0){const m=c[f-1],y=d(m);if(x.options.context){const g={deps:h.loaderDeps,params:h.params,context:y??{},location:t,navigate:v=>this.navigate({...v,_fromLocation:t}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:c};h.__routeContext=x.options.context(g)??void 0}h.context={...y,...h.__routeContext,...h.__beforeLoadContext}}}),c}}class Hh extends Error{}class MD extends Error{}function OD(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function gp(e,t){if(e==null)return{};if("~standard"in e){const r=e["~standard"].validate(t);if(r instanceof Promise)throw new Hh("Async validation not supported");if(r.issues)throw new Hh(JSON.stringify(r.issues,void 0,2),{cause:r});return r.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function LD({pathname:e,routePathname:t,caseSensitive:r,routesByPath:s,routesById:n,flatRoutes:i,parseCache:l}){let o={};const c=Ei(e),d=x=>{var m;return xp(c,{to:x.fullPath,caseSensitive:((m=x.options)==null?void 0:m.caseSensitive)??r,fuzzy:!0},l)};let u=t!==void 0?s[t]:void 0;if(u)o=d(u);else{let x;for(const p of i){const m=d(p);if(m)if(p.path!=="/"&&m["**"])x||(x={foundRoute:p,routeParams:m});else{u=p,o=m;break}}!u&&x&&(u=x.foundRoute,o=x.routeParams)}let h=u||n[vs];const f=[h];for(;h.parentRoute;)h=h.parentRoute,f.push(h);return f.reverse(),{matchedRoutes:f,routeParams:o,foundRoute:u}}function BD({search:e,dest:t,destRoutes:r,_includeValidateSearch:s}){const n=r.reduce((o,c)=>{var u;const d=[];if("search"in c.options)(u=c.options.search)!=null&&u.middlewares&&d.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const h=({search:f,next:x})=>{let p=f;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(p=c.options.preSearchFilters.reduce((y,g)=>g(y),f));const m=x(p);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((y,g)=>g(y),m):m};d.push(h)}if(s&&c.options.validateSearch){const h=({search:f,next:x})=>{const p=x(f);try{return{...p,...gp(c.options.validateSearch,p)??void 0}}catch{return p}};d.push(h)}return o.concat(d)},[])??[],i=({search:o})=>t.search?t.search===!0?o:Nl(t.search,o):{};n.push(i);const l=(o,c)=>{if(o>=n.length)return c;const d=n[o];return d({search:c,next:h=>l(o+1,h)})};return l(0,e)}const zD="Error preloading route! ";class Xj{constructor(t){if(this.init=r=>{var d,u;this.originalIndex=r.originalIndex;const s=this.options,n=!(s!=null&&s.path)&&!(s!=null&&s.id);this.parentRoute=(u=(d=this.options).getParentRoute)==null?void 0:u.call(d),n?this._path=vs:this.parentRoute||Dn(!1);let i=n?vs:s==null?void 0:s.path;i&&i!=="/"&&(i=ly(i));const l=(s==null?void 0:s.id)||i;let o=n?vs:Nn([this.parentRoute.id===vs?"":this.parentRoute.id,l]);i===vs&&(i="/"),o!==vs&&(o=Nn(["/",o]));const c=o===vs?"/":Nn([this.parentRoute.fullPath,i]);this._path=i,this._id=o,this._fullPath=c,this._to=c},this.clone=r=>{this._path=r._path,this._id=r._id,this._fullPath=r._fullPath,this._to=r._to,this.options.getParentRoute=r.options.getParentRoute,this.children=r.children},this.addChildren=r=>this._addFileChildren(r),this._addFileChildren=r=>(Array.isArray(r)&&(this.children=r),typeof r=="object"&&r!==null&&(this.children=Object.values(r)),this),this._addFileTypes=()=>this,this.updateLoader=r=>(Object.assign(this.options,r),this),this.update=r=>(Object.assign(this.options,r),this),this.lazy=r=>(this.lazyFn=r,this),this.options=t||{},this.isRoot=!(t!=null&&t.getParentRoute),t!=null&&t.id&&(t!=null&&t.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class $D extends Xj{constructor(t){super(t)}}function oy(e){const t=e.errorComponent??zf;return a.jsx(UD,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:r,reset:s})=>r?k.createElement(t,{error:r,reset:s}):e.children})}class UD extends k.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,r){r.error&&r.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,r){this.props.onCatch&&this.props.onCatch(t,r)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function zf({error:e}){const[t,r]=k.useState(!1);return a.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[a.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),a.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>r(s=>!s),children:t?"Hide Error":"Show Error"})]}),a.jsx("div",{style:{height:".25rem"}}),t?a.jsx("div",{children:a.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?a.jsx("code",{children:e.message}):null})}):null]})}function VD({children:e,fallback:t=null}){return HD()?a.jsx(bt.Fragment,{children:e}):a.jsx(bt.Fragment,{children:t})}function HD(){return bt.useSyncExternalStore(KD,()=>!0,()=>!1)}function KD(){return()=>{}}var GD=!0;function tu(e,t){if(!GD){if(e)return;var r="Warning: "+t;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}var Qj={exports:{}},Zj={},Jj={exports:{}},eS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=k;function WD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var YD=typeof Object.is=="function"?Object.is:WD,qD=hc.useState,XD=hc.useEffect,QD=hc.useLayoutEffect,ZD=hc.useDebugValue;function JD(e,t){var r=t(),s=qD({inst:{value:r,getSnapshot:t}}),n=s[0].inst,i=s[1];return QD(function(){n.value=r,n.getSnapshot=t,Mm(n)&&i({inst:n})},[e,r,t]),XD(function(){return Mm(n)&&i({inst:n}),e(function(){Mm(n)&&i({inst:n})})},[e]),ZD(r),r}function Mm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!YD(e,r)}catch{return!0}}function eA(e,t){return t()}var tA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eA:JD;eS.useSyncExternalStore=hc.useSyncExternalStore!==void 0?hc.useSyncExternalStore:tA;Jj.exports=eS;var rA=Jj.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=k,sA=rA;function aA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nA=typeof Object.is=="function"?Object.is:aA,iA=sA.useSyncExternalStore,lA=$f.useRef,oA=$f.useEffect,cA=$f.useMemo,dA=$f.useDebugValue;Zj.useSyncExternalStoreWithSelector=function(e,t,r,s,n){var i=lA(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=cA(function(){function c(x){if(!d){if(d=!0,u=x,x=s(x),n!==void 0&&l.hasValue){var p=l.value;if(n(p,x))return h=p}return h=x}if(p=h,nA(u,x))return p;var m=s(x);return n!==void 0&&n(p,m)?(u=x,p):(u=x,h=m)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,s,n]);var o=iA(e,i[0],i[1]);return oA(function(){l.hasValue=!0,l.value=o},[o]),dA(o),o};Qj.exports=Zj;var tS=Qj.exports;const uA=sg(tS);function hA(e,t=r=>r){return tS.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,fA)}function fA(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,n]of e)if(!t.has(s)||!Object.is(n,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const r=sb(e);if(r.length!==sb(t).length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Object.is(e[r[s]],t[r[s]]))return!1;return!0}function sb(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const Om=k.createContext(null);function rS(){return typeof document>"u"?Om:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Om,Om)}function $s(e){const t=k.useContext(rS());return tu(!(((e==null?void 0:e.warn)??!0)&&!t),"useRouter must be used inside a <RouterProvider> component!"),t}function Ss(e){const t=$s({warn:(e==null?void 0:e.router)===void 0}),r=(e==null?void 0:e.router)||t,s=k.useRef(void 0);return hA(r.__store,n=>{if(e!=null&&e.select){if(e.structuralSharing??r.options.defaultStructuralSharing){const i=Ks(s.current,e.select(n));return s.current=i,i}return e.select(n)}return n})}const Uf=k.createContext(void 0),mA=k.createContext(void 0);function tn(e){const t=k.useContext(e.from?mA:Uf);return Ss({select:s=>{const n=s.matches.find(i=>e.from?e.from===i.routeId:i.id===t);if(Dn(!((e.shouldThrow??!0)&&!n),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),n!==void 0)return e.select?e.select(n):n},structuralSharing:e.structuralSharing})}function cy(e){return tn({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function dy(e){const{select:t,...r}=e;return tn({...r,select:s=>t?t(s.loaderDeps):s.loaderDeps})}function Fu(e){return tn({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const r=e.strict===!1?t.params:t._strictParams;return e.select?e.select(r):r}})}function uy(e){return tn({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function Sc(e){const t=$s();return k.useCallback(r=>t.navigate({...r,from:r.from??(e==null?void 0:e.from)}),[e==null?void 0:e.from,t])}const v0=typeof window<"u"?k.useLayoutEffect:k.useEffect;function Lm(e){const t=k.useRef({value:e,prev:null}),r=t.current.value;return e!==r&&(t.current={value:e,prev:r}),t.current.prev}function xA(e,t,r={},s={}){k.useEffect(()=>{if(!e.current||s.disabled||typeof IntersectionObserver!="function")return;const n=new IntersectionObserver(([i])=>{t(i)},r);return n.observe(e.current),()=>{n.disconnect()}},[t,r,s.disabled,e])}function pA(e){const t=k.useRef(null);return k.useImperativeHandle(e,()=>t.current,[]),t}function gA(e,t){const r=$s(),[s,n]=k.useState(!1),i=k.useRef(!1),l=pA(t),{activeProps:o,inactiveProps:c,activeOptions:d,to:u,preload:h,preloadDelay:f,hashScrollIntoView:x,replace:p,startTransition:m,resetScroll:y,viewTransition:g,children:v,target:b,disabled:S,style:D,className:N,onClick:E,onFocus:w,onMouseEnter:_,onMouseLeave:C,onTouchStart:T,ignoreBlocker:j,params:F,search:O,hash:z,state:G,mask:q,reloadDocument:H,unsafeRelative:A,from:V,_fromLocation:L,...P}=e,I=Ss({select:we=>we.location.search,structuralSharing:!0}),R=e.from,U=k.useMemo(()=>({...e,from:R}),[r,I,R,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),M=k.useMemo(()=>r.buildLocation({...U}),[r,U]),J=k.useMemo(()=>{if(S)return;let we=M.maskedLocation?M.maskedLocation.url:M.url,ve=!1;return r.origin&&(we.startsWith(r.origin)?we=r.history.createHref(we.replace(r.origin,""))||"/":ve=!0),{href:we,external:ve}},[S,M.maskedLocation,M.url,r.origin,r.history]),se=k.useMemo(()=>{if(J!=null&&J.external)return J.href;try{return new URL(u),u}catch{}},[u,J]),ae=e.reloadDocument||se?!1:h??r.options.defaultPreload,ie=f??r.options.defaultPreloadDelay??0,ce=Ss({select:we=>{if(se)return!1;if(d!=null&&d.exact){if(!K3(we.location.pathname,M.pathname,r.basepath))return!1}else{const ve=$h(we.location.pathname,r.basepath),Ne=$h(M.pathname,r.basepath);if(!(ve.startsWith(Ne)&&(ve.length===Ne.length||ve[Ne.length]==="/")))return!1}return((d==null?void 0:d.includeSearch)??!0)&&!kl(we.location.search,M.search,{partial:!(d!=null&&d.exact),ignoreUndefined:!(d!=null&&d.explicitUndefined)})?!1:d!=null&&d.includeHash?we.location.hash===M.hash:!0}}),K=k.useCallback(()=>{r.preloadRoute({...U}).catch(we=>{console.warn(we),console.warn(zD)})},[r,U]),He=k.useCallback(we=>{we!=null&&we.isIntersecting&&K()},[K]);xA(l,He,NA,{disabled:!!S||ae!=="viewport"}),k.useEffect(()=>{i.current||!S&&ae==="render"&&(K(),i.current=!0)},[S,K,ae]);const Pe=we=>{const ve=we.currentTarget.target,Ne=b!==void 0?b:ve;if(!S&&!kA(we)&&!we.defaultPrevented&&(!Ne||Ne==="_self")&&we.button===0){we.preventDefault(),Zg.flushSync(()=>{n(!0)});const Ee=r.subscribe("onResolved",()=>{Ee(),n(!1)});r.navigate({...U,replace:p,resetScroll:y,hashScrollIntoView:x,startTransition:m,viewTransition:g,ignoreBlocker:j})}};if(se)return{...P,ref:l,href:se,...v&&{children:v},...b&&{target:b},...S&&{disabled:S},...D&&{style:D},...N&&{className:N},...E&&{onClick:E},...w&&{onFocus:w},..._&&{onMouseEnter:_},...C&&{onMouseLeave:C},...T&&{onTouchStart:T}};const Le=we=>{S||ae&&K()},Ce=Le,de=we=>{if(!(S||!ae))if(!ie)K();else{const ve=we.target;if(Hc.has(ve))return;const Ne=setTimeout(()=>{Hc.delete(ve),K()},ie);Hc.set(ve,Ne)}},Ae=we=>{if(S||!ae||!ie)return;const ve=we.target,Ne=Hc.get(ve);Ne&&(clearTimeout(Ne),Hc.delete(ve))},Ke=ce?Nl(o,{})??yA:Bm,re=ce?Bm:Nl(c,{})??Bm,oe=[N,Ke.className,re.className].filter(Boolean).join(" "),me=(D||Ke.style||re.style)&&{...D,...Ke.style,...re.style};return{...P,...Ke,...re,href:J==null?void 0:J.href,ref:l,onClick:Kc([E,Pe]),onFocus:Kc([w,Le]),onMouseEnter:Kc([_,de]),onMouseLeave:Kc([C,Ae]),onTouchStart:Kc([T,Ce]),disabled:!!S,target:b,...me&&{style:me},...oe&&{className:oe},...S&&vA,...ce&&bA,...s&&wA}}const Bm={},yA={className:"active"},vA={role:"link","aria-disabled":!0},bA={"data-status":"active","aria-current":"page"},wA={"data-transitioning":"transitioning"},Hc=new WeakMap,NA={rootMargin:"100px"},Kc=e=>t=>{for(const r of e)if(r){if(t.defaultPrevented)return;r(t)}},hy=k.forwardRef((e,t)=>{const{_asChild:r,...s}=e,{type:n,ref:i,...l}=gA(s,t),o=typeof s.children=="function"?s.children({isActive:l["data-status"]==="active"}):s.children;return r===void 0&&delete l.disabled,k.createElement(r||"a",{...l,ref:i},o)});function kA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}let jA=class extends Xj{constructor(t){super(t),this.useMatch=r=>tn({select:r==null?void 0:r.select,from:this.id,structuralSharing:r==null?void 0:r.structuralSharing}),this.useRouteContext=r=>tn({...r,from:this.id,select:s=>r!=null&&r.select?r.select(s.context):s.context}),this.useSearch=r=>uy({select:r==null?void 0:r.select,structuralSharing:r==null?void 0:r.structuralSharing,from:this.id}),this.useParams=r=>Fu({select:r==null?void 0:r.select,structuralSharing:r==null?void 0:r.structuralSharing,from:this.id}),this.useLoaderDeps=r=>dy({...r,from:this.id}),this.useLoaderData=r=>cy({...r,from:this.id}),this.useNavigate=()=>Sc({from:this.fullPath}),this.Link=bt.forwardRef((r,s)=>a.jsx(hy,{ref:s,from:this.fullPath,...r})),this.$$typeof=Symbol.for("react.memo")}};function SA(e){return new jA(e)}class TA extends $D{constructor(t){super(t),this.useMatch=r=>tn({select:r==null?void 0:r.select,from:this.id,structuralSharing:r==null?void 0:r.structuralSharing}),this.useRouteContext=r=>tn({...r,from:this.id,select:s=>r!=null&&r.select?r.select(s.context):s.context}),this.useSearch=r=>uy({select:r==null?void 0:r.select,structuralSharing:r==null?void 0:r.structuralSharing,from:this.id}),this.useParams=r=>Fu({select:r==null?void 0:r.select,structuralSharing:r==null?void 0:r.structuralSharing,from:this.id}),this.useLoaderDeps=r=>dy({...r,from:this.id}),this.useLoaderData=r=>cy({...r,from:this.id}),this.useNavigate=()=>Sc({from:this.fullPath}),this.Link=bt.forwardRef((r,s)=>a.jsx(hy,{ref:s,from:this.fullPath,...r})),this.$$typeof=Symbol.for("react.memo")}}function _A(e){return new TA(e)}function Or(e){return typeof e=="object"?new ab(e,{silent:!0}).createRoute(e):new ab(e,{silent:!0}).createRoute}class ab{constructor(t,r){this.path=t,this.createRoute=s=>{tu(this.silent,"FileRoute is deprecated and will be removed in the next major version. Use the createFileRoute(path)(options) function instead.");const n=SA(s);return n.isRoot=!1,n},this.silent=r==null?void 0:r.silent}}class nb{constructor(t){this.useMatch=r=>tn({select:r==null?void 0:r.select,from:this.options.id,structuralSharing:r==null?void 0:r.structuralSharing}),this.useRouteContext=r=>tn({from:this.options.id,select:s=>r!=null&&r.select?r.select(s.context):s.context}),this.useSearch=r=>uy({select:r==null?void 0:r.select,structuralSharing:r==null?void 0:r.structuralSharing,from:this.options.id}),this.useParams=r=>Fu({select:r==null?void 0:r.select,structuralSharing:r==null?void 0:r.structuralSharing,from:this.options.id}),this.useLoaderDeps=r=>dy({...r,from:this.options.id}),this.useLoaderData=r=>cy({...r,from:this.options.id}),this.useNavigate=()=>{const r=$s();return Sc({from:r.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function ib(e){return typeof e=="object"?new nb(e):t=>new nb({id:e,...t})}function EA(){const e=$s(),t=k.useRef({router:e,mounted:!1}),[r,s]=k.useState(!1),{hasPendingMatches:n,isLoading:i}=Ss({select:h=>({isLoading:h.isLoading,hasPendingMatches:h.matches.some(f=>f.status==="pending")}),structuralSharing:!0}),l=Lm(i),o=i||r||n,c=Lm(o),d=i||n,u=Lm(d);return e.startTransition=h=>{s(!0),k.startTransition(()=>{h(),s(!1)})},k.useEffect(()=>{const h=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Ei(e.latestLocation.href)!==Ei(f.href)&&e.commitLocation({...f,replace:!0}),()=>{h()}},[e,e.history]),v0(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()},[e]),v0(()=>{l&&!i&&e.emit({type:"onLoad",...jl(e.state)})},[l,e,i]),v0(()=>{u&&!d&&e.emit({type:"onBeforeRouteMount",...jl(e.state)})},[d,u,e]),v0(()=>{c&&!o&&(e.emit({type:"onResolved",...jl(e.state)}),e.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),vD(e))},[o,c,e]),null}function CA(e){const t=Ss({select:r=>`not-found-${r.location.pathname}-${r.status}`});return a.jsx(oy,{getResetKey:()=>t,onCatch:(r,s)=>{var n;if(en(r))(n=e.onCatch)==null||n.call(e,r,s);else throw r},errorComponent:({error:r})=>{var s;if(en(r))return(s=e.fallback)==null?void 0:s.call(e,r);throw r},children:e.children})}function DA(){return a.jsx("p",{children:"Not Found"})}function oo(e){return a.jsx(a.Fragment,{children:e.children})}function sS(e,t,r){return t.options.notFoundComponent?a.jsx(t.options.notFoundComponent,{data:r}):e.options.defaultNotFoundComponent?a.jsx(e.options.defaultNotFoundComponent,{data:r}):a.jsx(DA,{})}function AA({children:e}){var r;const t=$s();return t.isServer?a.jsx("script",{nonce:(r=t.options.ssr)==null?void 0:r.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function PA(){const e=$s();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const r=(e.options.getScrollRestorationKey||pp)(e.latestLocation),s=r!==pp(e.latestLocation)?r:void 0,n={storageKey:Uh,shouldScrollRestoration:!0};return s&&(n.key=s),a.jsx(AA,{children:`(${zj.toString()})(${JSON.stringify(n)})`})}const aS=k.memo(function({matchId:t}){var g,v;const r=$s(),s=Ss({select:b=>{const S=b.matches.find(D=>D.id===t);return Dn(S),{routeId:S.routeId,ssr:S.ssr,_displayPending:S._displayPending}},structuralSharing:!0}),n=r.routesById[s.routeId],i=n.options.pendingComponent??r.options.defaultPendingComponent,l=i?a.jsx(i,{}):null,o=n.options.errorComponent??r.options.defaultErrorComponent,c=n.options.onCatch??r.options.defaultOnCatch,d=n.isRoot?n.options.notFoundComponent??((g=r.options.notFoundRoute)==null?void 0:g.options.component):n.options.notFoundComponent,u=s.ssr===!1||s.ssr==="data-only",h=(!n.isRoot||n.options.wrapInSuspense||u)&&(n.options.wrapInSuspense??i??(((v=n.options.errorComponent)==null?void 0:v.preload)||u))?k.Suspense:oo,f=o?oy:oo,x=d?CA:oo,p=Ss({select:b=>b.loadedAt}),m=Ss({select:b=>{var D;const S=b.matches.findIndex(N=>N.id===t);return(D=b.matches[S-1])==null?void 0:D.routeId}}),y=n.isRoot?n.options.shellComponent??oo:oo;return a.jsxs(y,{children:[a.jsx(Uf.Provider,{value:t,children:a.jsx(h,{fallback:l,children:a.jsx(f,{getResetKey:()=>p,errorComponent:o||zf,onCatch:(b,S)=>{if(en(b))throw b;tu(!1,`Error in route match: ${t}`),c==null||c(b,S)},children:a.jsx(x,{fallback:b=>{if(!d||b.routeId&&b.routeId!==s.routeId||!b.routeId&&!n.isRoot)throw b;return k.createElement(d,b)},children:u||s._displayPending?a.jsx(VD,{fallback:l,children:a.jsx(lb,{matchId:t})}):a.jsx(lb,{matchId:t})})})})}),m===vs&&r.options.scrollRestoration?a.jsxs(a.Fragment,{children:[a.jsx(RA,{}),a.jsx(PA,{})]}):null]})});function RA(){const e=$s(),t=k.useRef(void 0);return a.jsx("script",{suppressHydrationWarning:!0,ref:r=>{r&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...jl(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const lb=k.memo(function({matchId:t}){var c,d,u,h;const r=$s(),{match:s,key:n,routeId:i}=Ss({select:f=>{const x=f.matches.find(v=>v.id===t),p=x.routeId,m=r.routesById[p].options.remountDeps??r.options.defaultRemountDeps,y=m==null?void 0:m({routeId:p,loaderDeps:x.loaderDeps,params:x._strictParams,search:x._strictSearch});return{key:y?JSON.stringify(y):void 0,routeId:p,match:{id:x.id,status:x.status,error:x.error,_forcePending:x._forcePending,_displayPending:x._displayPending}}},structuralSharing:!0}),l=r.routesById[i],o=k.useMemo(()=>{const f=l.options.component??r.options.defaultComponent;return f?a.jsx(f,{},n):a.jsx(Vf,{})},[n,l.options.component,r.options.defaultComponent]);if(s._displayPending)throw(c=r.getMatch(s.id))==null?void 0:c._nonReactive.displayPendingPromise;if(s._forcePending)throw(d=r.getMatch(s.id))==null?void 0:d._nonReactive.minPendingPromise;if(s.status==="pending"){const f=l.options.pendingMinMs??r.options.defaultPendingMinMs;if(f){const x=r.getMatch(s.id);if(x&&!x._nonReactive.minPendingPromise&&!r.isServer){const p=cc();x._nonReactive.minPendingPromise=p,setTimeout(()=>{p.resolve(),x._nonReactive.minPendingPromise=void 0},f)}}throw(u=r.getMatch(s.id))==null?void 0:u._nonReactive.loadPromise}if(s.status==="notFound")return Dn(en(s.error)),sS(r,l,s.error);if(s.status==="redirected")throw Dn(Wa(s.error)),(h=r.getMatch(s.id))==null?void 0:h._nonReactive.loadPromise;if(s.status==="error"){if(r.isServer){const f=(l.options.errorComponent??r.options.defaultErrorComponent)||zf;return a.jsx(f,{error:s.error,reset:void 0,info:{componentStack:""}})}throw s.error}return o}),Vf=k.memo(function(){const t=$s(),r=k.useContext(Uf),s=Ss({select:d=>{var u;return(u=d.matches.find(h=>h.id===r))==null?void 0:u.routeId}}),n=t.routesById[s],i=Ss({select:d=>{const h=d.matches.find(f=>f.id===r);return Dn(h),h.globalNotFound}}),l=Ss({select:d=>{var f;const u=d.matches,h=u.findIndex(x=>x.id===r);return(f=u[h+1])==null?void 0:f.id}}),o=t.options.defaultPendingComponent?a.jsx(t.options.defaultPendingComponent,{}):null;if(i)return sS(t,n,void 0);if(!l)return null;const c=a.jsx(aS,{matchId:l});return r===vs?a.jsx(k.Suspense,{fallback:o,children:c}):c});function FA(){const e=$s(),r=e.routesById[vs].options.pendingComponent??e.options.defaultPendingComponent,s=r?a.jsx(r,{}):null,n=e.isServer||typeof document<"u"&&e.ssr?oo:k.Suspense,i=a.jsxs(n,{fallback:s,children:[!e.isServer&&a.jsx(EA,{}),a.jsx(IA,{})]});return e.options.InnerWrap?a.jsx(e.options.InnerWrap,{children:i}):i}function IA(){const e=$s(),t=Ss({select:n=>{var i;return(i=n.matches[0])==null?void 0:i.id}}),r=Ss({select:n=>n.loadedAt}),s=t?a.jsx(aS,{matchId:t}):null;return a.jsx(Uf.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?s:a.jsx(oy,{getResetKey:()=>r,errorComponent:zf,onCatch:n=>{tu(!1,"The following error wasn't caught by any route! At the very least, consider setting an 'errorComponent' in your RootRoute!"),tu(!1,n.message||n.toString())},children:s})})}const MA=e=>new OA(e);class OA extends ID{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=Or,globalThis.createLazyFileRoute=ib):typeof window<"u"&&(window.createFileRoute=Or,window.createLazyFileRoute=ib);function LA({router:e,children:t,...r}){Object.keys(r).length>0&&e.update({...e.options,...r,context:{...e.options.context,...r.context}});const s=rS(),n=a.jsx(s.Provider,{value:e,children:t});return e.options.Wrap?a.jsx(e.options.Wrap,{children:n}):n}function BA({router:e,...t}){return a.jsx(LA,{router:e,...t,children:a.jsx(FA,{})})}const ob=e=>{let t;const r=new Set,s=(u,h)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const x=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(p=>p(t,x))}},n=()=>t,c={setState:s,getState:n,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{r.clear()}},d=t=e(s,n,c);return c},zA=e=>e?ob(e):ob,{useDebugValue:$A}=bt,{useSyncExternalStoreWithSelector:UA}=uA;const VA=e=>e;function HA(e,t=VA,r){const s=UA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return $A(s),s}const cb=e=>{const t=typeof e=="function"?zA(e):e,r=(s,n)=>HA(t,s,n);return Object.assign(r,t),r},KA=e=>e?cb(e):cb;function GA(e,t){let r;try{r=e()}catch{return}return{getItem:n=>{var i;const l=c=>c===null?null:JSON.parse(c,t==null?void 0:t.reviver),o=(i=r.getItem(n))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(n,i)=>r.setItem(n,JSON.stringify(i,t==null?void 0:t.replacer)),removeItem:n=>r.removeItem(n)}}const ru=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(s){return ru(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return ru(s)(r)}}}},WA=(e,t)=>(r,s,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,g)=>({...g,...y}),...t},l=!1;const o=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...y)},s,n);const u=ru(i.serialize),h=()=>{const y=i.partialize({...s()});let g;const v=u({state:y,version:i.version}).then(b=>d.setItem(i.name,b)).catch(b=>{g=b});if(g)throw g;return v},f=n.setState;n.setState=(y,g)=>{f(y,g),h()};const x=e((...y)=>{r(...y),h()},s,n);let p;const m=()=>{var y;if(!d)return;l=!1,o.forEach(v=>v(s()));const g=((y=i.onRehydrateStorage)==null?void 0:y.call(i,s()))||void 0;return ru(d.getItem.bind(d))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var b;return p=i.merge(v,(b=s())!=null?b:x),r(p,!0),h()}).then(()=>{g==null||g(p,void 0),l=!0,c.forEach(v=>v(p))}).catch(v=>{g==null||g(void 0,v)})};return n.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(d=y.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>l,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},m(),p||x},YA=(e,t)=>(r,s,n)=>{let i={storage:GA(()=>localStorage),partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...t},l=!1;const o=new Set,c=new Set;let d=i.storage;if(!d)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...m)},s,n);const u=()=>{const m=i.partialize({...s()});return d.setItem(i.name,{state:m,version:i.version})},h=n.setState;n.setState=(m,y)=>{h(m,y),u()};const f=e((...m)=>{r(...m),u()},s,n);n.getInitialState=()=>f;let x;const p=()=>{var m,y;if(!d)return;l=!1,o.forEach(v=>{var b;return v((b=s())!=null?b:f)});const g=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(m=s())!=null?m:f))||void 0;return ru(d.getItem.bind(d))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[S,D]=v;if(x=i.merge(D,(b=s())!=null?b:f),r(x,!0),S)return u()}).then(()=>{g==null||g(x,void 0),x=s(),l=!0,c.forEach(v=>v(x))}).catch(v=>{g==null||g(void 0,v)})};return n.persist={setOptions:m=>{i={...i,...m},m.storage&&(d=m.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||p(),x||f},qA=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?WA(e,t):YA(e,t),XA=qA,QA="http://localhost:5003/api";class ZA{constructor(t){qe(this,"baseURL");this.baseURL=t}async request(t,r={}){const s=localStorage.getItem("auth_token"),n={"Content-Type":"application/json",...r.headers||{}};s&&(n.Authorization=`Bearer ${s}`);const i=await fetch(`${this.baseURL}${t}`,{...r,headers:n}),l=await i.json();return{status:i.status,data:l}}async login(t){return this.request("/auth/login",{method:"POST",body:JSON.stringify(t)})}async logout(){return this.request("/auth/logout",{method:"POST"})}async refreshToken(){const t=localStorage.getItem("refresh_token");return this.request("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:t})})}async getPatients(t={}){const r=new URLSearchParams;t.page&&r.append("page",t.page.toString()),t.limit&&r.append("limit",t.limit.toString()),t.search&&r.append("search",t.search);const s=r.toString(),n=`/patients${s?`?${s}`:""}`;return this.request(n)}async getPatient(t){return this.request(`/patients/${t}`)}async createPatient(t){return this.request("/patients",{method:"POST",body:JSON.stringify(t)})}async updatePatient(t,r){return this.request(`/patients/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deletePatient(t){return this.request(`/patients/${t}`,{method:"DELETE"})}}const Zi=new ZA(QA),fy=KA()(XA((e,t)=>({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null,setAuth:(r,s)=>{e({user:r,token:s,isAuthenticated:!0,error:null}),localStorage.setItem("auth_token",s),typeof window<"u"&&(window.__AUTH_TOKEN__=s)},clearAuth:()=>{e({user:null,token:null,refreshToken:null,isAuthenticated:!1,error:null}),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("auth_token_timestamp"),typeof window<"u"&&delete window.__AUTH_TOKEN__},setLoading:r=>{e({isLoading:r})},setError:r=>{e({error:r})},login:async r=>{var i;const{setLoading:s,setError:n}=t();try{s(!0),n(null),console.log("Attempting login with credentials:",{username:r.username,password:"***"});const l=await Zi.login(r);if(console.log("Login response:",l),console.log("Response status:",l.status),console.log("Response data:",l.data),l.status===200&&l.data){const o=l.data,{access_token:c,data:d,success:u,refreshToken:h}=o;if(console.log("Parsed token:",c),console.log("Parsed userData:",d),console.log("Success:",u),console.log("RefreshToken:",h),console.log("Full response data:",o),u&&c&&d){const f={id:d.id,email:d.email,name:`${d.firstName||""} ${d.lastName||""}`.trim()||d.username,role:d.role};e({user:f,token:c,refreshToken:h||null,isAuthenticated:!0,error:null}),localStorage.setItem("auth_token",c),h&&localStorage.setItem("refresh_token",h),localStorage.setItem("auth_token_timestamp",Date.now().toString()),typeof window<"u"&&(window.__AUTH_TOKEN__=c),console.log("Login successful, user authenticated")}else throw console.error("Missing required fields:",{success:u,token:!!c,userData:!!d}),new Error("Invalid response from server - missing token or user")}else if(l.status===401){const o=((i=l.data)==null?void 0:i.error)||"Invalid credentials";throw console.error("Authentication failed:",o),new Error(o)}else throw console.error("Invalid response structure:",{status:l.status,hasData:!!l.data}),new Error("Invalid response from server")}catch(l){console.error("Login error:",l),n(l instanceof Error?l.message:"Login failed")}finally{s(!1)}},logout:()=>{t().clearAuth()},refreshAuth:async()=>{try{const{refreshToken:r,clearAuth:s}=t();if(!r){s();return}const n=await Zi.refreshToken();if(n.status===200&&n.data){const{access_token:i}=n.data;e({token:i}),localStorage.setItem("auth_token",i),typeof window<"u"&&(window.__AUTH_TOKEN__=i)}else s()}catch(r){console.error("Token refresh failed:",r),t().clearAuth()}},initializeAuth:async()=>{const{setLoading:r,login:s,isAuthenticated:n}=t()}}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,refreshToken:e.refreshToken,isAuthenticated:e.isAuthenticated})}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ke=(e,t)=>{const r=k.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>k.createElement("svg",{ref:u,...JA,width:n,height:n,stroke:s,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${e5(e)}`,o].join(" "),...d},[...t.map(([h,f])=>k.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ke("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ke("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=ke("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=ke("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=ke("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=ke("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=ke("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=ke("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ke("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=ke("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=ke("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=ke("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ke("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ke("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=ke("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=ke("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=ke("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=ke("FileAudio",[["path",{d:"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"1013sb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z",key:"gqt63y"}],["path",{d:"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z",key:"cf7lqx"}],["path",{d:"M2 19v-3a6 6 0 0 1 12 0v3",key:"1acxgf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=ke("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=ke("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ke("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=ke("FileType",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=ke("FileVideo",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ke("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=ke("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=ke("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=ke("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=ke("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=ke("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=ke("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=ke("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ke("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=ke("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=ke("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=ke("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=ke("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=ke("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=ke("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=ke("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ke("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ke("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=ke("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=ke("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ke("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=ke("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=ke("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=ke("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=ke("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=ke("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=ke("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=ke("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ke("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=ke("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=ke("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=ke("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=ke("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ke("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=ke("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ke("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ke("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=ke("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=ke("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=ke("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ke("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=ke("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=ke("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=ke("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=ke("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),$5={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},cr=({isOpen:e,onClose:t,onSave:r,title:s,size:n="md",closable:i=!0,backdrop:l=!0,showFooter:o=!0,saveButtonText:c="Kaydet",cancelButtonText:d="ptal",customFooter:u,children:h,className:f=""})=>{const x=k.useRef(null),p=k.useRef(null);k.useEffect(()=>{const b=S=>{S.key==="Escape"&&i&&t()};return e&&(document.addEventListener("keydown",b),p.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{var D;const S=(D=x.current)==null?void 0:D.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');S&&S.length>0&&S[0].focus()},100)),()=>{document.removeEventListener("keydown",b),e&&(document.body.style.overflow="",p.current&&p.current.focus())}},[e,i,t]);const m=b=>{var S;if(b.key==="Tab"){const D=(S=x.current)==null?void 0:S.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(D&&D.length>0){const N=D[0],E=D[D.length-1];b.shiftKey&&document.activeElement===N?(b.preventDefault(),E.focus()):!b.shiftKey&&document.activeElement===E&&(b.preventDefault(),N.focus())}}},y=b=>{b.target===b.currentTarget&&l&&i&&t()},g=()=>{r&&r()!==!1&&t()};if(!e)return null;const v=a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",onClick:y,children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),a.jsxs("div",{ref:x,className:`
            inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full
            ${$5[n]}
            ${f}
          `,onKeyDown:m,children:[(s||i)&&a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s&&a.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-gray-900 dark:text-white",children:s}),i&&a.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:a.jsx(vr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"px-6 py-4",children:h}),o&&a.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:u||a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:d}),r&&a.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:c})]})})]})]})});return Zg.createPortal(v,document.body)},Va=()=>{const[e,t]=k.useState(!1);return{isOpen:e,openModal:()=>t(!0),closeModal:()=>t(!1)}},U5={blue:{bg:"bg-blue-100 dark:bg-blue-900/20",icon:"text-blue-600 dark:text-blue-400"},green:{bg:"bg-green-100 dark:bg-green-900/20",icon:"text-green-600 dark:text-green-400"},yellow:{bg:"bg-yellow-100 dark:bg-yellow-900/20",icon:"text-yellow-600 dark:text-yellow-400"},red:{bg:"bg-red-100 dark:bg-red-900/20",icon:"text-red-600 dark:text-red-400"},purple:{bg:"bg-purple-100 dark:bg-purple-900/20",icon:"text-purple-600 dark:text-purple-400"},gray:{bg:"bg-gray-100 dark:bg-gray-700",icon:"text-gray-600 dark:text-gray-400"}},fi=({title:e,value:t,icon:r,color:s="blue",trend:n,subtitle:i,clickable:l=!1,onClick:o,loading:c=!1,className:d=""})=>{const u=U5[s],h=l?"cursor-pointer hover:shadow-lg transition-shadow duration-200":"",f=()=>{if(!n)return null;const m=n.direction==="up"?"text-green-600 dark:text-green-400":n.direction==="down"?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",y=n.direction==="up"?Di:n.direction==="down"?F5:uS;return a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:`text-sm ${m} flex items-center`,children:[a.jsx(y,{className:"w-4 h-4 mr-1"}),a.jsx("span",{children:n.value})]}),n.period&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:n.period})]})},x=()=>a.jsx("div",{className:"animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-24 mb-2"}),a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded w-16 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-600 rounded w-20"})]}),a.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg ml-4"})]})}),p=()=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:t}),i&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:i}),f()]}),r&&a.jsx("div",{className:`p-3 ${u.bg} rounded-lg ml-4`,children:a.jsx("div",{className:u.icon,children:r})})]});return a.jsx("div",{className:`
        bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700
        ${h}
        ${d}
      `,onClick:l?o:void 0,role:l?"button":void 0,tabIndex:l?0:void 0,onKeyDown:l?m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),o==null||o())}:void 0,children:c?x():p()})},V5=({data:e,columns:t,loading:r=!1,pagination:s,rowSelection:n,actions:i,bulkActions:l,searchable:o=!1,onSearch:c,sortable:d=!1,onSort:u,rowKey:h="id",emptyText:f="Veri bulunamad",size:x="medium",bordered:p=!1,striped:m=!1,hoverable:y=!0,className:g=""})=>{const[v,b]=k.useState(""),[S,D]=k.useState(null);k.useState(!1);const N=k.useCallback((A,V)=>typeof h=="function"?h(A):A[h]||V,[h]),E=k.useMemo(()=>n?e.filter(A=>n.selectedRowKeys.includes(N(A,e.indexOf(A)))):[],[e,n,N]),w=A=>{if(!d)return;let V="asc";(S==null?void 0:S.key)===A&&(V=S.direction==="asc"?"desc":S.direction==="desc"?null:"asc"),D(V?{key:A,direction:V}:null),u==null||u(A,V)},_=A=>{b(A),c==null||c(A)},C=A=>{if(n)if(A){const V=e.map((L,P)=>N(L,P));n.onChange(V,e)}else n.onChange([],[])},T=(A,V)=>{if(!n)return;const L=N(A,e.indexOf(A));let P=[...n.selectedRowKeys];V?P.push(L):P=P.filter(R=>R!==L);const I=e.filter(R=>P.includes(N(R,e.indexOf(R))));n.onChange(P,I)},j={small:"text-sm",medium:"text-base",large:"text-lg"},F={small:"px-3 py-2",medium:"px-4 py-3",large:"px-6 py-4"},O=n&&e.length>0&&e.every(A=>n.selectedRowKeys.includes(N(A,e.indexOf(A)))),z=n&&n.selectedRowKeys.length>0&&!O,G=(A,V,L)=>{const P=V[A.key];return A.render?A.render(P,V,L):P},q=A=>!i||i.length===0?null:a.jsx("div",{className:"flex items-center space-x-2",children:i.map(V=>{var L;return a.jsxs("button",{onClick:()=>V.onClick(A),disabled:(L=V.disabled)==null?void 0:L.call(V,A),className:`
              inline-flex items-center px-2 py-1 text-sm font-medium rounded-md
              ${V.variant==="danger"?"text-red-700 bg-red-100 hover:bg-red-200 dark:text-red-400 dark:bg-red-900/20 dark:hover:bg-red-900/30":V.variant==="primary"?"text-blue-700 bg-blue-100 hover:bg-blue-200 dark:text-blue-400 dark:bg-blue-900/20 dark:hover:bg-blue-900/30":"text-gray-700 bg-gray-100 hover:bg-gray-200 dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"}
              disabled:opacity-50 disabled:cursor-not-allowed
            `,children:[V.icon&&a.jsx("span",{className:"mr-1",children:V.icon}),V.label]},V.key)})}),H=()=>{if(!s)return null;const{current:A,pageSize:V,total:L,showSizeChanger:P,pageSizeOptions:I=[10,20,50,100]}=s,R=Math.ceil(L/V),U=(A-1)*V+1,M=Math.min(A*V,L),se=(()=>{const ie=[];if(R<=5)for(let ce=1;ce<=R;ce++)ie.push(ce);else{const ce=Math.max(1,A-Math.floor(2.5)),K=Math.min(R,ce+5-1);for(let He=ce;He<=K;He++)ie.push(He);ce>1&&(ie.unshift(-1),ie.unshift(1)),K<R&&(ie.push(-2),ie.push(R))}return ie})();return a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700 dark:text-gray-300",children:[a.jsxs("span",{children:[L>0?`${U}-${M}`:"0"," / ",L," kayt gsteriliyor"]}),P&&a.jsx("select",{value:V,onChange:ae=>s.onChange(1,Number(ae.target.value)),className:"ml-4 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(ae=>a.jsxs("option",{value:ae,children:[ae," / sayfa"]},ae))})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>s.onChange(1,V),disabled:A<=1,className:"px-2 py-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"lk sayfa",children:"lk"}),a.jsx("button",{onClick:()=>s.onChange(A-1,V),disabled:A<=1,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"nceki sayfa",children:a.jsx(o5,{className:"w-4 h-4"})}),a.jsx("div",{className:"flex items-center space-x-1",children:se.map((ae,ie)=>ae===-1||ae===-2?a.jsx("span",{className:"px-2 py-1 text-gray-400",children:"..."},`ellipsis-${ie}`):a.jsx("button",{onClick:()=>s.onChange(ae,V),className:`
                    px-3 py-1 text-sm rounded-md transition-colors
                    ${ae===A?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}
                  `,children:ae},ae))}),a.jsx("button",{onClick:()=>s.onChange(A+1,V),disabled:A>=R,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Sonraki sayfa",children:a.jsx(lS,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>s.onChange(R,V),disabled:A>=R,className:"px-2 py-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Son sayfa",children:"Son"})]})]})};return a.jsxs("div",{className:`bg-white dark:bg-gray-800 shadow-sm rounded-lg ${g}`,children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[o&&a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Ara...",value:v,onChange:A=>_(A.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l&&E.length>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[E.length," kayt seildi"]}),a.jsx("div",{className:"flex space-x-2",children:l.map(A=>a.jsxs("button",{onClick:()=>A.onClick(E),className:`
                        inline-flex items-center px-3 py-1 text-sm font-medium rounded-md
                        ${A.variant==="danger"?"text-red-700 bg-red-100 hover:bg-red-200 dark:text-red-400 dark:bg-red-900/20 dark:hover:bg-red-900/30":A.variant==="primary"?"text-blue-700 bg-blue-100 hover:bg-blue-200 dark:text-blue-400 dark:bg-blue-900/20 dark:hover:bg-blue-900/30":"text-gray-700 bg-gray-100 hover:bg-gray-200 dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"}
                      `,children:[A.icon&&a.jsx("span",{className:"mr-1",children:A.icon}),A.label]},A.key))})]})]})})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:`min-w-full divide-y divide-gray-200 dark:divide-gray-700 ${j[x]}`,children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[n&&a.jsx("th",{className:`${F[x]} text-left`,children:a.jsx("input",{type:"checkbox",checked:O,ref:A=>{A&&(A.indeterminate=!!z)},onChange:A=>C(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),t.map(A=>a.jsx("th",{className:`
                    ${F[x]} text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider
                    ${A.sortable&&d?"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600":""}
                    ${A.align==="center"?"text-center":A.align==="right"?"text-right":"text-left"}
                  `,style:{width:A.width},onClick:()=>A.sortable&&w(A.key),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:A.title}),A.sortable&&d&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx(oS,{className:`w-3 h-3 ${(S==null?void 0:S.key)===A.key&&S.direction==="asc"?"text-blue-600":"text-gray-400"}`}),a.jsx(my,{className:`w-3 h-3 -mt-1 ${(S==null?void 0:S.key)===A.key&&S.direction==="desc"?"text-blue-600":"text-gray-400"}`})]})]})},A.key)),i&&i.length>0&&a.jsx("th",{className:`${F[x]} text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider`,children:"lemler"})]})}),a.jsx("tbody",{className:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700 ${m?"divide-y-0":""}`,children:r?a.jsx("tr",{children:a.jsx("td",{colSpan:t.length+(n?1:0)+(i?1:0),className:"px-4 py-8 text-center",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Ykleniyor..."})]})})}):e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:t.length+(n?1:0)+(i?1:0),className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:f})}):e.map((A,V)=>{var R;const L=N(A,V),P=n==null?void 0:n.selectedRowKeys.includes(L),I=((R=n==null?void 0:n.getCheckboxProps)==null?void 0:R.call(n,A))||{};return a.jsxs("tr",{className:`
                      ${m&&V%2===1?"bg-gray-50 dark:bg-gray-700/50":""}
                      ${y?"hover:bg-gray-50 dark:hover:bg-gray-700/50":""}
                      ${P?"bg-blue-50 dark:bg-blue-900/20":""}
                    `,children:[n&&a.jsx("td",{className:F[x],children:a.jsx("input",{type:"checkbox",checked:P,disabled:I.disabled,onChange:U=>T(A,U.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"})}),t.map(U=>a.jsx("td",{className:`
                          ${F[x]} text-gray-900 dark:text-gray-100
                          ${U.align==="center"?"text-center":U.align==="right"?"text-right":"text-left"}
                          ${p?"border-r border-gray-200 dark:border-gray-700 last:border-r-0":""}
                        `,children:G(U,A,V)},U.key)),i&&i.length>0&&a.jsx("td",{className:F[x],children:q(A)})]},L)})})]})}),H()]})},H5={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",default:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-300",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500"},K5={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},Z=({variant:e="primary",size:t="md",loading:r=!1,icon:s,iconPosition:n="left",fullWidth:i=!1,disabled:l,className:o="",children:c,...d})=>{const h=["inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",H5[e],K5[t],i?"w-full":"",o].filter(Boolean).join(" "),f=l||r;return a.jsxs("button",{className:h,disabled:f,...d,children:[r&&a.jsx(ya,{className:"w-4 h-4 mr-2 animate-spin"}),!r&&s&&n==="left"&&a.jsx("span",{className:"mr-2",children:s}),c,!r&&s&&n==="right"&&a.jsx("span",{className:"ml-2",children:s})]})},ye=k.forwardRef(({label:e,error:t,helperText:r,leftIcon:s,rightIcon:n,fullWidth:i=!1,className:l="",id:o,...c},d)=>{const u=o||`input-${Math.random().toString(36).substr(2,9)}`,m=["block px-3 py-2 border rounded-lg text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",t?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500",i?"w-full":"",s&&n?"pl-10 pr-10":s?"pl-10":n?"pr-10":"",l].filter(Boolean).join(" ");return a.jsxs("div",{className:i?"w-full":"",children:[e&&a.jsx("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("div",{className:"relative",children:[s&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-400",children:s})}),a.jsx("input",{ref:d,id:u,className:m,...c}),n&&!t&&a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-400",children:n})}),t&&a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx(mt,{className:"w-5 h-5 text-red-500"})})]}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});ye.displayName="Input";const Ue=k.forwardRef(({label:e,error:t,helperText:r,options:s,placeholder:n,fullWidth:i=!1,className:l="",id:o,...c},d)=>{const u=o||`select-${Math.random().toString(36).substr(2,9)}`,p=["block px-3 py-2 pr-10 border rounded-lg text-sm bg-white transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed appearance-none",t?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500",i?"w-full":"",l].filter(Boolean).join(" ");return a.jsxs("div",{className:i?"w-full":"",children:[e&&a.jsx("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{ref:d,id:u,className:p,...c,children:[n&&a.jsx("option",{value:"",disabled:!0,children:n}),s.map(m=>a.jsx("option",{value:m.value,disabled:m.disabled,children:m.label},m.value))]}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:t?a.jsx(mt,{className:"w-5 h-5 text-red-500"}):a.jsx(my,{className:"w-5 h-5 text-gray-400"})})]}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});Ue.displayName="Select";const wr=k.forwardRef(({label:e,error:t,helperText:r,fullWidth:s=!1,resize:n="vertical",className:i="",id:l,...o},c)=>{const d=l||`textarea-${Math.random().toString(36).substr(2,9)}`,p=["block px-3 py-2 border rounded-lg text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",t?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500",s?"w-full":"",{none:"resize-none",vertical:"resize-y",horizontal:"resize-x",both:"resize"}[n],i].filter(Boolean).join(" ");return a.jsxs("div",{className:s?"w-full":"",children:[e&&a.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:c,id:d,className:p,...o}),t&&a.jsx("div",{className:"absolute top-2 right-2 pointer-events-none",children:a.jsx(mt,{className:"w-5 h-5 text-red-500"})})]}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});wr.displayName="Textarea";const G5={default:"bg-gray-100 text-gray-800",primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},W5={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-sm"},jt=({children:e,variant:t="default",size:r="md",className:s=""})=>{const i=["inline-flex items-center font-medium rounded-full",G5[t],W5[r],s].filter(Boolean).join(" ");return a.jsx("span",{className:i,children:e})},kn=k.forwardRef(({label:e,error:t,helperText:r,indeterminate:s=!1,className:n="",id:i,...l},o)=>{const c=i||`checkbox-${Math.random().toString(36).substr(2,9)}`,d="w-4 h-4 border rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",u=t?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500",h=l.checked||s?"bg-blue-600 border-blue-600 text-white":"bg-white",f=[d,u,h,n].filter(Boolean).join(" ");return a.jsxs("div",{className:"flex items-start",children:[a.jsxs("div",{className:"relative flex items-center",children:[a.jsx("input",{ref:o,type:"checkbox",id:c,className:`${f} appearance-none`,...l}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s?a.jsx(uS,{className:"w-3 h-3 text-white"}):l.checked?a.jsx(Kh,{className:"w-3 h-3 text-white"}):null})]}),(e||t||r)&&a.jsxs("div",{className:"ml-2 flex-1",children:[e&&a.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 cursor-pointer",children:e}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r})]})]})});kn.displayName="Checkbox";const Y5=k.forwardRef(({label:e,error:t,helperText:r,className:s="",id:n,...i},l)=>{const o=n||`radio-${Math.random().toString(36).substr(2,9)}`,c="w-4 h-4 border rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",d=t?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500",u=i.checked?"bg-blue-600 border-blue-600":"bg-white",h=[c,d,u,s].filter(Boolean).join(" ");return a.jsxs("div",{className:"flex items-start",children:[a.jsxs("div",{className:"relative flex items-center",children:[a.jsx("input",{ref:l,type:"radio",id:o,className:`${h} appearance-none`,...i}),i.checked&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),(e||t||r)&&a.jsxs("div",{className:"ml-2 flex-1",children:[e&&a.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 cursor-pointer",children:e}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r})]})]})});Y5.displayName="Radio";const q5={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},pS={primary:"text-blue-600",secondary:"text-gray-600",white:"text-white",gray:"text-gray-400"},X5=({size:e="md",color:t="primary",className:r=""})=>{const s=["animate-spin",q5[e],pS[t],r].filter(Boolean).join(" ");return a.jsx(ya,{className:s})},bp=({text:e="Ykleniyor...",size:t="md",color:r="primary",center:s=!1,className:n=""})=>{const i=["flex items-center gap-2",s?"justify-center":"",n].filter(Boolean).join(" ");return a.jsxs("div",{className:i,children:[a.jsx(X5,{size:t,color:r}),e&&a.jsx("span",{className:`text-sm ${pS[r]}`,children:e})]})};function gS(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=gS(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Jt(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=gS(e))&&(s&&(s+=" "),s+=t);return s}const Q5=(...e)=>Jt(e),yS=k.createContext(void 0),gy=()=>{const e=k.useContext(yS);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},Z5=({children:e,maxToasts:t=5})=>{const[r,s]=k.useState([]),n=o=>{const c=Math.random().toString(36).substr(2,9),d={...o,id:c,duration:o.duration??5e3};s(u=>[d,...u].slice(0,t)),d.duration&&d.duration>0&&setTimeout(()=>{i(c)},d.duration)},i=o=>{s(c=>c.filter(d=>d.id!==o))},l=()=>{s([])};return a.jsxs(yS.Provider,{value:{toasts:r,addToast:n,removeToast:i,clearAll:l},children:[e,a.jsx(J5,{})]})},J5=()=>{const{toasts:e}=gy();return a.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm w-full",children:e.map(t=>a.jsx(eP,{toast:t},t.id))})},eP=({toast:e})=>{const{removeToast:t}=gy(),[r,s]=k.useState(!1),[n,i]=k.useState(!1);k.useEffect(()=>{const d=setTimeout(()=>s(!0),10);return()=>clearTimeout(d)},[]);const l=()=>{i(!0),setTimeout(()=>{t(e.id)},150)},o=()=>{switch(e.type){case"success":return a.jsx(St,{className:"h-5 w-5 text-green-500"});case"error":return a.jsx(mt,{className:"h-5 w-5 text-red-500"});case"warning":return a.jsx(os,{className:"h-5 w-5 text-yellow-500"});case"info":return a.jsx(Mo,{className:"h-5 w-5 text-blue-500"});default:return a.jsx(Mo,{className:"h-5 w-5 text-gray-500"})}},c=()=>{switch(e.type){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}};return a.jsx("div",{className:Q5("transform transition-all duration-300 ease-in-out",r&&!n?"translate-x-0 opacity-100":"translate-x-full opacity-0","bg-white border rounded-lg shadow-lg p-4 min-w-0",c()),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:o()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),e.message&&a.jsx("p",{className:"mt-1 text-sm text-gray-600 break-words",children:e.message})]}),a.jsx("button",{onClick:l,className:"flex-shrink-0 p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(vr,{className:"h-4 w-4 text-gray-400"})})]}),e.action&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:e.action.onClick,className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:e.action.label})})]})]})})},b0={success:(e,t,r)=>({type:"success",title:e,message:t,...r}),error:(e,t,r)=>({type:"error",title:e,message:t,...r}),warning:(e,t,r)=>({type:"warning",title:e,message:t,...r}),info:(e,t,r)=>({type:"info",title:e,message:t,...r})},Hl=()=>{const{addToast:e}=gy();return{success:(t,r,s)=>{e(b0.success(t,r,s))},error:(t,r,s)=>{e(b0.error(t,r,s))},warning:(t,r,s)=>{e(b0.warning(t,r,s))},info:(t,r,s)=>{e(b0.info(t,r,s))}}},Oo=(...e)=>Jt(e),vS=k.createContext(void 0),yy=()=>{const e=k.useContext(vS);if(!e)throw new Error("Tabs components must be used within a Tabs provider");return e},ts=({children:e,defaultValue:t,value:r,onValueChange:s,orientation:n="horizontal",className:i})=>{const[l,o]=k.useState(t||""),c=r!==void 0?r:l,d=u=>{r===void 0&&o(u),s==null||s(u)};return a.jsx(vS.Provider,{value:{activeTab:c,setActiveTab:d,orientation:n},children:a.jsx("div",{className:Oo("tabs",n==="vertical"?"flex gap-4":"space-y-2",i),children:e})})},vy=({children:e,className:t})=>{const{orientation:r}=yy();return a.jsx("div",{className:Oo("tabs-list",r==="horizontal"?"flex border-b border-gray-200":"flex flex-col space-y-1 min-w-[200px]",t),role:"tablist","aria-orientation":r,children:e})},Gh=({children:e,value:t,disabled:r=!1,className:s})=>{const{activeTab:n,setActiveTab:i,orientation:l}=yy(),o=n===t,c=()=>{r||i(t)},d=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),c())};return a.jsx("button",{type:"button",role:"tab","aria-selected":o,"aria-controls":`tabpanel-${t}`,tabIndex:o?0:-1,disabled:r,onClick:c,onKeyDown:d,className:Oo("tabs-trigger transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",l==="horizontal"?Oo("px-4 py-2 text-sm font-medium border-b-2 -mb-px",o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300",r&&"opacity-50 cursor-not-allowed"):Oo("px-3 py-2 text-sm font-medium rounded-md text-left",o?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50",r&&"opacity-50 cursor-not-allowed"),s),children:e})},su=({children:e,value:t,className:r})=>{const{activeTab:s}=yy();return s===t?a.jsx("div",{role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,className:Oo("tabs-content focus:outline-none",r),tabIndex:0,children:e}):null};ts.List=vy;ts.Trigger=Gh;ts.Content=su;const w0=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+r[s]},tP=()=>Math.random().toString(36).substr(2,9),rP=e=>e.startsWith("image/"),sP=({value:e=[],onChange:t,onUpload:r,onRemove:s,accept:n,multiple:i=!1,maxFiles:l,maxSize:o,minSize:c,disabled:d=!1,dragAndDrop:u=!0,showPreview:h=!0,showProgress:f=!0,allowReorder:x=!1,label:p,description:m,error:y,helperText:g,uploadText:v="Dosya Ykle",dragText:b="Dosyalar buraya srkleyin veya",browseText:S="gz atn",removeText:D="Kaldr",retryText:N="Tekrar Dene",className:E,dropzoneClassName:w,fileListClassName:_,fileItemClassName:C,renderFile:T})=>{const[j,F]=k.useState(!1),O=k.useRef(null),z=se=>o&&se.size>o?`Dosya boyutu ${w0(o)}'dan byk olamaz`:c&&se.size<c?`Dosya boyutu ${w0(c)}'dan kk olamaz`:n&&!n.split(",").map(ce=>ce.trim()).some(ce=>{if(ce.startsWith("."))return se.name.toLowerCase().endsWith(ce.toLowerCase());if(ce.includes("*")){const K=ce.split("/")[0];return se.type.startsWith(K)}return se.type===ce})?`Desteklenmeyen dosya tr. Kabul edilen trler: ${n}`:null,G=se=>new Promise(ae=>{if(rP(se.type)){const ie=new FileReader;ie.onload=ce=>{var K;return ae((K=ce.target)==null?void 0:K.result)},ie.readAsDataURL(se)}else ae("")}),q=k.useCallback(async se=>{if(d)return;const ae=e;let ie=[];if(l&&ae.length+se.length>l){const K=l-ae.length;se=se.slice(0,K)}for(const K of se){const He=z(K),Pe=h?await G(K):void 0,Le={id:tP(),file:K,name:K.name,size:K.size,type:K.type,status:He?"error":"pending",error:He||void 0,preview:Pe};ie.push(Le)}const ce=[...ae,...ie];if(t(ce),r)for(const K of ie)K.status==="pending"&&H(K)},[e,t,r,d,l,o,c,n,h]),H=async se=>{if(!r)return;const ae=e.map(ie=>ie.id===se.id?{...ie,status:"uploading",progress:0}:ie);t(ae);try{const ie=await r(se.file),ce=e.map(K=>K.id===se.id?{...K,status:"success",progress:100,url:ie.url,id:ie.id||K.id}:K);t(ce)}catch(ie){const ce=e.map(K=>K.id===se.id?{...K,status:"error",error:ie instanceof Error?ie.message:"Ykleme hatas"}:K);t(ce)}},A=async se=>{if(!d)try{s&&await s(se);const ae=e.filter(ie=>ie.id!==se.id);t(ae)}catch(ae){console.error("File removal failed:",ae)}},V=se=>{se.status==="error"&&H(se)},L=se=>{const ae=Array.from(se.target.files||[]);ae.length>0&&q(ae),se.target.value=""},P=se=>{se.preventDefault(),!d&&u&&F(!0)},I=se=>{se.preventDefault(),F(!1)},R=se=>{if(se.preventDefault(),F(!1),d||!u)return;const ae=Array.from(se.dataTransfer.files);ae.length>0&&q(ae)},U=()=>{var se;d||(se=O.current)==null||se.click()},M=!l||e.length<l,J=(se,ae,ie)=>a.jsxs("div",{className:Jt("flex items-center p-3 border border-gray-200 rounded-lg",se.status==="error"&&"border-red-200 bg-red-50",se.status==="success"&&"border-green-200 bg-green-50",se.status==="uploading"&&"border-blue-200 bg-blue-50",C),children:[h&&se.preview&&a.jsx("img",{src:se.preview,alt:se.name,className:"w-12 h-12 object-cover rounded mr-3"}),(!h||!se.preview)&&a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center mr-3",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:se.name}),a.jsx("p",{className:"text-xs text-gray-500",children:w0(se.size)}),f&&se.status==="uploading"&&typeof se.progress=="number"&&a.jsx("div",{className:"mt-2",children:a.jsx("div",{className:"bg-gray-200 rounded-full h-1",children:a.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-300",style:{width:`${se.progress}%`}})})}),se.status==="error"&&se.error&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:se.error})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[se.status==="success"&&a.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),se.status==="uploading"&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),se.status==="error"&&ie&&a.jsx("button",{type:"button",onClick:ie,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:N}),a.jsx("button",{type:"button",onClick:ae,className:"text-gray-400 hover:text-red-600",disabled:d,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]});return a.jsxs("div",{className:Jt("w-full",E),children:[p&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),m&&a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:m}),M&&a.jsxs("div",{onDragOver:P,onDragLeave:I,onDrop:R,onClick:U,className:Jt("border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors",j&&!d&&"border-blue-500 bg-blue-50",!j&&!d&&"border-gray-300 hover:border-gray-400",d&&"border-gray-200 bg-gray-50 cursor-not-allowed",y&&"border-red-300",w),children:[a.jsx("svg",{className:Jt("mx-auto h-12 w-12 mb-4",d?"text-gray-300":"text-gray-400"),stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:a.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),a.jsx("div",{className:"text-sm text-gray-600",children:u&&!d?a.jsxs(a.Fragment,{children:[a.jsxs("span",{children:[b," "]}),a.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:S})]}):a.jsx("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:v})}),n&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Desteklenen formatlar: ",n]}),o&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maksimum dosya boyutu: ",w0(o)]})]}),a.jsx("input",{ref:O,type:"file",accept:n,multiple:i,onChange:L,className:"hidden",disabled:d}),e.length>0&&a.jsx("div",{className:Jt("mt-4 space-y-2",_),children:e.map(se=>a.jsx("div",{children:T?T(se,()=>A(se),()=>V(se)):J(se,()=>A(se),()=>V(se))},se.id))}),l&&e.length>=l&&a.jsxs("p",{className:"mt-2 text-sm text-amber-600",children:["Maksimum ",l," dosya ykleyebilirsiniz"]}),y&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:y}),g&&!y&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:g})]})},aP=[10,25,50,100],nP=({currentPage:e,totalPages:t,totalItems:r,itemsPerPage:s=10,onPageChange:n,onItemsPerPageChange:i,showItemsPerPage:l=!0,showTotalItems:o=!0,showPageNumbers:c=!0,showFirstLast:d=!0,showPrevNext:u=!0,maxVisiblePages:h=7,itemsPerPageOptions:f=aP,disabled:x=!1,size:p="md",className:m,pageButtonClassName:y,activePageClassName:g,disabledClassName:v,previousText:b="nceki",nextText:S="Sonraki",firstText:D="lk",lastText:N="Son",itemsPerPageText:E="Sayfa bana:",totalItemsText:w="toplam",pageText:_="Sayfa",ofText:C="/"})=>{const j=(()=>{if(t<=h)return Array.from({length:t},(M,J)=>J+1);const P=Math.floor(h/2);let I=Math.max(1,e-P),R=Math.min(t,I+h-1);R-I+1<h&&(I=Math.max(1,R-h+1));const U=[];for(let M=I;M<=R;M++)U.push(M);return U})(),F=e===1,O=e===t,G={sm:{button:"px-2 py-1 text-xs",select:"text-xs px-2 py-1",text:"text-xs"},md:{button:"px-3 py-2 text-sm",select:"text-sm px-3 py-2",text:"text-sm"},lg:{button:"px-4 py-2 text-base",select:"text-base px-4 py-2",text:"text-base"}}[p],q=Jt("border border-gray-300 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","transition-colors duration-200 font-medium",G.button,x&&"opacity-50 cursor-not-allowed hover:bg-white"),H=P=>{x||P<1||P>t||P===e||n(P)},A=P=>{x||!i||i(P)},V=r?Math.min((e-1)*s+1,r):0,L=r?Math.min(e*s,r):0;return a.jsxs("div",{className:Jt("flex flex-col sm:flex-row items-center justify-between gap-4",m),children:[l&&i&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:Jt("text-gray-700",G.text),children:E}),a.jsx("select",{value:s,onChange:P=>A(Number(P.target.value)),disabled:x,className:Jt("border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",G.select,x&&"opacity-50 cursor-not-allowed"),children:f.map(P=>a.jsx("option",{value:P,children:P},P))})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[d&&t>h&&a.jsx("button",{onClick:()=>H(1),disabled:x||F,className:Jt(q,"rounded-l-md",F&&(v||"opacity-50 cursor-not-allowed"),y),"aria-label":D,children:D}),u&&a.jsxs("button",{onClick:()=>H(e-1),disabled:x||F,className:Jt(q,!d&&"rounded-l-md",F&&(v||"opacity-50 cursor-not-allowed"),y),"aria-label":b,children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"ml-1 hidden sm:inline",children:b})]}),c&&a.jsxs(a.Fragment,{children:[j[0]>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>H(1),disabled:x,className:Jt(q,y),children:"1"}),j[0]>2&&a.jsx("span",{className:Jt("px-2",G.text,"text-gray-500"),children:"..."})]}),j.map(P=>a.jsx("button",{onClick:()=>H(P),disabled:x,className:Jt(q,P===e&&(g||"bg-blue-600 text-white border-blue-600 hover:bg-blue-700"),y),"aria-current":P===e?"page":void 0,children:P},P)),j[j.length-1]<t&&a.jsxs(a.Fragment,{children:[j[j.length-1]<t-1&&a.jsx("span",{className:Jt("px-2",G.text,"text-gray-500"),children:"..."}),a.jsx("button",{onClick:()=>H(t),disabled:x,className:Jt(q,y),children:t})]})]}),u&&a.jsxs("button",{onClick:()=>H(e+1),disabled:x||O,className:Jt(q,!d&&"rounded-r-md",O&&(v||"opacity-50 cursor-not-allowed"),y),"aria-label":S,children:[a.jsx("span",{className:"mr-1 hidden sm:inline",children:S}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),d&&t>h&&a.jsx("button",{onClick:()=>H(t),disabled:x||O,className:Jt(q,"rounded-r-md",O&&(v||"opacity-50 cursor-not-allowed"),y),"aria-label":N,children:N})]}),o&&r&&a.jsxs("div",{className:Jt("text-gray-700",G.text),children:[V,"-",L," ",C," ",r," ",w]})]})},iP={default:"bg-white border border-gray-200 rounded-lg shadow-sm",outlined:"bg-white border-2 border-gray-300 rounded-lg",elevated:"bg-white border border-gray-200 rounded-lg shadow-lg",filled:"bg-gray-50 border border-gray-200 rounded-lg"},lP={none:"",sm:"p-3",md:"p-4",lg:"p-6"},Bt=({className:e="",variant:t="default",padding:r="md",children:s,...n})=>{const i=[iP[t],lP[r],e].filter(Boolean).join(" ");return a.jsx("div",{className:i,...n,children:s})},N0=({className:e="",children:t,...r})=>{const s=["flex flex-col space-y-1.5 pb-4",e].filter(Boolean).join(" ");return a.jsx("div",{className:s,...r,children:t})},k0=({className:e="",children:t,...r})=>{const s=["text-lg font-semibold leading-none tracking-tight",e].filter(Boolean).join(" ");return a.jsx("h3",{className:s,...r,children:t})},j0=({className:e="",children:t,...r})=>{const s=["pt-0",e].filter(Boolean).join(" ");return a.jsx("div",{className:s,...r,children:t})},oP={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},cP={normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold"},dP={gray:"text-gray-700 dark:text-gray-300",red:"text-red-600 dark:text-red-400",blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",yellow:"text-yellow-600 dark:text-yellow-400"},Hr=({children:e,as:t="p",size:r="md",weight:s="normal",color:n="gray",className:i="",...l})=>{const o=[oP[r],cP[s],dP[n],i].filter(Boolean).join(" ");return a.jsx(t,{className:o,...l,children:e})},bS={start:"items-start",center:"items-center",end:"items-end",stretch:"items-stretch"},wS={start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between",around:"justify-around",evenly:"justify-evenly"},Gc=({children:e,spacing:t=4,align:r="center",justify:s="start",className:n="",...i})=>{const o=["flex flex-row",typeof t=="number"?`gap-${t}`:`gap-[${t}]`,bS[r],wS[s],n].filter(Boolean).join(" ");return a.jsx("div",{className:o,...i,children:e})},pb=({children:e,spacing:t=4,align:r="stretch",justify:s="start",className:n="",...i})=>{const o=["flex flex-col",typeof t=="number"?`gap-${t}`:`gap-[${t}]`,bS[r],wS[s],n].filter(Boolean).join(" ");return a.jsx("div",{className:o,...i,children:e})},uP=[{id:"1",productName:"Wireless Headphones",brand:"TechBrand",model:"WH-1000XM4",category:"Electronics",stock:25,minStock:10,unitPrice:299.99,vatIncludedPrice:353.99,totalValue:8849.75,barcode:"1234567890123",supplier:"Tech Supplier Inc.",warrantyPeriod:"2 years",status:"active",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-20T14:45:00Z"},{id:"2",productName:"Bluetooth Speaker",brand:"AudioMax",model:"BT-500",category:"Electronics",stock:5,minStock:15,unitPrice:89.99,vatIncludedPrice:106.19,totalValue:530.95,barcode:"2345678901234",supplier:"Audio Solutions Ltd.",warrantyPeriod:"1 year",status:"active",createdAt:"2024-01-10T09:15:00Z",updatedAt:"2024-01-18T16:20:00Z"}],zm=["All","Electronics","Accessories","Components","Tools"],hP=["All","TechBrand","AudioMax","ComponentCorp","ToolMaster"],fP=["All","Active","Inactive","Discontinued"],mP=()=>{var V,L,P,I,R,U;const[e,t]=k.useState(uP),[r,s]=k.useState(!1),[n,i]=k.useState({search:"",category:"All",brand:"All",status:"All",lowStock:!1}),[l,o]=k.useState(!1),[c,d]=k.useState(!1),[u,h]=k.useState(!1),[f,x]=k.useState(!1),[p,m]=k.useState(!1),[y,g]=k.useState(null);k.useState("category"),k.useState({category:"",priceType:"percentage",priceValue:"",stockOperation:"set",stockValue:"",supplier:""});const[v,b]=k.useState([]),[S,D]=k.useState({current:1,pageSize:20,total:0}),[N,E]=k.useState({productName:"",brand:"",model:"",category:"",stock:0,minStock:0,unitPrice:0,barcode:"",supplier:"",warrantyPeriod:"",status:"active"}),w=k.useMemo(()=>{let M=e;if(n.search){const J=n.search.toLowerCase();M=M.filter(se=>{var ae;return se.productName.toLowerCase().includes(J)||se.brand.toLowerCase().includes(J)||se.model.toLowerCase().includes(J)||((ae=se.barcode)==null?void 0:ae.toLowerCase().includes(J))})}return n.category!=="All"&&(M=M.filter(J=>J.category===n.category)),n.brand!=="All"&&(M=M.filter(J=>J.brand===n.brand)),n.status!=="All"&&(M=M.filter(J=>J.status===n.status.toLowerCase())),n.lowStock&&(M=M.filter(J=>J.stock<=J.minStock)),M},[e,n]),_=k.useMemo(()=>{const M=e.length,J=e.filter(ie=>ie.stock<=ie.minStock).length,se=e.reduce((ie,ce)=>ie+ce.totalValue,0),ae=e.filter(ie=>ie.status==="active").length;return{totalProducts:M,lowStockCount:J,totalValue:se,activeTrials:ae}},[e]);k.useEffect(()=>{D(M=>({...M,total:w.length}))},[w]);const C=[{key:"productName",title:"Product Name",sortable:!0,render:(M,J)=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:M}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[J.brand," - ",J.model]})]})},{key:"category",title:"Category",sortable:!0,render:M=>a.jsx(jt,{variant:"secondary",children:M})},{key:"stock",title:"Stock",sortable:!0,render:(M,J)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`font-medium ${M<=J.minStock?"text-red-600":"text-gray-900 dark:text-white"}`,children:M}),M<=J.minStock&&a.jsx(os,{className:"w-4 h-4 text-red-500"})]})},{key:"minStock",title:"Min Stock",sortable:!0},{key:"unitPrice",title:"Unit Price",sortable:!0,render:M=>`${M.toFixed(2)}`},{key:"vatIncludedPrice",title:"VAT Included Price",sortable:!0,render:M=>`${M.toFixed(2)}`},{key:"totalValue",title:"Total Value",sortable:!0,render:M=>`${M.toFixed(2)}`},{key:"status",title:"Status",render:M=>a.jsx(jt,{variant:M==="active"?"success":M==="inactive"?"warning":"danger",children:M.charAt(0).toUpperCase()+M.slice(1)})}],T=[{key:"view",label:"View Details",icon:a.jsx(In,{className:"w-4 h-4"}),onClick:M=>{g(M),h(!0)}},{key:"edit",label:"Edit",icon:a.jsx(rn,{className:"w-4 h-4"}),onClick:M=>{g(M),E(M),d(!0)}},{key:"delete",label:"Delete",icon:a.jsx(Es,{className:"w-4 h-4"}),variant:"danger",onClick:M=>{window.confirm(`Are you sure you want to delete ${M.productName}?`)&&t(J=>J.filter(se=>se.id!==M.id))}}],j=[{key:"bulk-operations",label:"Bulk Operations",icon:a.jsx(hS,{className:"w-4 h-4"}),onClick:M=>{x(!0)}},{key:"delete",label:"Delete Selected",icon:a.jsx(Es,{className:"w-4 h-4"}),variant:"danger",onClick:M=>{if(window.confirm(`Are you sure you want to delete ${M.length} items?`)){const J=M.map(se=>se.id);t(se=>se.filter(ae=>!J.includes(ae.id))),b([])}}},{key:"export",label:"Export Selected",icon:a.jsx(yr,{className:"w-4 h-4"}),onClick:M=>{F(M)}}],F=M=>{const se=[["ID","Product Name","Brand","Model","Category","Stock","Min Stock","Unit Price","VAT Included Price","Total Value","Barcode","Serial Number","Supplier","Warranty Period","Status","Created At","Updated At"].join(","),...M.map(ce=>[ce.id,`"${ce.productName}"`,`"${ce.brand}"`,`"${ce.model}"`,`"${ce.category}"`,ce.stock,ce.minStock,ce.unitPrice,ce.vatIncludedPrice,ce.totalValue,`"${ce.barcode||""}"`,`"${ce.serialNumber||""}"`,`"${ce.supplier||""}"`,`"${ce.warrantyPeriod||""}"`,ce.status,ce.createdAt,ce.updatedAt].join(","))].join(`
`),ae=new Blob([se],{type:"text/csv;charset=utf-8;"}),ie=document.createElement("a");ie.href=URL.createObjectURL(ae),ie.download=`inventory_export_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},O=()=>{const M=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Inventory Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f2f2f2; }
          .header { text-align: center; margin-bottom: 30px; }
          .stats { display: flex; justify-content: space-around; margin: 20px 0; }
          .stat-item { text-align: center; }
          @media print { .no-print { display: none; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Inventory Report</h1>
          <p>Generated on: ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div class="stats">
          <div class="stat-item">
            <h3>${_.totalProducts}</h3>
            <p>Total Products</p>
          </div>
          <div class="stat-item">
            <h3>${_.lowStockCount}</h3>
            <p>Low Stock Items</p>
          </div>
          <div class="stat-item">
            <h3>${_.totalValue.toFixed(2)}</h3>
            <p>Total Value</p>
          </div>
        </div>
        
        <table>
          <thead>
            <tr>
              <th>Product Name</th>
              <th>Brand</th>
              <th>Category</th>
              <th>Stock</th>
              <th>Unit Price</th>
              <th>Total Value</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            ${w.map(se=>`
              <tr>
                <td>${se.productName}</td>
                <td>${se.brand}</td>
                <td>${se.category}</td>
                <td>${se.stock}</td>
                <td>${se.unitPrice.toFixed(2)}</td>
                <td>${se.totalValue.toFixed(2)}</td>
                <td>${se.status}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
      </html>
    `,J=window.open("","_blank");J&&(J.document.write(M),J.document.close(),J.print())},z=(M,J)=>{i(se=>({...se,[M]:J}))},G=()=>{if(!N.productName||!N.brand||!N.category)return alert("Please fill in all required fields"),!1;const M={id:Date.now().toString(),productName:N.productName,brand:N.brand,model:N.model||"",category:N.category,stock:N.stock||0,minStock:N.minStock||0,unitPrice:N.unitPrice||0,vatIncludedPrice:(N.unitPrice||0)*1.18,totalValue:(N.stock||0)*((N.unitPrice||0)*1.18),barcode:N.barcode,supplier:N.supplier,warrantyPeriod:N.warrantyPeriod,status:N.status,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t(J=>[...J,M]),E({productName:"",brand:"",model:"",category:"",stock:0,minStock:0,unitPrice:0,barcode:"",supplier:"",warrantyPeriod:"",status:"active"}),!0},q=()=>{if(!y||!N.productName||!N.brand||!N.category)return alert("Please fill in all required fields"),!1;const M={...y,...N,vatIncludedPrice:(N.unitPrice||0)*1.18,totalValue:(N.stock||0)*((N.unitPrice||0)*1.18),updatedAt:new Date().toISOString()};return t(J=>J.map(se=>se.id===y.id?M:se)),g(null),E({productName:"",brand:"",model:"",category:"",stock:0,minStock:0,unitPrice:0,barcode:"",supplier:"",warrantyPeriod:"",status:"active"}),!0},H=(M,J)=>{D(se=>({...se,current:M,pageSize:J}))},A=(M,J)=>{b(M)};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Inventory Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your product inventory"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:O,icon:a.jsx(yr,{className:"w-4 h-4"}),children:"Print"}),a.jsx(Z,{variant:"outline",onClick:()=>F(w),icon:a.jsx(yr,{className:"w-4 h-4"}),children:"Export CSV"}),a.jsx(Z,{variant:"outline",onClick:()=>m(!0),icon:a.jsx(ka,{className:"w-4 h-4"}),children:"Bulk Upload"}),a.jsx(Z,{onClick:()=>o(!0),icon:a.jsx(_s,{className:"w-4 h-4"}),children:"Add Product"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(fi,{title:"Total Products",value:_.totalProducts.toString(),color:"blue",icon:a.jsx(il,{className:"w-6 h-6"})}),a.jsx(fi,{title:"Low Stock",value:_.lowStockCount.toString(),color:"red",icon:a.jsx(os,{className:"w-6 h-6"})}),a.jsx(fi,{title:"Total Value",value:`${_.totalValue.toFixed(2)}`,color:"green",icon:a.jsx(rr,{className:"w-6 h-6"})}),a.jsx(fi,{title:"Active Items",value:_.activeTrials.toString(),color:"purple",icon:a.jsx(Di,{className:"w-6 h-6"})})]}),a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(ye,{placeholder:"Search products, brands, models...",value:n.search,onChange:M=>z("search",M.target.value),leftIcon:a.jsx(Lr,{className:"w-4 h-4"})})}),a.jsx(Ue,{value:n.category,onChange:M=>z("category",M),options:zm.map(M=>({value:M,label:M})),placeholder:"Category"}),a.jsx(Ue,{value:n.brand,onChange:M=>z("brand",M),options:hP.map(M=>({value:M,label:M})),placeholder:"Brand"}),a.jsx(Ue,{value:n.status,onChange:M=>z("status",M),options:fP.map(M=>({value:M,label:M})),placeholder:"Status"}),a.jsx("div",{className:"flex items-center",children:a.jsx(kn,{checked:n.lowStock,onChange:M=>z("lowStock",M),label:"Low Stock Only"})})]})}),a.jsx(Bt,{children:a.jsx(V5,{data:w.slice((S.current-1)*S.pageSize,S.current*S.pageSize),columns:C,loading:r,pagination:{...S,onChange:H},rowSelection:{selectedRowKeys:v,onChange:A},actions:T,bulkActions:j,searchable:!1,sortable:!0,rowKey:"id",hoverable:!0,striped:!0})}),a.jsx(cr,{isOpen:l,onClose:()=>o(!1),onSave:G,title:"Add New Product",size:"lg",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ye,{label:"Product Name *",value:N.productName||"",onChange:M=>E(J=>({...J,productName:M.target.value})),placeholder:"Enter product name"}),a.jsx(ye,{label:"Brand *",value:N.brand||"",onChange:M=>E(J=>({...J,brand:M.target.value})),placeholder:"Enter brand"}),a.jsx(ye,{label:"Model",value:N.model||"",onChange:M=>E(J=>({...J,model:M.target.value})),placeholder:"Enter model"}),a.jsx(Ue,{label:"Category *",value:N.category||"",onChange:M=>E(J=>({...J,category:M.target.value})),options:zm.filter(M=>M!=="All").map(M=>({value:M,label:M})),placeholder:"Select category"}),a.jsx(ye,{label:"Stock Quantity",type:"number",value:((V=N.stock)==null?void 0:V.toString())||"0",onChange:M=>E(J=>({...J,stock:parseInt(M.target.value)||0})),placeholder:"0"}),a.jsx(ye,{label:"Minimum Stock",type:"number",value:((L=N.minStock)==null?void 0:L.toString())||"0",onChange:M=>E(J=>({...J,minStock:parseInt(M.target.value)||0})),placeholder:"0"}),a.jsx(ye,{label:"Unit Price",type:"number",step:"0.01",value:((P=N.unitPrice)==null?void 0:P.toString())||"0",onChange:M=>E(J=>({...J,unitPrice:parseFloat(M.target.value)||0})),placeholder:"0.00"}),a.jsx(ye,{label:"Barcode",value:N.barcode||"",onChange:M=>E(J=>({...J,barcode:M.target.value})),placeholder:"Enter barcode"}),a.jsx(ye,{label:"Supplier",value:N.supplier||"",onChange:M=>E(J=>({...J,supplier:M.target.value})),placeholder:"Enter supplier"}),a.jsx(ye,{label:"Warranty Period",value:N.warrantyPeriod||"",onChange:M=>E(J=>({...J,warrantyPeriod:M.target.value})),placeholder:"e.g., 2 years"})]}),a.jsx(Ue,{label:"Status",value:N.status||"active",onChange:M=>E(J=>({...J,status:M.target.value})),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discontinued",label:"Discontinued"}]})]})}),a.jsx(cr,{isOpen:c,onClose:()=>{d(!1),g(null)},onSave:q,title:"Edit Product",size:"lg",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ye,{label:"Product Name *",value:N.productName||"",onChange:M=>E(J=>({...J,productName:M.target.value})),placeholder:"Enter product name"}),a.jsx(ye,{label:"Brand *",value:N.brand||"",onChange:M=>E(J=>({...J,brand:M.target.value})),placeholder:"Enter brand"}),a.jsx(ye,{label:"Model",value:N.model||"",onChange:M=>E(J=>({...J,model:M.target.value})),placeholder:"Enter model"}),a.jsx(Ue,{label:"Category *",value:N.category||"",onChange:M=>E(J=>({...J,category:M.target.value})),options:zm.filter(M=>M!=="All").map(M=>({value:M,label:M})),placeholder:"Select category"}),a.jsx(ye,{label:"Stock Quantity",type:"number",value:((I=N.stock)==null?void 0:I.toString())||"0",onChange:M=>E(J=>({...J,stock:parseInt(M.target.value)||0})),placeholder:"0"}),a.jsx(ye,{label:"Minimum Stock",type:"number",value:((R=N.minStock)==null?void 0:R.toString())||"0",onChange:M=>E(J=>({...J,minStock:parseInt(M.target.value)||0})),placeholder:"0"}),a.jsx(ye,{label:"Unit Price",type:"number",step:"0.01",value:((U=N.unitPrice)==null?void 0:U.toString())||"0",onChange:M=>E(J=>({...J,unitPrice:parseFloat(M.target.value)||0})),placeholder:"0.00"}),a.jsx(ye,{label:"Barcode",value:N.barcode||"",onChange:M=>E(J=>({...J,barcode:M.target.value})),placeholder:"Enter barcode"}),a.jsx(ye,{label:"Supplier",value:N.supplier||"",onChange:M=>E(J=>({...J,supplier:M.target.value})),placeholder:"Enter supplier"}),a.jsx(ye,{label:"Warranty Period",value:N.warrantyPeriod||"",onChange:M=>E(J=>({...J,warrantyPeriod:M.target.value})),placeholder:"e.g., 2 years"})]}),a.jsx(Ue,{label:"Status",value:N.status||"active",onChange:M=>E(J=>({...J,status:M.target.value})),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discontinued",label:"Discontinued"}]})]})}),a.jsx(cr,{isOpen:p,onClose:()=>m(!1),title:"Bulk Upload Products",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(ka,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload a CSV file with your product data"})]}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6",children:a.jsx("input",{type:"file",accept:".csv",className:"w-full",onChange:M=>{var J;console.log("File selected:",(J=M.target.files)==null?void 0:J[0])}})}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.jsx("p",{children:"CSV format: Product Name, Brand, Model, Category, Stock, Min Stock, Unit Price, Barcode, Supplier, Warranty Period"})})]})})]})};function xP(){const[e,t]=k.useState("seed-admin"),[r,s]=k.useState("AdminPass123!"),[n,i]=k.useState(!1),{login:l,isLoading:o,error:c}=fy(),d=async u=>{if(u.preventDefault(),!(!e.trim()||!r.trim())){console.log("Form submission - username:",e,"password:",r);try{await l({username:e.trim(),password:r})}catch(h){console.error("Login failed:",h)}}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:a.jsx(y5,{className:"h-6 w-6 text-blue-600"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"X-EAR CRM'e Giri Yapn"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"itme cihaz hasta ynetim sistemi"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"sr-only",children:"Kullanc Ad"}),a.jsx(ye,{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Kullanc ad",value:e,onChange:u=>t(u.target.value),disabled:o})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"ifre"}),a.jsx(ye,{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"ifre",value:r,onChange:u=>s(u.target.value),disabled:o}),a.jsx(Z,{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!n),disabled:o,variant:"default",children:n?a.jsx(u5,{className:"h-4 w-4 text-gray-400"}):a.jsx(In,{className:"h-4 w-4 text-gray-400"})})]})]}),c&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"text-sm text-red-700",children:c})}),a.jsx("div",{children:a.jsx(Z,{type:"submit",disabled:o||!e.trim()||!r.trim(),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",variant:"default",children:o?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Giri yaplyor..."]}):"Giri Yap"})})]})]})})}const pP=({children:e})=>{const{isAuthenticated:t,isLoading:r,initializeAuth:s}=fy();return console.log("AuthProvider render - isAuthenticated:",t,"isLoading:",r),k.useEffect(()=>{s()},[s]),r?(console.log("AuthProvider: Showing loading screen"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Ykleniyor..."})]})})):t?(console.log("AuthProvider: Rendering children (MainLayout)"),a.jsx(a.Fragment,{children:e})):(console.log("AuthProvider: Showing login form"),a.jsx(xP,{}))};let ca=class extends k.Component{constructor(r){super(r);qe(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});qe(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){this.setState({error:r,errorInfo:s}),this.props.onError&&this.props.onError(r,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(os,{className:"h-12 w-12 text-red-500"})}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Bir Hata Olutu"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"zgnz, beklenmeyen bir hata olutu. Ltfen sayfay yenilemeyi deneyin."}),!1,a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsxs(Z,{onClick:this.handleRetry,children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),"Tekrar Dene"]}),a.jsxs(Z,{onClick:this.handleGoHome,variant:"outline",children:[a.jsx(dS,{className:"h-4 w-4 mr-2"}),"Ana Sayfa"]})]})]})}):this.props.children}};const gP={error:{icon:mt,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-500",titleColor:"text-red-800",messageColor:"text-red-700",buttonColor:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:os,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-500",titleColor:"text-yellow-800",messageColor:"text-yellow-700",buttonColor:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},info:{icon:Mo,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-500",titleColor:"text-blue-800",messageColor:"text-blue-700",buttonColor:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"},success:{icon:St,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-500",titleColor:"text-green-800",messageColor:"text-green-700",buttonColor:"bg-green-600 hover:bg-green-700 focus:ring-green-500"}},au=({title:e,message:t,type:r="error",dismissible:s=!1,onDismiss:n,onRetry:i,retryText:l="Tekrar Dene",className:o=""})=>{const c=gP[r],d=c.icon;return a.jsx("div",{className:`rounded-md border p-4 ${c.bgColor} ${c.borderColor} ${o}`,children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(d,{className:`h-5 w-5 ${c.iconColor}`})}),a.jsxs("div",{className:"ml-3 flex-1",children:[e&&a.jsx("h3",{className:`text-sm font-medium ${c.titleColor}`,children:e}),a.jsx("div",{className:`${e?"mt-2":""} text-sm ${c.messageColor}`,children:a.jsx("p",{children:t})}),i&&a.jsx("div",{className:"mt-4",children:a.jsxs(Z,{type:"button",onClick:i,children:[a.jsx(ds,{className:"h-4 w-4 mr-2"}),l]})})]}),s&&n&&a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("div",{className:"-mx-1.5 -my-1.5",children:a.jsxs(Z,{type:"button",onClick:n,variant:"ghost",size:"sm",children:[a.jsx("span",{className:"sr-only",children:"Kapat"}),a.jsx(vr,{className:"h-5 w-5"})]})})})]})})},yP=({onRetry:e})=>a.jsx(au,{title:"Balant Hatas",message:"Sunucuya balanrken bir hata olutu. nternet balantnz kontrol edin ve tekrar deneyin.",type:"error",onRetry:e}),vP=({resource:e="kaynak"})=>a.jsx(au,{title:"Bulunamad",message:`Aradnz ${e} bulunamad. Sayfa kaldrlm veya tanm olabilir.`,type:"warning"}),bP=({position:e="top-right",...t})=>{const r={"top-right":"fixed top-4 right-4 z-50","top-left":"fixed top-4 left-4 z-50","bottom-right":"fixed bottom-4 right-4 z-50","bottom-left":"fixed bottom-4 left-4 z-50"};return a.jsx("div",{className:r[e],children:a.jsx(au,{...t,className:`max-w-sm shadow-lg ${t.className||""}`,dismissible:!0})})};function NS(e,t){return function(){return e.apply(t,arguments)}}const{toString:wP}=Object.prototype,{getPrototypeOf:by}=Object,{iterator:Gf,toStringTag:kS}=Symbol,Wf=(e=>t=>{const r=wP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ca=e=>(e=e.toLowerCase(),t=>Wf(t)===e),Yf=e=>t=>typeof t===e,{isArray:Tc}=Array,fc=Yf("undefined");function Mu(e){return e!==null&&!fc(e)&&e.constructor!==null&&!fc(e.constructor)&&Ts(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jS=Ca("ArrayBuffer");function NP(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jS(e.buffer),t}const kP=Yf("string"),Ts=Yf("function"),SS=Yf("number"),Ou=e=>e!==null&&typeof e=="object",jP=e=>e===!0||e===!1,nh=e=>{if(Wf(e)!=="object")return!1;const t=by(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(kS in e)&&!(Gf in e)},SP=e=>{if(!Ou(e)||Mu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},TP=Ca("Date"),_P=Ca("File"),EP=Ca("Blob"),CP=Ca("FileList"),DP=e=>Ou(e)&&Ts(e.pipe),AP=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ts(e.append)&&((t=Wf(e))==="formdata"||t==="object"&&Ts(e.toString)&&e.toString()==="[object FormData]"))},PP=Ca("URLSearchParams"),[RP,FP,IP,MP]=["ReadableStream","Request","Response","Headers"].map(Ca),OP=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lu(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),Tc(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{if(Mu(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(s=0;s<l;s++)o=i[s],t.call(null,e[o],o,e)}}function TS(e,t){if(Mu(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const ll=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),_S=e=>!fc(e)&&e!==ll;function wp(){const{caseless:e,skipUndefined:t}=_S(this)&&this||{},r={},s=(n,i)=>{const l=e&&TS(r,i)||i;nh(r[l])&&nh(n)?r[l]=wp(r[l],n):nh(n)?r[l]=wp({},n):Tc(n)?r[l]=n.slice():(!t||!fc(n))&&(r[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Lu(arguments[n],s);return r}const LP=(e,t,r,{allOwnKeys:s}={})=>(Lu(t,(n,i)=>{r&&Ts(n)?e[i]=NS(n,r):e[i]=n},{allOwnKeys:s}),e),BP=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zP=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},$P=(e,t,r,s)=>{let n,i,l;const o={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)l=n[i],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=r!==!1&&by(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},UP=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},VP=e=>{if(!e)return null;if(Tc(e))return e;let t=e.length;if(!SS(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},HP=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&by(Uint8Array)),KP=(e,t)=>{const s=(e&&e[Gf]).call(e);let n;for(;(n=s.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},GP=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},WP=Ca("HTMLFormElement"),YP=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),gb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),qP=Ca("RegExp"),ES=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Lu(r,(n,i)=>{let l;(l=t(n,i,e))!==!1&&(s[i]=l||n)}),Object.defineProperties(e,s)},XP=e=>{ES(e,(t,r)=>{if(Ts(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Ts(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},QP=(e,t)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return Tc(e)?s(e):s(String(e).split(t)),r},ZP=()=>{},JP=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function e6(e){return!!(e&&Ts(e.append)&&e[kS]==="FormData"&&e[Gf])}const t6=e=>{const t=new Array(10),r=(s,n)=>{if(Ou(s)){if(t.indexOf(s)>=0)return;if(Mu(s))return s;if(!("toJSON"in s)){t[n]=s;const i=Tc(s)?[]:{};return Lu(s,(l,o)=>{const c=r(l,n+1);!fc(c)&&(i[o]=c)}),t[n]=void 0,i}}return s};return r(e,0)},r6=Ca("AsyncFunction"),s6=e=>e&&(Ou(e)||Ts(e))&&Ts(e.then)&&Ts(e.catch),CS=((e,t)=>e?setImmediate:t?((r,s)=>(ll.addEventListener("message",({source:n,data:i})=>{n===ll&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),ll.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ts(ll.postMessage)),a6=typeof queueMicrotask<"u"?queueMicrotask.bind(ll):typeof process<"u"&&process.nextTick||CS,n6=e=>e!=null&&Ts(e[Gf]),pe={isArray:Tc,isArrayBuffer:jS,isBuffer:Mu,isFormData:AP,isArrayBufferView:NP,isString:kP,isNumber:SS,isBoolean:jP,isObject:Ou,isPlainObject:nh,isEmptyObject:SP,isReadableStream:RP,isRequest:FP,isResponse:IP,isHeaders:MP,isUndefined:fc,isDate:TP,isFile:_P,isBlob:EP,isRegExp:qP,isFunction:Ts,isStream:DP,isURLSearchParams:PP,isTypedArray:HP,isFileList:CP,forEach:Lu,merge:wp,extend:LP,trim:OP,stripBOM:BP,inherits:zP,toFlatObject:$P,kindOf:Wf,kindOfTest:Ca,endsWith:UP,toArray:VP,forEachEntry:KP,matchAll:GP,isHTMLForm:WP,hasOwnProperty:gb,hasOwnProp:gb,reduceDescriptors:ES,freezeMethods:XP,toObjectSet:QP,toCamelCase:YP,noop:ZP,toFiniteNumber:JP,findKey:TS,global:ll,isContextDefined:_S,isSpecCompliantForm:e6,toJSONObject:t6,isAsyncFn:r6,isThenable:s6,setImmediate:CS,asap:a6,isIterable:n6};function at(e,t,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}pe.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pe.toJSONObject(this.config),code:this.code,status:this.status}}});const DS=at.prototype,AS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{AS[e]={value:e}});Object.defineProperties(at,AS);Object.defineProperty(DS,"isAxiosError",{value:!0});at.from=(e,t,r,s,n,i)=>{const l=Object.create(DS);pe.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return at.call(l,o,c,r,s,n),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const i6=null;function Np(e){return pe.isPlainObject(e)||pe.isArray(e)}function PS(e){return pe.endsWith(e,"[]")?e.slice(0,-2):e}function yb(e,t,r){return e?e.concat(t).map(function(n,i){return n=PS(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function l6(e){return pe.isArray(e)&&!e.some(Np)}const o6=pe.toFlatObject(pe,{},null,function(t){return/^is[A-Z]/.test(t)});function qf(e,t,r){if(!pe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=pe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!pe.isUndefined(y[m])});const s=r.metaTokens,n=r.visitor||u,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&pe.isSpecCompliantForm(t);if(!pe.isFunction(n))throw new TypeError("visitor must be a function");function d(p){if(p===null)return"";if(pe.isDate(p))return p.toISOString();if(pe.isBoolean(p))return p.toString();if(!c&&pe.isBlob(p))throw new at("Blob is not supported. Use a Buffer instead.");return pe.isArrayBuffer(p)||pe.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,y){let g=p;if(p&&!y&&typeof p=="object"){if(pe.endsWith(m,"{}"))m=s?m:m.slice(0,-2),p=JSON.stringify(p);else if(pe.isArray(p)&&l6(p)||(pe.isFileList(p)||pe.endsWith(m,"[]"))&&(g=pe.toArray(p)))return m=PS(m),g.forEach(function(b,S){!(pe.isUndefined(b)||b===null)&&t.append(l===!0?yb([m],S,i):l===null?m:m+"[]",d(b))}),!1}return Np(p)?!0:(t.append(yb(y,m,i),d(p)),!1)}const h=[],f=Object.assign(o6,{defaultVisitor:u,convertValue:d,isVisitable:Np});function x(p,m){if(!pe.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(p),pe.forEach(p,function(g,v){(!(pe.isUndefined(g)||g===null)&&n.call(t,g,pe.isString(v)?v.trim():v,m,f))===!0&&x(g,m?m.concat(v):[v])}),h.pop()}}if(!pe.isObject(e))throw new TypeError("data must be an object");return x(e),t}function vb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function wy(e,t){this._pairs=[],e&&qf(e,this,t)}const RS=wy.prototype;RS.append=function(t,r){this._pairs.push([t,r])};RS.toString=function(t){const r=t?function(s){return t.call(this,s,vb)}:vb;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function c6(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function FS(e,t,r){if(!t)return e;const s=r&&r.encode||c6;pe.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(t,r):i=pe.isURLSearchParams(t)?t.toString():new wy(t,r).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class d6{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){pe.forEach(this.handlers,function(s){s!==null&&t(s)})}}const bb=d6,IS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},u6=typeof URLSearchParams<"u"?URLSearchParams:wy,h6=typeof FormData<"u"?FormData:null,f6=typeof Blob<"u"?Blob:null,m6={isBrowser:!0,classes:{URLSearchParams:u6,FormData:h6,Blob:f6},protocols:["http","https","file","blob","url","data"]},Ny=typeof window<"u"&&typeof document<"u",kp=typeof navigator=="object"&&navigator||void 0,x6=Ny&&(!kp||["ReactNative","NativeScript","NS"].indexOf(kp.product)<0),p6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),g6=Ny&&window.location.href||"http://localhost",y6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ny,hasStandardBrowserEnv:x6,hasStandardBrowserWebWorkerEnv:p6,navigator:kp,origin:g6},Symbol.toStringTag,{value:"Module"})),Kr={...y6,...m6};function v6(e,t){return qf(e,new Kr.classes.URLSearchParams,{visitor:function(r,s,n,i){return Kr.isNode&&pe.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function b6(e){return pe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function w6(e){const t={},r=Object.keys(e);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],t[i]=e[i];return t}function MS(e){function t(r,s,n,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&pe.isArray(n)?n.length:l,c?(pe.hasOwnProp(n,l)?n[l]=[n[l],s]:n[l]=s,!o):((!n[l]||!pe.isObject(n[l]))&&(n[l]=[]),t(r,s,n[l],i)&&pe.isArray(n[l])&&(n[l]=w6(n[l])),!o)}if(pe.isFormData(e)&&pe.isFunction(e.entries)){const r={};return pe.forEachEntry(e,(s,n)=>{t(b6(s),n,r,0)}),r}return null}function N6(e,t,r){if(pe.isString(e))try{return(t||JSON.parse)(e),pe.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const ky={transitional:IS,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=pe.isObject(t);if(i&&pe.isHTMLForm(t)&&(t=new FormData(t)),pe.isFormData(t))return n?JSON.stringify(MS(t)):t;if(pe.isArrayBuffer(t)||pe.isBuffer(t)||pe.isStream(t)||pe.isFile(t)||pe.isBlob(t)||pe.isReadableStream(t))return t;if(pe.isArrayBufferView(t))return t.buffer;if(pe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return v6(t,this.formSerializer).toString();if((o=pe.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return qf(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),N6(t)):t}],transformResponse:[function(t){const r=this.transitional||ky.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(pe.isResponse(t)||pe.isReadableStream(t))return t;if(t&&pe.isString(t)&&(s&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?at.from(o,at.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kr.classes.FormData,Blob:Kr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pe.forEach(["delete","get","head","post","put","patch"],e=>{ky.headers[e]={}});const jy=ky,k6=pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),j6=e=>{const t={};let r,s,n;return e&&e.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),s=l.substring(n+1).trim(),!(!r||t[r]&&k6[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},wb=Symbol("internals");function Wc(e){return e&&String(e).trim().toLowerCase()}function ih(e){return e===!1||e==null?e:pe.isArray(e)?e.map(ih):String(e)}function S6(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const T6=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $m(e,t,r,s,n){if(pe.isFunction(s))return s.call(this,t,r);if(n&&(t=r),!!pe.isString(t)){if(pe.isString(s))return t.indexOf(s)!==-1;if(pe.isRegExp(s))return s.test(t)}}function _6(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function E6(e,t){const r=pe.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,i,l){return this[s].call(this,t,n,i,l)},configurable:!0})})}let Xf=class{constructor(t){t&&this.set(t)}set(t,r,s){const n=this;function i(o,c,d){const u=Wc(c);if(!u)throw new Error("header name must be a non-empty string");const h=pe.findKey(n,u);(!h||n[h]===void 0||d===!0||d===void 0&&n[h]!==!1)&&(n[h||c]=ih(o))}const l=(o,c)=>pe.forEach(o,(d,u)=>i(d,u,c));if(pe.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(pe.isString(t)&&(t=t.trim())&&!T6(t))l(j6(t),r);else if(pe.isObject(t)&&pe.isIterable(t)){let o={},c,d;for(const u of t){if(!pe.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?pe.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Wc(t),t){const s=pe.findKey(this,t);if(s){const n=this[s];if(!r)return n;if(r===!0)return S6(n);if(pe.isFunction(r))return r.call(this,n,s);if(pe.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Wc(t),t){const s=pe.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||$m(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let n=!1;function i(l){if(l=Wc(l),l){const o=pe.findKey(s,l);o&&(!r||$m(s,s[o],o,r))&&(delete s[o],n=!0)}}return pe.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!t||$m(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,s={};return pe.forEach(this,(n,i)=>{const l=pe.findKey(s,i);if(l){r[l]=ih(n),delete r[i];return}const o=t?_6(i):String(i).trim();o!==i&&delete r[i],r[o]=ih(n),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return pe.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=t&&pe.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[wb]=this[wb]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=Wc(l);s[o]||(E6(n,l),s[o]=!0)}return pe.isArray(t)?t.forEach(i):i(t),this}};Xf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);pe.reduceDescriptors(Xf.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});pe.freezeMethods(Xf);const ja=Xf;function Um(e,t){const r=this||jy,s=t||r,n=ja.from(s.headers);let i=s.data;return pe.forEach(e,function(o){i=o.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function OS(e){return!!(e&&e.__CANCEL__)}function _c(e,t,r){at.call(this,e??"canceled",at.ERR_CANCELED,t,r),this.name="CanceledError"}pe.inherits(_c,at,{__CANCEL__:!0});function LS(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new at("Request failed with status code "+r.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function C6(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function D6(e,t){e=e||10;const r=new Array(e),s=new Array(e);let n=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];l||(l=d),r[n]=c,s[n]=d;let h=i,f=0;for(;h!==n;)f+=r[h++],h=h%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),d-l<t)return;const x=u&&d-u;return x?Math.round(f*1e3/x):void 0}}function A6(e,t){let r=0,s=1e3/t,n,i;const l=(d,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=s?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},s-h)))},()=>n&&l(n)]}const Wh=(e,t,r=3)=>{let s=0;const n=D6(50,250);return A6(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-s,d=n(c),u=l<=o;s=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},r)},Nb=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},kb=e=>(...t)=>pe.asap(()=>e(...t)),P6=Kr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Kr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Kr.origin),Kr.navigator&&/(msie|trident)/i.test(Kr.navigator.userAgent)):()=>!0,R6=Kr.hasStandardBrowserEnv?{write(e,t,r,s,n,i){const l=[e+"="+encodeURIComponent(t)];pe.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),pe.isString(s)&&l.push("path="+s),pe.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function F6(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function I6(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function BS(e,t,r){let s=!F6(t);return e&&(s||r==!1)?I6(e,t):t}const jb=e=>e instanceof ja?{...e}:e;function Ol(e,t){t=t||{};const r={};function s(d,u,h,f){return pe.isPlainObject(d)&&pe.isPlainObject(u)?pe.merge.call({caseless:f},d,u):pe.isPlainObject(u)?pe.merge({},u):pe.isArray(u)?u.slice():u}function n(d,u,h,f){if(pe.isUndefined(u)){if(!pe.isUndefined(d))return s(void 0,d,h,f)}else return s(d,u,h,f)}function i(d,u){if(!pe.isUndefined(u))return s(void 0,u)}function l(d,u){if(pe.isUndefined(u)){if(!pe.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function o(d,u,h){if(h in t)return s(d,u);if(h in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,h)=>n(jb(d),jb(u),h,!0)};return pe.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||n,f=h(e[u],t[u],u);pe.isUndefined(f)&&h!==o||(r[u]=f)}),r}const zS=e=>{const t=Ol({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=ja.from(l),t.url=FS(BS(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),pe.isFormData(r)){if(Kr.hasStandardBrowserEnv||Kr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(pe.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&l.set(u,h)})}}if(Kr.hasStandardBrowserEnv&&(s&&pe.isFunction(s)&&(s=s(t)),s||s!==!1&&P6(t.url))){const c=n&&i&&R6.read(i);c&&l.set(n,c)}return t},M6=typeof XMLHttpRequest<"u",O6=M6&&function(e){return new Promise(function(r,s){const n=zS(e);let i=n.data;const l=ja.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,u,h,f,x,p;function m(){x&&x(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function g(){if(!y)return;const b=ja.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),D={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:b,config:e,request:y};LS(function(E){r(E),m()},function(E){s(E),m()},D),y=null}"onloadend"in y?y.onloadend=g:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(g)},y.onabort=function(){y&&(s(new at("Request aborted",at.ECONNABORTED,e,y)),y=null)},y.onerror=function(S){const D=S&&S.message?S.message:"Network Error",N=new at(D,at.ERR_NETWORK,e,y);N.event=S||null,s(N),y=null},y.ontimeout=function(){let S=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const D=n.transitional||IS;n.timeoutErrorMessage&&(S=n.timeoutErrorMessage),s(new at(S,D.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,e,y)),y=null},i===void 0&&l.setContentType(null),"setRequestHeader"in y&&pe.forEach(l.toJSON(),function(S,D){y.setRequestHeader(D,S)}),pe.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),o&&o!=="json"&&(y.responseType=n.responseType),d&&([f,p]=Wh(d,!0),y.addEventListener("progress",f)),c&&y.upload&&([h,x]=Wh(c),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(u=b=>{y&&(s(!b||b.type?new _c(null,e,y):b),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const v=C6(n.url);if(v&&Kr.protocols.indexOf(v)===-1){s(new at("Unsupported protocol "+v+":",at.ERR_BAD_REQUEST,e));return}y.send(i||null)})},L6=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,n;const i=function(d){if(!n){n=!0,o();const u=d instanceof Error?d:this.reason;s.abort(u instanceof at?u:new _c(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>pe.asap(o),c}},B6=L6,z6=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let s=0,n;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},$6=async function*(e,t){for await(const r of U6(e))yield*z6(r,t)},U6=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},Sb=(e,t,r,s)=>{const n=$6(e,t);let i=0,l,o=c=>{l||(l=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){o(),c.close();return}let h=u.byteLength;if(r){let f=i+=h;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},Tb=64*1024,{isFunction:S0}=pe,V6=(({Request:e,Response:t})=>({Request:e,Response:t}))(pe.global),{ReadableStream:_b,TextEncoder:Eb}=pe.global,Cb=(e,...t)=>{try{return!!e(...t)}catch{return!1}},H6=e=>{e=pe.merge.call({skipUndefined:!0},V6,e);const{fetch:t,Request:r,Response:s}=e,n=t?S0(t):typeof fetch=="function",i=S0(r),l=S0(s);if(!n)return!1;const o=n&&S0(_b),c=n&&(typeof Eb=="function"?(p=>m=>p.encode(m))(new Eb):async p=>new Uint8Array(await new r(p).arrayBuffer())),d=i&&o&&Cb(()=>{let p=!1;const m=new r(Kr.origin,{body:new _b,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m}),u=l&&o&&Cb(()=>pe.isReadableStream(new s("").body)),h={stream:u&&(p=>p.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(m,y)=>{let g=m&&m[p];if(g)return g.call(m);throw new at(`Response type '${p}' is not supported`,at.ERR_NOT_SUPPORT,y)})});const f=async p=>{if(p==null)return 0;if(pe.isBlob(p))return p.size;if(pe.isSpecCompliantForm(p))return(await new r(Kr.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(pe.isArrayBufferView(p)||pe.isArrayBuffer(p))return p.byteLength;if(pe.isURLSearchParams(p)&&(p=p+""),pe.isString(p))return(await c(p)).byteLength},x=async(p,m)=>{const y=pe.toFiniteNumber(p.getContentLength());return y??f(m)};return async p=>{let{url:m,method:y,data:g,signal:v,cancelToken:b,timeout:S,onDownloadProgress:D,onUploadProgress:N,responseType:E,headers:w,withCredentials:_="same-origin",fetchOptions:C}=zS(p),T=t||fetch;E=E?(E+"").toLowerCase():"text";let j=B6([v,b&&b.toAbortSignal()],S),F=null;const O=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let z;try{if(N&&d&&y!=="get"&&y!=="head"&&(z=await x(w,g))!==0){let L=new r(m,{method:"POST",body:g,duplex:"half"}),P;if(pe.isFormData(g)&&(P=L.headers.get("content-type"))&&w.setContentType(P),L.body){const[I,R]=Nb(z,Wh(kb(N)));g=Sb(L.body,Tb,I,R)}}pe.isString(_)||(_=_?"include":"omit");const G=i&&"credentials"in r.prototype,q={...C,signal:j,method:y.toUpperCase(),headers:w.normalize().toJSON(),body:g,duplex:"half",credentials:G?_:void 0};F=i&&new r(m,q);let H=await(i?T(F,C):T(m,q));const A=u&&(E==="stream"||E==="response");if(u&&(D||A&&O)){const L={};["status","statusText","headers"].forEach(U=>{L[U]=H[U]});const P=pe.toFiniteNumber(H.headers.get("content-length")),[I,R]=D&&Nb(P,Wh(kb(D),!0))||[];H=new s(Sb(H.body,Tb,I,()=>{R&&R(),O&&O()}),L)}E=E||"text";let V=await h[pe.findKey(h,E)||"text"](H,p);return!A&&O&&O(),await new Promise((L,P)=>{LS(L,P,{data:V,headers:ja.from(H.headers),status:H.status,statusText:H.statusText,config:p,request:F})})}catch(G){throw O&&O(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,p,F),{cause:G.cause||G}):at.from(G,G&&G.code,p,F)}}},K6=new Map,$S=e=>{let t=e?e.env:{};const{fetch:r,Request:s,Response:n}=t,i=[s,n,r];let l=i.length,o=l,c,d,u=K6;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:H6(t)),u=d;return d};$S();const jp={http:i6,xhr:O6,fetch:{get:$S}};pe.forEach(jp,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Db=e=>`- ${e}`,G6=e=>pe.isFunction(e)||e===null||e===!1,US={getAdapter:(e,t)=>{e=pe.isArray(e)?e:[e];const{length:r}=e;let s,n;const i={};for(let l=0;l<r;l++){s=e[l];let o;if(n=s,!G6(s)&&(n=jp[(o=String(s)).toLowerCase()],n===void 0))throw new at(`Unknown adapter '${o}'`);if(n&&(pe.isFunction(n)||(n=n.get(t))))break;i[o||"#"+l]=n}if(!n){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map(Db).join(`
`):" "+Db(l[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:jp};function Vm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _c(null,e)}function Ab(e){return Vm(e),e.headers=ja.from(e.headers),e.data=Um.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),US.getAdapter(e.adapter||jy.adapter,e)(e).then(function(s){return Vm(e),s.data=Um.call(e,e.transformResponse,s),s.headers=ja.from(s.headers),s},function(s){return OS(s)||(Vm(e),s&&s.response&&(s.response.data=Um.call(e,e.transformResponse,s.response),s.response.headers=ja.from(s.response.headers))),Promise.reject(s)})}const VS="1.12.2",Qf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Qf[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Pb={};Qf.transitional=function(t,r,s){function n(i,l){return"[Axios v"+VS+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,o)=>{if(t===!1)throw new at(n(l," has been removed"+(r?" in "+r:"")),at.ERR_DEPRECATED);return r&&!Pb[l]&&(Pb[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,o):!0}};Qf.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function W6(e,t,r){if(typeof e!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const i=s[n],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new at("option "+i+" must be "+c,at.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new at("Unknown option "+i,at.ERR_BAD_OPTION)}}const lh={assertOptions:W6,validators:Qf},Ra=lh.validators;let Yh=class{constructor(t){this.defaults=t||{},this.interceptors={request:new bb,response:new bb}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ol(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&lh.assertOptions(s,{silentJSONParsing:Ra.transitional(Ra.boolean),forcedJSONParsing:Ra.transitional(Ra.boolean),clarifyTimeoutError:Ra.transitional(Ra.boolean)},!1),n!=null&&(pe.isFunction(n)?r.paramsSerializer={serialize:n}:lh.assertOptions(n,{encode:Ra.function,serialize:Ra.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),lh.assertOptions(r,{baseUrl:Ra.spelling("baseURL"),withXsrfToken:Ra.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&pe.merge(i.common,i[r.method]);i&&pe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=ja.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!c){const p=[Ab.bind(this),void 0];for(p.unshift(...o),p.push(...d),f=p.length,u=Promise.resolve(r);h<f;)u=u.then(p[h++],p[h++]);return u}f=o.length;let x=r;for(;h<f;){const p=o[h++],m=o[h++];try{x=p(x)}catch(y){m.call(this,y);break}}try{u=Ab.call(this,x)}catch(p){return Promise.reject(p)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=Ol(this.defaults,t);const r=BS(t.baseURL,t.url,t.allowAbsoluteUrls);return FS(r,t.params,t.paramsSerializer)}};pe.forEach(["delete","get","head","options"],function(t){Yh.prototype[t]=function(r,s){return this.request(Ol(s||{},{method:t,url:r,data:(s||{}).data}))}});pe.forEach(["post","put","patch"],function(t){function r(s){return function(i,l,o){return this.request(Ol(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Yh.prototype[t]=r(),Yh.prototype[t+"Form"]=r(!0)});const oh=Yh;let Y6=class HS{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{s.subscribe(o),i=o}).then(n);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,o){s.reason||(s.reason=new _c(i,l,o),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new HS(function(n){t=n}),cancel:t}}};const q6=Y6;function X6(e){return function(r){return e.apply(null,r)}}function Q6(e){return pe.isObject(e)&&e.isAxiosError===!0}const Sp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sp).forEach(([e,t])=>{Sp[t]=e});const Z6=Sp;function KS(e){const t=new oh(e),r=NS(oh.prototype.request,t);return pe.extend(r,oh.prototype,t,{allOwnKeys:!0}),pe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return KS(Ol(e,n))},r}const ur=KS(jy);ur.Axios=oh;ur.CanceledError=_c;ur.CancelToken=q6;ur.isCancel=OS;ur.VERSION=VS;ur.toFormData=qf;ur.AxiosError=at;ur.Cancel=ur.CanceledError;ur.all=function(t){return Promise.all(t)};ur.spread=X6;ur.isAxiosError=Q6;ur.mergeConfig=Ol;ur.AxiosHeaders=ja;ur.formToJSON=e=>MS(pe.isHTMLForm(e)?new FormData(e):e);ur.getAdapter=US.getAdapter;ur.HttpStatusCode=Z6;ur.default=ur;const ge=ur,{Axios:FW,AxiosError:Sy,CanceledError:IW,isCancel:MW,CancelToken:OW,VERSION:LW,all:BW,Cancel:zW,isAxiosError:$W,spread:UW,toFormData:VW,AxiosHeaders:HW,HttpStatusCode:KW,formToJSON:GW,getAdapter:WW,mergeConfig:YW}=ge,J6=e=>{var t,r;return e instanceof Sy?((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||e.message||"API hatas olutu":e instanceof Error?e.message:typeof e=="string"?e:"Bilinmeyen bir hata olutu"},eR=e=>e instanceof Sy?!e.response||e.code==="NETWORK_ERROR":!1,tR=e=>{var t;return e instanceof Sy?((t=e.response)==null?void 0:t.status)===401:!1},GS=k.createContext(void 0),rR=()=>{const e=k.useContext(GS);if(!e)throw new Error("useGlobalError must be used within a GlobalErrorProvider");return e},sR=({children:e})=>{const[t,r]=k.useState([]),s=()=>`error-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n=k.useCallback(f=>{r(x=>x.filter(p=>p.id!==f))},[]),i=k.useCallback((f,x={})=>{const p=s(),m={id:p,message:f,timestamp:new Date,type:"error",duration:5e3,...x};return r(y=>[...y,m]),m.duration&&m.duration>0&&!m.persistent&&setTimeout(()=>{n(p)},m.duration),p},[n]),l=k.useCallback((f,x={})=>{let p=J6(f),m=x.title;eR(f)?(m=m||"Balant Hatas",p="Sunucuya balanrken bir hata olutu. nternet balantnz kontrol edin."):tR(f)&&(m=m||"Yetkilendirme Hatas",p="Bu ilem iin yetkiniz bulunmuyor. Ltfen tekrar giri yapn."),i(p,{...x,type:"error",title:m})},[i]),o=k.useCallback((f,x={})=>{i(f,{...x,type:"success",duration:x.duration||3e3})},[i]),c=k.useCallback((f,x={})=>{i(f,{...x,type:"warning"})},[i]),d=k.useCallback((f,x={})=>{i(f,{...x,type:"info"})},[i]),u=k.useCallback(()=>{r([])},[]),h={showError:l,showSuccess:o,showWarning:c,showInfo:d,clearError:n,clearAllErrors:u};return a.jsxs(GS.Provider,{value:h,children:[e,a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(f=>a.jsx(bP,{title:f.title,message:f.message,type:f.type,dismissible:!0,onDismiss:()=>n(f.id),onRetry:f.onRetry,retryText:f.retryText,position:"top-right",className:"animate-in slide-in-from-right-full duration-300"},f.id))})]})},aR=function(){return null},nR=({children:e})=>{const{user:t}=fy();console.log("MainLayout render - user:",t);const r=Sc(),[s,n]=k.useState(()=>{const g=localStorage.getItem("sidebarCollapsed");return g?JSON.parse(g):!1}),[i,l]=k.useState(()=>{const g=localStorage.getItem("darkMode");return g?JSON.parse(g):!1}),[o,c]=k.useState(!1),[d,u]=k.useState({});k.useEffect(()=>{localStorage.setItem("sidebarCollapsed",JSON.stringify(s))},[s]),k.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(i)),i?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[i]);const h=()=>{n(!s)},f=()=>{l(!i)},x=()=>{c(!o)},p=g=>{u(v=>({...v,[g]:!v[g]}))},m=[{key:"dashboard",label:"Dashboard",icon:rh,href:"/"},{key:"patients",label:"Hastalar",icon:Zs,href:"/patients"},{key:"appointments",label:"Randevular",icon:pt,href:"/appointments"},{key:"inventory",label:"Envanter",icon:il,href:"/inventory"},{key:"suppliers",label:"Tedarikiler",icon:l5,href:"/suppliers"},{key:"invoices",label:"Fatura",icon:wt,submenu:[{label:"Satlar",href:"/invoices"},{label:"Allar",href:"/invoices/purchases"},{label:"Yeni Fatura",href:"/invoices/new"},{label:"deme Takibi",href:"/invoices/payments"}]},{key:"cashflow",label:"Kasa",icon:mS,href:"/cashflow"},{key:"campaigns",label:"Kampanyalar",icon:w5,href:"/campaigns"},{key:"sgk",label:"SGK",icon:iS,submenu:[{label:"SGK Raporlar",href:"/sgk"},{label:"Hasta Eletirme",href:"/sgk/matching"},{label:"Belge Ykleme",href:"/sgk/upload"},{label:"Belge ndirme",href:"/sgk/downloads"}]},{key:"reports",label:"Raporlar",icon:yp,submenu:[{label:"Genel Raporlar",href:"/reports"},{label:"Sat Raporlar",href:"/reports/sales"},{label:"Hasta Raporlar",href:"/reports/patients"}]},{key:"automation",label:"Otomasyon",icon:i5,href:"/automation"},{key:"settings",label:"Ayarlar",icon:Ci,href:"/settings"}],y=g=>{const v=g.submenu&&g.submenu.length>0,b=d[g.key];return a.jsxs("li",{style:{marginBottom:"0.25rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.75rem 1rem",color:i?"#d1d5db":"#374151",textDecoration:"none",borderRadius:"0.375rem",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:"transparent"},onClick:()=>{v?p(g.key):r({to:g.href})},onMouseEnter:S=>{S.currentTarget.style.backgroundColor=i?"#374151":"#f3f4f6",S.currentTarget.style.color=i?"#ffffff":"#1f2937"},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="transparent",S.currentTarget.style.color=i?"#d1d5db":"#374151"},children:[a.jsx("span",{style:{marginRight:s?"0":"0.75rem"},children:a.jsx(g.icon,{size:20})}),!s&&a.jsxs(a.Fragment,{children:[a.jsx("span",{style:{flex:1},children:g.label}),v&&a.jsx("span",{style:{transform:b?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:a.jsx(lS,{size:16})})]})]}),v&&!s&&b&&a.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0.25rem 0 0 2rem",borderLeft:`2px solid ${i?"#374151":"#e5e7eb"}`},children:g.submenu.map((S,D)=>a.jsx("li",{children:a.jsx(hy,{to:S.href,style:{display:"block",padding:"0.5rem 1rem",color:i?"#9ca3af":"#6b7280",textDecoration:"none",fontSize:"0.875rem",borderRadius:"0.375rem",transition:"all 0.2s ease"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=i?"#374151":"#f3f4f6",N.currentTarget.style.color=i?"#ffffff":"#1f2937"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="transparent",N.currentTarget.style.color=i?"#9ca3af":"#6b7280"},children:S.label})},D))})]},g.key)};return k.useEffect(()=>(window.toggleSidebar=h,()=>{delete window.toggleSidebar}),[]),a.jsxs("div",{style:{display:"flex",minHeight:"100vh",backgroundColor:i?"#111827":"#ffffff",color:i?"#ffffff":"#000000"},children:[a.jsxs("nav",{style:{width:s?"80px":"240px",backgroundColor:i?"#1f2937":"#ffffff",borderRight:`1px solid ${i?"#374151":"#e5e7eb"}`,transition:"width 0.3s ease",position:"fixed",height:"100vh",overflowY:"auto",zIndex:1e3},children:[a.jsxs("div",{style:{padding:"1rem",borderBottom:`1px solid ${i?"#374151":"#e5e7eb"}`,display:"flex",alignItems:"center",justifyContent:s?"center":"space-between"},children:[a.jsx(Z,{onClick:h,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"0.375rem",color:i?"#ffffff":"#1f2937",display:"flex",alignItems:"center",justifyContent:"center"},variant:"ghost",children:a.jsx(N5,{size:20})}),!s&&a.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"bold",color:i?"#ffffff":"#1f2937"},children:"X-EAR CRM"})]}),a.jsx("ul",{style:{listStyle:"none",padding:"1rem 0.5rem",margin:0},children:m.map(y)})]}),a.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",marginLeft:s?"80px":"240px",transition:"margin-left 0.3s ease"},children:[a.jsx("header",{style:{backgroundColor:i?"#1f2937":"#ffffff",padding:"1rem 2rem",borderBottom:`1px solid ${i?"#374151":"#e5e7eb"}`,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",position:"sticky",top:0,zIndex:999},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h1",{style:{margin:0,fontSize:"1.5rem",color:i?"#ffffff":"#1f2937",fontWeight:"600"},children:"Dashboard"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[a.jsx(Z,{onClick:f,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"0.375rem",color:i?"#ffffff":"#1f2937",display:"flex",alignItems:"center",justifyContent:"center"},title:i?"Ak Tema":"Koyu Tema",variant:"ghost",children:i?a.jsx(P5,{size:20}):a.jsx(j5,{size:20})}),a.jsxs(Z,{style:{position:"relative",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"0.375rem",color:i?"#ffffff":"#1f2937",display:"flex",alignItems:"center",justifyContent:"center"},title:"Bildirimler",variant:"ghost",children:[a.jsx(n5,{size:20}),a.jsx("span",{style:{position:"absolute",top:"0.25rem",right:"0.25rem",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%"}})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsxs(Z,{onClick:x,style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"0.375rem",backgroundColor:i?"#374151":"#f3f4f6"},variant:"ghost",children:[a.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:a.jsx(Mt,{size:16})}),a.jsxs("div",{style:{textAlign:"left",color:i?"#ffffff":"#1f2937"},children:[a.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:(t==null?void 0:t.name)||"User"}),a.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:(t==null?void 0:t.role)||"Guest"})]}),a.jsx(my,{size:12,style:{color:i?"#ffffff":"#1f2937"}})]}),o&&a.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",backgroundColor:i?"#1f2937":"#ffffff",border:`1px solid ${i?"#374151":"#e5e7eb"}`,borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",minWidth:"200px",zIndex:1e3},children:a.jsxs("div",{style:{padding:"0.5rem 0"},children:[a.jsxs("a",{href:"/profile",style:{display:"flex",alignItems:"center",padding:"0.75rem 1rem",color:i?"#ffffff":"#1f2937",textDecoration:"none",fontSize:"0.875rem",borderBottom:`1px solid ${i?"#374151":"#e5e7eb"}`,backgroundColor:"transparent",transition:"background-color 0.2s ease"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=i?"#374151":"#f3f4f6"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},children:[a.jsx(Mt,{size:16,style:{marginRight:"0.5rem"}}),a.jsx("span",{children:"Profil"})]}),a.jsxs("a",{href:"/settings",style:{display:"flex",alignItems:"center",padding:"0.75rem 1rem",color:i?"#ffffff":"#1f2937",textDecoration:"none",fontSize:"0.875rem",borderBottom:`1px solid ${i?"#374151":"#e5e7eb"}`,backgroundColor:"transparent",transition:"background-color 0.2s ease"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=i?"#374151":"#f3f4f6"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},children:[a.jsx(Ci,{size:16,style:{marginRight:"0.5rem"}}),a.jsx("span",{children:"Ayarlar"})]}),a.jsxs(Z,{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"},style:{display:"flex",alignItems:"center",width:"100%",padding:"0.75rem 1rem",color:"#ef4444",background:"none",border:"none",textAlign:"left",fontSize:"0.875rem",cursor:"pointer",backgroundColor:"transparent",transition:"background-color 0.2s ease"},onMouseEnter:g=>{g.currentTarget.style.backgroundColor=i?"#374151":"#f3f4f6"},onMouseLeave:g=>{g.currentTarget.style.backgroundColor="transparent"},variant:"ghost",children:[a.jsx(v5,{size:16,style:{marginRight:"0.5rem"}}),a.jsx("span",{children:"k Yap"})]})]})})]})]})]})}),a.jsx("main",{style:{flex:1,padding:"2rem",backgroundColor:i?"#111827":"#f9fafb",minHeight:"calc(100vh - 80px)"},children:e})]})]})},Da=_A({component:()=>a.jsxs(a.Fragment,{children:[a.jsx(nR,{children:a.jsx(Vf,{})}),a.jsx(aR,{})]}),notFoundComponent:()=>a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-md w-full text-center",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sayfa Bulunamad"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Aradnz sayfa mevcut deil veya tanm olabilir."}),a.jsx("a",{href:"/",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ana Sayfaya Dn"})]})})}),T0="/api/uts";async function _0(e){if(!e.ok)throw new Error(`UTS request failed: ${e.status}`);return e.json()}const Ty={listRegistrations:e=>{const t=e?"?"+new URLSearchParams(e).toString():"";return fetch(`${T0}/registrations${t}`).then(_0)},startBulkRegistration:(e,t)=>fetch(`${T0}/registrations/bulk`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...(t==null?void 0:t.headers)||{}}}).then(_0),getJobStatus:e=>fetch(`${T0}/jobs/${encodeURIComponent(e)}`).then(_0),cancelJob:e=>fetch(`${T0}/jobs/${encodeURIComponent(e)}/cancel`,{method:"POST"}).then(_0)},WS=["uts","registrations"];function iR(e){return ay({queryKey:WS,queryFn:()=>Ty.listRegistrations(e)})}function _y(){const e=sy();return Fj({mutationFn:t=>Ty.startBulkRegistration(t),onSuccess:()=>e.invalidateQueries({queryKey:WS})})}function lR(e,t){const r=(t==null?void 0:t.interval)??3e3;return ay({queryKey:["uts","job",e,"poll"],queryFn:()=>Ty.getJobStatus(e),enabled:!!e,refetchInterval:s=>{if(!s)return r;const n=s.status;return n==="completed"||n==="failed"||n==="cancelled"?!1:r},onSuccess:s=>{(s==null?void 0:s.status)==="completed"&&(t!=null&&t.onComplete)&&t.onComplete(s)}})}class oR{constructor(){qe(this,"dbName","XEarOutbox");qe(this,"dbVersion",1);qe(this,"storeName","operations");qe(this,"db",null);qe(this,"isOnline",navigator.onLine);qe(this,"syncInProgress",!1);qe(this,"syncInterval",null);this.initDB(),this.setupEventListeners(),this.startPeriodicSync()}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingOperations()}),window.addEventListener("offline",()=>{this.isOnline=!1})}startPeriodicSync(){this.syncInterval=window.setInterval(()=>{this.isOnline&&!this.syncInProgress&&this.syncPendingOperations()},12e4)}async initDB(){return new Promise((t,r)=>{const s=indexedDB.open(this.dbName,this.dbVersion);s.onerror=()=>r(s.error),s.onsuccess=()=>{this.db=s.result,t(this.db)},s.onupgradeneeded=n=>{const i=n.target.result;if(!i.objectStoreNames.contains(this.storeName)){const l=i.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});l.createIndex("timestamp","timestamp",{unique:!1}),l.createIndex("endpoint","endpoint",{unique:!1}),l.createIndex("status","status",{unique:!1}),l.createIndex("priority","priority",{unique:!1})}}})}async addOperation(t){var s,n,i;this.db||await this.initDB();const r={...t,id:this.generateOperationId(),timestamp:Date.now(),status:"pending",retryCount:0,maxRetries:t.maxRetries||3,priority:t.priority||"normal",createdAt:new Date().toISOString()};try{const l=((s=r.headers)==null?void 0:s["Idempotency-Key"])||((n=r.headers)==null?void 0:n["idempotency-key"])||((i=r.headers)==null?void 0:i["Idempotency-key"]);if(l){const c=(await this.getPendingOperations()).find(d=>{if(!d||!d.headers)return!1;const u=d.headers["Idempotency-Key"]||d.headers["idempotency-key"]||d.headers["Idempotency-key"];return d.endpoint===r.endpoint&&(d.method||"GET")===(r.method||"GET")&&u===l});if(c)return this.emitOutboxEvent("operation-duplicate",c),c}}catch(l){console.warn("Outbox deduplication check failed, proceeding to add operation:",l)}return new Promise((l,o)=>{const u=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(r);u.onsuccess=()=>{this.emitOutboxEvent("operation-added",r),l(r)},u.onerror=()=>o(u.error)})}async getPendingOperations(){return this.db||await this.initDB(),new Promise((t,r)=>{const l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("status").getAll("pending");l.onsuccess=()=>{const o=l.result.sort((c,d)=>{const u={high:3,normal:2,low:1},h=u[c.priority||"normal"],f=u[d.priority||"normal"];return h!==f?f-h:(c.timestamp||0)-(d.timestamp||0)});t(o)},l.onerror=()=>r(l.error)})}async updateOperation(t,r){return this.db||await this.initDB(),new Promise((s,n)=>{const l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),o=l.get(t);o.onsuccess=()=>{const c=o.result;if(!c){n(new Error("Operation not found"));return}const d={...c,...r},u=l.put(d);u.onsuccess=()=>{this.emitOutboxEvent("operation-updated",d),s(d)},u.onerror=()=>n(u.error)},o.onerror=()=>n(o.error)})}async removeOperation(t){return this.db||await this.initDB(),new Promise((r,s)=>{const l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);l.onsuccess=()=>{this.emitOutboxEvent("operation-removed",{id:t}),r()},l.onerror=()=>s(l.error)})}async syncPendingOperations(){if(!(this.syncInProgress||!this.isOnline)){this.syncInProgress=!0,this.emitOutboxEvent("sync-started",{});try{const t=await this.getPendingOperations();let r=0,s=0;for(const n of t)try{const i=await this.executeOperation(n);this.emitOutboxEvent("operation-succeeded",{operation:n,result:i}),await this.removeOperation(n.id),r++}catch(i){console.error("Operation failed:",i);const l=(n.retryCount||0)+1;l>=(n.maxRetries||3)?await this.updateOperation(n.id,{status:"failed",retryCount:l,lastError:i instanceof Error?i.message:String(i),failedAt:new Date().toISOString()}):await this.updateOperation(n.id,{retryCount:l,lastError:i instanceof Error?i.message:String(i),nextRetryAt:new Date(Date.now()+this.getRetryDelay(l)).toISOString()}),s++}this.emitOutboxEvent("sync-completed",{total:t.length,success:r,failures:s})}catch(t){console.error("Sync failed:",t),this.emitOutboxEvent("sync-failed",t)}finally{this.syncInProgress=!1}}}async executeOperation(t){const{method:r,endpoint:s,data:n,headers:i={}}=t,l="http://localhost:5003",o=s.startsWith("http")?s:`${l}${s}`;if(n&&n.blobId){const{indexedDBManager:c}=await Ij(()=>Promise.resolve().then(()=>G$),void 0),d=await c.getFileBlob(n.blobId);if(!d)throw new Error("Blob not found for outbox operation");const u=new FormData;u.append("file",d.blob,d.filename||"file"),n.filename&&u.append("filename",n.filename),n.mime&&u.append("mime",n.mime);try{const h=await fetch(o,{method:r,headers:{...i},body:u});if(!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);return await h.json()}catch(h){throw h instanceof TypeError&&h.message==="Failed to fetch"?new Error("Network error: Failed to fetch. Please check your connection and ensure the server is running."):h}}try{const c=await fetch(o,{method:r,headers:{"Content-Type":"application/json",...i},body:n?JSON.stringify(n):void 0});if(!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);return await c.json()}catch(c){throw c instanceof TypeError&&c.message==="Failed to fetch"?new Error("Network error: Failed to fetch. Please check your connection and ensure the server is running."):c}}getRetryDelay(t){return Math.min(1e3*Math.pow(2,t),6e4)+Math.random()*1e3}generateOperationId(){return`op_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}emitOutboxEvent(t,r={}){window.dispatchEvent(new CustomEvent("outbox-event",{detail:{type:t,data:r,timestamp:Date.now()}}))}async getStats(){return this.db||await this.initDB(),new Promise((t,r)=>{const i=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();i.onsuccess=()=>{const l=i.result,o={total:l.length,pending:l.filter(d=>d.status==="pending").length,failed:l.filter(d=>d.status==="failed").length,oldestPending:null,newestPending:null},c=l.filter(d=>d.status==="pending");c.length>0&&(o.oldestPending=Math.min(...c.map(d=>d.timestamp||0)),o.newestPending=Math.max(...c.map(d=>d.timestamp||0))),t(o)},i.onerror=()=>r(i.error)})}async clearFailedOperations(){return this.db||await this.initDB(),new Promise((t,r)=>{const l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).index("status").openCursor(IDBKeyRange.only("failed"));let o=0;l.onsuccess=c=>{const d=c.target.result;d?(d.delete(),o++,d.continue()):(this.emitOutboxEvent("failed-operations-cleared",{count:o}),t(o))},l.onerror=()=>r(l.error)})}destroy(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.db&&(this.db.close(),this.db=null)}}class cR{constructor(){qe(this,"ops",[])}async addOperation(t){const r={...t,id:this.generateOperationId(),timestamp:Date.now(),status:"pending",retryCount:0,maxRetries:t.maxRetries||3};return this.ops.push(r),r}async getPendingOperations(){return this.ops.filter(t=>t.status==="pending")}async updateOperation(t,r){const s=this.ops.findIndex(n=>n.id===t);if(s===-1)throw new Error("Operation not found");return this.ops[s]={...this.ops[s],...r},this.ops[s]}async removeOperation(t){this.ops=this.ops.filter(r=>r.id!==t)}async syncPendingOperations(){}async getStats(){const t=this.ops.length,r=this.ops.filter(n=>n.status==="pending").length,s=this.ops.filter(n=>n.status==="failed").length;return{total:t,pending:r,failed:s,oldestPending:null,newestPending:null}}async clearFailedOperations(){const t=this.ops.length;return this.ops=this.ops.filter(r=>r.status!=="failed"),t-this.ops.length}destroy(){this.ops=[]}generateOperationId(){return`op_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const _t=typeof window<"u"&&typeof indexedDB<"u"?new oR:new cR;var YS={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,s)=>{e.exports=s()})(__,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},n,i=!s.document&&!!s.postMessage,l=s.IS_PAPA_WORKER||!1,o={},c=0,d={};function u(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var C=D(_);C.chunkSize=parseInt(C.chunkSize),_.step||_.chunk||(C.chunkSize=null),this._handle=new m(C),(this._handle.streamer=this)._config=C}).call(this,w),this.parseChunk=function(_,C){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let F=this._config.newline;F||(j=this._config.quoteChar||'"',F=this._handle.guessLineEndings(_,j)),_=[..._.split(F).slice(T)].join(F)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&(j=this._config.beforeFirstChunk(_))!==void 0&&(_=j),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+_,j=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=j.meta.cursor,T=(this._finished||(this._partialLine=T.substring(_-this._baseIndex),this._baseIndex=_),j&&j.data&&(this._rowCount+=j.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)s.postMessage({results:j,workerId:d.WORKER_ID,finished:T});else if(E(this._config.chunk)&&!C){if(this._config.chunk(j,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=j=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(j.data),this._completeResults.errors=this._completeResults.errors.concat(j.errors),this._completeResults.meta=j.meta),this._completed||!T||!E(this._config.complete)||j&&j.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||j&&j.meta.paused||this._nextChunk(),j}this._halted=!0},this._sendError=function(_){E(this._config.error)?this._config.error(_):l&&this._config.error&&s.postMessage({workerId:d.WORKER_ID,error:_,finished:!1})}}function h(w){var _;(w=w||{}).chunkSize||(w.chunkSize=d.RemoteChunkSize),u.call(this,w),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=N(this._chunkLoaded,this),_.onerror=N(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var C,T=this._config.downloadRequestHeaders;for(C in T)_.setRequestHeader(C,T[C])}var j;this._config.chunkSize&&(j=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+j));try{_.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(C=>(C=C.getResponseHeader("Content-Range"))!==null?parseInt(C.substring(C.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(C){C=_.statusText||C,this._sendError(new Error(C))}}function f(w){(w=w||{}).chunkSize||(w.chunkSize=d.LocalChunkSize),u.call(this,w);var _,C,T=typeof FileReader<"u";this.stream=function(j){this._input=j,C=j.slice||j.webkitSlice||j.mozSlice,T?((_=new FileReader).onload=N(this._chunkLoaded,this),_.onerror=N(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var j=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),j=C.call(j,this._start,F)),_.readAsText(j,this._config.encoding));T||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(j){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(j.target.result)},this._chunkError=function(){this._sendError(_.error)}}function x(w){var _;u.call(this,w=w||{}),this.stream=function(C){return _=C,this._nextChunk()},this._nextChunk=function(){var C,T;if(!this._finished)return C=this._config.chunkSize,_=C?(T=_.substring(0,C),_.substring(C)):(T=_,""),this._finished=!_,this.parseChunk(T)}}function p(w){u.call(this,w=w||{});var _=[],C=!0,T=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(j){this._input=j,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):C=!0},this._streamData=N(function(j){try{_.push(typeof j=="string"?j:j.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(F){this._streamError(F)}},this),this._streamError=N(function(j){this._streamCleanUp(),this._sendError(j)},this),this._streamEnd=N(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(w){var _,C,T,j,F=Math.pow(2,53),O=-F,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,q=this,H=0,A=0,V=!1,L=!1,P=[],I={data:[],errors:[],meta:{}};function R(se){return w.skipEmptyLines==="greedy"?se.join("").trim()==="":se.length===1&&se[0].length===0}function U(){if(I&&T&&(J("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),T=!1),w.skipEmptyLines&&(I.data=I.data.filter(function(ce){return!R(ce)})),M()){let ce=function(K,He){E(w.transformHeader)&&(K=w.transformHeader(K,He)),P.push(K)};if(I)if(Array.isArray(I.data[0])){for(var se=0;M()&&se<I.data.length;se++)I.data[se].forEach(ce);I.data.splice(0,1)}else I.data.forEach(ce)}function ae(ce,K){for(var He=w.header?{}:[],Pe=0;Pe<ce.length;Pe++){var Le=Pe,Ce=ce[Pe],Ce=((de,Ae)=>(Ke=>(w.dynamicTypingFunction&&w.dynamicTyping[Ke]===void 0&&(w.dynamicTyping[Ke]=w.dynamicTypingFunction(Ke)),(w.dynamicTyping[Ke]||w.dynamicTyping)===!0))(de)?Ae==="true"||Ae==="TRUE"||Ae!=="false"&&Ae!=="FALSE"&&((Ke=>{if(z.test(Ke)&&(Ke=parseFloat(Ke),O<Ke&&Ke<F))return 1})(Ae)?parseFloat(Ae):G.test(Ae)?new Date(Ae):Ae===""?null:Ae):Ae)(Le=w.header?Pe>=P.length?"__parsed_extra":P[Pe]:Le,Ce=w.transform?w.transform(Ce,Le):Ce);Le==="__parsed_extra"?(He[Le]=He[Le]||[],He[Le].push(Ce)):He[Le]=Ce}return w.header&&(Pe>P.length?J("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+Pe,A+K):Pe<P.length&&J("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+Pe,A+K)),He}var ie;I&&(w.header||w.dynamicTyping||w.transform)&&(ie=1,!I.data.length||Array.isArray(I.data[0])?(I.data=I.data.map(ae),ie=I.data.length):I.data=ae(I.data,0),w.header&&I.meta&&(I.meta.fields=P),A+=ie)}function M(){return w.header&&P.length===0}function J(se,ae,ie,ce){se={type:se,code:ae,message:ie},ce!==void 0&&(se.row=ce),I.errors.push(se)}E(w.step)&&(j=w.step,w.step=function(se){I=se,M()?U():(U(),I.data.length!==0&&(H+=se.data.length,w.preview&&H>w.preview?C.abort():(I.data=I.data[0],j(I,q))))}),this.parse=function(se,ae,ie){var ce=w.quoteChar||'"',ce=(w.newline||(w.newline=this.guessLineEndings(se,ce)),T=!1,w.delimiter?E(w.delimiter)&&(w.delimiter=w.delimiter(se),I.meta.delimiter=w.delimiter):((ce=((K,He,Pe,Le,Ce)=>{var de,Ae,Ke,re;Ce=Ce||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var oe=0;oe<Ce.length;oe++){for(var me,we=Ce[oe],ve=0,Ne=0,Ee=0,We=(Ke=void 0,new g({comments:Le,delimiter:we,newline:He,preview:10}).parse(K)),Ge=0;Ge<We.data.length;Ge++)Pe&&R(We.data[Ge])?Ee++:(me=We.data[Ge].length,Ne+=me,Ke===void 0?Ke=me:0<me&&(ve+=Math.abs(me-Ke),Ke=me));0<We.data.length&&(Ne/=We.data.length-Ee),(Ae===void 0||ve<=Ae)&&(re===void 0||re<Ne)&&1.99<Ne&&(Ae=ve,de=we,re=Ne)}return{successful:!!(w.delimiter=de),bestDelimiter:de}})(se,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=ce.bestDelimiter:(T=!0,w.delimiter=d.DefaultDelimiter),I.meta.delimiter=w.delimiter),D(w));return w.preview&&w.header&&ce.preview++,_=se,C=new g(ce),I=C.parse(_,ae,ie),U(),V?{meta:{paused:!0}}:I||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,C.abort(),_=E(w.chunk)?"":_.substring(C.getCharIndex())},this.resume=function(){q.streamer._halted?(V=!1,q.streamer.parseChunk(_,!0)):setTimeout(q.resume,3)},this.aborted=function(){return L},this.abort=function(){L=!0,C.abort(),I.meta.aborted=!0,E(w.complete)&&w.complete(I),_=""},this.guessLineEndings=function(K,ce){K=K.substring(0,1048576);var ce=new RegExp(y(ce)+"([^]*?)"+y(ce),"gm"),ie=(K=K.replace(ce,"")).split("\r"),ce=K.split(`
`),K=1<ce.length&&ce[0].length<ie[0].length;if(ie.length===1||K)return`
`;for(var He=0,Pe=0;Pe<ie.length;Pe++)ie[Pe][0]===`
`&&He++;return He>=ie.length/2?`\r
`:"\r"}}function y(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(w){var _=(w=w||{}).delimiter,C=w.newline,T=w.comments,j=w.step,F=w.preview,O=w.fastMode,z=null,G=!1,q=w.quoteChar==null?'"':w.quoteChar,H=q;if(w.escapeChar!==void 0&&(H=w.escapeChar),(typeof _!="string"||-1<d.BAD_DELIMITERS.indexOf(_))&&(_=","),T===_)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<d.BAD_DELIMITERS.indexOf(T))&&(T=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var A=0,V=!1;this.parse=function(L,P,I){if(typeof L!="string")throw new Error("Input must be a string");var R=L.length,U=_.length,M=C.length,J=T.length,se=E(j),ae=[],ie=[],ce=[],K=A=0;if(!L)return ve();if(O||O!==!1&&L.indexOf(q)===-1){for(var He=L.split(C),Pe=0;Pe<He.length;Pe++){if(ce=He[Pe],A+=ce.length,Pe!==He.length-1)A+=C.length;else if(I)return ve();if(!T||ce.substring(0,J)!==T){if(se){if(ae=[],re(ce.split(_)),Ne(),V)return ve()}else re(ce.split(_));if(F&&F<=Pe)return ae=ae.slice(0,F),ve(!0)}}return ve()}for(var Le=L.indexOf(_,A),Ce=L.indexOf(C,A),de=new RegExp(y(H)+y(q),"g"),Ae=L.indexOf(q,A);;)if(L[A]===q)for(Ae=A,A++;;){if((Ae=L.indexOf(q,Ae+1))===-1)return I||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ae.length,index:A}),me();if(Ae===R-1)return me(L.substring(A,Ae).replace(de,q));if(q===H&&L[Ae+1]===H)Ae++;else if(q===H||Ae===0||L[Ae-1]!==H){Le!==-1&&Le<Ae+1&&(Le=L.indexOf(_,Ae+1));var Ke=oe((Ce=Ce!==-1&&Ce<Ae+1?L.indexOf(C,Ae+1):Ce)===-1?Le:Math.min(Le,Ce));if(L.substr(Ae+1+Ke,U)===_){ce.push(L.substring(A,Ae).replace(de,q)),L[A=Ae+1+Ke+U]!==q&&(Ae=L.indexOf(q,A)),Le=L.indexOf(_,A),Ce=L.indexOf(C,A);break}if(Ke=oe(Ce),L.substring(Ae+1+Ke,Ae+1+Ke+M)===C){if(ce.push(L.substring(A,Ae).replace(de,q)),we(Ae+1+Ke+M),Le=L.indexOf(_,A),Ae=L.indexOf(q,A),se&&(Ne(),V))return ve();if(F&&ae.length>=F)return ve(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ae.length,index:A}),Ae++}}else if(T&&ce.length===0&&L.substring(A,A+J)===T){if(Ce===-1)return ve();A=Ce+M,Ce=L.indexOf(C,A),Le=L.indexOf(_,A)}else if(Le!==-1&&(Le<Ce||Ce===-1))ce.push(L.substring(A,Le)),A=Le+U,Le=L.indexOf(_,A);else{if(Ce===-1)break;if(ce.push(L.substring(A,Ce)),we(Ce+M),se&&(Ne(),V))return ve();if(F&&ae.length>=F)return ve(!0)}return me();function re(Ee){ae.push(Ee),K=A}function oe(Ee){var We=0;return We=Ee!==-1&&(Ee=L.substring(Ae+1,Ee))&&Ee.trim()===""?Ee.length:We}function me(Ee){return I||(Ee===void 0&&(Ee=L.substring(A)),ce.push(Ee),A=R,re(ce),se&&Ne()),ve()}function we(Ee){A=Ee,re(ce),ce=[],Ce=L.indexOf(C,A)}function ve(Ee){if(w.header&&!P&&ae.length&&!G){var We=ae[0],Ge=Object.create(null),Ct=new Set(We);let Ze=!1;for(let it=0;it<We.length;it++){let At=We[it];if(Ge[At=E(w.transformHeader)?w.transformHeader(At,it):At]){let kt,Zr=Ge[At];for(;kt=At+"_"+Zr,Zr++,Ct.has(kt););Ct.add(kt),We[it]=kt,Ge[At]++,Ze=!0,(z=z===null?{}:z)[kt]=At}else Ge[At]=1,We[it]=At;Ct.add(At)}Ze&&console.warn("Duplicate headers found and renamed."),G=!0}return{data:ae,errors:ie,meta:{delimiter:_,linebreak:C,aborted:V,truncated:!!Ee,cursor:K+(P||0),renamedHeaders:z}}}function Ne(){j(ve()),ae=[],ie=[]}},this.abort=function(){V=!0},this.getCharIndex=function(){return A}}function v(w){var _=w.data,C=o[_.workerId],T=!1;if(_.error)C.userError(_.error,_.file);else if(_.results&&_.results.data){var j={abort:function(){T=!0,b(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(E(C.userStep)){for(var F=0;F<_.results.data.length&&(C.userStep({data:_.results.data[F],errors:_.results.errors,meta:_.results.meta},j),!T);F++);delete _.results}else E(C.userChunk)&&(C.userChunk(_.results,j,_.file),delete _.results)}_.finished&&!T&&b(_.workerId,_.results)}function b(w,_){var C=o[w];E(C.userComplete)&&C.userComplete(_),C.terminate(),delete o[w]}function S(){throw new Error("Not implemented.")}function D(w){if(typeof w!="object"||w===null)return w;var _,C=Array.isArray(w)?[]:{};for(_ in w)C[_]=D(w[_]);return C}function N(w,_){return function(){w.apply(_,arguments)}}function E(w){return typeof w=="function"}return d.parse=function(w,_){var C=(_=_||{}).dynamicTyping||!1;if(E(C)&&(_.dynamicTypingFunction=C,C={}),_.dynamicTyping=C,_.transform=!!E(_.transform)&&_.transform,!_.worker||!d.WORKERS_SUPPORTED)return C=null,d.NODE_STREAM_INPUT,typeof w=="string"?(w=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(w),C=new(_.download?h:x)(_)):w.readable===!0&&E(w.read)&&E(w.on)?C=new p(_):(s.File&&w instanceof File||w instanceof Object)&&(C=new f(_)),C.stream(w);(C=(()=>{var T;return!!d.WORKERS_SUPPORTED&&(T=(()=>{var j=s.URL||s.webkitURL||null,F=r.toString();return d.BLOB_URL||(d.BLOB_URL=j.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(T=new s.Worker(T)).onmessage=v,T.id=c++,o[T.id]=T)})()).userStep=_.step,C.userChunk=_.chunk,C.userComplete=_.complete,C.userError=_.error,_.step=E(_.step),_.chunk=E(_.chunk),_.complete=E(_.complete),_.error=E(_.error),delete _.worker,C.postMessage({input:w,config:_,workerId:C.id})},d.unparse=function(w,_){var C=!1,T=!0,j=",",F=`\r
`,O='"',z=O+O,G=!1,q=null,H=!1,A=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||d.BAD_DELIMITERS.filter(function(P){return _.delimiter.indexOf(P)!==-1}).length||(j=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(C=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(G=_.skipEmptyLines),typeof _.newline=="string"&&(F=_.newline),typeof _.quoteChar=="string"&&(O=_.quoteChar),typeof _.header=="boolean"&&(T=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");q=_.columns}_.escapeChar!==void 0&&(z=_.escapeChar+O),_.escapeFormulae instanceof RegExp?H=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(O),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return V(null,w,G);if(typeof w[0]=="object")return V(q||Object.keys(w[0]),w,G)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||q),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),V(w.fields||[],w.data||[],G);throw new Error("Unable to serialize unrecognized input");function V(P,I,R){var U="",M=(typeof P=="string"&&(P=JSON.parse(P)),typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(P)&&0<P.length),J=!Array.isArray(I[0]);if(M&&T){for(var se=0;se<P.length;se++)0<se&&(U+=j),U+=L(P[se],se);0<I.length&&(U+=F)}for(var ae=0;ae<I.length;ae++){var ie=(M?P:I[ae]).length,ce=!1,K=M?Object.keys(I[ae]).length===0:I[ae].length===0;if(R&&!M&&(ce=R==="greedy"?I[ae].join("").trim()==="":I[ae].length===1&&I[ae][0].length===0),R==="greedy"&&M){for(var He=[],Pe=0;Pe<ie;Pe++){var Le=J?P[Pe]:Pe;He.push(I[ae][Le])}ce=He.join("").trim()===""}if(!ce){for(var Ce=0;Ce<ie;Ce++){0<Ce&&!K&&(U+=j);var de=M&&J?P[Ce]:Ce;U+=L(I[ae][de],Ce)}ae<I.length-1&&(!R||0<ie&&!K)&&(U+=F)}}return U}function L(P,I){var R,U;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(U=!1,H&&typeof P=="string"&&H.test(P)&&(P="'"+P,U=!0),R=P.toString().replace(A,z),(U=U||C===!0||typeof C=="function"&&C(P,I)||Array.isArray(C)&&C[I]||((M,J)=>{for(var se=0;se<J.length;se++)if(-1<M.indexOf(J[se]))return!0;return!1})(R,d.BAD_DELIMITERS)||-1<R.indexOf(j)||R.charAt(0)===" "||R.charAt(R.length-1)===" ")?O+R+O:R)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!s.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=g,d.ParserHandle=m,d.NetworkStreamer=h,d.FileStreamer=f,d.StringStreamer=x,d.ReadableStreamStreamer=p,s.jQuery&&((n=s.jQuery).fn.parse=function(w){var _=w.config||{},C=[];return this.each(function(F){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)C.push({file:this.files[O],inputElem:this,instanceConfig:n.extend({},_)})}),T(),this;function T(){if(C.length===0)E(w.complete)&&w.complete();else{var F,O,z,G,q=C[0];if(E(w.before)){var H=w.before(q.file,q.inputElem);if(typeof H=="object"){if(H.action==="abort")return F="AbortError",O=q.file,z=q.inputElem,G=H.reason,void(E(w.error)&&w.error({name:F},O,z,G));if(H.action==="skip")return void j();typeof H.config=="object"&&(q.instanceConfig=n.extend(q.instanceConfig,H.config))}else if(H==="skip")return void j()}var A=q.instanceConfig.complete;q.instanceConfig.complete=function(V){E(A)&&A(V,q.file,q.inputElem),j()},d.parse(q.file,q.instanceConfig)}}function j(){C.splice(0,1),T()}}),l&&(s.onmessage=function(w){w=w.data,d.WORKER_ID===void 0&&w&&(d.WORKER_ID=w.workerId),typeof w.input=="string"?s.postMessage({workerId:d.WORKER_ID,results:d.parse(w.input,w.config),finished:!0}):(s.File&&w.input instanceof File||w.input instanceof Object)&&(w=d.parse(w.input,w.config))&&s.postMessage({workerId:d.WORKER_ID,results:w,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(x.prototype=Object.create(x.prototype)).constructor=x,(p.prototype=Object.create(u.prototype)).constructor=p,d})})(YS);var dR=YS.exports;const qS=sg(dR);function uR(e){return{serial:e.serial||e.Serial||e.SERIAL||"",manufacturer:e.manufacturer||e.Manufacturer||e.MFG||"",model:e.model||e.Model||"",patientTc:e.patientTc||e.patient_tc||e.tc||""}}function Rb(e){const r=qS.parse(e,{header:!0,skipEmptyLines:!0}).data.filter(Boolean),s=r.map(i=>({raw:i,mapped:uR(i)})),n=s.map((i,l)=>{const o=[];return i.mapped.serial||o.push("serial_missing"),i.mapped.patientTc||o.push("patient_tc_missing"),{row:l,errors:o}}).filter(i=>i.errors.length>0);return{rows:r,mapped:s,errors:n}}const hR=({onStarted:e})=>{var c;const[t,r]=k.useState(""),s=_y(),[n,i]=k.useState(null),l=d=>{if(!d)return;const u=new FileReader;u.onload=()=>{const h=String(u.result||"");r(h);const f=Rb(h);i(f)},u.readAsText(d)},o=async()=>{const u=Rb(t).mapped.map(h=>h.mapped);try{const h=await s.mutateAsync({rows:u});h&&h.jobId&&e&&e(h.jobId)}catch{try{await _t.addOperation({method:"POST",endpoint:"/api/uts/registrations/bulk",data:{rows:u},headers:{"Idempotency-Key":`uts_bulk_${Date.now()}`},maxRetries:5})}catch(f){throw console.error("Failed to enqueue UTS bulk operation",f),f}}};return a.jsxs("div",{children:[a.jsx("div",{children:a.jsx("input",{type:"file",accept:"text/csv",onChange:d=>l(d.target.files?d.target.files[0]:null)})}),n&&a.jsxs("div",{style:{marginTop:8},children:[a.jsxs("h4",{children:["nizleme (",Array.isArray(n.rows)?n.rows.length:((c=n.mapped)==null?void 0:c.length)??0,")"]}),n.errors&&n.errors.length>0&&a.jsxs("div",{style:{color:"red"},children:["Hatalar:",a.jsx("ul",{children:n.errors.map((d,u)=>a.jsxs("li",{children:["Satr ",d.row+1,": ",d.errors.join(", ")]},u))})]}),a.jsx("div",{style:{maxHeight:200,overflow:"auto",border:"1px solid #eee",padding:8},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Serial"}),a.jsx("th",{children:"Manufacturer"}),a.jsx("th",{children:"Model"}),a.jsx("th",{children:"Patient TC"})]})}),a.jsx("tbody",{children:n.mapped&&n.mapped.map((d,u)=>a.jsxs("tr",{style:{borderTop:"1px solid #f3f3f3"},children:[a.jsx("td",{children:d.mapped.serial}),a.jsx("td",{children:d.mapped.manufacturer}),a.jsx("td",{children:d.mapped.model}),a.jsx("td",{children:d.mapped.patientTc})]},u))})]})})]}),a.jsx("div",{style:{marginTop:8},children:a.jsx(Z,{onClick:o,disabled:s.isLoading||!t,children:"CSV ile Toplu Kayt"})})]})};var Bu=e=>e.type==="checkbox",ol=e=>e instanceof Date,ys=e=>e==null;const XS=e=>typeof e=="object";var dr=e=>!ys(e)&&!Array.isArray(e)&&XS(e)&&!ol(e),fR=e=>dr(e)&&e.target?Bu(e.target)?e.target.checked:e.target.value:e,mR=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,xR=(e,t)=>e.has(mR(t)),pR=e=>{const t=e.constructor&&e.constructor.prototype;return dr(t)&&t.hasOwnProperty("isPrototypeOf")},Ey=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function kr(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Ey&&(e instanceof Blob||s))&&(r||dr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!pR(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=kr(e[n]));else return e;return t}var Zf=e=>/^\w*$/.test(e),er=e=>e===void 0,Cy=e=>Array.isArray(e)?e.filter(Boolean):[],Dy=e=>Cy(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ze=(e,t,r)=>{if(!t||!dr(e))return r;const s=(Zf(t)?[t]:Dy(t)).reduce((n,i)=>ys(n)?n:n[i],e);return er(s)||s===e?er(e[t])?r:e[t]:s},La=e=>typeof e=="boolean",Dt=(e,t,r)=>{let s=-1;const n=Zf(t)?[t]:Dy(t),i=n.length,l=i-1;for(;++s<i;){const o=n[s];let c=r;if(s!==l){const d=e[o];c=dr(d)||Array.isArray(d)?d:isNaN(+n[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const Fb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},cn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},gR=bt.createContext(null);gR.displayName="HookFormContext";var yR=(e,t,r,s=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const l=i;return t._proxyFormState[l]!==xa.all&&(t._proxyFormState[l]=!s||xa.all),r&&(r[l]=!0),e[l]}});return n};const vR=typeof window<"u"?bt.useLayoutEffect:bt.useEffect;var Ps=e=>typeof e=="string",bR=(e,t,r,s,n)=>Ps(e)?(s&&t.watch.add(e),ze(r,e,n)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),ze(r,i))):(s&&(t.watchAll=!0),r),Tp=e=>ys(e)||!XS(e);function Zn(e,t,r=new WeakSet){if(Tp(e)||Tp(t))return e===t;if(ol(e)&&ol(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const l=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=t[i];if(ol(l)&&ol(o)||dr(l)&&dr(o)||Array.isArray(l)&&Array.isArray(o)?!Zn(l,o,r):l!==o)return!1}}return!0}var QS=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},Nd=e=>Array.isArray(e)?e:[e],Ib=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}};function ZS(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const n=e[s],i=t[s];if(n&&dr(n)&&i){const l=ZS(n,i);dr(l)&&(r[s]=l)}else e[s]&&(r[s]=i)}return r}var ps=e=>dr(e)&&!Object.keys(e).length,Ay=e=>e.type==="file",pa=e=>typeof e=="function",qh=e=>{if(!Ey)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},JS=e=>e.type==="select-multiple",Py=e=>e.type==="radio",wR=e=>Py(e)||Bu(e),Hm=e=>qh(e)&&e.isConnected;function NR(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=er(e)?s++:e[t[s++]];return e}function kR(e){for(const t in e)if(e.hasOwnProperty(t)&&!er(e[t]))return!1;return!0}function ar(e,t){const r=Array.isArray(t)?t:Zf(t)?[t]:Dy(t),s=r.length===1?e:NR(e,r),n=r.length-1,i=r[n];return s&&delete s[i],n!==0&&(dr(s)&&ps(s)||Array.isArray(s)&&kR(s))&&ar(e,r.slice(0,-1)),e}var jR=e=>{for(const t in e)if(pa(e[t]))return!0;return!1};function e4(e){return Array.isArray(e)||dr(e)&&!jR(e)}function _p(e,t={}){for(const r in e)e4(e[r])?(t[r]=Array.isArray(e[r])?[]:{},_p(e[r],t[r])):er(e[r])||(t[r]=!0);return t}function co(e,t,r){r||(r=_p(t));for(const s in e)e4(e[s])?er(t)||Tp(r[s])?r[s]=_p(e[s],Array.isArray(e[s])?[]:{}):co(e[s],ys(t)?{}:t[s],r[s]):r[s]=!Zn(e[s],t[s]);return r}const Mb={value:!1,isValid:!1},Ob={value:!0,isValid:!0};var t4=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!er(e[0].attributes.value)?er(e[0].value)||e[0].value===""?Ob:{value:e[0].value,isValid:!0}:Ob:Mb}return Mb},r4=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>er(e)?e:t?e===""?NaN:e&&+e:r&&Ps(e)?new Date(e):s?s(e):e;const Lb={isValid:!1,value:null};var s4=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Lb):Lb;function Bb(e){const t=e.ref;return Ay(t)?t.files:Py(t)?s4(e.refs).value:JS(t)?[...t.selectedOptions].map(({value:r})=>r):Bu(t)?t4(e.refs).value:r4(er(t.value)?e.ref.value:t.value,e)}var SR=(e,t,r,s)=>{const n={};for(const i of e){const l=ze(t,i);l&&Dt(n,i,l._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},Xh=e=>e instanceof RegExp,Yc=e=>er(e)?e:Xh(e)?e.source:dr(e)?Xh(e.value)?e.value.source:e.value:e,zb=e=>({isOnSubmit:!e||e===xa.onSubmit,isOnBlur:e===xa.onBlur,isOnChange:e===xa.onChange,isOnAll:e===xa.all,isOnTouch:e===xa.onTouched});const $b="AsyncFunction";var TR=e=>!!e&&!!e.validate&&!!(pa(e.validate)&&e.validate.constructor.name===$b||dr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===$b)),_R=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Ub=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const kd=(e,t,r,s)=>{for(const n of r||Object.keys(e)){const i=ze(e,n);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],n)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(kd(o,t))break}else if(dr(o)&&kd(o,t))break}}};function Vb(e,t,r){const s=ze(e,r);if(s||Zf(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),l=ze(t,i),o=ze(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};n.pop()}return{name:r}}var ER=(e,t,r,s)=>{r(e);const{name:n,...i}=e;return ps(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||xa.all))},CR=(e,t,r)=>!e||!t||e===t||Nd(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),DR=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,AR=(e,t)=>!Cy(ze(e,t)).length&&ar(e,t),PR=(e,t,r)=>{const s=Nd(ze(e,r));return Dt(s,"root",t[r]),Dt(e,r,s),e};function Hb(e,t,r="validate"){if(Ps(e)||Array.isArray(e)&&e.every(Ps)||La(e)&&!e)return{type:r,message:Ps(e)?e:"",ref:t}}var so=e=>dr(e)&&!Xh(e)?e:{value:e,message:""},Kb=async(e,t,r,s,n,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:x,validate:p,name:m,valueAsNumber:y,mount:g}=e._f,v=ze(r,m);if(!g||t.has(m))return{};const b=o?o[0]:l,S=j=>{n&&b.reportValidity&&(b.setCustomValidity(La(j)?"":j||""),b.reportValidity())},D={},N=Py(l),E=Bu(l),w=N||E,_=(y||Ay(l))&&er(l.value)&&er(v)||qh(l)&&l.value===""||v===""||Array.isArray(v)&&!v.length,C=QS.bind(null,m,s,D),T=(j,F,O,z=cn.maxLength,G=cn.minLength)=>{const q=j?F:O;D[m]={type:j?z:G,message:q,ref:l,...C(j?z:G,q)}};if(i?!Array.isArray(v)||!v.length:c&&(!w&&(_||ys(v))||La(v)&&!v||E&&!t4(o).isValid||N&&!s4(o).isValid)){const{value:j,message:F}=Ps(c)?{value:!!c,message:c}:so(c);if(j&&(D[m]={type:cn.required,message:F,ref:b,...C(cn.required,F)},!s))return S(F),D}if(!_&&(!ys(h)||!ys(f))){let j,F;const O=so(f),z=so(h);if(!ys(v)&&!isNaN(v)){const G=l.valueAsNumber||v&&+v;ys(O.value)||(j=G>O.value),ys(z.value)||(F=G<z.value)}else{const G=l.valueAsDate||new Date(v),q=V=>new Date(new Date().toDateString()+" "+V),H=l.type=="time",A=l.type=="week";Ps(O.value)&&v&&(j=H?q(v)>q(O.value):A?v>O.value:G>new Date(O.value)),Ps(z.value)&&v&&(F=H?q(v)<q(z.value):A?v<z.value:G<new Date(z.value))}if((j||F)&&(T(!!j,O.message,z.message,cn.max,cn.min),!s))return S(D[m].message),D}if((d||u)&&!_&&(Ps(v)||i&&Array.isArray(v))){const j=so(d),F=so(u),O=!ys(j.value)&&v.length>+j.value,z=!ys(F.value)&&v.length<+F.value;if((O||z)&&(T(O,j.message,F.message),!s))return S(D[m].message),D}if(x&&!_&&Ps(v)){const{value:j,message:F}=so(x);if(Xh(j)&&!v.match(j)&&(D[m]={type:cn.pattern,message:F,ref:l,...C(cn.pattern,F)},!s))return S(F),D}if(p){if(pa(p)){const j=await p(v,r),F=Hb(j,b);if(F&&(D[m]={...F,...C(cn.validate,F.message)},!s))return S(F.message),D}else if(dr(p)){let j={};for(const F in p){if(!ps(j)&&!s)break;const O=Hb(await p[F](v,r),b,F);O&&(j={...O,...C(F,O.message)},S(O.message),s&&(D[m]=j))}if(!ps(j)&&(D[m]={ref:b,...j},!s))return D}}return S(!0),D};const RR={mode:xa.onSubmit,reValidateMode:xa.onChange,shouldFocusError:!0};function FR(e={}){let t={...RR,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:pa(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},n=dr(t.defaultValues)||dr(t.values)?kr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:kr(n),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:Ib(),state:Ib()},x=t.criteriaMode===xa.all,p=re=>oe=>{clearTimeout(d),d=setTimeout(re,oe)},m=async re=>{if(!t.disabled&&(u.isValid||h.isValid||re)){const oe=t.resolver?ps((await E()).errors):await _(s,!0);oe!==r.isValid&&f.state.next({isValid:oe})}},y=(re,oe)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((re||Array.from(o.mount)).forEach(me=>{me&&(oe?Dt(r.validatingFields,me,oe):ar(r.validatingFields,me))}),f.state.next({validatingFields:r.validatingFields,isValidating:!ps(r.validatingFields)}))},g=(re,oe=[],me,we,ve=!0,Ne=!0)=>{if(we&&me&&!t.disabled){if(l.action=!0,Ne&&Array.isArray(ze(s,re))){const Ee=me(ze(s,re),we.argA,we.argB);ve&&Dt(s,re,Ee)}if(Ne&&Array.isArray(ze(r.errors,re))){const Ee=me(ze(r.errors,re),we.argA,we.argB);ve&&Dt(r.errors,re,Ee),AR(r.errors,re)}if((u.touchedFields||h.touchedFields)&&Ne&&Array.isArray(ze(r.touchedFields,re))){const Ee=me(ze(r.touchedFields,re),we.argA,we.argB);ve&&Dt(r.touchedFields,re,Ee)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=co(n,i)),f.state.next({name:re,isDirty:T(re,oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Dt(i,re,oe)},v=(re,oe)=>{Dt(r.errors,re,oe),f.state.next({errors:r.errors})},b=re=>{r.errors=re,f.state.next({errors:r.errors,isValid:!1})},S=(re,oe,me,we)=>{const ve=ze(s,re);if(ve){const Ne=ze(i,re,er(me)?ze(n,re):me);er(Ne)||we&&we.defaultChecked||oe?Dt(i,re,oe?Ne:Bb(ve._f)):O(re,Ne),l.mount&&m()}},D=(re,oe,me,we,ve)=>{let Ne=!1,Ee=!1;const We={name:re};if(!t.disabled){if(!me||we){(u.isDirty||h.isDirty)&&(Ee=r.isDirty,r.isDirty=We.isDirty=T(),Ne=Ee!==We.isDirty);const Ge=Zn(ze(n,re),oe);Ee=!!ze(r.dirtyFields,re),Ge?ar(r.dirtyFields,re):Dt(r.dirtyFields,re,!0),We.dirtyFields=r.dirtyFields,Ne=Ne||(u.dirtyFields||h.dirtyFields)&&Ee!==!Ge}if(me){const Ge=ze(r.touchedFields,re);Ge||(Dt(r.touchedFields,re,me),We.touchedFields=r.touchedFields,Ne=Ne||(u.touchedFields||h.touchedFields)&&Ge!==me)}Ne&&ve&&f.state.next(We)}return Ne?We:{}},N=(re,oe,me,we)=>{const ve=ze(r.errors,re),Ne=(u.isValid||h.isValid)&&La(oe)&&r.isValid!==oe;if(t.delayError&&me?(c=p(()=>v(re,me)),c(t.delayError)):(clearTimeout(d),c=null,me?Dt(r.errors,re,me):ar(r.errors,re)),(me?!Zn(ve,me):ve)||!ps(we)||Ne){const Ee={...we,...Ne&&La(oe)?{isValid:oe}:{},errors:r.errors,name:re};r={...r,...Ee},f.state.next(Ee)}},E=async re=>{y(re,!0);const oe=await t.resolver(i,t.context,SR(re||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return y(re),oe},w=async re=>{const{errors:oe}=await E(re);if(re)for(const me of re){const we=ze(oe,me);we?Dt(r.errors,me,we):ar(r.errors,me)}else r.errors=oe;return oe},_=async(re,oe,me={valid:!0})=>{for(const we in re){const ve=re[we];if(ve){const{_f:Ne,...Ee}=ve;if(Ne){const We=o.array.has(Ne.name),Ge=ve._f&&TR(ve._f);Ge&&u.validatingFields&&y([Ne.name],!0);const Ct=await Kb(ve,o.disabled,i,x,t.shouldUseNativeValidation&&!oe,We);if(Ge&&u.validatingFields&&y([Ne.name]),Ct[Ne.name]&&(me.valid=!1,oe))break;!oe&&(ze(Ct,Ne.name)?We?PR(r.errors,Ct,Ne.name):Dt(r.errors,Ne.name,Ct[Ne.name]):ar(r.errors,Ne.name))}!ps(Ee)&&await _(Ee,oe,me)}}return me.valid},C=()=>{for(const re of o.unMount){const oe=ze(s,re);oe&&(oe._f.refs?oe._f.refs.every(me=>!Hm(me)):!Hm(oe._f.ref))&&J(re)}o.unMount=new Set},T=(re,oe)=>!t.disabled&&(re&&oe&&Dt(i,re,oe),!Zn(V(),n)),j=(re,oe,me)=>bR(re,o,{...l.mount?i:er(oe)?n:Ps(re)?{[re]:oe}:oe},me,oe),F=re=>Cy(ze(l.mount?i:n,re,t.shouldUnregister?ze(n,re,[]):[])),O=(re,oe,me={})=>{const we=ze(s,re);let ve=oe;if(we){const Ne=we._f;Ne&&(!Ne.disabled&&Dt(i,re,r4(oe,Ne)),ve=qh(Ne.ref)&&ys(oe)?"":oe,JS(Ne.ref)?[...Ne.ref.options].forEach(Ee=>Ee.selected=ve.includes(Ee.value)):Ne.refs?Bu(Ne.ref)?Ne.refs.forEach(Ee=>{(!Ee.defaultChecked||!Ee.disabled)&&(Array.isArray(ve)?Ee.checked=!!ve.find(We=>We===Ee.value):Ee.checked=ve===Ee.value||!!ve)}):Ne.refs.forEach(Ee=>Ee.checked=Ee.value===ve):Ay(Ne.ref)?Ne.ref.value="":(Ne.ref.value=ve,Ne.ref.type||f.state.next({name:re,values:kr(i)})))}(me.shouldDirty||me.shouldTouch)&&D(re,ve,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&A(re)},z=(re,oe,me)=>{for(const we in oe){if(!oe.hasOwnProperty(we))return;const ve=oe[we],Ne=re+"."+we,Ee=ze(s,Ne);(o.array.has(re)||dr(ve)||Ee&&!Ee._f)&&!ol(ve)?z(Ne,ve,me):O(Ne,ve,me)}},G=(re,oe,me={})=>{const we=ze(s,re),ve=o.array.has(re),Ne=kr(oe);Dt(i,re,Ne),ve?(f.array.next({name:re,values:kr(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&me.shouldDirty&&f.state.next({name:re,dirtyFields:co(n,i),isDirty:T(re,Ne)})):we&&!we._f&&!ys(Ne)?z(re,Ne,me):O(re,Ne,me),Ub(re,o)&&f.state.next({...r,name:re}),f.state.next({name:l.mount?re:void 0,values:kr(i)})},q=async re=>{l.mount=!0;const oe=re.target;let me=oe.name,we=!0;const ve=ze(s,me),Ne=Ge=>{we=Number.isNaN(Ge)||ol(Ge)&&isNaN(Ge.getTime())||Zn(Ge,ze(i,me,Ge))},Ee=zb(t.mode),We=zb(t.reValidateMode);if(ve){let Ge,Ct;const Ze=oe.type?Bb(ve._f):fR(re),it=re.type===Fb.BLUR||re.type===Fb.FOCUS_OUT,At=!_R(ve._f)&&!t.resolver&&!ze(r.errors,me)&&!ve._f.deps||DR(it,ze(r.touchedFields,me),r.isSubmitted,We,Ee),kt=Ub(me,o,it);Dt(i,me,Ze),it?(!oe||!oe.readOnly)&&(ve._f.onBlur&&ve._f.onBlur(re),c&&c(0)):ve._f.onChange&&ve._f.onChange(re);const Zr=D(me,Ze,it),Pc=!ps(Zr)||kt;if(!it&&f.state.next({name:me,type:re.type,values:kr(i)}),At)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?it&&m():it||m()),Pc&&f.state.next({name:me,...kt?{}:Zr});if(!it&&kt&&f.state.next({...r}),t.resolver){const{errors:Rc}=await E([me]);if(Ne(Ze),we){const Wu=Vb(r.errors,s,me),Zl=Vb(Rc,s,Wu.name||me);Ge=Zl.error,me=Zl.name,Ct=ps(Rc)}}else y([me],!0),Ge=(await Kb(ve,o.disabled,i,x,t.shouldUseNativeValidation))[me],y([me]),Ne(Ze),we&&(Ge?Ct=!1:(u.isValid||h.isValid)&&(Ct=await _(s,!0)));we&&(ve._f.deps&&(!Array.isArray(ve._f.deps)||ve._f.deps.length>0)&&A(ve._f.deps),N(me,Ct,Ge,Zr))}},H=(re,oe)=>{if(ze(r.errors,oe)&&re.focus)return re.focus(),1},A=async(re,oe={})=>{let me,we;const ve=Nd(re);if(t.resolver){const Ne=await w(er(re)?re:ve);me=ps(Ne),we=re?!ve.some(Ee=>ze(Ne,Ee)):me}else re?(we=(await Promise.all(ve.map(async Ne=>{const Ee=ze(s,Ne);return await _(Ee&&Ee._f?{[Ne]:Ee}:Ee)}))).every(Boolean),!(!we&&!r.isValid)&&m()):we=me=await _(s);return f.state.next({...!Ps(re)||(u.isValid||h.isValid)&&me!==r.isValid?{}:{name:re},...t.resolver||!re?{isValid:me}:{},errors:r.errors}),oe.shouldFocus&&!we&&kd(s,H,re?ve:o.mount),we},V=(re,oe)=>{let me={...l.mount?i:n};return oe&&(me=ZS(oe.dirtyFields?r.dirtyFields:r.touchedFields,me)),er(re)?me:Ps(re)?ze(me,re):re.map(we=>ze(me,we))},L=(re,oe)=>({invalid:!!ze((oe||r).errors,re),isDirty:!!ze((oe||r).dirtyFields,re),error:ze((oe||r).errors,re),isValidating:!!ze(r.validatingFields,re),isTouched:!!ze((oe||r).touchedFields,re)}),P=re=>{re&&Nd(re).forEach(oe=>ar(r.errors,oe)),f.state.next({errors:re?r.errors:{}})},I=(re,oe,me)=>{const we=(ze(s,re,{_f:{}})._f||{}).ref,ve=ze(r.errors,re)||{},{ref:Ne,message:Ee,type:We,...Ge}=ve;Dt(r.errors,re,{...Ge,...oe,ref:we}),f.state.next({name:re,errors:r.errors,isValid:!1}),me&&me.shouldFocus&&we&&we.focus&&we.focus()},R=(re,oe)=>pa(re)?f.state.subscribe({next:me=>"values"in me&&re(j(void 0,oe),me)}):j(re,oe,!0),U=re=>f.state.subscribe({next:oe=>{CR(re.name,oe.name,re.exact)&&ER(oe,re.formState||u,de,re.reRenderRoot)&&re.callback({values:{...i},...r,...oe,defaultValues:n})}}).unsubscribe,M=re=>(l.mount=!0,h={...h,...re.formState},U({...re,formState:h})),J=(re,oe={})=>{for(const me of re?Nd(re):o.mount)o.mount.delete(me),o.array.delete(me),oe.keepValue||(ar(s,me),ar(i,me)),!oe.keepError&&ar(r.errors,me),!oe.keepDirty&&ar(r.dirtyFields,me),!oe.keepTouched&&ar(r.touchedFields,me),!oe.keepIsValidating&&ar(r.validatingFields,me),!t.shouldUnregister&&!oe.keepDefaultValue&&ar(n,me);f.state.next({values:kr(i)}),f.state.next({...r,...oe.keepDirty?{isDirty:T()}:{}}),!oe.keepIsValid&&m()},se=({disabled:re,name:oe})=>{(La(re)&&l.mount||re||o.disabled.has(oe))&&(re?o.disabled.add(oe):o.disabled.delete(oe))},ae=(re,oe={})=>{let me=ze(s,re);const we=La(oe.disabled)||La(t.disabled);return Dt(s,re,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:re}},name:re,mount:!0,...oe}}),o.mount.add(re),me?se({disabled:La(oe.disabled)?oe.disabled:t.disabled,name:re}):S(re,!0,oe.value),{...we?{disabled:oe.disabled||t.disabled}:{},...t.progressive?{required:!!oe.required,min:Yc(oe.min),max:Yc(oe.max),minLength:Yc(oe.minLength),maxLength:Yc(oe.maxLength),pattern:Yc(oe.pattern)}:{},name:re,onChange:q,onBlur:q,ref:ve=>{if(ve){ae(re,oe),me=ze(s,re);const Ne=er(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,Ee=wR(Ne),We=me._f.refs||[];if(Ee?We.find(Ge=>Ge===Ne):Ne===me._f.ref)return;Dt(s,re,{_f:{...me._f,...Ee?{refs:[...We.filter(Hm),Ne,...Array.isArray(ze(n,re))?[{}]:[]],ref:{type:Ne.type,name:re}}:{ref:Ne}}}),S(re,!1,void 0,Ne)}else me=ze(s,re,{}),me._f&&(me._f.mount=!1),(t.shouldUnregister||oe.shouldUnregister)&&!(xR(o.array,re)&&l.action)&&o.unMount.add(re)}}},ie=()=>t.shouldFocusError&&kd(s,H,o.mount),ce=re=>{La(re)&&(f.state.next({disabled:re}),kd(s,(oe,me)=>{const we=ze(s,me);we&&(oe.disabled=we._f.disabled||re,Array.isArray(we._f.refs)&&we._f.refs.forEach(ve=>{ve.disabled=we._f.disabled||re}))},0,!1))},K=(re,oe)=>async me=>{let we;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let ve=kr(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:Ne,values:Ee}=await E();r.errors=Ne,ve=kr(Ee)}else await _(s);if(o.disabled.size)for(const Ne of o.disabled)ar(ve,Ne);if(ar(r.errors,"root"),ps(r.errors)){f.state.next({errors:{}});try{await re(ve,me)}catch(Ne){we=Ne}}else oe&&await oe({...r.errors},me),ie(),setTimeout(ie);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ps(r.errors)&&!we,submitCount:r.submitCount+1,errors:r.errors}),we)throw we},He=(re,oe={})=>{ze(s,re)&&(er(oe.defaultValue)?G(re,kr(ze(n,re))):(G(re,oe.defaultValue),Dt(n,re,kr(oe.defaultValue))),oe.keepTouched||ar(r.touchedFields,re),oe.keepDirty||(ar(r.dirtyFields,re),r.isDirty=oe.defaultValue?T(re,kr(ze(n,re))):T()),oe.keepError||(ar(r.errors,re),u.isValid&&m()),f.state.next({...r}))},Pe=(re,oe={})=>{const me=re?kr(re):n,we=kr(me),ve=ps(re),Ne=ve?n:we;if(oe.keepDefaultValues||(n=me),!oe.keepValues){if(oe.keepDirtyValues){const Ee=new Set([...o.mount,...Object.keys(co(n,i))]);for(const We of Array.from(Ee))ze(r.dirtyFields,We)?Dt(Ne,We,ze(i,We)):G(We,ze(Ne,We))}else{if(Ey&&er(re))for(const Ee of o.mount){const We=ze(s,Ee);if(We&&We._f){const Ge=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(qh(Ge)){const Ct=Ge.closest("form");if(Ct){Ct.reset();break}}}}if(oe.keepFieldsRef)for(const Ee of o.mount)G(Ee,ze(Ne,Ee));else s={}}i=t.shouldUnregister?oe.keepDefaultValues?kr(n):{}:kr(Ne),f.array.next({values:{...Ne}}),f.state.next({values:{...Ne}})}o={mount:oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!oe.keepIsValid||!!oe.keepDirtyValues,l.watch=!!t.shouldUnregister,f.state.next({submitCount:oe.keepSubmitCount?r.submitCount:0,isDirty:ve?!1:oe.keepDirty?r.isDirty:!!(oe.keepDefaultValues&&!Zn(re,n)),isSubmitted:oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ve?{}:oe.keepDirtyValues?oe.keepDefaultValues&&i?co(n,i):r.dirtyFields:oe.keepDefaultValues&&re?co(n,re):oe.keepDirty?r.dirtyFields:{},touchedFields:oe.keepTouched?r.touchedFields:{},errors:oe.keepErrors?r.errors:{},isSubmitSuccessful:oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Le=(re,oe)=>Pe(pa(re)?re(i):re,oe),Ce=(re,oe={})=>{const me=ze(s,re),we=me&&me._f;if(we){const ve=we.refs?we.refs[0]:we.ref;ve.focus&&(ve.focus(),oe.shouldSelect&&pa(ve.select)&&ve.select())}},de=re=>{r={...r,...re}},Ke={control:{register:ae,unregister:J,getFieldState:L,handleSubmit:K,setError:I,_subscribe:U,_runSchema:E,_focusError:ie,_getWatch:j,_getDirty:T,_setValid:m,_setFieldArray:g,_setDisabledField:se,_setErrors:b,_getFieldArray:F,_reset:Pe,_resetDefaultValues:()=>pa(t.defaultValues)&&t.defaultValues().then(re=>{Le(re,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:ce,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(re){l=re},get _defaultValues(){return n},get _names(){return o},set _names(re){o=re},get _formState(){return r},get _options(){return t},set _options(re){t={...t,...re}}},subscribe:M,trigger:A,register:ae,handleSubmit:K,watch:R,setValue:G,getValues:V,reset:Le,resetField:He,clearErrors:P,unregister:J,setError:I,setFocus:Ce,getFieldState:L};return{...Ke,formControl:Ke}}function IR(e={}){const t=bt.useRef(void 0),r=bt.useRef(void 0),[s,n]=bt.useState({isDirty:!1,isValidating:!1,isLoading:pa(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:pa(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!pa(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=FR(e);t.current={...o,formState:s}}const i=t.current.control;return i._options=e,vR(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),bt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),bt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),bt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),bt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),bt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),bt.useEffect(()=>{e.values&&!Zn(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),bt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=yR(s,i),t.current}var Nt;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{const i={};for(const l of n)i[l]=l;return i},e.getValidEnumValues=n=>{const i=e.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),l={};for(const o of i)l[o]=n[o];return e.objectValues(l)},e.objectValues=n=>e.objectKeys(n).map(function(i){return n[i]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&i.push(l);return i},e.find=(n,i)=>{for(const l of n)if(i(l))return l},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}e.joinValues=s,e.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Nt||(Nt={}));var Gb;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Gb||(Gb={}));const $e=Nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yn=e=>{switch(typeof e){case"undefined":return $e.undefined;case"string":return $e.string;case"number":return Number.isNaN(e)?$e.nan:$e.number;case"boolean":return $e.boolean;case"function":return $e.function;case"bigint":return $e.bigint;case"symbol":return $e.symbol;case"object":return Array.isArray(e)?$e.array:e===null?$e.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?$e.promise:typeof Map<"u"&&e instanceof Map?$e.map:typeof Set<"u"&&e instanceof Set?$e.set:typeof Date<"u"&&e instanceof Date?$e.date:$e.object;default:return $e.unknown}},_e=Nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class An extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},s={_errors:[]},n=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(n);else if(l.code==="invalid_return_type")n(l.returnTypeError);else if(l.code==="invalid_arguments")n(l.argumentsError);else if(l.path.length===0)s._errors.push(r(l));else{let o=s,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return n(this),s}static assert(t){if(!(t instanceof An))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},s=[];for(const n of this.issues)if(n.path.length>0){const i=n.path[0];r[i]=r[i]||[],r[i].push(t(n))}else s.push(t(n));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}An.create=e=>new An(e);const MR=(e,t)=>{let r;switch(e.code){case _e.invalid_type:e.received===$e.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case _e.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Nt.jsonStringifyReplacer)}`;break;case _e.unrecognized_keys:r=`Unrecognized key(s) in object: ${Nt.joinValues(e.keys,", ")}`;break;case _e.invalid_union:r="Invalid input";break;case _e.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Nt.joinValues(e.options)}`;break;case _e.invalid_enum_value:r=`Invalid enum value. Expected ${Nt.joinValues(e.options)}, received '${e.received}'`;break;case _e.invalid_arguments:r="Invalid function arguments";break;case _e.invalid_return_type:r="Invalid function return type";break;case _e.invalid_date:r="Invalid date";break;case _e.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Nt.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case _e.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case _e.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case _e.custom:r="Invalid input";break;case _e.invalid_intersection_types:r="Intersection results could not be merged";break;case _e.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case _e.not_finite:r="Number must be finite";break;default:r=t.defaultError,Nt.assertNever(e)}return{message:r}},Ep=MR;let OR=Ep;function LR(){return OR}const BR=e=>{const{data:t,path:r,errorMaps:s,issueData:n}=e,i=[...r,...n.path||[]],l={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:t,defaultError:o}).message;return{...n,path:i,message:o}};function Ie(e,t){const r=LR(),s=BR({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Ep?void 0:Ep].filter(n=>!!n)});e.common.issues.push(s)}class Os{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const s=[];for(const n of r){if(n.status==="aborted")return tt;n.status==="dirty"&&t.dirty(),s.push(n.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,r){const s=[];for(const n of r){const i=await n.key,l=await n.value;s.push({key:i,value:l})}return Os.mergeObjectSync(t,s)}static mergeObjectSync(t,r){const s={};for(const n of r){const{key:i,value:l}=n;if(i.status==="aborted"||l.status==="aborted")return tt;i.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||n.alwaysSet)&&(s[i.value]=l.value)}return{status:t.value,value:s}}}const tt=Object.freeze({status:"aborted"}),rd=e=>({status:"dirty",value:e}),aa=e=>({status:"valid",value:e}),Wb=e=>e.status==="aborted",Yb=e=>e.status==="dirty",mc=e=>e.status==="valid",Qh=e=>typeof Promise<"u"&&e instanceof Promise;var Ve;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ve||(Ve={}));class Oi{constructor(t,r,s,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const qb=(e,t)=>{if(mc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new An(e.common.issues);return this._error=r,this._error}}};function lt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:n}=e;if(t&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(l,o)=>{const{message:c}=e;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??s??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??r??o.defaultError}},description:n}}class vt{get description(){return this._def.description}_getType(t){return Yn(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Yn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Os,ctx:{common:t.parent.common,data:t.data,parsedType:Yn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Qh(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const s=this.safeParse(t,r);if(s.success)return s.data;throw s.error}safeParse(t,r){const s={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Yn(t)},n=this._parseSync({data:t,path:s.path,parent:s});return qb(s,n)}"~validate"(t){var s,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Yn(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return mc(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(n=(s=i==null?void 0:i.message)==null?void 0:s.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>mc(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const s=await this.safeParseAsync(t,r);if(s.success)return s.data;throw s.error}async safeParseAsync(t,r){const s={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Yn(t)},n=this._parse({data:t,path:s.path,parent:s}),i=await(Qh(n)?n:Promise.resolve(n));return qb(s,i)}refine(t,r){const s=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{const l=t(n),o=()=>i.addIssue({code:_e.custom,...s(n)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(t,r){return this._refinement((s,n)=>t(s)?!0:(n.addIssue(typeof r=="function"?r(s,n):r),!1))}_refinement(t){return new pc({schema:this,typeName:rt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ai.create(this,this._def)}nullable(){return gc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ja.create(this)}promise(){return tf.create(this,this._def)}or(t){return Jh.create([this,t],this._def)}and(t){return ef.create(this,t,this._def)}transform(t){return new pc({...lt(this._def),schema:this,typeName:rt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Dp({...lt(this._def),innerType:this,defaultValue:r,typeName:rt.ZodDefault})}brand(){return new oF({typeName:rt.ZodBranded,type:this,...lt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Ap({...lt(this._def),innerType:this,catchValue:r,typeName:rt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Ry.create(this,t)}readonly(){return Pp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zR=/^c[^\s-]{8,}$/i,$R=/^[0-9a-z]+$/,UR=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HR=/^[a-z0-9_-]{21}$/i,KR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,GR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,WR=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Km;const qR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,QR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ZR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JR=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eF=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,a4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tF=new RegExp(`^${a4}$`);function n4(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function rF(e){return new RegExp(`^${n4(e)}$`)}function sF(e){let t=`${a4}T${n4(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function aF(e,t){return!!((t==="v4"||!t)&&qR.test(e)||(t==="v6"||!t)&&QR.test(e))}function nF(e,t){if(!KR.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function iF(e,t){return!!((t==="v4"||!t)&&XR.test(e)||(t==="v6"||!t)&&ZR.test(e))}class mi extends vt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==$e.string){const i=this._getOrReturnCtx(t);return Ie(i,{code:_e.invalid_type,expected:$e.string,received:i.parsedType}),tt}const s=new Os;let n;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const l=t.data.length>i.value,o=t.data.length<i.value;(l||o)&&(n=this._getOrReturnCtx(t,n),l?Ie(n,{code:_e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Ie(n,{code:_e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")WR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"email",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Km||(Km=new RegExp(YR,"u")),Km.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"emoji",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")VR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"uuid",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")HR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"nanoid",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")zR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"cuid",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")$R.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"cuid2",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")UR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"ulid",code:_e.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),Ie(n,{validation:"url",code:_e.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"regex",code:_e.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?sF(i).test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?tF.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?rF(i).test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?GR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"duration",code:_e.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?aF(t.data,i.version)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"ip",code:_e.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?nF(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"jwt",code:_e.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?iF(t.data,i.version)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"cidr",code:_e.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?JR.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"base64",code:_e.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?eF.test(t.data)||(n=this._getOrReturnCtx(t,n),Ie(n,{validation:"base64url",code:_e.invalid_string,message:i.message}),s.dirty()):Nt.assertNever(i);return{status:s.value,value:t.data}}_regex(t,r,s){return this.refinement(n=>t.test(n),{validation:r,code:_e.invalid_string,...Ve.errToObj(s)})}_addCheck(t){return new mi({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ve.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ve.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ve.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ve.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ve.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ve.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ve.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ve.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ve.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ve.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ve.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ve.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ve.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ve.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ve.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ve.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ve.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ve.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ve.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ve.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ve.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ve.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ve.errToObj(r)})}nonempty(t){return this.min(1,Ve.errToObj(t))}trim(){return new mi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}mi.create=e=>new mi({checks:[],typeName:rt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...lt(e)});function lF(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=r>s?r:s,i=Number.parseInt(e.toFixed(n).replace(".","")),l=Number.parseInt(t.toFixed(n).replace(".",""));return i%l/10**n}class nu extends vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==$e.number){const i=this._getOrReturnCtx(t);return Ie(i,{code:_e.invalid_type,expected:$e.number,received:i.parsedType}),tt}let s;const n=new Os;for(const i of this._def.checks)i.kind==="int"?Nt.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?lF(t.data,i.value)!==0&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.not_finite,message:i.message}),n.dirty()):Nt.assertNever(i);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ve.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ve.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ve.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ve.toString(r))}setLimit(t,r,s,n){return new nu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:Ve.toString(n)}]})}_addCheck(t){return new nu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ve.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ve.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ve.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Nt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(r)&&Number.isFinite(t)}}nu.create=e=>new nu({checks:[],typeName:rt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...lt(e)});class iu extends vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==$e.bigint)return this._getInvalidInput(t);let s;const n=new Os;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Ie(s,{code:_e.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Nt.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ie(r,{code:_e.invalid_type,expected:$e.bigint,received:r.parsedType}),tt}gte(t,r){return this.setLimit("min",t,!0,Ve.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ve.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ve.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ve.toString(r))}setLimit(t,r,s,n){return new iu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:Ve.toString(n)}]})}_addCheck(t){return new iu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ve.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}iu.create=e=>new iu({checks:[],typeName:rt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...lt(e)});class Xb extends vt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==$e.boolean){const s=this._getOrReturnCtx(t);return Ie(s,{code:_e.invalid_type,expected:$e.boolean,received:s.parsedType}),tt}return aa(t.data)}}Xb.create=e=>new Xb({typeName:rt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...lt(e)});class Zh extends vt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==$e.date){const i=this._getOrReturnCtx(t);return Ie(i,{code:_e.invalid_type,expected:$e.date,received:i.parsedType}),tt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ie(i,{code:_e.invalid_date}),tt}const s=new Os;let n;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),Ie(n,{code:_e.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):Nt.assertNever(i);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Zh({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ve.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ve.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Zh.create=e=>new Zh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:rt.ZodDate,...lt(e)});class Qb extends vt{_parse(t){if(this._getType(t)!==$e.symbol){const s=this._getOrReturnCtx(t);return Ie(s,{code:_e.invalid_type,expected:$e.symbol,received:s.parsedType}),tt}return aa(t.data)}}Qb.create=e=>new Qb({typeName:rt.ZodSymbol,...lt(e)});class Zb extends vt{_parse(t){if(this._getType(t)!==$e.undefined){const s=this._getOrReturnCtx(t);return Ie(s,{code:_e.invalid_type,expected:$e.undefined,received:s.parsedType}),tt}return aa(t.data)}}Zb.create=e=>new Zb({typeName:rt.ZodUndefined,...lt(e)});class Jb extends vt{_parse(t){if(this._getType(t)!==$e.null){const s=this._getOrReturnCtx(t);return Ie(s,{code:_e.invalid_type,expected:$e.null,received:s.parsedType}),tt}return aa(t.data)}}Jb.create=e=>new Jb({typeName:rt.ZodNull,...lt(e)});class ew extends vt{constructor(){super(...arguments),this._any=!0}_parse(t){return aa(t.data)}}ew.create=e=>new ew({typeName:rt.ZodAny,...lt(e)});class tw extends vt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return aa(t.data)}}tw.create=e=>new tw({typeName:rt.ZodUnknown,...lt(e)});class Li extends vt{_parse(t){const r=this._getOrReturnCtx(t);return Ie(r,{code:_e.invalid_type,expected:$e.never,received:r.parsedType}),tt}}Li.create=e=>new Li({typeName:rt.ZodNever,...lt(e)});class rw extends vt{_parse(t){if(this._getType(t)!==$e.undefined){const s=this._getOrReturnCtx(t);return Ie(s,{code:_e.invalid_type,expected:$e.void,received:s.parsedType}),tt}return aa(t.data)}}rw.create=e=>new rw({typeName:rt.ZodVoid,...lt(e)});class Ja extends vt{_parse(t){const{ctx:r,status:s}=this._processInputParams(t),n=this._def;if(r.parsedType!==$e.array)return Ie(r,{code:_e.invalid_type,expected:$e.array,received:r.parsedType}),tt;if(n.exactLength!==null){const l=r.data.length>n.exactLength.value,o=r.data.length<n.exactLength.value;(l||o)&&(Ie(r,{code:l?_e.too_big:_e.too_small,minimum:o?n.exactLength.value:void 0,maximum:l?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(Ie(r,{code:_e.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(Ie(r,{code:_e.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((l,o)=>n.type._parseAsync(new Oi(r,l,r.path,o)))).then(l=>Os.mergeArray(s,l));const i=[...r.data].map((l,o)=>n.type._parseSync(new Oi(r,l,r.path,o)));return Os.mergeArray(s,i)}get element(){return this._def.type}min(t,r){return new Ja({...this._def,minLength:{value:t,message:Ve.toString(r)}})}max(t,r){return new Ja({...this._def,maxLength:{value:t,message:Ve.toString(r)}})}length(t,r){return new Ja({...this._def,exactLength:{value:t,message:Ve.toString(r)}})}nonempty(t){return this.min(1,t)}}Ja.create=(e,t)=>new Ja({type:e,minLength:null,maxLength:null,exactLength:null,typeName:rt.ZodArray,...lt(t)});function uo(e){if(e instanceof Wt){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=Ai.create(uo(s))}return new Wt({...e._def,shape:()=>t})}else return e instanceof Ja?new Ja({...e._def,type:uo(e.element)}):e instanceof Ai?Ai.create(uo(e.unwrap())):e instanceof gc?gc.create(uo(e.unwrap())):e instanceof Ll?Ll.create(e.items.map(t=>uo(t))):e}class Wt extends vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Nt.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==$e.object){const d=this._getOrReturnCtx(t);return Ie(d,{code:_e.invalid_type,expected:$e.object,received:d.parsedType}),tt}const{status:s,ctx:n}=this._processInputParams(t),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Li&&this._def.unknownKeys==="strip"))for(const d in n.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],h=n.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Oi(n,h,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof Li){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(d==="strict")o.length>0&&(Ie(n,{code:_e.unrecognized_keys,keys:o}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const h=n.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Oi(n,h,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>Os.mergeObjectSync(s,d)):Os.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return Ve.errToObj,new Wt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,s)=>{var i,l;const n=((l=(i=this._def).errorMap)==null?void 0:l.call(i,r,s).message)??s.defaultError;return r.code==="unrecognized_keys"?{message:Ve.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new Wt({...this._def,unknownKeys:"strip"})}passthrough(){return new Wt({...this._def,unknownKeys:"passthrough"})}extend(t){return new Wt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Wt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:rt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Wt({...this._def,catchall:t})}pick(t){const r={};for(const s of Nt.objectKeys(t))t[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new Wt({...this._def,shape:()=>r})}omit(t){const r={};for(const s of Nt.objectKeys(this.shape))t[s]||(r[s]=this.shape[s]);return new Wt({...this._def,shape:()=>r})}deepPartial(){return uo(this)}partial(t){const r={};for(const s of Nt.objectKeys(this.shape)){const n=this.shape[s];t&&!t[s]?r[s]=n:r[s]=n.optional()}return new Wt({...this._def,shape:()=>r})}required(t){const r={};for(const s of Nt.objectKeys(this.shape))if(t&&!t[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Ai;)i=i._def.innerType;r[s]=i}return new Wt({...this._def,shape:()=>r})}keyof(){return i4(Nt.objectKeys(this.shape))}}Wt.create=(e,t)=>new Wt({shape:()=>e,unknownKeys:"strip",catchall:Li.create(),typeName:rt.ZodObject,...lt(t)});Wt.strictCreate=(e,t)=>new Wt({shape:()=>e,unknownKeys:"strict",catchall:Li.create(),typeName:rt.ZodObject,...lt(t)});Wt.lazycreate=(e,t)=>new Wt({shape:e,unknownKeys:"strip",catchall:Li.create(),typeName:rt.ZodObject,...lt(t)});class Jh extends vt{_parse(t){const{ctx:r}=this._processInputParams(t),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new An(o.ctx.common.issues));return Ie(r,{code:_e.invalid_union,unionErrors:l}),tt}if(r.common.async)return Promise.all(s.map(async i=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(n);{let i;const l=[];for(const c of s){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new An(c));return Ie(r,{code:_e.invalid_union,unionErrors:o}),tt}}get options(){return this._def.options}}Jh.create=(e,t)=>new Jh({options:e,typeName:rt.ZodUnion,...lt(t)});function Cp(e,t){const r=Yn(e),s=Yn(t);if(e===t)return{valid:!0,data:e};if(r===$e.object&&s===$e.object){const n=Nt.objectKeys(t),i=Nt.objectKeys(e).filter(o=>n.indexOf(o)!==-1),l={...e,...t};for(const o of i){const c=Cp(e[o],t[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(r===$e.array&&s===$e.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<e.length;i++){const l=e[i],o=t[i],c=Cp(l,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===$e.date&&s===$e.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ef extends vt{_parse(t){const{status:r,ctx:s}=this._processInputParams(t),n=(i,l)=>{if(Wb(i)||Wb(l))return tt;const o=Cp(i.value,l.value);return o.valid?((Yb(i)||Yb(l))&&r.dirty(),{status:r.value,value:o.data}):(Ie(s,{code:_e.invalid_intersection_types}),tt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,l])=>n(i,l)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}ef.create=(e,t,r)=>new ef({left:e,right:t,typeName:rt.ZodIntersection,...lt(r)});class Ll extends vt{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==$e.array)return Ie(s,{code:_e.invalid_type,expected:$e.array,received:s.parsedType}),tt;if(s.data.length<this._def.items.length)return Ie(s,{code:_e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&s.data.length>this._def.items.length&&(Ie(s,{code:_e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...s.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Oi(s,l,s.path,o)):null}).filter(l=>!!l);return s.common.async?Promise.all(i).then(l=>Os.mergeArray(r,l)):Os.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new Ll({...this._def,rest:t})}}Ll.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ll({items:e,typeName:rt.ZodTuple,rest:null,...lt(t)})};class sw extends vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==$e.map)return Ie(s,{code:_e.invalid_type,expected:$e.map,received:s.parsedType}),tt;const n=this._def.keyType,i=this._def.valueType,l=[...s.data.entries()].map(([o,c],d)=>({key:n._parse(new Oi(s,o,s.path,[d,"key"])),value:i._parse(new Oi(s,c,s.path,[d,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return tt;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return tt;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}}}}sw.create=(e,t,r)=>new sw({valueType:t,keyType:e,typeName:rt.ZodMap,...lt(r)});class lu extends vt{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==$e.set)return Ie(s,{code:_e.invalid_type,expected:$e.set,received:s.parsedType}),tt;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(Ie(s,{code:_e.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(Ie(s,{code:_e.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return tt;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const o=[...s.data.values()].map((c,d)=>i._parse(new Oi(s,c,s.path,d)));return s.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(t,r){return new lu({...this._def,minSize:{value:t,message:Ve.toString(r)}})}max(t,r){return new lu({...this._def,maxSize:{value:t,message:Ve.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}lu.create=(e,t)=>new lu({valueType:e,minSize:null,maxSize:null,typeName:rt.ZodSet,...lt(t)});class aw extends vt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}aw.create=(e,t)=>new aw({getter:e,typeName:rt.ZodLazy,...lt(t)});class nw extends vt{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Ie(r,{received:r.data,code:_e.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:t.data}}get value(){return this._def.value}}nw.create=(e,t)=>new nw({value:e,typeName:rt.ZodLiteral,...lt(t)});function i4(e,t){return new xc({values:e,typeName:rt.ZodEnum,...lt(t)})}class xc extends vt{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),s=this._def.values;return Ie(r,{expected:Nt.joinValues(s),received:r.parsedType,code:_e.invalid_type}),tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),s=this._def.values;return Ie(r,{received:r.data,code:_e.invalid_enum_value,options:s}),tt}return aa(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return xc.create(t,{...this._def,...r})}exclude(t,r=this._def){return xc.create(this.options.filter(s=>!t.includes(s)),{...this._def,...r})}}xc.create=i4;class iw extends vt{_parse(t){const r=Nt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==$e.string&&s.parsedType!==$e.number){const n=Nt.objectValues(r);return Ie(s,{expected:Nt.joinValues(n),received:s.parsedType,code:_e.invalid_type}),tt}if(this._cache||(this._cache=new Set(Nt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const n=Nt.objectValues(r);return Ie(s,{received:s.data,code:_e.invalid_enum_value,options:n}),tt}return aa(t.data)}get enum(){return this._def.values}}iw.create=(e,t)=>new iw({values:e,typeName:rt.ZodNativeEnum,...lt(t)});class tf extends vt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==$e.promise&&r.common.async===!1)return Ie(r,{code:_e.invalid_type,expected:$e.promise,received:r.parsedType}),tt;const s=r.parsedType===$e.promise?r.data:Promise.resolve(r.data);return aa(s.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}}tf.create=(e,t)=>new tf({type:e,typeName:rt.ZodPromise,...lt(t)});class pc extends vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:s}=this._processInputParams(t),n=this._def.effect||null,i={addIssue:l=>{Ie(s,l),l.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const l=n.transform(s.data,i);if(s.common.async)return Promise.resolve(l).then(async o=>{if(r.value==="aborted")return tt;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?tt:c.status==="dirty"||r.value==="dirty"?rd(c.value):c});{if(r.value==="aborted")return tt;const o=this._def.schema._parseSync({data:l,path:s.path,parent:s});return o.status==="aborted"?tt:o.status==="dirty"||r.value==="dirty"?rd(o.value):o}}if(n.type==="refinement"){const l=o=>{const c=n.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?tt:(o.status==="dirty"&&r.dirty(),l(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?tt:(o.status==="dirty"&&r.dirty(),l(o.value).then(()=>({status:r.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!mc(l))return tt;const o=n.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>mc(l)?Promise.resolve(n.transform(l.value,i)).then(o=>({status:r.value,value:o})):tt);Nt.assertNever(n)}}pc.create=(e,t,r)=>new pc({schema:e,typeName:rt.ZodEffects,effect:t,...lt(r)});pc.createWithPreprocess=(e,t,r)=>new pc({schema:t,effect:{type:"preprocess",transform:e},typeName:rt.ZodEffects,...lt(r)});class Ai extends vt{_parse(t){return this._getType(t)===$e.undefined?aa(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ai.create=(e,t)=>new Ai({innerType:e,typeName:rt.ZodOptional,...lt(t)});class gc extends vt{_parse(t){return this._getType(t)===$e.null?aa(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}gc.create=(e,t)=>new gc({innerType:e,typeName:rt.ZodNullable,...lt(t)});class Dp extends vt{_parse(t){const{ctx:r}=this._processInputParams(t);let s=r.data;return r.parsedType===$e.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Dp.create=(e,t)=>new Dp({innerType:e,typeName:rt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...lt(t)});class Ap extends vt{_parse(t){const{ctx:r}=this._processInputParams(t),s={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Qh(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new An(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new An(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ap.create=(e,t)=>new Ap({innerType:e,typeName:rt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...lt(t)});class lw extends vt{_parse(t){if(this._getType(t)!==$e.nan){const s=this._getOrReturnCtx(t);return Ie(s,{code:_e.invalid_type,expected:$e.nan,received:s.parsedType}),tt}return{status:"valid",value:t.data}}}lw.create=e=>new lw({typeName:rt.ZodNaN,...lt(e)});class oF extends vt{_parse(t){const{ctx:r}=this._processInputParams(t),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ry extends vt{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?tt:i.status==="dirty"?(r.dirty(),rd(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?tt:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(t,r){return new Ry({in:t,out:r,typeName:rt.ZodPipeline})}}class Pp extends vt{_parse(t){const r=this._def.innerType._parse(t),s=n=>(mc(n)&&(n.value=Object.freeze(n.value)),n);return Qh(r)?r.then(n=>s(n)):s(r)}unwrap(){return this._def.innerType}}Pp.create=(e,t)=>new Pp({innerType:e,typeName:rt.ZodReadonly,...lt(t)});Wt.lazycreate;var rt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(rt||(rt={}));const cF=mi.create;Li.create;Ja.create;const dF=Wt.create;Wt.strictCreate;Jh.create;ef.create;Ll.create;xc.create;tf.create;Ai.create;gc.create;const ow=(e,t,r)=>{if(e&&"reportValidity"in e){const s=ze(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},l4=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?ow(s.ref,r,e):s.refs&&s.refs.forEach(n=>ow(n,r,e))}},uF=(e,t)=>{t.shouldUseNativeValidation&&l4(e,t);const r={};for(const s in e){const n=ze(t.fields,s),i=Object.assign(e[s]||{},{ref:n&&n.ref});if(hF(t.names||Object.keys(e),s)){const l=Object.assign({},ze(r,s));Dt(l,"root",i),Dt(r,s,l)}else Dt(r,s,i)}return r},hF=(e,t)=>e.some(r=>r.startsWith(t+"."));var fF=function(e,t){for(var r={};e.length;){var s=e[0],n=s.code,i=s.message,l=s.path.join(".");if(!r[l])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:n};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=r[l].types,d=c&&c[s.code];r[l]=QS(l,t,r,n,d?[].concat(d,s.message):s.message)}e.shift()}return r},mF=function(e,t,r){return r===void 0&&(r={}),function(s,n,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return i.shouldUseNativeValidation&&l4({},i),{errors:{},values:r.raw?s:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:uF(fF(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}};const xF=dF({csv:cF().min(1,"CSV bo olamaz")}),pF=({open:e,onClose:t})=>{const{register:r,handleSubmit:s,formState:{errors:n}}=IR({resolver:mF(xF)}),i=_y(),l=async o=>{try{await i.mutateAsync({csv:o.csv}),t()}catch(c){console.error("UTS bulk start failed",c)}};return e?a.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:a.jsxs("div",{style:{background:"white",padding:16,width:"640px",borderRadius:8},children:[a.jsx("h3",{children:"TS Toplu Kayt Balat"}),a.jsxs("form",{onSubmit:s(l),children:[a.jsxs("div",{children:[a.jsx(wr,{...r("csv"),rows:8,className:"w-full"}),n.csv&&a.jsx("div",{style:{color:"red"},children:n.csv.message})]}),a.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,justifyContent:"flex-end"},children:[a.jsx(Z,{type:"button",variant:"ghost",onClick:t,children:"ptal"}),a.jsx(Z,{type:"submit",children:"Balat"})]})]})]})}):null},gF=()=>{var h;const{data:e,isLoading:t}=iR(),r=_y(),[s,n]=k.useState(""),[i,l]=k.useState(!1),[o,c]=k.useState(null),d=lR(o||"",{interval:1e4,onComplete:f=>console.log("job completed",f)}),u=()=>{r.mutate({csv:s})};return a.jsxs("div",{children:[a.jsx("h2",{children:"TS Kaytlar"}),a.jsxs("div",{style:{margin:"1rem 0"},children:[a.jsx(wr,{value:s,onChange:f=>n(f.target.value),rows:8,style:{width:"100%"}}),a.jsx("div",{style:{marginTop:"0.5rem"},children:a.jsx(Z,{onClick:u,disabled:r.isLoading||r.isMutating,children:"Toplu Kayt Balat"})})]}),a.jsxs("section",{children:[a.jsx("h3",{children:"Gemi Kaytlar"}),t?a.jsx("div",{children:"Ykleniyor..."}):a.jsx("ul",{children:(e||[]).map(f=>a.jsxs("li",{children:[f.id," - ",f.status]},f.id))})]}),a.jsxs("section",{style:{marginTop:24},children:[a.jsx("h3",{children:"Toplu Kayt (CSV)"}),a.jsx("div",{style:{marginBottom:8},children:a.jsx(Z,{onClick:()=>l(!0),children:"Toplu Kayt Balat"})}),a.jsx(hR,{onStarted:f=>c(f)}),o&&a.jsxs("div",{style:{marginTop:12},children:[a.jsx("strong",{children:" ID:"})," ",o," ",a.jsx("br",{}),a.jsx("strong",{children:"Durum:"})," ",((h=d==null?void 0:d.data)==null?void 0:h.status)||(d.isFetching?"alyor":"Bekleniyor")]})]}),a.jsx(pF,{open:i,onClose:()=>l(!1)})]})},yF=Or("/uts")({component:gF});function Pn(e){return Array.isArray?Array.isArray(e):d4(e)==="[object Array]"}const vF=1/0;function bF(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-vF?"-0":t}function wF(e){return e==null?"":bF(e)}function Ya(e){return typeof e=="string"}function o4(e){return typeof e=="number"}function NF(e){return e===!0||e===!1||kF(e)&&d4(e)=="[object Boolean]"}function c4(e){return typeof e=="object"}function kF(e){return c4(e)&&e!==null}function Ds(e){return e!=null}function Gm(e){return!e.trim().length}function d4(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const jF="Incorrect 'index' type",SF=e=>`Invalid value for key ${e}`,TF=e=>`Pattern length exceeds max of ${e}.`,_F=e=>`Missing ${e} property in key`,EF=e=>`Property 'weight' in key '${e}' must be a positive integer`,cw=Object.prototype.hasOwnProperty;class CF{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(s=>{let n=u4(s);this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(s=>{s.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function u4(e){let t=null,r=null,s=null,n=1,i=null;if(Ya(e)||Pn(e))s=e,t=dw(e),r=Rp(e);else{if(!cw.call(e,"name"))throw new Error(_F("name"));const l=e.name;if(s=l,cw.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(EF(l));t=dw(l),r=Rp(l),i=e.getFn}return{path:t,id:r,weight:n,src:s,getFn:i}}function dw(e){return Pn(e)?e:e.split(".")}function Rp(e){return Pn(e)?e.join("."):e}function DF(e,t){let r=[],s=!1;const n=(i,l,o)=>{if(Ds(i))if(!l[o])r.push(i);else{let c=l[o];const d=i[c];if(!Ds(d))return;if(o===l.length-1&&(Ya(d)||o4(d)||NF(d)))r.push(wF(d));else if(Pn(d)){s=!0;for(let u=0,h=d.length;u<h;u+=1)n(d[u],l,o+1)}else l.length&&n(d,l,o+1)}};return n(e,Ya(t)?t.split("."):t,0),s?r:r[0]}const AF={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},PF={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},RF={location:0,threshold:.6,distance:100},FF={useExtendedSearch:!1,getFn:DF,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Qe={...PF,...AF,...RF,...FF};const IF=/[^ ]+/g;function MF(e=1,t=3){const r=new Map,s=Math.pow(10,t);return{get(n){const i=n.match(IF).length;if(r.has(i))return r.get(i);const l=1/Math.pow(i,.5*e),o=parseFloat(Math.round(l*s)/s);return r.set(i,o),o},clear(){r.clear()}}}class Fy{constructor({getFn:t=Qe.getFn,fieldNormWeight:r=Qe.fieldNormWeight}={}){this.norm=MF(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ya(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();Ya(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Ds(t)||Gm(t))return;let s={v:t,i:r,n:this.norm.get(t)};this.records.push(s)}_addObject(t,r){let s={i:r,$:{}};this.keys.forEach((n,i)=>{let l=n.getFn?n.getFn(t):this.getFn(t,n.path);if(Ds(l)){if(Pn(l)){let o=[];const c=[{nestedArrIndex:-1,value:l}];for(;c.length;){const{nestedArrIndex:d,value:u}=c.pop();if(Ds(u))if(Ya(u)&&!Gm(u)){let h={v:u,i:d,n:this.norm.get(u)};o.push(h)}else Pn(u)&&u.forEach((h,f)=>{c.push({nestedArrIndex:f,value:h})})}s.$[i]=o}else if(Ya(l)&&!Gm(l)){let o={v:l,n:this.norm.get(l)};s.$[i]=o}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function h4(e,t,{getFn:r=Qe.getFn,fieldNormWeight:s=Qe.fieldNormWeight}={}){const n=new Fy({getFn:r,fieldNormWeight:s});return n.setKeys(e.map(u4)),n.setSources(t),n.create(),n}function OF(e,{getFn:t=Qe.getFn,fieldNormWeight:r=Qe.fieldNormWeight}={}){const{keys:s,records:n}=e,i=new Fy({getFn:t,fieldNormWeight:r});return i.setKeys(s),i.setIndexRecords(n),i}function E0(e,{errors:t=0,currentLocation:r=0,expectedLocation:s=0,distance:n=Qe.distance,ignoreLocation:i=Qe.ignoreLocation}={}){const l=t/e.length;if(i)return l;const o=Math.abs(s-r);return n?l+o/n:o?1:l}function LF(e=[],t=Qe.minMatchCharLength){let r=[],s=-1,n=-1,i=0;for(let l=e.length;i<l;i+=1){let o=e[i];o&&s===-1?s=i:!o&&s!==-1&&(n=i-1,n-s+1>=t&&r.push([s,n]),s=-1)}return e[i-1]&&i-s>=t&&r.push([s,i-1]),r}const Ji=32;function BF(e,t,r,{location:s=Qe.location,distance:n=Qe.distance,threshold:i=Qe.threshold,findAllMatches:l=Qe.findAllMatches,minMatchCharLength:o=Qe.minMatchCharLength,includeMatches:c=Qe.includeMatches,ignoreLocation:d=Qe.ignoreLocation}={}){if(t.length>Ji)throw new Error(TF(Ji));const u=t.length,h=e.length,f=Math.max(0,Math.min(s,h));let x=i,p=f;const m=o>1||c,y=m?Array(h):[];let g;for(;(g=e.indexOf(t,p))>-1;){let E=E0(t,{currentLocation:g,expectedLocation:f,distance:n,ignoreLocation:d});if(x=Math.min(E,x),p=g+u,m){let w=0;for(;w<u;)y[g+w]=1,w+=1}}p=-1;let v=[],b=1,S=u+h;const D=1<<u-1;for(let E=0;E<u;E+=1){let w=0,_=S;for(;w<_;)E0(t,{errors:E,currentLocation:f+_,expectedLocation:f,distance:n,ignoreLocation:d})<=x?w=_:S=_,_=Math.floor((S-w)/2+w);S=_;let C=Math.max(1,f-_+1),T=l?h:Math.min(f+_,h)+u,j=Array(T+2);j[T+1]=(1<<E)-1;for(let O=T;O>=C;O-=1){let z=O-1,G=r[e.charAt(z)];if(m&&(y[z]=+!!G),j[O]=(j[O+1]<<1|1)&G,E&&(j[O]|=(v[O+1]|v[O])<<1|1|v[O+1]),j[O]&D&&(b=E0(t,{errors:E,currentLocation:z,expectedLocation:f,distance:n,ignoreLocation:d}),b<=x)){if(x=b,p=z,p<=f)break;C=Math.max(1,2*f-p)}}if(E0(t,{errors:E+1,currentLocation:f,expectedLocation:f,distance:n,ignoreLocation:d})>x)break;v=j}const N={isMatch:p>=0,score:Math.max(.001,b)};if(m){const E=LF(y,o);E.length?c&&(N.indices=E):N.isMatch=!1}return N}function zF(e){let t={};for(let r=0,s=e.length;r<s;r+=1){const n=e.charAt(r);t[n]=(t[n]||0)|1<<s-r-1}return t}const rf=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class f4{constructor(t,{location:r=Qe.location,threshold:s=Qe.threshold,distance:n=Qe.distance,includeMatches:i=Qe.includeMatches,findAllMatches:l=Qe.findAllMatches,minMatchCharLength:o=Qe.minMatchCharLength,isCaseSensitive:c=Qe.isCaseSensitive,ignoreDiacritics:d=Qe.ignoreDiacritics,ignoreLocation:u=Qe.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:n,includeMatches:i,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u},t=c?t:t.toLowerCase(),t=d?rf(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const h=(x,p)=>{this.chunks.push({pattern:x,alphabet:zF(x),startIndex:p})},f=this.pattern.length;if(f>Ji){let x=0;const p=f%Ji,m=f-p;for(;x<m;)h(this.pattern.substr(x,Ji),x),x+=Ji;if(p){const y=f-Ji;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:s,includeMatches:n}=this.options;if(t=r?t:t.toLowerCase(),t=s?rf(t):t,this.pattern===t){let m={isMatch:!0,score:0};return n&&(m.indices=[[0,t.length-1]]),m}const{location:i,distance:l,threshold:o,findAllMatches:c,minMatchCharLength:d,ignoreLocation:u}=this.options;let h=[],f=0,x=!1;this.chunks.forEach(({pattern:m,alphabet:y,startIndex:g})=>{const{isMatch:v,score:b,indices:S}=BF(t,m,y,{location:i+g,distance:l,threshold:o,findAllMatches:c,minMatchCharLength:d,includeMatches:n,ignoreLocation:u});v&&(x=!0),f+=b,v&&S&&(h=[...h,...S])});let p={isMatch:x,score:x?f/this.chunks.length:1};return x&&n&&(p.indices=h),p}}class Hi{constructor(t){this.pattern=t}static isMultiMatch(t){return uw(t,this.multiRegex)}static isSingleMatch(t){return uw(t,this.singleRegex)}search(){}}function uw(e,t){const r=e.match(t);return r?r[1]:null}class $F extends Hi{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class UF extends Hi{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class VF extends Hi{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class HF extends Hi{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class KF extends Hi{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class GF extends Hi{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class m4 extends Hi{constructor(t,{location:r=Qe.location,threshold:s=Qe.threshold,distance:n=Qe.distance,includeMatches:i=Qe.includeMatches,findAllMatches:l=Qe.findAllMatches,minMatchCharLength:o=Qe.minMatchCharLength,isCaseSensitive:c=Qe.isCaseSensitive,ignoreDiacritics:d=Qe.ignoreDiacritics,ignoreLocation:u=Qe.ignoreLocation}={}){super(t),this._bitapSearch=new f4(t,{location:r,threshold:s,distance:n,includeMatches:i,findAllMatches:l,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class x4 extends Hi{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,s;const n=[],i=this.pattern.length;for(;(s=t.indexOf(this.pattern,r))>-1;)r=s+i,n.push([s,r-1]);const l=!!n.length;return{isMatch:l,score:l?0:1,indices:n}}}const Fp=[$F,x4,VF,HF,GF,KF,UF,m4],hw=Fp.length,WF=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,YF="|";function qF(e,t={}){return e.split(YF).map(r=>{let s=r.trim().split(WF).filter(i=>i&&!!i.trim()),n=[];for(let i=0,l=s.length;i<l;i+=1){const o=s[i];let c=!1,d=-1;for(;!c&&++d<hw;){const u=Fp[d];let h=u.isMultiMatch(o);h&&(n.push(new u(h,t)),c=!0)}if(!c)for(d=-1;++d<hw;){const u=Fp[d];let h=u.isSingleMatch(o);if(h){n.push(new u(h,t));break}}}return n})}const XF=new Set([m4.type,x4.type]);class QF{constructor(t,{isCaseSensitive:r=Qe.isCaseSensitive,ignoreDiacritics:s=Qe.ignoreDiacritics,includeMatches:n=Qe.includeMatches,minMatchCharLength:i=Qe.minMatchCharLength,ignoreLocation:l=Qe.ignoreLocation,findAllMatches:o=Qe.findAllMatches,location:c=Qe.location,threshold:d=Qe.threshold,distance:u=Qe.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:s,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:l,location:c,threshold:d,distance:u},t=r?t:t.toLowerCase(),t=s?rf(t):t,this.pattern=t,this.query=qF(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n,ignoreDiacritics:i}=this.options;t=n?t:t.toLowerCase(),t=i?rf(t):t;let l=0,o=[],c=0;for(let d=0,u=r.length;d<u;d+=1){const h=r[d];o.length=0,l=0;for(let f=0,x=h.length;f<x;f+=1){const p=h[f],{isMatch:m,indices:y,score:g}=p.search(t);if(m){if(l+=1,c+=g,s){const v=p.constructor.type;XF.has(v)?o=[...o,...y]:o.push(y)}}else{c=0,l=0,o.length=0;break}}if(l){let f={isMatch:!0,score:c/l};return s&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Ip=[];function ZF(...e){Ip.push(...e)}function Mp(e,t){for(let r=0,s=Ip.length;r<s;r+=1){let n=Ip[r];if(n.condition(e,t))return new n(e,t)}return new f4(e,t)}const sf={AND:"$and",OR:"$or"},Op={PATH:"$path",PATTERN:"$val"},Lp=e=>!!(e[sf.AND]||e[sf.OR]),JF=e=>!!e[Op.PATH],eI=e=>!Pn(e)&&c4(e)&&!Lp(e),fw=e=>({[sf.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function p4(e,t,{auto:r=!0}={}){const s=n=>{let i=Object.keys(n);const l=JF(n);if(!l&&i.length>1&&!Lp(n))return s(fw(n));if(eI(n)){const c=l?n[Op.PATH]:i[0],d=l?n[Op.PATTERN]:n[c];if(!Ya(d))throw new Error(SF(c));const u={keyId:Rp(c),pattern:d};return r&&(u.searcher=Mp(d,t)),u}let o={children:[],operator:i[0]};return i.forEach(c=>{const d=n[c];Pn(d)&&d.forEach(u=>{o.children.push(s(u))})}),o};return Lp(e)||(e=fw(e)),s(e)}function tI(e,{ignoreFieldNorm:t=Qe.ignoreFieldNorm}){e.forEach(r=>{let s=1;r.matches.forEach(({key:n,norm:i,score:l})=>{const o=n?n.weight:null;s*=Math.pow(l===0&&o?Number.EPSILON:l,(o||1)*(t?1:i))}),r.score=s})}function rI(e,t){const r=e.matches;t.matches=[],Ds(r)&&r.forEach(s=>{if(!Ds(s.indices)||!s.indices.length)return;const{indices:n,value:i}=s;let l={indices:n,value:i};s.key&&(l.key=s.key.src),s.idx>-1&&(l.refIndex=s.idx),t.matches.push(l)})}function sI(e,t){t.score=e.score}function aI(e,t,{includeMatches:r=Qe.includeMatches,includeScore:s=Qe.includeScore}={}){const n=[];return r&&n.push(rI),s&&n.push(sI),e.map(i=>{const{idx:l}=i,o={item:t[l],refIndex:l};return n.length&&n.forEach(c=>{c(i,o)}),o})}class Kl{constructor(t,r={},s){this.options={...Qe,...r},this.options.useExtendedSearch,this._keyStore=new CF(this.options.keys),this.setCollection(t,s)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Fy))throw new Error(jF);this._myIndex=r||h4(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ds(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let s=0,n=this._docs.length;s<n;s+=1){const i=this._docs[s];t(i,s)&&(this.removeAt(s),s-=1,n-=1,r.push(i))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:i,sortFn:l,ignoreFieldNorm:o}=this.options;let c=Ya(t)?Ya(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return tI(c,{ignoreFieldNorm:o}),i&&c.sort(l),o4(r)&&r>-1&&(c=c.slice(0,r)),aI(c,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(t){const r=Mp(t,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:i,i:l,n:o})=>{if(!Ds(i))return;const{isMatch:c,score:d,indices:u}=r.searchIn(i);c&&n.push({item:i,idx:l,matches:[{score:d,value:i,norm:o,indices:u}]})}),n}_searchLogical(t){const r=p4(t,this.options),s=(o,c,d)=>{if(!o.children){const{keyId:h,searcher:f}=o,x=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:f});return x&&x.length?[{idx:d,item:c,matches:x}]:[]}const u=[];for(let h=0,f=o.children.length;h<f;h+=1){const x=o.children[h],p=s(x,c,d);if(p.length)u.push(...p);else if(o.operator===sf.AND)return[]}return u},n=this._myIndex.records,i={},l=[];return n.forEach(({$:o,i:c})=>{if(Ds(o)){let d=s(r,o,c);d.length&&(i[c]||(i[c]={idx:c,item:o,matches:[]},l.push(i[c])),d.forEach(({matches:u})=>{i[c].matches.push(...u)}))}}),l}_searchObjectList(t){const r=Mp(t,this.options),{keys:s,records:n}=this._myIndex,i=[];return n.forEach(({$:l,i:o})=>{if(!Ds(l))return;let c=[];s.forEach((d,u)=>{c.push(...this._findMatches({key:d,value:l[u],searcher:r}))}),c.length&&i.push({idx:o,item:l,matches:c})}),i}_findMatches({key:t,value:r,searcher:s}){if(!Ds(r))return[];let n=[];if(Pn(r))r.forEach(({v:i,i:l,n:o})=>{if(!Ds(i))return;const{isMatch:c,score:d,indices:u}=s.searchIn(i);c&&n.push({score:d,key:t,value:i,idx:l,norm:o,indices:u})});else{const{v:i,n:l}=r,{isMatch:o,score:c,indices:d}=s.searchIn(i);o&&n.push({score:c,key:t,value:i,norm:l,indices:d})}return n}}Kl.version="7.1.0";Kl.createIndex=h4;Kl.parseIndex=OF;Kl.config=Qe;Kl.parseQuery=p4;ZF(QF);class nI{constructor(t,r={}){this.originalData=t;const s={threshold:.3,distance:100,minMatchCharLength:2,findAllMatches:!1,includeScore:!0,includeMatches:!0,shouldSort:!0,...r};this.options=s,this.fuse=new Kl(t,s)}search(t){return!t||t.length<2?this.originalData.map(s=>({item:s})):this.fuse.search(t).map(s=>({item:s.item,score:s.score,matches:s.matches}))}setData(t){this.originalData=t,this.fuse.setCollection(t)}addItems(t){this.originalData=[...this.originalData,...t],this.fuse.setCollection(this.originalData)}removeItems(t){this.originalData=this.originalData.filter(r=>!t(r)),this.fuse.setCollection(this.originalData)}getAllData(){return this.originalData}getStats(){return{totalItems:this.originalData.length,searchKeys:this.options.keys,threshold:this.options.threshold}}}function iI(e,t={}){return new nI(e,t)}const mw={strict:{threshold:.2,distance:50,minMatchCharLength:3},balanced:{threshold:.3,distance:100,minMatchCharLength:2},lenient:{threshold:.6,distance:200,minMatchCharLength:1},exactWithTypos:{threshold:.1,distance:20,minMatchCharLength:3,findAllMatches:!0}};function lI(e,t={}){const{debounceMs:r=300,minQueryLength:s=2,preset:n,...i}=t,l=k.useMemo(()=>n&&mw[n]?{...mw[n],...i}:i,[n,i]),[o,c]=k.useState(""),[d,u]=k.useState(""),[h,f]=k.useState(!1),[x,p]=k.useState(e),m=k.useMemo(()=>iI(x,l),[x,l]);k.useEffect(()=>{if(o.length===0){u(""),f(!1);return}if(o.length<s){u(""),f(!1);return}f(!0);const _=setTimeout(()=>{u(o),f(!1)},r);return()=>clearTimeout(_)},[o,r,s]);const y=k.useMemo(()=>!d||d.length<s?x.map(_=>({item:_})):m.search(d),[d,m,x,s]),g=y.length,v=g>0,b=k.useCallback(_=>{c(_)},[]),S=k.useCallback(()=>{c(""),u(""),f(!1)},[]),D=k.useCallback(_=>{p(_)},[]),N=k.useCallback(_=>{p(C=>[...C,..._])},[]),E=k.useCallback(_=>{p(C=>C.filter(T=>!_(T)))},[]),w=k.useMemo(()=>m.getStats(),[m]);return{results:y,query:o,setQuery:b,isSearching:h,totalResults:g,hasResults:v,clearSearch:S,setData:D,addItems:N,removeItems:E,stats:w}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var g4=1252,oI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Iy={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},My=function(e){oI.indexOf(e)!=-1&&(g4=Iy[0]=e)};function cI(){My(1252)}var va=function(e){My(e)};function y4(){va(1200),cI()}function xw(e){for(var t=[],r=0,s=e.length;r<s;++r)t[r]=e.charCodeAt(r);return t}function dI(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function v4(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var sd=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?dI(e.slice(2)):t==254&&r==255?v4(e.slice(2)):t==65279?e.slice(1):e},C0=function(t){return String.fromCharCode(t)},pw=function(t){return String.fromCharCode(t)},Jn,xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function gw(e){for(var t="",r=0,s=0,n=0,i=0,l=0,o=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,s=e.charCodeAt(d++),l=(r&3)<<4|s>>4,n=e.charCodeAt(d++),o=(s&15)<<2|n>>6,c=n&63,isNaN(s)?o=c=64:isNaN(n)&&(c=64),t+=xi.charAt(i)+xi.charAt(l)+xi.charAt(o)+xi.charAt(c);return t}function Ls(e){var t="",r=0,s=0,n=0,i=0,l=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=xi.indexOf(e.charAt(d++)),l=xi.indexOf(e.charAt(d++)),r=i<<2|l>>4,t+=String.fromCharCode(r),o=xi.indexOf(e.charAt(d++)),s=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(s)),c=xi.indexOf(e.charAt(d++)),n=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(n));return t}var dt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Gl=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Bi(e){return dt?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function yw(e){return dt?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ga=function(t){return dt?Gl(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Wl(e){if(Array.isArray(e))return e.map(function(s){return String.fromCharCode(s)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Oy(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Oy(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ei=dt?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Gl(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var s=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)s.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";s.set(new Uint8Array(e[t]),r)}return s}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function uI(e){for(var t=[],r=0,s=e.length+250,n=Bi(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)n[r++]=l;else if(l<2048)n[r++]=192|l>>6&31,n[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;n[r++]=240|l>>8&7,n[r++]=128|l>>2&63,n[r++]=128|o>>6&15|(l&3)<<4,n[r++]=128|o&63}else n[r++]=224|l>>12&15,n[r++]=128|l>>6&63,n[r++]=128|l&63;r>s&&(t.push(n.slice(0,r)),r=0,n=Bi(65535),s=65530)}return t.push(n.slice(0,r)),ei(t)}var cs=/\u0000/g,ad=/[\u0001-\u0006]/g;function Lo(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ba(e,t){var r=""+e;return r.length>=t?r:qt("0",t-r.length)+r}function Ly(e,t){var r=""+e;return r.length>=t?r:qt(" ",t-r.length)+r}function af(e,t){var r=""+e;return r.length>=t?r:r+qt(" ",t-r.length)}function hI(e,t){var r=""+Math.round(e);return r.length>=t?r:qt("0",t-r.length)+r}function fI(e,t){var r=""+e;return r.length>=t?r:qt("0",t-r.length)+r}var vw=Math.pow(2,32);function ao(e,t){if(e>vw||e<-vw)return hI(e,t);var r=Math.round(e);return fI(r,t)}function nf(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var bw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Wm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function mI(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var st={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},ww={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xI={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function lf(e,t,r){for(var s=e<0?-1:1,n=e*s,i=0,l=1,o=0,c=1,d=0,u=0,h=Math.floor(n);d<t&&(h=Math.floor(n),o=h*l+i,u=h*d+c,!(n-h<5e-8));)n=1/(n-h),i=l,l=o,c=d,d=u;if(u>t&&(d>t?(u=c,o=i):(u=d,o=l)),!r)return[0,s*o,u];var f=Math.floor(s*o/u);return[f,s*o-f*u,u]}function cl(e,t,r){if(e>2958465||e<0)return null;var s=e|0,n=Math.floor(86400*(e-s)),i=0,l=[],o={D:s,T:n,u:86400*(e-s)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(s+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++s,++o.D)),s===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(s===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),s<60&&(i=(i+6)%7),r&&(i=wI(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var b4=new Date(1899,11,31,0,0,0),pI=b4.getTime(),gI=new Date(1900,2,1,0,0,0);function w4(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=gI&&(r+=24*60*60*1e3),(r-(pI+(e.getTimezoneOffset()-b4.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function By(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function yI(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function vI(e){var t=e<0?12:11,r=By(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function bI(e){var t=By(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ou(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=vI(e):t===10?r=e.toFixed(10).substr(0,12):r=bI(e),By(yI(r.toUpperCase()))}function Bl(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ou(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return sa(14,w4(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function wI(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function NI(e,t,r,s){var n="",i=0,l=0,o=r.y,c,d=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return Wm[r.m-1][1];case 5:return Wm[r.m-1][0];default:return Wm[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return bw[r.q][0];default:return bw[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ba(r.S,t.length):(s>=2?l=s===3?1e3:100:l=s===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(n=ba(i,2+s),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?ba(c,d):"";return u}function pi(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,s=e.substr(0,r);r!=e.length;r+=t)s+=(s.length>0?",":"")+e.substr(r,t);return s}var N4=/%/g;function kI(e,t,r){var s=t.replace(N4,""),n=t.length-s.length;return jn(e,s,r*Math.pow(10,2*n))+qt("%",n)}function jI(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return jn(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function k4(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+k4(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(t/Math.pow(10,i)).toPrecision(s+1+(n+i)%n),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var j4=/# (\?+)( ?)\/( ?)(\d+)/;function SI(e,t,r){var s=parseInt(e[4],10),n=Math.round(t*s),i=Math.floor(n/s),l=n-i*s,o=s;return r+(i===0?"":""+i)+" "+(l===0?qt(" ",e[1].length+1+e[4].length):Ly(l,e[1].length)+e[2]+"/"+e[3]+ba(o,e[4].length))}function TI(e,t,r){return r+(t===0?"":""+t)+qt(" ",e[1].length+2+e[4].length)}var S4=/^#*0*\.([0#]+)/,T4=/\).*[0#]/,_4=/\(###\) ###\\?-####/;function as(e){for(var t="",r,s=0;s!=e.length;++s)switch(r=e.charCodeAt(s)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function Nw(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function kw(e,t){var r=e-Math.floor(e),s=Math.pow(10,t);return t<(""+Math.round(r*s)).length?0:Math.round(r*s)}function _I(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function EI(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Hs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(T4)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Hs("n",s,r):"("+Hs("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return jI(e,t,r);if(t.indexOf("%")!==-1)return kI(e,t,r);if(t.indexOf("E")!==-1)return k4(t,r);if(t.charCodeAt(0)===36)return"$"+Hs(e,t.substr(t.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+ao(c,t.length);if(t.match(/^[#?]+$/))return n=ao(r,0),n==="0"&&(n=""),n.length>t.length?n:as(t.substr(0,t.length-n.length))+n;if(i=t.match(j4))return SI(i,c,d);if(t.match(/^#+0+$/))return d+ao(c,t.length-t.indexOf("0"));if(i=t.match(S4))return n=Nw(r,i[1].length).replace(/^([^\.]+)$/,"$1."+as(i[1])).replace(/\.$/,"."+as(i[1])).replace(/\.(\d*)$/,function(p,m){return"."+m+qt("0",as(i[1]).length-m.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+Nw(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+pi(ao(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Hs(e,t,-r):pi(""+(Math.floor(r)+_I(r,i[1].length)))+"."+ba(kw(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Hs(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Lo(Hs(e,t.replace(/[\\-]/g,""),r)),l=0,Lo(Lo(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return l<n.length?n.charAt(l++):p==="0"?"0":""}));if(t.match(_4))return n=Hs(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=lf(c,Math.pow(10,l)-1,!1),n=""+d,u=jn("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=af(o[2],l),u.length<i[4].length&&(u=as(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=lf(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Ly(o[1],l)+i[2]+"/"+i[3]+af(o[2],l):qt(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return n=ao(r,0),t.length<=n.length?n:as(t.substr(0,t.length-n.length))+n;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var h=t.indexOf(".")-l,f=t.length-n.length-h;return as(t.substr(0,h)+n+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=kw(r,i[1].length),r<0?"-"+Hs(e,t,-r):pi(EI(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?ba(0,3-p.length):"")+p})+"."+ba(l,i[1].length);switch(t){case"###,##0.00":return Hs(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var x=pi(ao(c,0));return x!=="0"?d+x:"";case"###,###.00":return Hs(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Hs(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function CI(e,t,r){for(var s=t.length-1;t.charCodeAt(s-1)===44;)--s;return jn(e,t.substr(0,s),r/Math.pow(10,3*(t.length-s)))}function DI(e,t,r){var s=t.replace(N4,""),n=t.length-s.length;return jn(e,s,r*Math.pow(10,2*n))+qt("%",n)}function E4(e,t){var r,s=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+E4(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(t/Math.pow(10,i)).toPrecision(s+1+(n+i)%n),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=t.toExponential(s);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ia(e,t,r){if(e.charCodeAt(0)===40&&!t.match(T4)){var s=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ia("n",s,r):"("+Ia("n",s,-r)+")"}if(t.charCodeAt(t.length-1)===44)return CI(e,t,r);if(t.indexOf("%")!==-1)return DI(e,t,r);if(t.indexOf("E")!==-1)return E4(t,r);if(t.charCodeAt(0)===36)return"$"+Ia(e,t.substr(t.charAt(1)==" "?2:1),r);var n,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+ba(c,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:as(t.substr(0,t.length-n.length))+n;if(i=t.match(j4))return TI(i,c,d);if(t.match(/^#+0+$/))return d+ba(c,t.length-t.indexOf("0"));if(i=t.match(S4))return n=(""+r).replace(/^([^\.]+)$/,"$1."+as(i[1])).replace(/\.$/,"."+as(i[1])),n=n.replace(/\.(\d*)$/,function(p,m){return"."+m+qt("0",as(i[1]).length-m.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+pi(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ia(e,t,-r):pi(""+r)+"."+qt("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Ia(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Lo(Ia(e,t.replace(/[\\-]/g,""),r)),l=0,Lo(Lo(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return l<n.length?n.charAt(l++):p==="0"?"0":""}));if(t.match(_4))return n=Ia(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=lf(c,Math.pow(10,l)-1,!1),n=""+d,u=jn("n",i[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=af(o[2],l),u.length<i[4].length&&(u=as(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=lf(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Ly(o[1],l)+i[2]+"/"+i[3]+af(o[2],l):qt(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:as(t.substr(0,t.length-n.length))+n;if(i=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var h=t.indexOf(".")-l,f=t.length-n.length-h;return as(t.substr(0,h)+n+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ia(e,t,-r):pi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?ba(0,3-p.length):"")+p})+"."+ba(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var x=pi(""+c);return x!=="0"?d+x:"";default:if(t.match(/\.[0#?]*$/))return Ia(e,t.slice(0,t.lastIndexOf(".")),r)+as(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function jn(e,t,r){return(r|0)===r?Ia(e,t,r):Hs(e,t,r)}function AI(e){for(var t=[],r=!1,s=0,n=0;s<e.length;++s)switch(e.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:t[t.length]=e.substr(n,s-n),n=s+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var C4=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ec(e){for(var t=0,r="",s="";t<e.length;)switch(r=e.charAt(t)){case"G":nf(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(s=r;e.charAt(t++)!=="]"&&t<e.length;)s+=e.charAt(t);if(s.match(C4))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function PI(e,t,r,s){for(var n=[],i="",l=0,o="",c="t",d,u,h,f="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!nf(e,l))throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(h=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(h);n[n.length]={t:"t",v:i},++l;break;case"\\":var x=e.charAt(++l),p=x==="("||x===")"?x:"t";n[n.length]={t:p,v:x},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(d==null&&(d=cl(t,r,e.charAt(l+1)==="2"),d==null))return"";n[n.length]={t:"X",v:e.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=cl(t,r),d==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),n[n.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var m={t:o,v:o};if(d==null&&(d=cl(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(m.v=d.H>=12?"P":"A"),m.t="T",f="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(m.v=d.H>=12?"PM":"AM"),m.t="T",l+=5,f="h"):e.substr(l,5).toUpperCase()==="/"?(d!=null&&(m.v=d.H>=12?"":""),m.t="T",l+=5,f="h"):(m.t="t",++l),d==null&&m.t==="T")return"";n[n.length]=m,c=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(C4)){if(d==null&&(d=cl(t,r),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ec(e)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},c=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:s===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"t",v:o},++l;break}var y=0,g=0,v;for(l=n.length-1,c="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=f,c="h",y<1&&(y=1);break;case"s":(v=n[l].v.match(/\.0+$/))&&(g=Math.max(g,v[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=n[l].t;break;case"m":c==="s"&&(n[l].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&n[l].v.match(/[Hh]/)&&(y=1),y<2&&n[l].v.match(/[Mm]/)&&(y=2),y<3&&n[l].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var b="",S;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=NI(n[l].t.charCodeAt(0),n[l].v,d,g),n[l].t="t";break;case"n":case"?":for(S=l+1;n[S]!=null&&((o=n[S].t)==="?"||o==="D"||(o===" "||o==="t")&&n[S+1]!=null&&(n[S+1].t==="?"||n[S+1].t==="t"&&n[S+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[S].v==="/"||n[S].v===" "&&n[S+1]!=null&&n[S+1].t=="?"));)n[l].v+=n[S].v,n[S]={v:"",t:";"},++S;b+=n[l].v,l=S-1;break;case"G":n[l].t="t",n[l].v=Bl(t,r);break}var D="",N,E;if(b.length>0){b.charCodeAt(0)==40?(N=t<0&&b.charCodeAt(0)===45?-t:t,E=jn("n",b,N)):(N=t<0&&s>1?-t:t,E=jn("n",b,N),N<0&&n[0]&&n[0].t=="t"&&(E=E.substr(1),n[0].v="-"+n[0].v)),S=E.length-1;var w=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){w=l;break}var _=n.length;if(w===n.length&&E.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(S>=n[l].v.length-1?(S-=n[l].v.length,n[l].v=E.substr(S+1,n[l].v.length)):S<0?n[l].v="":(n[l].v=E.substr(0,S+1),S=-1),n[l].t="t",_=l);S>=0&&_<n.length&&(n[_].v=E.substr(0,S+1)+n[_].v)}else if(w!==n.length&&E.indexOf("E")===-1){for(S=E.indexOf(".")-1,l=w;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(u=n[l].v.indexOf(".")>-1&&l===w?n[l].v.indexOf(".")-1:n[l].v.length-1,D=n[l].v.substr(u+1);u>=0;--u)S>=0&&(n[l].v.charAt(u)==="0"||n[l].v.charAt(u)==="#")&&(D=E.charAt(S--)+D);n[l].v=D,n[l].t="t",_=l}for(S>=0&&_<n.length&&(n[_].v=E.substr(0,S+1)+n[_].v),S=E.indexOf(".")+1,l=w;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==w)){for(u=n[l].v.indexOf(".")>-1&&l===w?n[l].v.indexOf(".")+1:0,D=n[l].v.substr(0,u);u<n[l].v.length;++u)S<E.length&&(D+=E.charAt(S++));n[l].v=D,n[l].t="t",_=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(N=s>1&&t<0&&l>0&&n[l-1].v==="-"?-t:t,n[l].v=jn(n[l].t,n[l].v,N),n[l].t="t");var C="";for(l=0;l!==n.length;++l)n[l]!=null&&(C+=n[l].v);return C}var jw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Sw(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function RI(e,t){var r=AI(e),s=r.length,n=r[s-1].indexOf("@");if(s<4&&n>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(jw),o=r[1].match(jw);return Sw(t,l)?[s,r[0]]:Sw(t,o)?[s,r[1]]:[s,r[l!=null&&o!=null?2:1]]}return[s,i]}function sa(e,t,r){r==null&&(r={});var s="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?s=r.dateNF:s=e;break;case"number":e==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:st)[e],s==null&&(s=r.table&&r.table[ww[e]]||st[ww[e]]),s==null&&(s=xI[e]||"General");break}if(nf(s,0))return Bl(t,r);t instanceof Date&&(t=w4(t,r.date1904));var n=RI(s,t);if(nf(n[1]))return Bl(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return PI(n[1],t,r,n[0])}function Tl(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(st[r]==null){t<0&&(t=r);continue}if(st[r]==e){t=r;break}}t<0&&(t=391)}return st[t]=e,t}function D4(){st=mI()}var FI={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},A4=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function II(e){var t=typeof e=="number"?st[e]:e;return t=t.replace(A4,"(\\d+)"),new RegExp("^"+t+"$")}function MI(e,t,r){var s=-1,n=-1,i=-1,l=-1,o=-1,c=-1;(t.match(A4)||[]).forEach(function(h,f){var x=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":s=x;break;case"d":i=x;break;case"h":l=x;break;case"s":c=x;break;case"m":l>=0?o=x:n=x;break}}),c>=0&&o==-1&&n>=0&&(o=n,n=-1);var d=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:s==-1&&n==-1&&i==-1?u:d+"T"+u}var OI=function(){var e={};e.version="1.2.0";function t(){for(var E=0,w=new Array(256),_=0;_!=256;++_)E=_,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,w[_]=E;return typeof Int32Array<"u"?new Int32Array(w):w}var r=t();function s(E){var w=0,_=0,C=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)T[C]=E[C];for(C=0;C!=256;++C)for(_=E[C],w=256+C;w<4096;w+=256)_=T[w]=_>>>8^E[_&255];var j=[];for(C=1;C!=16;++C)j[C-1]=typeof Int32Array<"u"?T.subarray(C*256,C*256+256):T.slice(C*256,C*256+256);return j}var n=s(r),i=n[0],l=n[1],o=n[2],c=n[3],d=n[4],u=n[5],h=n[6],f=n[7],x=n[8],p=n[9],m=n[10],y=n[11],g=n[12],v=n[13],b=n[14];function S(E,w){for(var _=w^-1,C=0,T=E.length;C<T;)_=_>>>8^r[(_^E.charCodeAt(C++))&255];return~_}function D(E,w){for(var _=w^-1,C=E.length-15,T=0;T<C;)_=b[E[T++]^_&255]^v[E[T++]^_>>8&255]^g[E[T++]^_>>16&255]^y[E[T++]^_>>>24]^m[E[T++]]^p[E[T++]]^x[E[T++]]^f[E[T++]]^h[E[T++]]^u[E[T++]]^d[E[T++]]^c[E[T++]]^o[E[T++]]^l[E[T++]]^i[E[T++]]^r[E[T++]];for(C+=15;T<C;)_=_>>>8^r[(_^E[T++])&255];return~_}function N(E,w){for(var _=w^-1,C=0,T=E.length,j=0,F=0;C<T;)j=E.charCodeAt(C++),j<128?_=_>>>8^r[(_^j)&255]:j<2048?(_=_>>>8^r[(_^(192|j>>6&31))&255],_=_>>>8^r[(_^(128|j&63))&255]):j>=55296&&j<57344?(j=(j&1023)+64,F=E.charCodeAt(C++)&1023,_=_>>>8^r[(_^(240|j>>8&7))&255],_=_>>>8^r[(_^(128|j>>2&63))&255],_=_>>>8^r[(_^(128|F>>6&15|(j&3)<<4))&255],_=_>>>8^r[(_^(128|F&63))&255]):(_=_>>>8^r[(_^(224|j>>12&15))&255],_=_>>>8^r[(_^(128|j>>6&63))&255],_=_>>>8^r[(_^(128|j&63))&255]);return~_}return e.table=r,e.bstr=S,e.buf=D,e.str=N,e}(),ht=function(){var t={};t.version="1.2.1";function r(B,X){for(var W=B.split("/"),Y=X.split("/"),Q=0,ee=0,he=Math.min(W.length,Y.length);Q<he;++Q){if(ee=W[Q].length-Y[Q].length)return ee;if(W[Q]!=Y[Q])return W[Q]<Y[Q]?-1:1}return W.length-Y.length}function s(B){if(B.charAt(B.length-1)=="/")return B.slice(0,-1).indexOf("/")===-1?B:s(B.slice(0,-1));var X=B.lastIndexOf("/");return X===-1?B:B.slice(0,X+1)}function n(B){if(B.charAt(B.length-1)=="/")return n(B.slice(0,-1));var X=B.lastIndexOf("/");return X===-1?B:B.slice(X+1)}function i(B,X){typeof X=="string"&&(X=new Date(X));var W=X.getHours();W=W<<6|X.getMinutes(),W=W<<5|X.getSeconds()>>>1,B.write_shift(2,W);var Y=X.getFullYear()-1980;Y=Y<<4|X.getMonth()+1,Y=Y<<5|X.getDate(),B.write_shift(2,Y)}function l(B){var X=B.read_shift(2)&65535,W=B.read_shift(2)&65535,Y=new Date,Q=W&31;W>>>=5;var ee=W&15;W>>>=4,Y.setMilliseconds(0),Y.setFullYear(W+1980),Y.setMonth(ee-1),Y.setDate(Q);var he=X&31;X>>>=5;var be=X&63;return X>>>=6,Y.setHours(X),Y.setMinutes(be),Y.setSeconds(he<<1),Y}function o(B){Pr(B,0);for(var X={},W=0;B.l<=B.length-4;){var Y=B.read_shift(2),Q=B.read_shift(2),ee=B.l+Q,he={};switch(Y){case 21589:W=B.read_shift(1),W&1&&(he.mtime=B.read_shift(4)),Q>5&&(W&2&&(he.atime=B.read_shift(4)),W&4&&(he.ctime=B.read_shift(4))),he.mtime&&(he.mt=new Date(he.mtime*1e3));break}B.l=ee,X[Y]=he}return X}var c;function d(){return c||(c={})}function u(B,X){if(B[0]==80&&B[1]==75)return im(B,X);if((B[0]|32)==109&&(B[1]|32)==105)return bv(B,X);if(B.length<512)throw new Error("CFB file size "+B.length+" < 512");var W=3,Y=512,Q=0,ee=0,he=0,be=0,ue=0,fe=[],xe=B.slice(0,512);Pr(xe,0);var je=h(xe);switch(W=je[0],W){case 3:Y=512;break;case 4:Y=4096;break;case 0:if(je[1]==0)return im(B,X);default:throw new Error("Major Version: Expected 3 or 4 saw "+W)}Y!==512&&(xe=B.slice(0,Y),Pr(xe,28));var De=B.slice(0,Y);f(xe,W);var Me=xe.read_shift(4,"i");if(W===3&&Me!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Me);xe.l+=4,he=xe.read_shift(4,"i"),xe.l+=4,xe.chk("00100000","Mini Stream Cutoff Size: "),be=xe.read_shift(4,"i"),Q=xe.read_shift(4,"i"),ue=xe.read_shift(4,"i"),ee=xe.read_shift(4,"i");for(var Te=-1,Fe=0;Fe<109&&(Te=xe.read_shift(4,"i"),!(Te<0));++Fe)fe[Fe]=Te;var Je=x(B,Y);y(ue,ee,Je,Y,fe);var Ot=v(Je,he,fe,Y);Ot[he].name="!Directory",Q>0&&be!==F&&(Ot[be].name="!MiniFAT"),Ot[fe[0]].name="!FAT",Ot.fat_addrs=fe,Ot.ssz=Y;var Lt={},Dr=[],Jl=[],eo=[];b(he,Ot,Je,Dr,Q,Lt,Jl,be),p(Jl,eo,Dr),Dr.shift();var to={FileIndex:Jl,FullPaths:eo};return X&&X.raw&&(to.raw={header:De,sectors:Je}),to}function h(B){if(B[B.l]==80&&B[B.l+1]==75)return[0,0];B.chk(O,"Header Signature: "),B.l+=16;var X=B.read_shift(2,"u");return[B.read_shift(2,"u"),X]}function f(B,X){var W=9;switch(B.l+=2,W=B.read_shift(2)){case 9:if(X!=3)throw new Error("Sector Shift: Expected 9 saw "+W);break;case 12:if(X!=4)throw new Error("Sector Shift: Expected 12 saw "+W);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+W)}B.chk("0600","Mini Sector Shift: "),B.chk("000000000000","Reserved: ")}function x(B,X){for(var W=Math.ceil(B.length/X)-1,Y=[],Q=1;Q<W;++Q)Y[Q-1]=B.slice(Q*X,(Q+1)*X);return Y[W-1]=B.slice(W*X),Y}function p(B,X,W){for(var Y=0,Q=0,ee=0,he=0,be=0,ue=W.length,fe=[],xe=[];Y<ue;++Y)fe[Y]=xe[Y]=Y,X[Y]=W[Y];for(;be<xe.length;++be)Y=xe[be],Q=B[Y].L,ee=B[Y].R,he=B[Y].C,fe[Y]===Y&&(Q!==-1&&fe[Q]!==Q&&(fe[Y]=fe[Q]),ee!==-1&&fe[ee]!==ee&&(fe[Y]=fe[ee])),he!==-1&&(fe[he]=Y),Q!==-1&&Y!=fe[Y]&&(fe[Q]=fe[Y],xe.lastIndexOf(Q)<be&&xe.push(Q)),ee!==-1&&Y!=fe[Y]&&(fe[ee]=fe[Y],xe.lastIndexOf(ee)<be&&xe.push(ee));for(Y=1;Y<ue;++Y)fe[Y]===Y&&(ee!==-1&&fe[ee]!==ee?fe[Y]=fe[ee]:Q!==-1&&fe[Q]!==Q&&(fe[Y]=fe[Q]));for(Y=1;Y<ue;++Y)if(B[Y].type!==0){if(be=Y,be!=fe[be])do be=fe[be],X[Y]=X[be]+"/"+X[Y];while(be!==0&&fe[be]!==-1&&be!=fe[be]);fe[Y]=-1}for(X[0]+="/",Y=1;Y<ue;++Y)B[Y].type!==2&&(X[Y]+="/")}function m(B,X,W){for(var Y=B.start,Q=B.size,ee=[],he=Y;W&&Q>0&&he>=0;)ee.push(X.slice(he*j,he*j+j)),Q-=j,he=el(W,he*4);return ee.length===0?fr(0):ei(ee).slice(0,B.size)}function y(B,X,W,Y,Q){var ee=F;if(B===F){if(X!==0)throw new Error("DIFAT chain shorter than expected")}else if(B!==-1){var he=W[B],be=(Y>>>2)-1;if(!he)return;for(var ue=0;ue<be&&(ee=el(he,ue*4))!==F;++ue)Q.push(ee);y(el(he,Y-4),X-1,W,Y,Q)}}function g(B,X,W,Y,Q){var ee=[],he=[];Q||(Q=[]);var be=Y-1,ue=0,fe=0;for(ue=X;ue>=0;){Q[ue]=!0,ee[ee.length]=ue,he.push(B[ue]);var xe=W[Math.floor(ue*4/Y)];if(fe=ue*4&be,Y<4+fe)throw new Error("FAT boundary crossed: "+ue+" 4 "+Y);if(!B[xe])break;ue=el(B[xe],fe)}return{nodes:ee,data:Iw([he])}}function v(B,X,W,Y){var Q=B.length,ee=[],he=[],be=[],ue=[],fe=Y-1,xe=0,je=0,De=0,Me=0;for(xe=0;xe<Q;++xe)if(be=[],De=xe+X,De>=Q&&(De-=Q),!he[De]){ue=[];var Te=[];for(je=De;je>=0;){Te[je]=!0,he[je]=!0,be[be.length]=je,ue.push(B[je]);var Fe=W[Math.floor(je*4/Y)];if(Me=je*4&fe,Y<4+Me)throw new Error("FAT boundary crossed: "+je+" 4 "+Y);if(!B[Fe]||(je=el(B[Fe],Me),Te[je]))break}ee[De]={nodes:be,data:Iw([ue])}}return ee}function b(B,X,W,Y,Q,ee,he,be){for(var ue=0,fe=Y.length?2:0,xe=X[B].data,je=0,De=0,Me;je<xe.length;je+=128){var Te=xe.slice(je,je+128);Pr(Te,64),De=Te.read_shift(2),Me=Hy(Te,0,De-fe),Y.push(Me);var Fe={name:Me,type:Te.read_shift(1),color:Te.read_shift(1),L:Te.read_shift(4,"i"),R:Te.read_shift(4,"i"),C:Te.read_shift(4,"i"),clsid:Te.read_shift(16),state:Te.read_shift(4,"i"),start:0,size:0},Je=Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2);Je!==0&&(Fe.ct=S(Te,Te.l-8));var Ot=Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2);Ot!==0&&(Fe.mt=S(Te,Te.l-8)),Fe.start=Te.read_shift(4,"i"),Fe.size=Te.read_shift(4,"i"),Fe.size<0&&Fe.start<0&&(Fe.size=Fe.type=0,Fe.start=F,Fe.name=""),Fe.type===5?(ue=Fe.start,Q>0&&ue!==F&&(X[ue].name="!StreamData")):Fe.size>=4096?(Fe.storage="fat",X[Fe.start]===void 0&&(X[Fe.start]=g(W,Fe.start,X.fat_addrs,X.ssz)),X[Fe.start].name=Fe.name,Fe.content=X[Fe.start].data.slice(0,Fe.size)):(Fe.storage="minifat",Fe.size<0?Fe.size=0:ue!==F&&Fe.start!==F&&X[ue]&&(Fe.content=m(Fe,X[ue].data,(X[be]||{}).data))),Fe.content&&Pr(Fe.content,0),ee[Me]=Fe,he.push(Fe)}}function S(B,X){return new Date((As(B,X+4)/1e7*Math.pow(2,32)+As(B,X)/1e7-11644473600)*1e3)}function D(B,X){return d(),u(c.readFileSync(B),X)}function N(B,X){var W=X&&X.type;switch(W||dt&&Buffer.isBuffer(B)&&(W="buffer"),W||"base64"){case"file":return D(B,X);case"base64":return u(ga(Ls(B)),X);case"binary":return u(ga(B),X)}return u(B,X)}function E(B,X){var W=X||{},Y=W.root||"Root Entry";if(B.FullPaths||(B.FullPaths=[]),B.FileIndex||(B.FileIndex=[]),B.FullPaths.length!==B.FileIndex.length)throw new Error("inconsistent CFB structure");B.FullPaths.length===0&&(B.FullPaths[0]=Y+"/",B.FileIndex[0]={name:Y,type:5}),W.CLSID&&(B.FileIndex[0].clsid=W.CLSID),w(B)}function w(B){var X="Sh33tJ5";if(!ht.find(B,"/"+X)){var W=fr(4);W[0]=55,W[1]=W[3]=50,W[2]=54,B.FileIndex.push({name:X,type:2,content:W,size:4,L:69,R:69,C:69}),B.FullPaths.push(B.FullPaths[0]+X),_(B)}}function _(B,X){E(B);for(var W=!1,Y=!1,Q=B.FullPaths.length-1;Q>=0;--Q){var ee=B.FileIndex[Q];switch(ee.type){case 0:Y?W=!0:(B.FileIndex.pop(),B.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(ee.R*ee.L*ee.C)&&(W=!0),ee.R>-1&&ee.L>-1&&ee.R==ee.L&&(W=!0);break;default:W=!0;break}}if(!(!W&&!X)){var he=new Date(1987,1,19),be=0,ue=Object.create?Object.create(null):{},fe=[];for(Q=0;Q<B.FullPaths.length;++Q)ue[B.FullPaths[Q]]=!0,B.FileIndex[Q].type!==0&&fe.push([B.FullPaths[Q],B.FileIndex[Q]]);for(Q=0;Q<fe.length;++Q){var xe=s(fe[Q][0]);Y=ue[xe],Y||(fe.push([xe,{name:n(xe).replace("/",""),type:1,clsid:G,ct:he,mt:he,content:null}]),ue[xe]=!0)}for(fe.sort(function(Me,Te){return r(Me[0],Te[0])}),B.FullPaths=[],B.FileIndex=[],Q=0;Q<fe.length;++Q)B.FullPaths[Q]=fe[Q][0],B.FileIndex[Q]=fe[Q][1];for(Q=0;Q<fe.length;++Q){var je=B.FileIndex[Q],De=B.FullPaths[Q];if(je.name=n(De).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||G,Q===0)je.C=fe.length>1?1:-1,je.size=0,je.type=5;else if(De.slice(-1)=="/"){for(be=Q+1;be<fe.length&&s(B.FullPaths[be])!=De;++be);for(je.C=be>=fe.length?-1:be,be=Q+1;be<fe.length&&s(B.FullPaths[be])!=s(De);++be);je.R=be>=fe.length?-1:be,je.type=1}else s(B.FullPaths[Q+1]||"")==s(De)&&(je.R=Q+1),je.type=2}}}function C(B,X){var W=X||{};if(W.fileType=="mad")return wv(B,W);switch(_(B),W.fileType){case"zip":return mv(B,W)}var Y=function(Me){for(var Te=0,Fe=0,Je=0;Je<Me.FileIndex.length;++Je){var Ot=Me.FileIndex[Je];if(Ot.content){var Lt=Ot.content.length;Lt>0&&(Lt<4096?Te+=Lt+63>>6:Fe+=Lt+511>>9)}}for(var Dr=Me.FullPaths.length+3>>2,Jl=Te+7>>3,eo=Te+127>>7,to=Jl+Fe+Dr+eo,Bn=to+127>>7,qu=Bn<=109?0:Math.ceil((Bn-109)/127);to+Bn+qu+127>>7>Bn;)qu=++Bn<=109?0:Math.ceil((Bn-109)/127);var Aa=[1,qu,Bn,eo,Dr,Fe,Te,0];return Me.FileIndex[0].size=Te<<6,Aa[7]=(Me.FileIndex[0].start=Aa[0]+Aa[1]+Aa[2]+Aa[3]+Aa[4]+Aa[5])+(Aa[6]+7>>3),Aa}(B),Q=fr(Y[7]<<9),ee=0,he=0;{for(ee=0;ee<8;++ee)Q.write_shift(1,z[ee]);for(ee=0;ee<8;++ee)Q.write_shift(2,0);for(Q.write_shift(2,62),Q.write_shift(2,3),Q.write_shift(2,65534),Q.write_shift(2,9),Q.write_shift(2,6),ee=0;ee<3;++ee)Q.write_shift(2,0);for(Q.write_shift(4,0),Q.write_shift(4,Y[2]),Q.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),Q.write_shift(4,0),Q.write_shift(4,4096),Q.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:F),Q.write_shift(4,Y[3]),Q.write_shift(-4,Y[1]?Y[0]-1:F),Q.write_shift(4,Y[1]),ee=0;ee<109;++ee)Q.write_shift(-4,ee<Y[2]?Y[1]+ee:-1)}if(Y[1])for(he=0;he<Y[1];++he){for(;ee<236+he*127;++ee)Q.write_shift(-4,ee<Y[2]?Y[1]+ee:-1);Q.write_shift(-4,he===Y[1]-1?F:he+1)}var be=function(Me){for(he+=Me;ee<he-1;++ee)Q.write_shift(-4,ee+1);Me&&(++ee,Q.write_shift(-4,F))};for(he=ee=0,he+=Y[1];ee<he;++ee)Q.write_shift(-4,q.DIFSECT);for(he+=Y[2];ee<he;++ee)Q.write_shift(-4,q.FATSECT);be(Y[3]),be(Y[4]);for(var ue=0,fe=0,xe=B.FileIndex[0];ue<B.FileIndex.length;++ue)xe=B.FileIndex[ue],xe.content&&(fe=xe.content.length,!(fe<4096)&&(xe.start=he,be(fe+511>>9)));for(be(Y[6]+7>>3);Q.l&511;)Q.write_shift(-4,q.ENDOFCHAIN);for(he=ee=0,ue=0;ue<B.FileIndex.length;++ue)xe=B.FileIndex[ue],xe.content&&(fe=xe.content.length,!(!fe||fe>=4096)&&(xe.start=he,be(fe+63>>6)));for(;Q.l&511;)Q.write_shift(-4,q.ENDOFCHAIN);for(ee=0;ee<Y[4]<<2;++ee){var je=B.FullPaths[ee];if(!je||je.length===0){for(ue=0;ue<17;++ue)Q.write_shift(4,0);for(ue=0;ue<3;++ue)Q.write_shift(4,-1);for(ue=0;ue<12;++ue)Q.write_shift(4,0);continue}xe=B.FileIndex[ee],ee===0&&(xe.start=xe.size?xe.start-1:F);var De=ee===0&&W.root||xe.name;if(fe=2*(De.length+1),Q.write_shift(64,De,"utf16le"),Q.write_shift(2,fe),Q.write_shift(1,xe.type),Q.write_shift(1,xe.color),Q.write_shift(-4,xe.L),Q.write_shift(-4,xe.R),Q.write_shift(-4,xe.C),xe.clsid)Q.write_shift(16,xe.clsid,"hex");else for(ue=0;ue<4;++ue)Q.write_shift(4,0);Q.write_shift(4,xe.state||0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(4,xe.start),Q.write_shift(4,xe.size),Q.write_shift(4,0)}for(ee=1;ee<B.FileIndex.length;++ee)if(xe=B.FileIndex[ee],xe.size>=4096)if(Q.l=xe.start+1<<9,dt&&Buffer.isBuffer(xe.content))xe.content.copy(Q,Q.l,0,xe.size),Q.l+=xe.size+511&-512;else{for(ue=0;ue<xe.size;++ue)Q.write_shift(1,xe.content[ue]);for(;ue&511;++ue)Q.write_shift(1,0)}for(ee=1;ee<B.FileIndex.length;++ee)if(xe=B.FileIndex[ee],xe.size>0&&xe.size<4096)if(dt&&Buffer.isBuffer(xe.content))xe.content.copy(Q,Q.l,0,xe.size),Q.l+=xe.size+63&-64;else{for(ue=0;ue<xe.size;++ue)Q.write_shift(1,xe.content[ue]);for(;ue&63;++ue)Q.write_shift(1,0)}if(dt)Q.l=Q.length;else for(;Q.l<Q.length;)Q.write_shift(1,0);return Q}function T(B,X){var W=B.FullPaths.map(function(ue){return ue.toUpperCase()}),Y=W.map(function(ue){var fe=ue.split("/");return fe[fe.length-(ue.slice(-1)=="/"?2:1)]}),Q=!1;X.charCodeAt(0)===47?(Q=!0,X=W[0].slice(0,-1)+X):Q=X.indexOf("/")!==-1;var ee=X.toUpperCase(),he=Q===!0?W.indexOf(ee):Y.indexOf(ee);if(he!==-1)return B.FileIndex[he];var be=!ee.match(ad);for(ee=ee.replace(cs,""),be&&(ee=ee.replace(ad,"!")),he=0;he<W.length;++he)if((be?W[he].replace(ad,"!"):W[he]).replace(cs,"")==ee||(be?Y[he].replace(ad,"!"):Y[he]).replace(cs,"")==ee)return B.FileIndex[he];return null}var j=64,F=-2,O="d0cf11e0a1b11ae1",z=[208,207,17,224,161,177,26,225],G="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:G,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(B,X,W){d();var Y=C(B,W);c.writeFileSync(X,Y)}function A(B){for(var X=new Array(B.length),W=0;W<B.length;++W)X[W]=String.fromCharCode(B[W]);return X.join("")}function V(B,X){var W=C(B,X);switch(X&&X.type||"buffer"){case"file":return d(),c.writeFileSync(X.filename,W),W;case"binary":return typeof W=="string"?W:A(W);case"base64":return gw(typeof W=="string"?W:A(W));case"buffer":if(dt)return Buffer.isBuffer(W)?W:Gl(W);case"array":return typeof W=="string"?ga(W):W}return W}var L;function P(B){try{var X=B.InflateRaw,W=new X;if(W._processChunk(new Uint8Array([3,0]),W._finishFlushFlag),W.bytesRead)L=B;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function I(B,X){if(!L)return Zl(B,X);var W=L.InflateRaw,Y=new W,Q=Y._processChunk(B.slice(B.l),Y._finishFlushFlag);return B.l+=Y.bytesRead,Q}function R(B){return L?L.deflateRawSync(B):Ze(B)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(B){var X=(B<<1|B<<11)&139536|(B<<5|B<<15)&558144;return(X>>16|X>>8|X)&255}for(var ae=typeof Uint8Array<"u",ie=ae?new Uint8Array(256):[],ce=0;ce<256;++ce)ie[ce]=se(ce);function K(B,X){var W=ie[B&255];return X<=8?W>>>8-X:(W=W<<8|ie[B>>8&255],X<=16?W>>>16-X:(W=W<<8|ie[B>>16&255],W>>>24-X))}function He(B,X){var W=X&7,Y=X>>>3;return(B[Y]|(W<=6?0:B[Y+1]<<8))>>>W&3}function Pe(B,X){var W=X&7,Y=X>>>3;return(B[Y]|(W<=5?0:B[Y+1]<<8))>>>W&7}function Le(B,X){var W=X&7,Y=X>>>3;return(B[Y]|(W<=4?0:B[Y+1]<<8))>>>W&15}function Ce(B,X){var W=X&7,Y=X>>>3;return(B[Y]|(W<=3?0:B[Y+1]<<8))>>>W&31}function de(B,X){var W=X&7,Y=X>>>3;return(B[Y]|(W<=1?0:B[Y+1]<<8))>>>W&127}function Ae(B,X,W){var Y=X&7,Q=X>>>3,ee=(1<<W)-1,he=B[Q]>>>Y;return W<8-Y||(he|=B[Q+1]<<8-Y,W<16-Y)||(he|=B[Q+2]<<16-Y,W<24-Y)||(he|=B[Q+3]<<24-Y),he&ee}function Ke(B,X,W){var Y=X&7,Q=X>>>3;return Y<=5?B[Q]|=(W&7)<<Y:(B[Q]|=W<<Y&255,B[Q+1]=(W&7)>>8-Y),X+3}function re(B,X,W){var Y=X&7,Q=X>>>3;return W=(W&1)<<Y,B[Q]|=W,X+1}function oe(B,X,W){var Y=X&7,Q=X>>>3;return W<<=Y,B[Q]|=W&255,W>>>=8,B[Q+1]=W,X+8}function me(B,X,W){var Y=X&7,Q=X>>>3;return W<<=Y,B[Q]|=W&255,W>>>=8,B[Q+1]=W&255,B[Q+2]=W>>>8,X+16}function we(B,X){var W=B.length,Y=2*W>X?2*W:X+5,Q=0;if(W>=X)return B;if(dt){var ee=yw(Y);if(B.copy)B.copy(ee);else for(;Q<B.length;++Q)ee[Q]=B[Q];return ee}else if(ae){var he=new Uint8Array(Y);if(he.set)he.set(B);else for(;Q<W;++Q)he[Q]=B[Q];return he}return B.length=Y,B}function ve(B){for(var X=new Array(B),W=0;W<B;++W)X[W]=0;return X}function Ne(B,X,W){var Y=1,Q=0,ee=0,he=0,be=0,ue=B.length,fe=ae?new Uint16Array(32):ve(32);for(ee=0;ee<32;++ee)fe[ee]=0;for(ee=ue;ee<W;++ee)B[ee]=0;ue=B.length;var xe=ae?new Uint16Array(ue):ve(ue);for(ee=0;ee<ue;++ee)fe[Q=B[ee]]++,Y<Q&&(Y=Q),xe[ee]=0;for(fe[0]=0,ee=1;ee<=Y;++ee)fe[ee+16]=be=be+fe[ee-1]<<1;for(ee=0;ee<ue;++ee)be=B[ee],be!=0&&(xe[ee]=fe[be+16]++);var je=0;for(ee=0;ee<ue;++ee)if(je=B[ee],je!=0)for(be=K(xe[ee],Y)>>Y-je,he=(1<<Y+4-je)-1;he>=0;--he)X[be|he<<je]=je&15|ee<<4;return Y}var Ee=ae?new Uint16Array(512):ve(512),We=ae?new Uint16Array(32):ve(32);if(!ae){for(var Ge=0;Ge<512;++Ge)Ee[Ge]=0;for(Ge=0;Ge<32;++Ge)We[Ge]=0}(function(){for(var B=[],X=0;X<32;X++)B.push(5);Ne(B,We,32);var W=[];for(X=0;X<=143;X++)W.push(8);for(;X<=255;X++)W.push(9);for(;X<=279;X++)W.push(7);for(;X<=287;X++)W.push(8);Ne(W,Ee,288)})();var Ct=function(){for(var X=ae?new Uint8Array(32768):[],W=0,Y=0;W<J.length-1;++W)for(;Y<J[W+1];++Y)X[Y]=W;for(;Y<32768;++Y)X[Y]=29;var Q=ae?new Uint8Array(259):[];for(W=0,Y=0;W<M.length-1;++W)for(;Y<M[W+1];++Y)Q[Y]=W;function ee(be,ue){for(var fe=0;fe<be.length;){var xe=Math.min(65535,be.length-fe),je=fe+xe==be.length;for(ue.write_shift(1,+je),ue.write_shift(2,xe),ue.write_shift(2,~xe&65535);xe-- >0;)ue[ue.l++]=be[fe++]}return ue.l}function he(be,ue){for(var fe=0,xe=0,je=ae?new Uint16Array(32768):[];xe<be.length;){var De=Math.min(65535,be.length-xe);if(De<10){for(fe=Ke(ue,fe,+(xe+De==be.length)),fe&7&&(fe+=8-(fe&7)),ue.l=fe/8|0,ue.write_shift(2,De),ue.write_shift(2,~De&65535);De-- >0;)ue[ue.l++]=be[xe++];fe=ue.l*8;continue}fe=Ke(ue,fe,+(xe+De==be.length)+2);for(var Me=0;De-- >0;){var Te=be[xe];Me=(Me<<5^Te)&32767;var Fe=-1,Je=0;if((Fe=je[Me])&&(Fe|=xe&-32768,Fe>xe&&(Fe-=32768),Fe<xe))for(;be[Fe+Je]==be[xe+Je]&&Je<250;)++Je;if(Je>2){Te=Q[Je],Te<=22?fe=oe(ue,fe,ie[Te+1]>>1)-1:(oe(ue,fe,3),fe+=5,oe(ue,fe,ie[Te-23]>>5),fe+=3);var Ot=Te<8?0:Te-4>>2;Ot>0&&(me(ue,fe,Je-M[Te]),fe+=Ot),Te=X[xe-Fe],fe=oe(ue,fe,ie[Te]>>3),fe-=3;var Lt=Te<4?0:Te-2>>1;Lt>0&&(me(ue,fe,xe-Fe-J[Te]),fe+=Lt);for(var Dr=0;Dr<Je;++Dr)je[Me]=xe&32767,Me=(Me<<5^be[xe])&32767,++xe;De-=Je-1}else Te<=143?Te=Te+48:fe=re(ue,fe,1),fe=oe(ue,fe,ie[Te]),je[Me]=xe&32767,++xe}fe=oe(ue,fe,0)-1}return ue.l=(fe+7)/8|0,ue.l}return function(ue,fe){return ue.length<8?ee(ue,fe):he(ue,fe)}}();function Ze(B){var X=fr(50+Math.floor(B.length*1.1)),W=Ct(B,X);return X.slice(0,W)}var it=ae?new Uint16Array(32768):ve(32768),At=ae?new Uint16Array(32768):ve(32768),kt=ae?new Uint16Array(128):ve(128),Zr=1,Pc=1;function Rc(B,X){var W=Ce(B,X)+257;X+=5;var Y=Ce(B,X)+1;X+=5;var Q=Le(B,X)+4;X+=4;for(var ee=0,he=ae?new Uint8Array(19):ve(19),be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ue=1,fe=ae?new Uint8Array(8):ve(8),xe=ae?new Uint8Array(8):ve(8),je=he.length,De=0;De<Q;++De)he[U[De]]=ee=Pe(B,X),ue<ee&&(ue=ee),fe[ee]++,X+=3;var Me=0;for(fe[0]=0,De=1;De<=ue;++De)xe[De]=Me=Me+fe[De-1]<<1;for(De=0;De<je;++De)(Me=he[De])!=0&&(be[De]=xe[Me]++);var Te=0;for(De=0;De<je;++De)if(Te=he[De],Te!=0){Me=ie[be[De]]>>8-Te;for(var Fe=(1<<7-Te)-1;Fe>=0;--Fe)kt[Me|Fe<<Te]=Te&7|De<<3}var Je=[];for(ue=1;Je.length<W+Y;)switch(Me=kt[de(B,X)],X+=Me&7,Me>>>=3){case 16:for(ee=3+He(B,X),X+=2,Me=Je[Je.length-1];ee-- >0;)Je.push(Me);break;case 17:for(ee=3+Pe(B,X),X+=3;ee-- >0;)Je.push(0);break;case 18:for(ee=11+de(B,X),X+=7;ee-- >0;)Je.push(0);break;default:Je.push(Me),ue<Me&&(ue=Me);break}var Ot=Je.slice(0,W),Lt=Je.slice(W);for(De=W;De<286;++De)Ot[De]=0;for(De=Y;De<30;++De)Lt[De]=0;return Zr=Ne(Ot,it,286),Pc=Ne(Lt,At,30),X}function Wu(B,X){if(B[0]==3&&!(B[1]&3))return[Bi(X),2];for(var W=0,Y=0,Q=yw(X||1<<18),ee=0,he=Q.length>>>0,be=0,ue=0;!(Y&1);){if(Y=Pe(B,W),W+=3,Y>>>1)Y>>1==1?(be=9,ue=5):(W=Rc(B,W),be=Zr,ue=Pc);else{W&7&&(W+=8-(W&7));var fe=B[W>>>3]|B[(W>>>3)+1]<<8;if(W+=32,fe>0)for(!X&&he<ee+fe&&(Q=we(Q,ee+fe),he=Q.length);fe-- >0;)Q[ee++]=B[W>>>3],W+=8;continue}for(;;){!X&&he<ee+32767&&(Q=we(Q,ee+32767),he=Q.length);var xe=Ae(B,W,be),je=Y>>>1==1?Ee[xe]:it[xe];if(W+=je&15,je>>>=4,!(je>>>8&255))Q[ee++]=je;else{if(je==256)break;je-=257;var De=je<8?0:je-4>>2;De>5&&(De=0);var Me=ee+M[je];De>0&&(Me+=Ae(B,W,De),W+=De),xe=Ae(B,W,ue),je=Y>>>1==1?We[xe]:At[xe],W+=je&15,je>>>=4;var Te=je<4?0:je-2>>1,Fe=J[je];for(Te>0&&(Fe+=Ae(B,W,Te),W+=Te),!X&&he<Me&&(Q=we(Q,Me+100),he=Q.length);ee<Me;)Q[ee]=Q[ee-Fe],++ee}}}return X?[Q,W+7>>>3]:[Q.slice(0,ee),W+7>>>3]}function Zl(B,X){var W=B.slice(B.l||0),Y=Wu(W,X);return B.l+=Y[1],Y[0]}function nm(B,X){if(B)typeof console<"u"&&console.error(X);else throw new Error(X)}function im(B,X){var W=B;Pr(W,0);var Y=[],Q=[],ee={FileIndex:Y,FullPaths:Q};E(ee,{root:X.root});for(var he=W.length-4;(W[he]!=80||W[he+1]!=75||W[he+2]!=5||W[he+3]!=6)&&he>=0;)--he;W.l=he+4,W.l+=4;var be=W.read_shift(2);W.l+=6;var ue=W.read_shift(4);for(W.l=ue,he=0;he<be;++he){W.l+=20;var fe=W.read_shift(4),xe=W.read_shift(4),je=W.read_shift(2),De=W.read_shift(2),Me=W.read_shift(2);W.l+=8;var Te=W.read_shift(4),Fe=o(W.slice(W.l+je,W.l+je+De));W.l+=je+De+Me;var Je=W.l;W.l=Te+4,fv(W,fe,xe,ee,Fe),W.l=Je}return ee}function fv(B,X,W,Y,Q){B.l+=2;var ee=B.read_shift(2),he=B.read_shift(2),be=l(B);if(ee&8257)throw new Error("Unsupported ZIP encryption");for(var ue=B.read_shift(4),fe=B.read_shift(4),xe=B.read_shift(4),je=B.read_shift(2),De=B.read_shift(2),Me="",Te=0;Te<je;++Te)Me+=String.fromCharCode(B[B.l++]);if(De){var Fe=o(B.slice(B.l,B.l+De));(Fe[21589]||{}).mt&&(be=Fe[21589].mt),((Q||{})[21589]||{}).mt&&(be=Q[21589].mt)}B.l+=De;var Je=B.slice(B.l,B.l+fe);switch(he){case 8:Je=I(B,xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+he)}var Ot=!1;ee&8&&(ue=B.read_shift(4),ue==134695760&&(ue=B.read_shift(4),Ot=!0),fe=B.read_shift(4),xe=B.read_shift(4)),fe!=X&&nm(Ot,"Bad compressed size: "+X+" != "+fe),xe!=W&&nm(Ot,"Bad uncompressed size: "+W+" != "+xe),Yu(Y,Me,Je,{unsafe:!0,mt:be})}function mv(B,X){var W=X||{},Y=[],Q=[],ee=fr(1),he=W.compression?8:0,be=0,ue=0,fe=0,xe=0,je=0,De=B.FullPaths[0],Me=De,Te=B.FileIndex[0],Fe=[],Je=0;for(ue=1;ue<B.FullPaths.length;++ue)if(Me=B.FullPaths[ue].slice(De.length),Te=B.FileIndex[ue],!(!Te.size||!Te.content||Me=="Sh33tJ5")){var Ot=xe,Lt=fr(Me.length);for(fe=0;fe<Me.length;++fe)Lt.write_shift(1,Me.charCodeAt(fe)&127);Lt=Lt.slice(0,Lt.l),Fe[je]=OI.buf(Te.content,0);var Dr=Te.content;he==8&&(Dr=R(Dr)),ee=fr(30),ee.write_shift(4,67324752),ee.write_shift(2,20),ee.write_shift(2,be),ee.write_shift(2,he),Te.mt?i(ee,Te.mt):ee.write_shift(4,0),ee.write_shift(-4,Fe[je]),ee.write_shift(4,Dr.length),ee.write_shift(4,Te.content.length),ee.write_shift(2,Lt.length),ee.write_shift(2,0),xe+=ee.length,Y.push(ee),xe+=Lt.length,Y.push(Lt),xe+=Dr.length,Y.push(Dr),ee=fr(46),ee.write_shift(4,33639248),ee.write_shift(2,0),ee.write_shift(2,20),ee.write_shift(2,be),ee.write_shift(2,he),ee.write_shift(4,0),ee.write_shift(-4,Fe[je]),ee.write_shift(4,Dr.length),ee.write_shift(4,Te.content.length),ee.write_shift(2,Lt.length),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(4,0),ee.write_shift(4,Ot),Je+=ee.l,Q.push(ee),Je+=Lt.length,Q.push(Lt),++je}return ee=fr(22),ee.write_shift(4,101010256),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(2,je),ee.write_shift(2,je),ee.write_shift(4,Je),ee.write_shift(4,xe),ee.write_shift(2,0),ei([ei(Y),ei(Q),ee])}var Fc={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function xv(B,X){if(B.ctype)return B.ctype;var W=B.name||"",Y=W.match(/\.([^\.]+)$/);return Y&&Fc[Y[1]]||X&&(Y=(W=X).match(/[\.\\]([^\.\\])+$/),Y&&Fc[Y[1]])?Fc[Y[1]]:"application/octet-stream"}function pv(B){for(var X=gw(B),W=[],Y=0;Y<X.length;Y+=76)W.push(X.slice(Y,Y+76));return W.join(`\r
`)+`\r
`}function gv(B){var X=B.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(fe){var xe=fe.charCodeAt(0).toString(16).toUpperCase();return"="+(xe.length==1?"0"+xe:xe)});X=X.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),X.charAt(0)==`
`&&(X="=0D"+X.slice(1)),X=X.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var W=[],Y=X.split(`\r
`),Q=0;Q<Y.length;++Q){var ee=Y[Q];if(ee.length==0){W.push("");continue}for(var he=0;he<ee.length;){var be=76,ue=ee.slice(he,he+be);ue.charAt(be-1)=="="?be--:ue.charAt(be-2)=="="?be-=2:ue.charAt(be-3)=="="&&(be-=3),ue=ee.slice(he,he+be),he+=be,he<ee.length&&(ue+="="),W.push(ue)}}return W.join(`\r
`)}function yv(B){for(var X=[],W=0;W<B.length;++W){for(var Y=B[W];W<=B.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+B[++W];X.push(Y)}for(var Q=0;Q<X.length;++Q)X[Q]=X[Q].replace(/[=][0-9A-Fa-f]{2}/g,function(ee){return String.fromCharCode(parseInt(ee.slice(1),16))});return ga(X.join(`\r
`))}function vv(B,X,W){for(var Y="",Q="",ee="",he,be=0;be<10;++be){var ue=X[be];if(!ue||ue.match(/^\s*$/))break;var fe=ue.match(/^(.*?):\s*([^\s].*)$/);if(fe)switch(fe[1].toLowerCase()){case"content-location":Y=fe[2].trim();break;case"content-type":ee=fe[2].trim();break;case"content-transfer-encoding":Q=fe[2].trim();break}}switch(++be,Q.toLowerCase()){case"base64":he=ga(Ls(X.slice(be).join("")));break;case"quoted-printable":he=yv(X.slice(be));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Q)}var xe=Yu(B,Y.slice(W.length),he,{unsafe:!0});ee&&(xe.ctype=ee)}function bv(B,X){if(A(B.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var W=X&&X.root||"",Y=(dt&&Buffer.isBuffer(B)?B.toString("binary"):A(B)).split(`\r
`),Q=0,ee="";for(Q=0;Q<Y.length;++Q)if(ee=Y[Q],!!/^Content-Location:/i.test(ee)&&(ee=ee.slice(ee.indexOf("file")),W||(W=ee.slice(0,ee.lastIndexOf("/")+1)),ee.slice(0,W.length)!=W))for(;W.length>0&&(W=W.slice(0,W.length-1),W=W.slice(0,W.lastIndexOf("/")+1),ee.slice(0,W.length)!=W););var he=(Y[1]||"").match(/boundary="(.*?)"/);if(!he)throw new Error("MAD cannot find boundary");var be="--"+(he[1]||""),ue=[],fe=[],xe={FileIndex:ue,FullPaths:fe};E(xe);var je,De=0;for(Q=0;Q<Y.length;++Q){var Me=Y[Q];Me!==be&&Me!==be+"--"||(De++&&vv(xe,Y.slice(je,Q),W),je=Q)}return xe}function wv(B,X){var W=X||{},Y=W.boundary||"SheetJS";Y="------="+Y;for(var Q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],ee=B.FullPaths[0],he=ee,be=B.FileIndex[0],ue=1;ue<B.FullPaths.length;++ue)if(he=B.FullPaths[ue].slice(ee.length),be=B.FileIndex[ue],!(!be.size||!be.content||he=="Sh33tJ5")){he=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Je){return"_x"+Je.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Je){return"_u"+Je.charCodeAt(0).toString(16)+"_"});for(var fe=be.content,xe=dt&&Buffer.isBuffer(fe)?fe.toString("binary"):A(fe),je=0,De=Math.min(1024,xe.length),Me=0,Te=0;Te<=De;++Te)(Me=xe.charCodeAt(Te))>=32&&Me<128&&++je;var Fe=je>=De*4/5;Q.push(Y),Q.push("Content-Location: "+(W.root||"file:///C:/SheetJS/")+he),Q.push("Content-Transfer-Encoding: "+(Fe?"quoted-printable":"base64")),Q.push("Content-Type: "+xv(be,he)),Q.push(""),Q.push(Fe?gv(xe):pv(xe))}return Q.push(Y+`--\r
`),Q.join(`\r
`)}function Nv(B){var X={};return E(X,B),X}function Yu(B,X,W,Y){var Q=Y&&Y.unsafe;Q||E(B);var ee=!Q&&ht.find(B,X);if(!ee){var he=B.FullPaths[0];X.slice(0,he.length)==he?he=X:(he.slice(-1)!="/"&&(he+="/"),he=(he+X).replace("//","/")),ee={name:n(X),type:2},B.FileIndex.push(ee),B.FullPaths.push(he),Q||ht.utils.cfb_gc(B)}return ee.content=W,ee.size=W?W.length:0,Y&&(Y.CLSID&&(ee.clsid=Y.CLSID),Y.mt&&(ee.mt=Y.mt),Y.ct&&(ee.ct=Y.ct)),ee}function kv(B,X){E(B);var W=ht.find(B,X);if(W){for(var Y=0;Y<B.FileIndex.length;++Y)if(B.FileIndex[Y]==W)return B.FileIndex.splice(Y,1),B.FullPaths.splice(Y,1),!0}return!1}function jv(B,X,W){E(B);var Y=ht.find(B,X);if(Y){for(var Q=0;Q<B.FileIndex.length;++Q)if(B.FileIndex[Q]==Y)return B.FileIndex[Q].name=n(W),B.FullPaths[Q]=W,!0}return!1}function Sv(B){_(B,!0)}return t.find=T,t.read=N,t.parse=u,t.write=V,t.writeFile=H,t.utils={cfb_new:Nv,cfb_add:Yu,cfb_del:kv,cfb_mov:jv,cfb_gc:Sv,ReadShift:jd,CheckField:eT,prep_blob:Pr,bconcat:ei,use_zlib:P,_deflateRaw:Ze,_inflateRaw:Zl,consts:q},t}();function LI(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(s){if(!s.message||!s.message.match(/onstruct/))throw s}throw new Error("Cannot access file "+e)}function sn(e){for(var t=Object.keys(e),r=[],s=0;s<t.length;++s)Object.prototype.hasOwnProperty.call(e,t[s])&&r.push(t[s]);return r}function zy(e){for(var t=[],r=sn(e),s=0;s!==r.length;++s)t[e[r[s]]]=r[s];return t}var of=new Date(1899,11,30,0,0,0);function us(e,t){var r=e.getTime();t&&(r-=1462*24*60*60*1e3);var s=of.getTime()+(e.getTimezoneOffset()-of.getTimezoneOffset())*6e4;return(r-s)/(24*60*60*1e3)}var P4=new Date,BI=of.getTime()+(P4.getTimezoneOffset()-of.getTimezoneOffset())*6e4,Tw=P4.getTimezoneOffset();function Jf(e){var t=new Date;return t.setTime(e*24*60*60*1e3+BI),t.getTimezoneOffset()!==Tw&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Tw)*6e4),t}function zI(e){var t=0,r=0,s=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(s=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(s)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(n[i],10)}return t}var _w=new Date("2017-02-19T19:06:09.000Z"),R4=isNaN(_w.getFullYear())?new Date("2/19/17"):_w,$I=R4.getFullYear()==2017;function Er(e,t){var r=new Date(e);if($I)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(R4.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return e.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function zl(e,t){if(dt&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return id(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return id(v4(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return id(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return id(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var s=[],n=0;n!=e.length;++n)s.push(String.fromCharCode(e[n]));return s.join("")}function Fr(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Fr(e[r]));return t}function qt(e,t){for(var r="";r.length<t;)r+=e;return r}function Sa(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,s=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(s))||(s=s.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(t=Number(s)))?t/r:t}var UI=["january","february","march","april","may","june","july","august","september","october","november","december"];function yc(e){var t=new Date(e),r=new Date(NaN),s=t.getYear(),n=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&UI.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return s<0||s>8099?r:(n>0||i>1)&&s!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var VI=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,s,n){if(e||typeof s=="string")return r.split(s);for(var i=r.split(s),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}}();function F4(e){return e?e.content&&e.type?zl(e.content,!0):e.data?sd(e.data):e.asNodeBuffer&&dt?sd(e.asNodeBuffer().toString("binary")):e.asBinary?sd(e.asBinary()):e._data&&e._data.getContent?sd(zl(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function I4(e){if(!e)return null;if(e.data)return xw(e.data);if(e.asNodeBuffer&&dt)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?xw(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function HI(e){return e&&e.name.slice(-4)===".bin"?I4(e):F4(e)}function Gs(e,t){for(var r=e.FullPaths||sn(e.files),s=t.toLowerCase().replace(/[\/]/g,"\\"),n=s.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(s==l||n==l)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function $y(e,t){var r=Gs(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function nr(e,t,r){if(!r)return HI($y(e,t));if(!t)return null;try{return nr(e,t)}catch{return null}}function Rs(e,t,r){if(!r)return F4($y(e,t));if(!t)return null;try{return Rs(e,t)}catch{return null}}function M4(e,t,r){if(!r)return I4($y(e,t));if(!t)return null;try{return M4(e,t)}catch{return null}}function Ew(e){for(var t=e.FullPaths||sn(e.files),r=[],s=0;s<t.length;++s)t[s].slice(-1)!="/"&&r.push(t[s].replace(/^Root Entry[\/]/,""));return r.sort()}function KI(e,t,r){if(e.FullPaths){if(typeof r=="string"){var s;return dt?s=Gl(r):s=uI(r),ht.utils.cfb_add(e,t,s)}ht.utils.cfb_add(e,t,r)}else e.file(t,r)}function O4(e,t){switch(t.type){case"base64":return ht.read(e,{type:"base64"});case"binary":return ht.read(e,{type:"binary"});case"buffer":case"array":return ht.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function nd(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var s=e.split("/");s.length!==0;){var n=s.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var L4=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,GI=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Cw=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,WI=/<[^>]*>/g,Qr=L4.match(Cw)?Cw:WI,YI=/<\w*:/,qI=/<(\/?)\w+:/;function Xe(e,t,r){for(var s={},n=0,i=0;n!==e.length&&!((i=e.charCodeAt(n))===32||i===10||i===13);++n);if(t||(s[0]=e.slice(0,n)),n===e.length)return s;var l=e.match(GI),o=0,c="",d=0,u="",h="",f=1;if(l)for(d=0;d!=l.length;++d){for(h=l[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(f=(n=h.charCodeAt(i+1))==34||n==39?1:0,c=h.slice(i+1+f,h.length-f),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),s[u]=c,r||(s[u.toLowerCase()]=c);else{var x=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(s[x]&&u.slice(o-3,o)=="ext")continue;s[x]=c,r||(s[x.toLowerCase()]=c)}}return s}function nn(e){return e.replace(qI,"<$1")}var B4={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},XI=zy(B4),yt=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(s){var n=s+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(e,function(o,c){return B4[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,l)+r(n.slice(l+3))}}(),QI=/[&<>'"]/g,ZI=/[\u0000-\u001f]/g;function Uy(e){var t=e+"";return t.replace(QI,function(r){return XI[r]}).replace(/\n/g,"<br/>").replace(ZI,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var Dw=function(){var e=/&#(\d+);/g;function t(r,s){return String.fromCharCode(parseInt(s,10))}return function(s){return s.replace(e,t)}}();function zt(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ym(e){for(var t="",r=0,s=0,n=0,i=0,l=0,o=0;r<e.length;){if(s=e.charCodeAt(r++),s<128){t+=String.fromCharCode(s);continue}if(n=e.charCodeAt(r++),s>191&&s<224){l=(s&31)<<6,l|=n&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(r++),s<240){t+=String.fromCharCode((s&15)<<12|(n&63)<<6|i&63);continue}l=e.charCodeAt(r++),o=((s&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function Aw(e){var t=Bi(2*e.length),r,s,n=1,i=0,l=0,o;for(s=0;s<e.length;s+=n)n=1,(o=e.charCodeAt(s))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(s+1)&63),n=2):o<240?(r=(o&15)*4096+(e.charCodeAt(s+1)&63)*64+(e.charCodeAt(s+2)&63),n=3):(n=4,r=(o&7)*262144+(e.charCodeAt(s+1)&63)*4096+(e.charCodeAt(s+2)&63)*64+(e.charCodeAt(s+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function Pw(e){return Gl(e,"binary").toString("utf8")}var D0="foo bar baz",Rt=dt&&(Pw(D0)==Ym(D0)&&Pw||Aw(D0)==Ym(D0)&&Aw)||Ym,id=dt?function(e){return Gl(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,s=0,n=0;r<e.length;)switch(s=e.charCodeAt(r++),!0){case s<128:t.push(String.fromCharCode(s));break;case s<2048:t.push(String.fromCharCode(192+(s>>6))),t.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,n=e.charCodeAt(r++)-56320+(s<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(s>>12))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)))}return t.join("")},cu=function(){var e={};return function(r,s){var n=r+"|"+(s||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",s||"")}}(),z4=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)s=s.replace(e[n][0],e[n][1]);return s}}(),JI=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),eM=/<\/?(?:vt:)?variant>/g,tM=/<(?:vt:)([^>]*)>([\s\S]*)</;function Rw(e,t){var r=Xe(e),s=e.match(JI(r.baseType))||[],n=[];if(s.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+s.length+" != "+r.size);return n}return s.forEach(function(i){var l=i.replace(eM,"").match(tM);l&&n.push({v:Rt(l[2]),t:l[1]})}),n}var rM=/(^\s|\s$|\n)/;function sM(e){return sn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function aM(e,t,r){return"<"+e+(r!=null?sM(r):"")+(t!=null?(t.match(rM)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Vy(e){if(dt&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Rt(Wl(Oy(e)));throw new Error("Bad input format: expected Buffer or string")}var du=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,nM={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},iM=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function lM(e,t){for(var r=1-2*(e[t+7]>>>7),s=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,i=5;i>=0;--i)n=n*256+e[t+i];return s==2047?n==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,n+=Math.pow(2,52)),r*Math.pow(2,s-52)*n)}function oM(e,t,r){var s=(t<0||1/t==-1/0?1:0)<<7,n=0,i=0,l=s?-t:t;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(n&15)<<4|i&15,e[r+7]=n>>4|s}var Fw=function(e){for(var t=[],r=10240,s=0;s<e[0].length;++s)if(e[0][s])for(var n=0,i=e[0][s].length;n<i;n+=r)t.push.apply(t,e[0][s].slice(n,n+r));return t},Iw=dt?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Gl(t)})):Fw(e)}:Fw,Mw=function(e,t,r){for(var s=[],n=t;n<r;n+=2)s.push(String.fromCharCode(bn(e,n)));return s.join("").replace(cs,"")},Hy=dt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(cs,""):Mw(e,t,r)}:Mw,Ow=function(e,t,r){for(var s=[],n=t;n<t+r;++n)s.push(("0"+e[n].toString(16)).slice(-2));return s.join("")},$4=dt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Ow(e,t,r)}:Ow,Lw=function(e,t,r){for(var s=[],n=t;n<r;n++)s.push(String.fromCharCode(ho(e,n)));return s.join("")},zu=dt?function(t,r,s){return Buffer.isBuffer(t)?t.toString("utf8",r,s):Lw(t,r,s)}:Lw,U4=function(e,t){var r=As(e,t);return r>0?zu(e,t+4,t+4+r-1):""},V4=U4,H4=function(e,t){var r=As(e,t);return r>0?zu(e,t+4,t+4+r-1):""},K4=H4,G4=function(e,t){var r=2*As(e,t);return r>0?zu(e,t+4,t+4+r-1):""},W4=G4,Y4=function(t,r){var s=As(t,r);return s>0?Hy(t,r+4,r+4+s):""},q4=Y4,X4=function(e,t){var r=As(e,t);return r>0?zu(e,t+4,t+4+r):""},Q4=X4,Z4=function(e,t){return lM(e,t)},cf=Z4,J4=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};dt&&(V4=function(t,r){if(!Buffer.isBuffer(t))return U4(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},K4=function(t,r){if(!Buffer.isBuffer(t))return H4(t,r);var s=t.readUInt32LE(r);return s>0?t.toString("utf8",r+4,r+4+s-1):""},W4=function(t,r){if(!Buffer.isBuffer(t))return G4(t,r);var s=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s-1)},q4=function(t,r){if(!Buffer.isBuffer(t))return Y4(t,r);var s=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+s)},Q4=function(t,r){if(!Buffer.isBuffer(t))return X4(t,r);var s=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+s)},cf=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Z4(t,r)},J4=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var ho=function(e,t){return e[t]},bn=function(e,t){return e[t+1]*256+e[t]},cM=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},As=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},el=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},dM=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function jd(e,t){var r="",s,n,i=[],l,o,c,d;switch(t){case"dbcs":if(d=this.l,dt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(bn(this,d)),d+=2;e*=2;break;case"utf8":r=zu(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Hy(this,this.l,this.l+e);break;case"wstr":return jd.call(this,e,"dbcs");case"lpstr-ansi":r=V4(this,this.l),e=4+As(this,this.l);break;case"lpstr-cp":r=K4(this,this.l),e=4+As(this,this.l);break;case"lpwstr":r=W4(this,this.l),e=4+2*As(this,this.l);break;case"lpp4":e=4+As(this,this.l),r=q4(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+As(this,this.l),r=Q4(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=ho(this,this.l+e++))!==0;)i.push(C0(l));r=i.join("");break;case"_wstr":for(e=0,r="";(l=bn(this,this.l+e))!==0;)i.push(C0(l)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=ho(this,d),this.l=d+1,o=jd.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(C0(bn(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=ho(this,d),this.l=d+1,o=jd.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(C0(ho(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return s=ho(this,this.l),this.l++,s;case 2:return s=(t==="i"?cM:bn)(this,this.l),this.l+=2,s;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(s=(e>0?el:dM)(this,this.l),this.l+=4,s):(n=As(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=cf(this,this.l):n=cf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=$4(this,this.l,e);break}}return this.l+=e,r}var uM=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},hM=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},fM=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function mM(e,t,r){var s=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)fM(this,t.charCodeAt(n),this.l+2*n);s=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;s=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var l=t.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:s=1,this[this.l]=t&255;break;case 2:s=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:s=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:s=4,uM(this,t,this.l);break;case 8:if(s=8,r==="f"){oM(this,t,this.l);break}case 16:break;case-4:s=4,hM(this,t,this.l);break}return this.l+=s,this}function eT(e,t){var r=$4(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Pr(e,t){e.l=t,e.read_shift=jd,e.chk=eT,e.write_shift=mM}function Xr(e,t){e.l+=t}function fr(e){var t=Bi(e);return Pr(t,0),t}function Mn(e,t,r){if(e){var s,n,i;Pr(e,e.l||0);for(var l=e.length,o=0,c=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var d=xf[o]||xf[65535];for(s=e.read_shift(1),i=s&127,n=1;n<4&&s&128;++n)i+=((s=e.read_shift(1))&127)<<7*n;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,o))return}}}function Bp(){var e=[],t=dt?256:2048,r=function(d){var u=fr(d);return Pr(u,0),u},s=r(t),n=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&e.push(s),s=null)},i=function(d){return s&&d<s.length-s.l?s:(n(),s=r(Math.max(d+1,t)))},l=function(){return n(),ei(e)},o=function(d){n(),s=d,s.l==null&&(s.l=s.length),i(t)};return{next:i,push:o,end:l,_bufs:e}}function Sd(e,t,r){var s=Fr(e);if(t.s?(s.cRel&&(s.c+=t.s.c),s.rRel&&(s.r+=t.s.r)):(s.cRel&&(s.c+=t.c),s.rRel&&(s.r+=t.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function Bw(e,t,r){var s=Fr(e);return s.s=Sd(s.s,t.s,r),s.e=Sd(s.e,t.s,r),s}function Td(e,t){if(e.cRel&&e.c<0)for(e=Fr(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Fr(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=et(e);return!e.cRel&&e.cRel!=null&&(r=gM(r)),!e.rRel&&e.rRel!=null&&(r=xM(r)),r}function qm(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+gr(e.s.c)+":"+(e.e.cRel?"":"$")+gr(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ir(e.s.r)+":"+(e.e.rRel?"":"$")+Ir(e.e.r):Td(e.s,t.biff)+":"+Td(e.e,t.biff)}function Ky(e){return parseInt(pM(e),10)-1}function Ir(e){return""+(e+1)}function xM(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function pM(e){return e.replace(/\$(\d+)$/,"$1")}function Gy(e){for(var t=yM(e),r=0,s=0;s!==t.length;++s)r=26*r+t.charCodeAt(s)-64;return r-1}function gr(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function gM(e){return e.replace(/^([A-Z])/,"$$$1")}function yM(e){return e.replace(/^\$([A-Z])/,"$1")}function vM(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function is(e){for(var t=0,r=0,s=0;s<e.length;++s){var n=e.charCodeAt(s);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function et(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Cc(e){var t=e.indexOf(":");return t==-1?{s:is(e),e:is(e)}:{s:is(e.slice(0,t)),e:is(e.slice(t+1))}}function ft(e,t){return typeof t>"u"||typeof t=="number"?ft(e.s,e.e):(typeof e!="string"&&(e=et(e)),typeof t!="string"&&(t=et(t)),e==t?e:e+":"+t)}function Qt(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,n=0,i=e.length;for(r=0;s<i&&!((n=e.charCodeAt(s)-64)<1||n>26);++s)r=26*r+n;for(t.s.c=--r,r=0;s<i&&!((n=e.charCodeAt(s)-48)<0||n>9);++s)r=10*r+n;if(t.s.r=--r,s===i||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++s,r=0;s!=i&&!((n=e.charCodeAt(s)-64)<1||n>26);++s)r=26*r+n;for(t.e.c=--r,r=0;s!=i&&!((n=e.charCodeAt(s)-48)<0||n>9);++s)r=10*r+n;return t.e.r=--r,t}function zw(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=sa(e.z,r?us(t):t)}catch{}try{return e.w=sa((e.XF||{}).numFmtId||(r?14:0),r?us(t):t)}catch{return""+t}}function Rn(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Xl[e.v]||e.v:t==null?zw(e,e.v):zw(e,t))}function Ki(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",s={};return s[r]=e,{SheetNames:[r],Sheets:s}}function tT(e,t,r){var s=r||{},n=e?Array.isArray(e):s.dense,i=e||(n?[]:{}),l=0,o=0;if(i&&s.origin!=null){if(typeof s.origin=="number")l=s.origin;else{var c=typeof s.origin=="string"?is(s.origin):s.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Qt(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),l==-1&&(d.e.r=l=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[h].length;++f)if(!(typeof t[h][f]>"u")){var x={v:t[h][f]},p=l+h,m=o+f;if(d.s.r>p&&(d.s.r=p),d.s.c>m&&(d.s.c=m),d.e.r<p&&(d.e.r=p),d.e.c<m&&(d.e.c=m),t[h][f]&&typeof t[h][f]=="object"&&!Array.isArray(t[h][f])&&!(t[h][f]instanceof Date))x=t[h][f];else if(Array.isArray(x.v)&&(x.f=t[h][f][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(s.nullError)x.t="e",x.v=0;else if(s.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?x.t="n":typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=s.dateNF||st[14],s.cellDates?(x.t="d",x.w=sa(x.z,us(x.v))):(x.t="n",x.v=us(x.v),x.w=sa(x.z,x.v))):x.t="s";if(n)i[p]||(i[p]=[]),i[p][m]&&i[p][m].z&&(x.z=i[p][m].z),i[p][m]=x;else{var y=et({c:m,r:p});i[y]&&i[y].z&&(x.z=i[y].z),i[y]=x}}}return d.s.c<1e7&&(i["!ref"]=ft(d)),i}function Dc(e,t){return tT(null,e,t)}function bM(e){return e.read_shift(4,"i")}function Yr(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function wM(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Wy(e,t){var r=e.l,s=e.read_shift(1),n=Yr(e),i=[],l={t:n,h:n};if(s&1){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(wM(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}var NM=Wy;function na(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Yl(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var kM=Yr;function Yy(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var jM=Yr,zp=Yy;function qy(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,s=t[0]&2;e.l+=4;var n=s===0?cf([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):el(t,0)>>2;return r?n/100:n}function rT(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var ql=rT;function Gr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function SM(e){var t={},r=e.read_shift(1),s=r>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,s){case 0:t.auto=1;break;case 1:t.index=n;var d=_l[n];d&&(t.rgb=hu(d));break;case 2:t.rgb=hu([l,o,c]);break;case 3:t.theme=n;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function TM(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function sT(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},s=e.read_shift(4);switch(s){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(s>400)throw new Error("Unsupported Clipboard: "+s.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function _M(e){return sT(e,1)}function EM(e){return sT(e,2)}var Xy=2,gs=3,A0=11,$w=12,df=19,P0=64,CM=65,DM=71,AM=4108,PM=4126,Sr=80,aT=81,RM=[Sr,aT],FM={1:{n:"CodePage",t:Xy},2:{n:"Category",t:Sr},3:{n:"PresentationFormat",t:Sr},4:{n:"ByteCount",t:gs},5:{n:"LineCount",t:gs},6:{n:"ParagraphCount",t:gs},7:{n:"SlideCount",t:gs},8:{n:"NoteCount",t:gs},9:{n:"HiddenCount",t:gs},10:{n:"MultimediaClipCount",t:gs},11:{n:"ScaleCrop",t:A0},12:{n:"HeadingPairs",t:AM},13:{n:"TitlesOfParts",t:PM},14:{n:"Manager",t:Sr},15:{n:"Company",t:Sr},16:{n:"LinksUpToDate",t:A0},17:{n:"CharacterCount",t:gs},19:{n:"SharedDoc",t:A0},22:{n:"HyperlinksChanged",t:A0},23:{n:"AppVersion",t:gs,p:"version"},24:{n:"DigSig",t:CM},26:{n:"ContentType",t:Sr},27:{n:"ContentStatus",t:Sr},28:{n:"Language",t:Sr},29:{n:"Version",t:Sr},255:{},2147483648:{n:"Locale",t:df},2147483651:{n:"Behavior",t:df},1919054434:{}},IM={1:{n:"CodePage",t:Xy},2:{n:"Title",t:Sr},3:{n:"Subject",t:Sr},4:{n:"Author",t:Sr},5:{n:"Keywords",t:Sr},6:{n:"Comments",t:Sr},7:{n:"Template",t:Sr},8:{n:"LastAuthor",t:Sr},9:{n:"RevNumber",t:Sr},10:{n:"EditTime",t:P0},11:{n:"LastPrinted",t:P0},12:{n:"CreatedDate",t:P0},13:{n:"ModifiedDate",t:P0},14:{n:"PageCount",t:gs},15:{n:"WordCount",t:gs},16:{n:"CharCount",t:gs},17:{n:"Thumbnail",t:DM},18:{n:"Application",t:Sr},19:{n:"DocSecurity",t:gs},255:{},2147483648:{n:"Locale",t:df},2147483651:{n:"Behavior",t:df},1919054434:{}},Uw={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},MM=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function OM(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var LM=OM([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_l=Fr(LM),Xl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},nT={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Vw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function BM(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function zM(e){var t=BM();if(!e||!e.match)return t;var r={};if((e.match(Qr)||[]).forEach(function(s){var n=Xe(s);switch(n[0].replace(YI,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":t[Vw[n.ContentType]]!==void 0&&t[Vw[n.ContentType]].push(n.PartName);break}}),t.xmlns!==nM.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var So={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function $p(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function _d(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var s={};return(e.match(Qr)||[]).forEach(function(n){var i=Xe(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:nd(i.Target,t);r[o]=l,s[i.Id]=l}}),r["!id"]=s,r}var $M="application/vnd.oasis.opendocument.spreadsheet";function UM(e,t){for(var r=Vy(e),s,n;s=du.exec(r);)switch(s[3]){case"manifest":break;case"file-entry":if(n=Xe(s[0],!1),n.path=="/"&&n.type!==$M)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw s}}var Ed=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],VM=function(){for(var e=new Array(Ed.length),t=0;t<Ed.length;++t){var r=Ed[t],s="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+s+"[^>]*>([\\s\\S]*?)</"+s+">")}return e}();function iT(e){var t={};e=Rt(e);for(var r=0;r<Ed.length;++r){var s=Ed[r],n=e.match(VM[r]);n!=null&&n.length>0&&(t[s[1]]=yt(n[1])),s[2]==="date"&&t[s[1]]&&(t[s[1]]=Er(t[s[1]]))}return t}var HM=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function lT(e,t,r,s){var n=[];if(typeof e=="string")n=Rw(e,s);else for(var i=0;i<e.length;++i)n=n.concat(e[i].map(function(u){return{v:u}}));var l=typeof t=="string"?Rw(t,s).map(function(u){return u.v}):t,o=0,c=0;if(l.length>0)for(var d=0;d!==n.length;d+=2){switch(c=+n[d+1].v,n[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function KM(e,t,r){var s={};return t||(t={}),e=Rt(e),HM.forEach(function(n){var i=(e.match(cu(n[0]))||[])[1];switch(n[2]){case"string":i&&(t[n[1]]=yt(i));break;case"bool":t[n[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(s[n[1]]=l[1]);break}}),s.HeadingPairs&&s.TitlesOfParts&&lT(s.HeadingPairs,s.TitlesOfParts,t,r),t}var GM=/<[^>]+>[^<]*/g;function WM(e,t){var r={},s="",n=e.match(GM);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=Xe(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":s=yt(o.name);break;case"</property>":s=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[s]=yt(u);break;case"bool":r[s]=zt(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[s]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[s]=parseFloat(u);break;case"filetime":case"date":r[s]=Er(u);break;case"cy":case"error":r[s]=yt(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}var YM={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Xm;function qM(e,t,r){Xm||(Xm=zy(YM)),t=Xm[t]||t,e[t]=r}function Qy(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function oT(e,t,r){var s=e.l,n=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-s&3;)++e.l;return n}function cT(e,t,r){var s=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(s.length+1&3)&3),s}function dT(e,t,r){return t===31?cT(e):oT(e,t,r)}function Up(e,t,r){return dT(e,t,r===!1?0:4)}function XM(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return dT(e,t,0)}function QM(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s){var n=e.l;r[s]=e.read_shift(0,"lpwstr").replace(cs,""),e.l-n&2&&(e.l+=2)}return r}function ZM(e){for(var t=e.read_shift(4),r=[],s=0;s!=t;++s)r[s]=e.read_shift(0,"lpstr-cp").replace(cs,"");return r}function JM(e){var t=e.l,r=uf(e,aT);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var s=uf(e,gs);return[r,s]}function eO(e){for(var t=e.read_shift(4),r=[],s=0;s<t/2;++s)r.push(JM(e));return r}function Hw(e,t){for(var r=e.read_shift(4),s={},n=0;n!=r;++n){var i=e.read_shift(4),l=e.read_shift(4);s[i]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(cs,"").replace(ad,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>2+1<<2),s}function uT(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function tO(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function uf(e,t,r){var s=e.read_shift(2),n,i=r||{};if(e.l+=2,t!==$w&&s!==t&&RM.indexOf(t)===-1&&!((t&65534)==4126&&(s&65534)==4126))throw new Error("Expected type "+t+" saw "+s);switch(t===$w?s:t){case 2:return n=e.read_shift(2,"i"),i.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return oT(e,s,4).replace(cs,"");case 31:return cT(e);case 64:return Qy(e);case 65:return uT(e);case 71:return tO(e);case 80:return Up(e,s,!i.raw).replace(cs,"");case 81:return XM(e,s).replace(cs,"");case 4108:return eO(e);case 4126:case 4127:return s==4127?QM(e):ZM(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function Kw(e,t){var r=e.l,s=e.read_shift(4),n=e.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=n;++l){var u=e.read_shift(4),h=e.read_shift(4);i[l]=[u,h+r]}i.sort(function(v,b){return v[1]-b[1]});var f={};for(l=0;l!=n;++l){if(e.l!==i[l][1]){var x=!0;if(l>0&&t)switch(t[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,x=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],x=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],x=!1);break}if((!t||l==0)&&e.l<=i[l][1]&&(x=!1,e.l=i[l][1]),x)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(t){var p=t[i[l][0]];if(f[p.n]=uf(e,p.t,{raw:!0}),p.p==="version"&&(f[p.n]=String(f[p.n]>>16)+"."+("0000"+String(f[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(f[p.n]){case 0:f[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:va(o=f[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[p.n])}}else if(i[l][0]===1){if(o=f.CodePage=uf(e,Xy),va(o),c!==-1){var m=e.l;e.l=i[c][1],d=Hw(e,o),e.l=m}}else if(i[l][0]===0){if(o===0){c=l,e.l=i[l+1][1];continue}d=Hw(e,o)}else{var y=d[i[l][0]],g;switch(e[e.l]){case 65:e.l+=4,g=uT(e);break;case 30:e.l+=4,g=Up(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,g=Up(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=Zt(e,4);break;case 64:e.l+=4,g=Er(Qy(e));break;default:throw new Error("unparsed value: "+e[e.l])}f[y]=g}}return e.l=r+s,f}function Gw(e,t,r){var s=e.content;if(!s)return{};Pr(s,0);var n,i,l,o,c=0;s.chk("feff","Byte Order: "),s.read_shift(2);var d=s.read_shift(4),u=s.read_shift(16);if(u!==ht.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(n=s.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=s.read_shift(16),o=s.read_shift(4),n===1&&o!==s.l)throw new Error("Length mismatch: "+o+" !== "+s.l);n===2&&(l=s.read_shift(16),c=s.read_shift(4));var h=Kw(s,t),f={SystemIdentifier:d};for(var x in h)f[x]=h[x];if(f.FMTID=i,n===1)return f;if(c-s.l==2&&(s.l+=2),s.l!==c)throw new Error("Length mismatch 2: "+s.l+" !== "+c);var p;try{p=Kw(s,null)}catch{}for(x in p)f[x]=p[x];return f.FMTID=[i,l],f}function $n(e,t){return e.read_shift(t),null}function rO(e,t,r){for(var s=[],n=e.l+t;e.l<n;)s.push(r(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return s}function Zt(e,t){return e.read_shift(t)===1}function ir(e){return e.read_shift(2,"u")}function hT(e,t){return rO(e,t,ir)}function sO(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function $u(e,t,r){var s=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var l=s?e.read_shift(s,n):"";return l}function aO(e){var t=e.read_shift(2),r=e.read_shift(1),s=r&4,n=r&8,i=1+(r&1),l=0,o,c={};n&&(l=e.read_shift(2)),s&&(o=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return n&&(e.l+=4*l),s&&(e.l+=o),c.t=u,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function $l(e,t,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?s=e.read_shift(t,"sbcs-cont"):s=e.read_shift(t,"dbcs-cont"),s}function Uu(e,t,r){var s=e.read_shift(r&&r.biff==2?1:2);return s===0?(e.l++,""):$l(e,s,r)}function Ql(e,t,r){if(r.biff>5)return Uu(e,t,r);var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function nO(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function iO(e){var t=e.read_shift(4),r=e.l,s=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(s=!0),e.l=r);var n=e.read_shift((s?t-24:t)>>1,"utf16le").replace(cs,"");return s&&(e.l+=24),n}function lO(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var s=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return r+s.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(cs,"");return r+l}function oO(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return iO(e);case"0303000000000000c000000000000046":return lO(e);default:throw new Error("Unsupported Moniker "+r)}}function R0(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(cs,""):"";return r}function cO(e,t){var r=e.l+t,s=e.read_shift(4);if(s!==2)throw new Error("Unrecognized streamVersion: "+s);var n=e.read_shift(2);e.l+=2;var i,l,o,c,d="",u,h;n&16&&(i=R0(e,r-e.l)),n&128&&(l=R0(e,r-e.l)),(n&257)===257&&(o=R0(e,r-e.l)),(n&257)===1&&(c=oO(e,r-e.l)),n&8&&(d=R0(e,r-e.l)),n&32&&(u=e.read_shift(16)),n&64&&(h=Qy(e)),e.l=r;var f=l||o||c||"";f&&d&&(f+="#"+d),f||(f="#"+d),n&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var x={Target:f};return u&&(x.guid=u),h&&(x.time=h),i&&(x.Tooltip=i),x}function fT(e){var t=e.read_shift(1),r=e.read_shift(1),s=e.read_shift(1),n=e.read_shift(1);return[t,r,s,n]}function mT(e,t){var r=fT(e);return r[3]=0,r}function ln(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return{r:t,c:r,ixfe:s}}function dO(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function uO(e,t,r){return t===0?"":Ql(e,t,r)}function hO(e,t,r){var s=r.biff>8?4:2,n=e.read_shift(s),i=e.read_shift(s,"i"),l=e.read_shift(s,"i");return[n,i,l]}function xT(e){var t=e.read_shift(2),r=qy(e);return[t,r]}function fO(e,t,r){e.l+=4,t-=4;var s=e.l+t,n=$u(e,t,r),i=e.read_shift(2);if(s-=e.l,i!==s)throw new Error("Malformed AddinUdf: padding = "+s+" != "+i);return e.l+=i,n}function em(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),n=e.read_shift(2);return{s:{c:s,r:t},e:{c:n,r}}}function pT(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(1),n=e.read_shift(1);return{s:{c:s,r:t},e:{c:n,r}}}var mO=pT;function gT(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2);return e.l+=12,[r,t,s]}function xO(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function pO(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function $r(e){e.l+=2,e.l+=e.read_shift(2)}var gO={0:$r,4:$r,5:$r,6:$r,7:pO,8:$r,9:$r,10:$r,11:$r,12:$r,13:xO,14:$r,15:$r,16:$r,17:$r,18:$r,19:$r,20:$r,21:gT};function yO(e,t){for(var r=e.l+t,s=[];e.l<r;){var n=e.read_shift(2);e.l-=2;try{s.push(gO[n](e,r-e.l))}catch{return e.l=r,s}}return e.l!=r&&(e.l=r),s}function F0(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function vO(e,t){return t===0||e.read_shift(2),1200}function bO(e,t,r){if(r.enc)return e.l+=t,"";var s=e.l,n=Ql(e,0,r);return e.read_shift(t+s-e.l),n}function wO(e,t,r){var s=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:s&16,fBelow:s&64,fRight:s&128}}function NO(e,t,r){var s=e.read_shift(4),n=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=$u(e,0,r);return l.length===0&&(l="Sheet1"),{pos:s,hs:n,dt:i,name:l}}function kO(e,t){for(var r=e.l+t,s=e.read_shift(4),n=e.read_shift(4),i=[],l=0;l!=n&&e.l<r;++l)i.push(aO(e));return i.Count=s,i.Unique=n,i}function jO(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function SO(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var s=e.read_shift(1);return e.l+=3,s&7&&(t.level=s&7),s&32&&(t.hidden=!0),s&64&&(t.hpt=r/20),t}function TO(e){var t=dO(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function _O(e){return e.read_shift(2),e.read_shift(4)}function Ww(e,t,r){var s=0;r&&r.biff==2||(s=e.read_shift(2));var n=e.read_shift(2);r&&r.biff==2&&(s=1-(n>>15),n&=32767);var i={Unsynced:s&1,DyZero:(s&2)>>1,ExAsc:(s&4)>>2,ExDsc:(s&8)>>3};return[i,n]}function EO(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[s,n],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function CO(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var s=e.read_shift(2);return{RTL:s&64}}function DO(){}function AO(e,t,r){var s={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return s.name=$u(e,0,r),s}function PO(e){var t=ln(e);return t.isst=e.read_shift(4),t}function RO(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=e.l+t,n=ln(e);r.biff==2&&e.l++;var i=Uu(e,s-e.l,r);return n.val=i,n}function FO(e,t,r){var s=e.read_shift(2),n=Ql(e,0,r);return[s,n]}var IO=Ql;function Yw(e,t,r){var s=e.l+t,n=r.biff==8||!r.biff?4:2,i=e.read_shift(n),l=e.read_shift(n),o=e.read_shift(2),c=e.read_shift(2);return e.l=s,{s:{r:i,c:o},e:{r:l,c}}}function MO(e){var t=e.read_shift(2),r=e.read_shift(2),s=xT(e);return{r:t,c:r,ixfe:s[0],rknum:s[1]}}function OO(e,t){for(var r=e.l+t-2,s=e.read_shift(2),n=e.read_shift(2),i=[];e.l<r;)i.push(xT(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r:s,c:n,C:l,rkrec:i}}function LO(e,t){for(var r=e.l+t-2,s=e.read_shift(2),n=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r:s,c:n,C:l,ixfe:i}}function BO(e,t,r,s){var n={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return n.patternType=MM[o>>26],s.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function zO(e,t,r){var s={};return s.ifnt=e.read_shift(2),s.numFmtId=e.read_shift(2),s.flags=e.read_shift(2),s.fStyle=s.flags>>2&1,t-=6,s.data=BO(e,t,s.fStyle,r),s}function $O(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function qw(e,t,r){var s=ln(e);(r.biff==2||t==9)&&++e.l;var n=sO(e);return s.val=n,s.t=n===!0||n===!1?"b":"e",s}function UO(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=ln(e),n=Gr(e);return s.val=n,s}var Xw=uO;function VO(e,t,r){var s=e.l+t,n=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=$l(e,i),o=[];s>e.l;)o.push(Uu(e));return[i,n,l,o]}function Qw(e,t,r){var s=e.read_shift(2),n,i={fBuiltIn:s&1,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return r.sbcch===14849&&(n=fO(e,t-2,r)),i.body=n||e.read_shift(t-2),typeof n=="string"&&(i.Name=n),i}var HO=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Zw(e,t,r){var s=e.l+t,n=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=$l(e,l,r);n&32&&(d=HO[d.charCodeAt(0)]);var u=s-e.l;r&&r.biff==2&&--u;var h=s==e.l||o===0||!(u>0)?[]:S9(e,u,r,o);return{chKey:i,Name:d,itab:c,rgce:h}}function yT(e,t,r){if(r.biff<8)return KO(e,t,r);for(var s=[],n=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)s.push(hO(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return s}function KO(e,t,r){e[e.l+1]==3&&e[e.l]++;var s=$u(e,t,r);return s.charCodeAt(0)==3?s.slice(1):s}function GO(e,t,r){if(r.biff<8){e.l+=t;return}var s=e.read_shift(2),n=e.read_shift(2),i=$l(e,s,r),l=$l(e,n,r);return[i,l]}function WO(e,t,r){var s=pT(e);e.l++;var n=e.read_shift(1);return t-=8,[T9(e,t,r),n,s]}function Jw(e,t,r){var s=mO(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[s,k9(e,t,r)]}function YO(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,s=e.read_shift(4);return[t,r,s]}function qO(e,t,r){if(!(r.biff<8)){var s=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=Ql(e,0,r);return r.biff<8&&e.read_shift(1),[{r:s,c:n},o,l,i]}}function XO(e,t,r){return qO(e,t,r)}function QO(e,t){for(var r=[],s=e.read_shift(2);s--;)r.push(em(e));return r}function ZO(e,t,r){if(r&&r.biff<8)return e8(e,t,r);var s=gT(e),n=yO(e,t-22,s[1]);return{cmo:s,ft:n}}var JO={8:function(e,t){var r=e.l+t;e.l+=10;var s=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=r,{fmt:s}}};function e8(e,t,r){e.l+=4;var s=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((JO[s]||Xr)(e,t,r)),{cmo:[n,s,i],ft:l}}function t8(e,t,r){var s=e.l,n="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=nO(e,6,r);var o=e.read_shift(2);e.read_shift(2),ir(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-s!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],h=$l(e,e.lens[d+1]-e.lens[d]-1);if(n+=h,n.length>=(u?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return e.l=s+t,{t:n}}catch{return e.l=s+t,{t:n}}}function r8(e,t){var r=em(e);e.l+=16;var s=cO(e,t-24);return[r,s]}function s8(e,t){e.read_shift(2);var r=em(e),s=e.read_shift((t-10)/2,"dbcs-cont");return s=s.replace(cs,""),[r,s]}function a8(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=Uw[r]||r,r=e.read_shift(2),t[1]=Uw[r]||r,t}function n8(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(mT(e));return r}function i8(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(mT(e));return r}function l8(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function vT(e,t,r){if(!r.cellStyles)return Xr(e,t);var s=r&&r.biff>=12?4:2,n=e.read_shift(s),i=e.read_shift(s),l=e.read_shift(s),o=e.read_shift(s),c=e.read_shift(2);s==2&&(e.l+=2);var d={s:n,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function o8(e,t){var r={};return t<32||(e.l+=16,r.header=Gr(e),r.footer=Gr(e),e.l+=2),r}function c8(e,t,r){var s={area:!1};if(r.biff!=5)return e.l+=t,s;var n=e.read_shift(1);return e.l+=3,n&16&&(s.area=!0),s}var d8=ln,u8=hT,h8=Uu;function f8(e){var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),n={fmt:t,env:r,len:s,data:e.slice(e.l,e.l+s)};return e.l+=s,n}function m8(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var s=ln(e);++e.l;var n=Ql(e,t-7,r);return s.t="str",s.val=n,s}function x8(e){var t=ln(e);++e.l;var r=Gr(e);return t.t="n",t.val=r,t}function p8(e){var t=ln(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function g8(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function y8(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function v8(e,t,r){var s=e.l+t,n=ln(e),i=e.read_shift(2),l=$l(e,i,r);return e.l=s,n.t="str",n.val=l,n}var b8=[2,3,48,49,131,139,140,245],e2=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=zy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],u=Bi(1);switch(c.type){case"base64":u=ga(Ls(o));break;case"binary":u=ga(o);break;case"buffer":case"array":u=o;break}Pr(u,0);var h=u.read_shift(1),f=!!(h&136),x=!1,p=!1;switch(h){case 2:break;case 3:break;case 48:x=!0,f=!0;break;case 49:x=!0,f=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var m=0,y=521;h==2&&(m=u.read_shift(2)),u.l+=3,h!=2&&(m=u.read_shift(4)),m>1048576&&(m=1e6),h!=2&&(y=u.read_shift(2));var g=u.read_shift(2),v=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(v=e[u[u.l]]),u.l+=1,u.l+=2),p&&(u.l+=36);for(var b=[],S={},D=Math.min(u.length,h==2?521:y-10-(x?264:0)),N=p?32:11;u.l<D&&u[u.l]!=13;)switch(S={},S.name=Jn.utils.decode(v,u.slice(u.l,u.l+N)).replace(/[\u0000\r\n].*$/g,""),u.l+=N,S.type=String.fromCharCode(u.read_shift(1)),h!=2&&!p&&(S.offset=u.read_shift(4)),S.len=u.read_shift(1),h==2&&(S.offset=u.read_shift(2)),S.dec=u.read_shift(1),S.name.length&&b.push(S),h!=2&&(u.l+=p?13:14),S.type){case"B":(!x||S.len!=8)&&c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+S.name+":"+S.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+S.type)}if(u[u.l]!==13&&(u.l=y-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=y;var E=0,w=0;for(d[0]=[],w=0;w!=b.length;++w)d[0][w]=b[w].name;for(;m-- >0;){if(u[u.l]===42){u.l+=g;continue}for(++u.l,d[++E]=[],w=0,w=0;w!=b.length;++w){var _=u.slice(u.l,u.l+b[w].len);u.l+=b[w].len,Pr(_,0);var C=Jn.utils.decode(v,_);switch(b[w].type){case"C":C.trim().length&&(d[E][w]=C.replace(/\s+$/,""));break;case"D":C.length===8?d[E][w]=new Date(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8)):d[E][w]=C;break;case"F":d[E][w]=parseFloat(C.trim());break;case"+":case"I":d[E][w]=p?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":d[E][w]=!0;break;case"N":case"F":d[E][w]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[E][w]="##MEMO##"+(p?parseInt(C.trim(),10):_.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(d[E][w]=+C||0);break;case"@":d[E][w]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":d[E][w]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":d[E][w]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][w]=-_.read_shift(-8,"f");break;case"B":if(x&&b[w].len==8){d[E][w]=_.read_shift(8,"f");break}case"G":case"P":_.l+=b[w].len;break;case"0":if(b[w].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[w].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=b,d}function s(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Dc(r(o,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function n(o,c){try{return Ki(s(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&va(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Bp(),h=qp(o,{header:1,raw:!0,cellDates:!0}),f=h[0],x=h.slice(1),p=o["!cols"]||[],m=0,y=0,g=0,v=1;for(m=0;m<f.length;++m){if(((p[m]||{}).DBF||{}).name){f[m]=p[m].DBF.name,++g;continue}if(f[m]!=null){if(++g,typeof f[m]=="number"&&(f[m]=f[m].toString(10)),typeof f[m]!="string")throw new Error("DBF Invalid column name "+f[m]+" |"+typeof f[m]+"|");if(f.indexOf(f[m])!==m){for(y=0;y<1024;++y)if(f.indexOf(f[m]+"_"+y)==-1){f[m]+="_"+y;break}}}}var b=Qt(o["!ref"]),S=[],D=[],N=[];for(m=0;m<=b.e.c-b.s.c;++m){var E="",w="",_=0,C=[];for(y=0;y<x.length;++y)x[y][m]!=null&&C.push(x[y][m]);if(C.length==0||f[m]==null){S[m]="?";continue}for(y=0;y<C.length;++y){switch(typeof C[y]){case"number":w="B";break;case"string":w="C";break;case"boolean":w="L";break;case"object":w=C[y]instanceof Date?"D":"C";break;default:w="C"}_=Math.max(_,String(C[y]).length),E=E&&E!=w?"C":w}_>250&&(_=250),w=((p[m]||{}).DBF||{}).type,w=="C"&&p[m].DBF.len>_&&(_=p[m].DBF.len),E=="B"&&w=="N"&&(E="N",N[m]=p[m].DBF.dec,_=p[m].DBF.len),D[m]=E=="C"||w=="N"?_:i[E]||0,v+=D[m],S[m]=E}var T=u.next(32);for(T.write_shift(4,318902576),T.write_shift(4,x.length),T.write_shift(2,296+32*g),T.write_shift(2,v),m=0;m<4;++m)T.write_shift(4,0);for(T.write_shift(4,0|(+t[g4]||3)<<8),m=0,y=0;m<f.length;++m)if(f[m]!=null){var j=u.next(32),F=(f[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,F,"sbcs"),j.write_shift(1,S[m]=="?"?"C":S[m],"sbcs"),j.write_shift(4,y),j.write_shift(1,D[m]||i[S[m]]||0),j.write_shift(1,N[m]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),y+=D[m]||i[S[m]]||0}var O=u.next(264);for(O.write_shift(4,13),m=0;m<65;++m)O.write_shift(4,0);for(m=0;m<x.length;++m){var z=u.next(v);for(z.write_shift(1,0),y=0;y<f.length;++y)if(f[y]!=null)switch(S[y]){case"L":z.write_shift(1,x[m][y]==null?63:x[m][y]?84:70);break;case"B":z.write_shift(8,x[m][y]||0,"f");break;case"N":var G="0";for(typeof x[m][y]=="number"&&(G=x[m][y].toFixed(N[y]||0)),g=0;g<D[y]-G.length;++g)z.write_shift(1,32);z.write_shift(1,G,"sbcs");break;case"D":x[m][y]?(z.write_shift(4,("0000"+x[m][y].getFullYear()).slice(-4),"sbcs"),z.write_shift(2,("00"+(x[m][y].getMonth()+1)).slice(-2),"sbcs"),z.write_shift(2,("00"+x[m][y].getDate()).slice(-2),"sbcs")):z.write_shift(8,"00000000","sbcs");break;case"C":var q=String(x[m][y]!=null?x[m][y]:"").slice(0,D[y]);for(z.write_shift(1,q,"sbcs"),g=0;g<D[y]-q.length;++g)z.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:s,from_sheet:l}}(),w8=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+sn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,x){var p=e[x];return typeof p=="number"?pw(p):p},s=function(f,x,p){var m=x.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return m==59?f:pw(m)};e["|"]=254;function n(f,x){switch(x.type){case"base64":return i(Ls(f),x);case"binary":return i(f,x);case"buffer":return i(dt&&Buffer.isBuffer(f)?f.toString("binary"):Wl(f),x);case"array":return i(zl(f),x)}throw new Error("Unrecognized type "+x.type)}function i(f,x){var p=f.split(/[\n\r]+/),m=-1,y=-1,g=0,v=0,b=[],S=[],D=null,N={},E=[],w=[],_=[],C=0,T;for(+x.codepage>=0&&va(+x.codepage);g!==p.length;++g){C=0;var j=p[g].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(t,r),F=j.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),O=F[0],z;if(j.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&S.push(j.slice(3).replace(/;;/g,";"));break;case"C":var G=!1,q=!1,H=!1,A=!1,V=-1,L=-1;for(v=1;v<F.length;++v)switch(F[v].charAt(0)){case"A":break;case"X":y=parseInt(F[v].slice(1))-1,q=!0;break;case"Y":for(m=parseInt(F[v].slice(1))-1,q||(y=0),T=b.length;T<=m;++T)b[T]=[];break;case"K":z=F[v].slice(1),z.charAt(0)==='"'?z=z.slice(1,z.length-1):z==="TRUE"?z=!0:z==="FALSE"?z=!1:isNaN(Sa(z))?isNaN(yc(z).getDate())||(z=Er(z)):(z=Sa(z),D!==null&&Ec(D)&&(z=Jf(z))),G=!0;break;case"E":A=!0;var P=Bo(F[v].slice(1),{r:m,c:y});b[m][y]=[b[m][y],P];break;case"S":H=!0,b[m][y]=[b[m][y],"S5S"];break;case"G":break;case"R":V=parseInt(F[v].slice(1))-1;break;case"C":L=parseInt(F[v].slice(1))-1;break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+j)}if(G&&(b[m][y]&&b[m][y].length==2?b[m][y][0]=z:b[m][y]=z,D=null),H){if(A)throw new Error("SYLK shared formula cannot have own formula");var I=V>-1&&b[V][L];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");b[m][y][1]=CT(I[1],{r:m-V,c:y-L})}break;case"F":var R=0;for(v=1;v<F.length;++v)switch(F[v].charAt(0)){case"X":y=parseInt(F[v].slice(1))-1,++R;break;case"Y":for(m=parseInt(F[v].slice(1))-1,T=b.length;T<=m;++T)b[T]=[];break;case"M":C=parseInt(F[v].slice(1))/20;break;case"F":break;case"G":break;case"P":D=S[parseInt(F[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=F[v].slice(1).split(" "),T=parseInt(_[0],10);T<=parseInt(_[1],10);++T)C=parseInt(_[2],10),w[T-1]=C===0?{hidden:!0}:{wch:C},vc(w[T-1]);break;case"C":y=parseInt(F[v].slice(1))-1,w[y]||(w[y]={});break;case"R":m=parseInt(F[v].slice(1))-1,E[m]||(E[m]={}),C>0?(E[m].hpt=C,E[m].hpx=fu(C)):C===0&&(E[m].hidden=!0);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+j)}R<1&&(D=null);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+j)}}return E.length>0&&(N["!rows"]=E),w.length>0&&(N["!cols"]=w),x&&x.sheetRows&&(b=b.slice(0,x.sheetRows)),[b,N]}function l(f,x){var p=n(f,x),m=p[0],y=p[1],g=Dc(m,x);return sn(y).forEach(function(v){g[v]=y[v]}),g}function o(f,x){return Ki(l(f,x),x)}function c(f,x,p,m){var y="C;Y"+(p+1)+";X"+(m+1)+";K";switch(f.t){case"n":y+=f.v||0,f.f&&!f.F&&(y+=";E"+l7(f.f,{r:p,c:m}));break;case"b":y+=f.v?"TRUE":"FALSE";break;case"e":y+=f.w||f.v;break;case"d":y+='"'+(f.w||f.v)+'"';break;case"s":y+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function d(f,x){x.forEach(function(p,m){var y="F;W"+(m+1)+" "+(m+1)+" ";p.hidden?y+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=ff(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=mf(p.wpx)),typeof p.wch=="number"&&(y+=Math.round(p.wch))),y.charAt(y.length-1)!=" "&&f.push(y)})}function u(f,x){x.forEach(function(p,m){var y="F;";p.hidden?y+="M0;":p.hpt?y+="M"+20*p.hpt+";":p.hpx&&(y+="M"+20*TT(p.hpx)+";"),y.length>2&&f.push(y+"R"+(m+1))})}function h(f,x){var p=["ID;PWXL;N;E"],m=[],y=Qt(f["!ref"]),g,v=Array.isArray(f),b=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),f["!cols"]&&d(p,f["!cols"]),f["!rows"]&&u(p,f["!rows"]),p.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var S=y.s.r;S<=y.e.r;++S)for(var D=y.s.c;D<=y.e.c;++D){var N=et({r:S,c:D});g=v?(f[S]||[])[D]:f[N],!(!g||g.v==null&&(!g.f||g.F))&&m.push(c(g,f,S,D))}return p.join(b)+b+m.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:l,from_sheet:h}}(),N8=function(){function e(i,l){switch(l.type){case"base64":return t(Ls(i),l);case"binary":return t(i,l);case"buffer":return t(dt&&Buffer.isBuffer(i)?i.toString("binary"):Wl(i),l);case"array":return t(zl(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var o=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==o.length;++u){if(o[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var f=o[u].trim().split(","),x=f[0],p=f[1];++u;for(var m=o[u]||"";(m.match(/["]/g)||[]).length&1&&u<o.length-1;)m+=`
`+o[++u];switch(m=m.trim(),+x){case-1:if(m==="BOT"){h[++c]=[],d=0;continue}else if(m!=="EOD")throw new Error("Unrecognized DIF special command "+m);break;case 0:m==="TRUE"?h[c][d]=!0:m==="FALSE"?h[c][d]=!1:isNaN(Sa(p))?isNaN(yc(p).getDate())?h[c][d]=p:h[c][d]=Er(p):h[c][d]=Sa(p),++d;break;case 1:m=m.slice(1,m.length-1),m=m.replace(/""/g,'"'),m&&m.match(/^=".*"$/)&&(m=m.slice(2,-1)),h[c][d++]=m!==""?m:null;break}if(m==="EOD")break}}return l&&l.sheetRows&&(h=h.slice(0,l.sheetRows)),h}function r(i,l){return Dc(e(i,l),l)}function s(i,l){return Ki(r(i,l),l)}var n=function(){var i=function(c,d,u,h,f){c.push(d),c.push(u+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},l=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Qt(c["!ref"]),h,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var x=u.s.r;x<=u.e.r;++x){l(d,-1,0,"BOT");for(var p=u.s.c;p<=u.e.c;++p){var m=et({r:x,c:p});if(h=f?(c[x]||[])[p]:c[m],!h){l(d,1,0,"");continue}switch(h.t){case"n":var y=h.w;!y&&h.v!=null&&(y=h.v),y==null?h.f&&!h.F?l(d,1,0,"="+h.f):l(d,1,0,""):l(d,0,y,"V");break;case"b":l(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=sa(h.z||st[14],us(Er(h.v)))),l(d,0,h.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var g=`\r
`,v=d.join(g);return v}}();return{to_workbook:s,to_sheet:r,from_sheet:n}}(),k8=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var x=h.split(`
`),p=-1,m=-1,y=0,g=[];y!==x.length;++y){var v=x[y].trim().split(":");if(v[0]==="cell"){var b=is(v[1]);if(g.length<=b.r)for(p=g.length;p<=b.r;++p)g[p]||(g[p]=[]);switch(p=b.r,m=b.c,v[2]){case"t":g[p][m]=e(v[3]);break;case"v":g[p][m]=+v[3];break;case"vtf":var S=v[v.length-1];case"vtc":switch(v[3]){case"nl":g[p][m]=!!+v[4];break;default:g[p][m]=+v[4];break}v[2]=="vtf"&&(g[p][m]=[g[p][m],S])}}}return f&&f.sheetRows&&(g=g.slice(0,f.sheetRows)),g}function s(h,f){return Dc(r(h,f),f)}function n(h,f){return Ki(s(h,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var f=[],x=[],p,m="",y=Cc(h["!ref"]),g=Array.isArray(h),v=y.s.r;v<=y.e.r;++v)for(var b=y.s.c;b<=y.e.c;++b)if(m=et({r:v,c:b}),p=g?(h[v]||[])[b]:h[m],!(!p||p.v==null||p.t==="z")){switch(x=["cell",m,"t"],p.t){case"s":case"str":x.push(t(p.v));break;case"n":p.f?(x[2]="vtf",x[3]="n",x[4]=p.v,x[5]=t(p.f)):(x[2]="v",x[3]=p.v);break;case"b":x[2]="vt"+(p.f?"f":"c"),x[3]="nl",x[4]=p.v?"1":"0",x[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var S=us(Er(p.v));x[2]="vtc",x[3]="nd",x[4]=""+S,x[5]=p.w||sa(p.z||st[14],S);break;case"e":continue}f.push(x.join(":"))}return f.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[i,l,o,l,d(h),c].join(`
`)}return{to_workbook:n,to_sheet:s,from_sheet:u}}(),uu=function(){function e(u,h,f,x,p){p.raw?h[f][x]=u:u===""||(u==="TRUE"?h[f][x]=!0:u==="FALSE"?h[f][x]=!1:isNaN(Sa(u))?isNaN(yc(u).getDate())?h[f][x]=u:h[f][x]=Er(u):h[f][x]=Sa(u))}function t(u,h){var f=h||{},x=[];if(!u||u.length===0)return x;for(var p=u.split(/[\r\n]/),m=p.length-1;m>=0&&p[m].length===0;)--m;for(var y=10,g=0,v=0;v<=m;++v)g=p[v].indexOf(" "),g==-1?g=p[v].length:g++,y=Math.max(y,g);for(v=0;v<=m;++v){x[v]=[];var b=0;for(e(p[v].slice(0,y).trim(),x,v,b,f),b=1;b<=(p[v].length-y)/10+1;++b)e(p[v].slice(y+(b-1)*10,y+b*10).trim(),x,v,b,f)}return f.sheetRows&&(x=x.slice(0,f.sheetRows)),x}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function n(u){for(var h={},f=!1,x=0,p=0;x<u.length;++x)(p=u.charCodeAt(x))==34?f=!f:!f&&p in r&&(h[p]=(h[p]||0)+1);p=[];for(x in h)Object.prototype.hasOwnProperty.call(h,x)&&p.push([h[x],x]);if(!p.length){h=s;for(x in h)Object.prototype.hasOwnProperty.call(h,x)&&p.push([h[x],x])}return p.sort(function(m,y){return m[0]-y[0]||s[m[1]]-s[y[1]]}),r[p.pop()[1]]||44}function i(u,h){var f=h||{},x="",p=f.dense?[]:{},m={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(x=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(x=u.charAt(4),u=u.slice(6)):x=n(u.slice(0,1024)):f&&f.FS?x=f.FS:x=n(u.slice(0,1024));var y=0,g=0,v=0,b=0,S=0,D=x.charCodeAt(0),N=!1,E=0,w=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var _=f.dateNF!=null?II(f.dateNF):null;function C(){var T=u.slice(b,S),j={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)j.t="z";else if(f.raw)j.t="s",j.v=T;else if(T.trim().length===0)j.t="s",j.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(j.t="s",j.v=T.slice(2,-1).replace(/""/g,'"')):c7(T)?(j.t="n",j.f=T.slice(1)):(j.t="s",j.v=T);else if(T=="TRUE")j.t="b",j.v=!0;else if(T=="FALSE")j.t="b",j.v=!1;else if(!isNaN(v=Sa(T)))j.t="n",f.cellText!==!1&&(j.w=T),j.v=v;else if(!isNaN(yc(T).getDate())||_&&T.match(_)){j.z=f.dateNF||st[14];var F=0;_&&T.match(_)&&(T=MI(T,f.dateNF,T.match(_)||[]),F=1),f.cellDates?(j.t="d",j.v=Er(T,F)):(j.t="n",j.v=us(Er(T,F))),f.cellText!==!1&&(j.w=sa(j.z,j.v instanceof Date?us(j.v):j.v)),f.cellNF||delete j.z}else j.t="s",j.v=T;if(j.t=="z"||(f.dense?(p[y]||(p[y]=[]),p[y][g]=j):p[et({c:g,r:y})]=j),b=S+1,w=u.charCodeAt(b),m.e.c<g&&(m.e.c=g),m.e.r<y&&(m.e.r=y),E==D)++g;else if(g=0,++y,f.sheetRows&&f.sheetRows<=y)return!0}e:for(;S<u.length;++S)switch(E=u.charCodeAt(S)){case 34:w===34&&(N=!N);break;case D:case 10:case 13:if(!N&&C())break e;break}return S-b>0&&C(),p["!ref"]=ft(m),p}function l(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):Dc(t(u,h),h)}function o(u,h){var f="",x=h.type=="string"?[0,0,0,0]:nv(u,h);switch(h.type){case"base64":f=Ls(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof Jn<"u"?f=Jn.utils.decode(h.codepage,u):f=dt&&Buffer.isBuffer(u)?u.toString("binary"):Wl(u);break;case"array":f=zl(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return x[0]==239&&x[1]==187&&x[2]==191?f=Rt(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=Rt(f):h.type=="binary"&&typeof Jn<"u"&&h.codepage&&(f=Jn.utils.decode(h.codepage,Jn.utils.encode(28591,f))),f.slice(0,19)=="socialcalc:version:"?k8.to_sheet(h.type=="string"?f:Rt(f),h):l(f,h)}function c(u,h){return Ki(o(u,h),h)}function d(u){for(var h=[],f=Qt(u["!ref"]),x,p=Array.isArray(u),m=f.s.r;m<=f.e.r;++m){for(var y=[],g=f.s.c;g<=f.e.c;++g){var v=et({r:m,c:g});if(x=p?(u[m]||[])[g]:u[v],!x||x.v==null){y.push("          ");continue}for(var b=(x.w||(Rn(x),x.w)||"").slice(0,10);b.length<10;)b+=" ";y.push(b+(g===0?" ":""))}h.push(y.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}();function j8(e,t){var r=t||{},s=!!r.WTF;r.WTF=!0;try{var n=w8.to_workbook(e,r);return r.WTF=s,n}catch(i){if(r.WTF=s,!i.message.match(/SYLK bad record ID/)&&s)throw i;return uu.to_workbook(e,t)}}var Cd=function(){function e(P,I,R){if(P){Pr(P,P.l||0);for(var U=R.Enum||V;P.l<P.length;){var M=P.read_shift(2),J=U[M]||U[65535],se=P.read_shift(2),ae=P.l+se,ie=J.f&&J.f(P,se,R);if(P.l=ae,I(ie,J,M))return}}}function t(P,I){switch(I.type){case"base64":return r(ga(Ls(P)),I);case"binary":return r(ga(P),I);case"buffer":case"array":return r(P,I)}throw"Unsupported type "+I.type}function r(P,I){if(!P)return P;var R=I||{},U=R.dense?[]:{},M="Sheet1",J="",se=0,ae={},ie=[],ce=[],K={s:{r:0,c:0},e:{r:0,c:0}},He=R.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)R.Enum=V,e(P,function(de,Ae,Ke){switch(Ke){case 0:R.vers=de,de>=4096&&(R.qpro=!0);break;case 6:K=de;break;case 204:de&&(J=de);break;case 222:J=de;break;case 15:case 51:R.qpro||(de[1].v=de[1].v.slice(1));case 13:case 14:case 16:Ke==14&&(de[2]&112)==112&&(de[2]&15)>1&&(de[2]&15)<15&&(de[1].z=R.dateNF||st[14],R.cellDates&&(de[1].t="d",de[1].v=Jf(de[1].v))),R.qpro&&de[3]>se&&(U["!ref"]=ft(K),ae[M]=U,ie.push(M),U=R.dense?[]:{},K={s:{r:0,c:0},e:{r:0,c:0}},se=de[3],M=J||"Sheet"+(se+1),J="");var re=R.dense?(U[de[0].r]||[])[de[0].c]:U[et(de[0])];if(re){re.t=de[1].t,re.v=de[1].v,de[1].z!=null&&(re.z=de[1].z),de[1].f!=null&&(re.f=de[1].f);break}R.dense?(U[de[0].r]||(U[de[0].r]=[]),U[de[0].r][de[0].c]=de[1]):U[et(de[0])]=de[1];break}},R);else if(P[2]==26||P[2]==14)R.Enum=L,P[2]==14&&(R.qpro=!0,P.l=0),e(P,function(de,Ae,Ke){switch(Ke){case 204:M=de;break;case 22:de[1].v=de[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(de[3]>se&&(U["!ref"]=ft(K),ae[M]=U,ie.push(M),U=R.dense?[]:{},K={s:{r:0,c:0},e:{r:0,c:0}},se=de[3],M="Sheet"+(se+1)),He>0&&de[0].r>=He)break;R.dense?(U[de[0].r]||(U[de[0].r]=[]),U[de[0].r][de[0].c]=de[1]):U[et(de[0])]=de[1],K.e.c<de[0].c&&(K.e.c=de[0].c),K.e.r<de[0].r&&(K.e.r=de[0].r);break;case 27:de[14e3]&&(ce[de[14e3][0]]=de[14e3][1]);break;case 1537:ce[de[0]]=de[1],de[0]==se&&(M=de[1]);break}},R);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(U["!ref"]=ft(K),ae[J||M]=U,ie.push(J||M),!ce.length)return{SheetNames:ie,Sheets:ae};for(var Pe={},Le=[],Ce=0;Ce<ce.length;++Ce)ae[ie[Ce]]?(Le.push(ce[Ce]||ie[Ce]),Pe[ce[Ce]]=ae[ce[Ce]]||ae[ie[Ce]]):(Le.push(ce[Ce]),Pe[ce[Ce]]={"!ref":"A1"});return{SheetNames:Le,Sheets:Pe}}function s(P,I){var R=I||{};if(+R.codepage>=0&&va(+R.codepage),R.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Bp(),M=Qt(P["!ref"]),J=Array.isArray(P),se=[];oa(U,0,i(1030)),oa(U,6,c(M));for(var ae=Math.min(M.e.r,8191),ie=M.s.r;ie<=ae;++ie)for(var ce=Ir(ie),K=M.s.c;K<=M.e.c;++K){ie===M.s.r&&(se[K]=gr(K));var He=se[K]+ce,Pe=J?(P[ie]||[])[K]:P[He];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")(Pe.v|0)==Pe.v&&Pe.v>=-32768&&Pe.v<=32767?oa(U,13,x(ie,K,Pe.v)):oa(U,14,m(ie,K,Pe.v));else{var Le=Rn(Pe);oa(U,15,h(ie,K,Le.slice(0,239)))}}return oa(U,1),U.end()}function n(P,I){var R=I||{};if(+R.codepage>=0&&va(+R.codepage),R.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Bp();oa(U,0,l(P));for(var M=0,J=0;M<P.SheetNames.length;++M)(P.Sheets[P.SheetNames[M]]||{})["!ref"]&&oa(U,27,A(P.SheetNames[M],J++));var se=0;for(M=0;M<P.SheetNames.length;++M){var ae=P.Sheets[P.SheetNames[M]];if(!(!ae||!ae["!ref"])){for(var ie=Qt(ae["!ref"]),ce=Array.isArray(ae),K=[],He=Math.min(ie.e.r,8191),Pe=ie.s.r;Pe<=He;++Pe)for(var Le=Ir(Pe),Ce=ie.s.c;Ce<=ie.e.c;++Ce){Pe===ie.s.r&&(K[Ce]=gr(Ce));var de=K[Ce]+Le,Ae=ce?(ae[Pe]||[])[Ce]:ae[de];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")oa(U,23,C(Pe,Ce,se,Ae.v));else{var Ke=Rn(Ae);oa(U,22,E(Pe,Ce,se,Ke.slice(0,239)))}}++se}}return oa(U,1),U.end()}function i(P){var I=fr(2);return I.write_shift(2,P),I}function l(P){var I=fr(26);I.write_shift(2,4096),I.write_shift(2,4),I.write_shift(4,0);for(var R=0,U=0,M=0,J=0;J<P.SheetNames.length;++J){var se=P.SheetNames[J],ae=P.Sheets[se];if(!(!ae||!ae["!ref"])){++M;var ie=Cc(ae["!ref"]);R<ie.e.r&&(R=ie.e.r),U<ie.e.c&&(U=ie.e.c)}}return R>8191&&(R=8191),I.write_shift(2,R),I.write_shift(1,M),I.write_shift(1,U),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,1),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(4,0),I}function o(P,I,R){var U={s:{c:0,r:0},e:{c:0,r:0}};return I==8&&R.qpro?(U.s.c=P.read_shift(1),P.l++,U.s.r=P.read_shift(2),U.e.c=P.read_shift(1),P.l++,U.e.r=P.read_shift(2),U):(U.s.c=P.read_shift(2),U.s.r=P.read_shift(2),I==12&&R.qpro&&(P.l+=2),U.e.c=P.read_shift(2),U.e.r=P.read_shift(2),I==12&&R.qpro&&(P.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(P){var I=fr(8);return I.write_shift(2,P.s.c),I.write_shift(2,P.s.r),I.write_shift(2,P.e.c),I.write_shift(2,P.e.r),I}function d(P,I,R){var U=[{c:0,r:0},{t:"n",v:0},0,0];return R.qpro&&R.vers!=20768?(U[0].c=P.read_shift(1),U[3]=P.read_shift(1),U[0].r=P.read_shift(2),P.l+=2):(U[2]=P.read_shift(1),U[0].c=P.read_shift(2),U[0].r=P.read_shift(2)),U}function u(P,I,R){var U=P.l+I,M=d(P,I,R);if(M[1].t="s",R.vers==20768){P.l++;var J=P.read_shift(1);return M[1].v=P.read_shift(J,"utf8"),M}return R.qpro&&P.l++,M[1].v=P.read_shift(U-P.l,"cstr"),M}function h(P,I,R){var U=fr(7+R.length);U.write_shift(1,255),U.write_shift(2,I),U.write_shift(2,P),U.write_shift(1,39);for(var M=0;M<U.length;++M){var J=R.charCodeAt(M);U.write_shift(1,J>=128?95:J)}return U.write_shift(1,0),U}function f(P,I,R){var U=d(P,I,R);return U[1].v=P.read_shift(2,"i"),U}function x(P,I,R){var U=fr(7);return U.write_shift(1,255),U.write_shift(2,I),U.write_shift(2,P),U.write_shift(2,R,"i"),U}function p(P,I,R){var U=d(P,I,R);return U[1].v=P.read_shift(8,"f"),U}function m(P,I,R){var U=fr(13);return U.write_shift(1,255),U.write_shift(2,I),U.write_shift(2,P),U.write_shift(8,R,"f"),U}function y(P,I,R){var U=P.l+I,M=d(P,I,R);if(M[1].v=P.read_shift(8,"f"),R.qpro)P.l=U;else{var J=P.read_shift(2);S(P.slice(P.l,P.l+J),M),P.l+=J}return M}function g(P,I,R){var U=I&32768;return I&=-32769,I=(U?P:0)+(I>=8192?I-16384:I),(U?"":"$")+(R?gr(I):Ir(I))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(P,I){Pr(P,0);for(var R=[],U=0,M="",J="",se="",ae="";P.l<P.length;){var ie=P[P.l++];switch(ie){case 0:R.push(P.read_shift(8,"f"));break;case 1:J=g(I[0].c,P.read_shift(2),!0),M=g(I[0].r,P.read_shift(2),!1),R.push(J+M);break;case 2:{var ce=g(I[0].c,P.read_shift(2),!0),K=g(I[0].r,P.read_shift(2),!1);J=g(I[0].c,P.read_shift(2),!0),M=g(I[0].r,P.read_shift(2),!1),R.push(ce+K+":"+J+M)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:R.push("("+R.pop()+")");break;case 5:R.push(P.read_shift(2));break;case 6:{for(var He="";ie=P[P.l++];)He+=String.fromCharCode(ie);R.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:R.push("-"+R.pop());break;case 23:R.push("+"+R.pop());break;case 22:R.push("NOT("+R.pop()+")");break;case 20:case 21:ae=R.pop(),se=R.pop(),R.push(["AND","OR"][ie-20]+"("+se+","+ae+")");break;default:if(ie<32&&b[ie])ae=R.pop(),se=R.pop(),R.push(se+b[ie]+ae);else if(v[ie]){if(U=v[ie][1],U==69&&(U=P[P.l++]),U>R.length){console.error("WK1 bad formula parse 0x"+ie.toString(16)+":|"+R.join("|")+"|");return}var Pe=R.slice(-U);R.length-=U,R.push(v[ie][0]+"("+Pe.join(",")+")")}else return ie<=7?console.error("WK1 invalid opcode "+ie.toString(16)):ie<=24?console.error("WK1 unsupported op "+ie.toString(16)):ie<=30?console.error("WK1 invalid opcode "+ie.toString(16)):ie<=115?console.error("WK1 unsupported function opcode "+ie.toString(16)):console.error("WK1 unrecognized opcode "+ie.toString(16))}}R.length==1?I[1].f=""+R[0]:console.error("WK1 bad formula parse |"+R.join("|")+"|")}function D(P){var I=[{c:0,r:0},{t:"n",v:0},0];return I[0].r=P.read_shift(2),I[3]=P[P.l++],I[0].c=P[P.l++],I}function N(P,I){var R=D(P);return R[1].t="s",R[1].v=P.read_shift(I-4,"cstr"),R}function E(P,I,R,U){var M=fr(6+U.length);M.write_shift(2,P),M.write_shift(1,R),M.write_shift(1,I),M.write_shift(1,39);for(var J=0;J<U.length;++J){var se=U.charCodeAt(J);M.write_shift(1,se>=128?95:se)}return M.write_shift(1,0),M}function w(P,I){var R=D(P);R[1].v=P.read_shift(2);var U=R[1].v>>1;if(R[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return R[1].v=U,R}function _(P,I){var R=D(P),U=P.read_shift(4),M=P.read_shift(4),J=P.read_shift(2);if(J==65535)return U===0&&M===3221225472?(R[1].t="e",R[1].v=15):U===0&&M===3489660928?(R[1].t="e",R[1].v=42):R[1].v=0,R;var se=J&32768;return J=(J&32767)-16446,R[1].v=(1-se*2)*(M*Math.pow(2,J+32)+U*Math.pow(2,J)),R}function C(P,I,R,U){var M=fr(14);if(M.write_shift(2,P),M.write_shift(1,R),M.write_shift(1,I),U==0)return M.write_shift(4,0),M.write_shift(4,0),M.write_shift(2,65535),M;var J=0,se=0,ae=0,ie=0;return U<0&&(J=1,U=-U),se=Math.log2(U)|0,U/=Math.pow(2,se-31),ie=U>>>0,ie&2147483648||(U/=2,++se,ie=U>>>0),U-=ie,ie|=2147483648,ie>>>=0,U*=Math.pow(2,32),ae=U>>>0,M.write_shift(4,ae),M.write_shift(4,ie),se+=16383+(J?32768:0),M.write_shift(2,se),M}function T(P,I){var R=_(P);return P.l+=I-14,R}function j(P,I){var R=D(P),U=P.read_shift(4);return R[1].v=U>>6,R}function F(P,I){var R=D(P),U=P.read_shift(8,"f");return R[1].v=U,R}function O(P,I){var R=F(P);return P.l+=I-10,R}function z(P,I){return P[P.l+I-1]==0?P.read_shift(I,"cstr"):""}function G(P,I){var R=P[P.l++];R>I-1&&(R=I-1);for(var U="";U.length<R;)U+=String.fromCharCode(P[P.l++]);return U}function q(P,I,R){if(!(!R.qpro||I<21)){var U=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var M=P.read_shift(I-21,"cstr");return[U,M]}}function H(P,I){for(var R={},U=P.l+I;P.l<U;){var M=P.read_shift(2);if(M==14e3){for(R[M]=[0,""],R[M][0]=P.read_shift(2);P[P.l];)R[M][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return R}function A(P,I){var R=fr(5+P.length);R.write_shift(2,14e3),R.write_shift(2,I);for(var U=0;U<P.length;++U){var M=P.charCodeAt(U);R[R.l++]=M>127?95:M}return R[R.l++]=0,R}var V={0:{n:"BOF",f:ir},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:z},222:{n:"SHEETNAMELP",f:G},65535:{n:""}},L={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:w},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:H},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:j},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:O},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:n,to_workbook:t}}();function S8(e){var t={},r=e.match(Qr),s=0,n=!1;if(r)for(;s!=r.length;++s){var i=Xe(r[s]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Iy[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return t}var T8=function(){var e=cu("t"),t=cu("rPr");function r(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:yt(l[1])},c=i.match(t);return c&&(o.s=S8(c[1])),o}var s=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(s,"").split(n).map(r).filter(function(o){return o.v})}}(),_8=function(){var t=/(\r\n|\n)/g;function r(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),n}function s(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(s).join("")}}(),E8=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,C8=/<(?:\w+:)?r>/,D8=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Zy(e,t){var r=t?t.cellHTML:!0,s={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(s.t=yt(Rt(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),s.r=Rt(e),r&&(s.h=Uy(s.t))):e.match(C8)&&(s.r=Rt(e),s.t=yt(Rt((e.replace(D8,"").match(E8)||[]).join("").replace(Qr,""))),r&&(s.h=_8(T8(s.r)))),s):{t:""}}var A8=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,P8=/<(?:\w+:)?(?:si|sstItem)>/g,R8=/<\/(?:\w+:)?(?:si|sstItem)>/;function F8(e,t){var r=[],s="";if(!e)return r;var n=e.match(A8);if(n){s=n[2].replace(P8,"").split(R8);for(var i=0;i!=s.length;++i){var l=Zy(s[i].trim(),t);l!=null&&(r[r.length]=l)}n=Xe(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function I8(e){return[e.read_shift(4),e.read_shift(4)]}function M8(e,t){var r=[],s=!1;return Mn(e,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:s=!0;break;case 36:s=!1;break;default:if(l.T,!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function bT(e){for(var t=[],r=e.split(""),s=0;s<r.length;++s)t[s]=r[s].charCodeAt(0);return t}function Sn(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function O8(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Sn(e,4),t.U=Sn(e,4),t.W=Sn(e,4),t}function L8(e){for(var t=e.read_shift(4),r=e.l+t-4,s={},n=e.read_shift(4),i=[];n-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(s.name=e.read_shift(0,"lpp4"),s.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return s}function B8(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(L8(e));return t}function z8(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function $8(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Sn(e,4),t.U=Sn(e,4),t.W=Sn(e,4),t}function U8(e){var t=$8(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function wT(e,t){var r=e.l+t,s={};s.Flags=e.read_shift(4)&63,e.l+=4,s.AlgID=e.read_shift(4);var n=!1;switch(s.AlgID){case 26126:case 26127:case 26128:n=s.Flags==36;break;case 26625:n=s.Flags==4;break;case 0:n=s.Flags==16||s.Flags==4||s.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+s.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return s.AlgIDHash=e.read_shift(4),s.KeySize=e.read_shift(4),s.ProviderType=e.read_shift(4),e.l+=8,s.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,s}function NT(e,t){var r={},s=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,s),e.l=s,r}function V8(e){var t=Sn(e);switch(t.Minor){case 2:return[t.Minor,H8(e)];case 3:return[t.Minor,K8()];case 4:return[t.Minor,G8(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function H8(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),s=wT(e,r),n=NT(e,e.length-e.l);return{t:"Std",h:s,v:n}}function K8(){throw new Error("File is password-protected: ECMA-376 Extensible")}function G8(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),s={};return r.replace(Qr,function(i){var l=Xe(i);switch(nn(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){s[o]=l[o]});break;case"<dataIntegrity":s.encryptedHmacKey=l.encryptedHmacKey,s.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":s.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":s.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":s.encs.push(l);break;default:throw l[0]}}),s}function W8(e,t){var r={},s=r.EncryptionVersionInfo=Sn(e,4);if(t-=4,s.Minor!=2)throw new Error("unrecognized minor version code: "+s.Minor);if(s.Major>4||s.Major<2)throw new Error("unrecognized major version code: "+s.Major);r.Flags=e.read_shift(4),t-=4;var n=e.read_shift(4);return t-=4,r.EncryptionHeader=wT(e,n),t-=n,r.EncryptionVerifier=NT(e,t),r}function Y8(e){var t={},r=t.EncryptionVersionInfo=Sn(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function q8(e){var t=0,r,s=bT(e),n=s.length+1,i,l,o,c,d;for(r=Bi(n),r[0]=s.length,i=1;i!=n;++i)r[i]=s[i-1];for(i=n-1;i>=0;--i)l=r[i],o=t&16384?1:0,c=t<<1&32767,d=o|c,t=d^l;return t^52811}var kT=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],s=function(l){return(l/2|l*128)&255},n=function(l,o){return s(l^o)},i=function(l){for(var o=t[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var u=l[d],h=0;h!=7;++h)u&64&&(o^=r[c]),u*=2,--c;return o};return function(l){for(var o=bT(l),c=i(o),d=o.length,u=Bi(16),h=0;h!=16;++h)u[h]=0;var f,x,p;for((d&1)===1&&(f=c>>8,u[d]=n(e[0],f),--d,f=c&255,x=o[o.length-1],u[d]=n(x,f));d>0;)--d,f=c>>8,u[d]=n(o[d],f),--d,f=c&255,u[d]=n(o[d],f);for(d=15,p=15-o.length;p>0;)f=c>>8,u[d]=n(e[p],f),--d,--p,f=c&255,u[d]=n(o[d],f),--d,--p;return u}}(),X8=function(e,t,r,s,n){n||(n=t),s||(s=kT(e));var i,l;for(i=0;i!=t.length;++i)l=t[i],l^=s[r],l=(l>>5|l<<3)&255,n[i]=l,++r;return[n,r,s]},Q8=function(e){var t=0,r=kT(e);return function(s){var n=X8("",s,t,r);return t=n[1],n[0]}};function Z8(e,t,r,s){var n={key:ir(e),verificationBytes:ir(e)};return r.password&&(n.verifier=q8(r.password)),s.valid=n.verificationBytes===n.verifier,s.valid&&(s.insitu=Q8(r.password)),n}function J8(e,t,r){var s=r||{};return s.Info=e.read_shift(2),e.l-=2,s.Info===1?s.Data=Y8(e):s.Data=W8(e,t),s}function eL(e,t,r){var s={Type:r.biff>=8?e.read_shift(2):0};return s.Type?J8(e,t-2,s):Z8(e,r.biff>=8?t:t-2,r,s),s}var tL=function(){function e(n,i){switch(i.type){case"base64":return t(Ls(n),i);case"binary":return t(n,i);case"buffer":return t(dt&&Buffer.isBuffer(n)?n.toString("binary"):Wl(n),i);case"array":return t(zl(n),i)}throw new Error("Unrecognized type "+i.type)}function t(n,i){var l=i||{},o=l.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(o)&&(o[h]=[]);for(var f=/\\\w+\b/g,x=0,p,m=-1;p=f.exec(u);){switch(p[0]){case"\\cell":var y=u.slice(x,f.lastIndex-p[0].length);if(y[0]==" "&&(y=y.slice(1)),++m,y.length){var g={v:y,t:"s"};Array.isArray(o)?o[h][m]=g:o[et({r:h,c:m})]=g}break}x=f.lastIndex}m>d.e.c&&(d.e.c=m)}),o["!ref"]=ft(d),o}function r(n,i){return Ki(e(n,i),i)}function s(n){for(var i=["{\\rtf1\\ansi"],l=Qt(n["!ref"]),o,c=Array.isArray(n),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=l.s.c;u<=l.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=l.s.c;u<=l.e.c;++u){var h=et({r:d,c:u});o=c?(n[d]||[])[u]:n[h],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Rn(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:s}}();function rL(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function hu(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function sL(e){var t=e[0]/255,r=e[1]/255,s=e[2]/255,n=Math.max(t,r,s),i=Math.min(t,r,s),l=n-i;if(l===0)return[0,0,t];var o=0,c=0,d=n+i;switch(c=l/(d>1?2-d:d),n){case t:o=((r-s)/l+6)%6;break;case r:o=(s-t)/l+2;break;case s:o=(t-r)/l+4;break}return[o/6,c,d/2]}function aL(e){var t=e[0],r=e[1],s=e[2],n=r*2*(s<.5?s:1-s),i=s-n/2,l=[i,i,i],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=n*o,l[0]+=n,l[1]+=c;break;case 1:c=n*(2-o),l[0]+=c,l[1]+=n;break;case 2:c=n*(o-2),l[1]+=n,l[2]+=c;break;case 3:c=n*(4-o),l[1]+=c,l[2]+=n;break;case 4:c=n*(o-4),l[2]+=n,l[0]+=c;break;case 5:c=n*(6-o),l[2]+=c,l[0]+=n;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function hf(e,t){if(t===0)return e;var r=sL(rL(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),hu(aL(r))}var jT=6,nL=15,iL=1,ns=jT;function ff(e){return Math.floor((e+Math.round(128/ns)/256)*ns)}function mf(e){return Math.floor((e-5)/ns*100+.5)/100}function Vp(e){return Math.round((e*ns+5)/ns*256)/256}function Qm(e){return Vp(mf(ff(e)))}function Jy(e){var t=Math.abs(e-Qm(e)),r=ns;if(t>.005)for(ns=iL;ns<nL;++ns)Math.abs(e-Qm(e))<=t&&(t=Math.abs(e-Qm(e)),r=ns);ns=r}function vc(e){e.width?(e.wpx=ff(e.width),e.wch=mf(e.wpx),e.MDW=ns):e.wpx?(e.wch=mf(e.wpx),e.width=Vp(e.wch),e.MDW=ns):typeof e.wch=="number"&&(e.width=Vp(e.wch),e.wpx=ff(e.width),e.MDW=ns),e.customWidth&&delete e.customWidth}var lL=96,ST=lL;function TT(e){return e*96/ST}function fu(e){return e*ST/96}var oL={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function cL(e,t,r,s){t.Borders=[];var n={},i=!1;(e[0].match(Qr)||[]).forEach(function(l){var o=Xe(l);switch(nn(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=zt(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=zt(o.diagonalDown)),t.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function dL(e,t,r,s){t.Fills=[];var n={},i=!1;(e[0].match(Qr)||[]).forEach(function(l){var o=Xe(l);switch(nn(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},t.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function uL(e,t,r,s){t.Fonts=[];var n={},i=!1;(e[0].match(Qr)||[]).forEach(function(l){var o=Xe(l);switch(nn(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=Rt(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?zt(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?zt(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?zt(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?zt(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?zt(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?zt(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?zt(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=Iy[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=zt(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var c=_l[n.color.index];n.color.index==81&&(c=_l[1]),c||(c=_l[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=hf(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function hL(e,t,r){t.NumberFmt=[];for(var s=sn(st),n=0;n<s.length;++n)t.NumberFmt[s[n]]=st[s[n]];var i=e[0].match(Qr);if(i)for(n=0;n<i.length;++n){var l=Xe(i[n]);switch(nn(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=yt(Rt(l.formatCode)),c=parseInt(l.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}Tl(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}var I0=["numFmtId","fillId","fontId","borderId","xfId"],M0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function fL(e,t,r){t.CellXf=[];var s,n=!1;(e[0].match(Qr)||[]).forEach(function(i){var l=Xe(i),o=0;switch(nn(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(s=l,delete s[0],o=0;o<I0.length;++o)s[I0[o]]&&(s[I0[o]]=parseInt(s[I0[o]],10));for(o=0;o<M0.length;++o)s[M0[o]]&&(s[M0[o]]=zt(s[M0[o]]));if(t.NumberFmt&&s.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[s.numFmtId]==t.NumberFmt[o]){s.numFmtId=o;break}}t.CellXf.push(s);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=zt(l.wrapText)),s.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}var mL=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,s=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(t))&&hL(h,u,d),(h=o.match(n))&&uL(h,u,c,d),(h=o.match(s))&&dL(h,u,c,d),(h=o.match(i))&&cL(h,u,c,d),(h=o.match(r))&&fL(h,u,d),u}}();function xL(e,t){var r=e.read_shift(2),s=Yr(e);return[r,s]}function pL(e,t,r){var s={};s.sz=e.read_shift(2)/20;var n=TM(e);n.fItalic&&(s.italic=1),n.fCondense&&(s.condense=1),n.fExtend&&(s.extend=1),n.fShadow&&(s.shadow=1),n.fOutline&&(s.outline=1),n.fStrikeout&&(s.strike=1);var i=e.read_shift(2);switch(i===700&&(s.bold=1),e.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(s.underline=l);var o=e.read_shift(1);o>0&&(s.family=o);var c=e.read_shift(1);switch(c>0&&(s.charset=c),e.l++,s.color=SM(e),e.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=Yr(e),s}var gL=Xr;function yL(e,t){var r=e.l+t,s=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:s,numFmtId:n}}var vL=Xr;function bL(e,t,r){var s={};s.NumberFmt=[];for(var n in st)s.NumberFmt[n]=st[n];s.CellXf=[],s.Fonts=[];var i=[],l=!1;return Mn(e,function(c,d,u){switch(u){case 44:s.NumberFmt[c[0]]=c[1],Tl(c[1],c[0]);break;case 43:s.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=hf(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&s.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(u),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),s}var wL=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function NL(e,t,r){t.themeElements.clrScheme=[];var s={};(e[0].match(Qr)||[]).forEach(function(n){var i=Xe(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":s.rgb=i.val;break;case"<a:sysClr":s.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[wL.indexOf(i[0])]=s,s={}):s.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function kL(){}function jL(){}var SL=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,TL=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,_L=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function EL(e,t,r){t.themeElements={};var s;[["clrScheme",SL,NL],["fontScheme",TL,kL],["fmtScheme",_L,jL]].forEach(function(n){if(!(s=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](s,t,r)})}var CL=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function _T(e,t){(!e||e.length===0)&&(e=DL());var r,s={};if(!(r=e.match(CL)))throw new Error("themeElements not found in theme");return EL(r[0],s,t),s.raw=e,s}function DL(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[L4];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function AL(e,t,r){var s=e.l+t,n=e.read_shift(4);if(n!==124226){if(!r.cellStyles){e.l=s;return}var i=e.slice(e.l);e.l=s;var l;try{l=O4(i,{type:"array"})}catch{return}var o=Rs(l,"theme/theme/theme1.xml",!0);if(o)return _T(o,r)}}function PL(e){return e.read_shift(4)}function RL(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=FL(e,4);break;case 2:t.xclrValue=fT(e);break;case 3:t.xclrValue=PL(e);break;case 4:e.l+=4;break}return e.l+=8,t}function FL(e,t){return Xr(e,t)}function IL(e,t){return Xr(e,t)}function ML(e){var t=e.read_shift(2),r=e.read_shift(2)-4,s=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:s[1]=RL(e);break;case 6:s[1]=IL(e,r);break;case 14:case 15:s[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return s}function OL(e,t){var r=e.l+t;e.l+=2;var s=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),i=[];n-- >0;)i.push(ML(e,r-e.l));return{ixfe:s,ext:i}}function LL(e,t){t.forEach(function(r){switch(r[0]){}})}function BL(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Yr(e)}}function zL(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function $L(e){return e.l+=4,e.read_shift(4)!=0}function UL(e,t,r){var s={Types:[],Cell:[],Value:[]},n=r||{},i=[],l=!1,o=2;return Mn(e,function(c,d,u){switch(u){case 335:s.Types.push({name:c.name});break;case 51:c.forEach(function(h){o==1?s.Cell.push({type:s.Types[h[0]-1].name,index:h[1]}):o==0&&s.Value.push({type:s.Types[h[0]-1].name,index:h[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(u),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),s}function VL(e,t,r){var s={Types:[],Cell:[],Value:[]};if(!e)return s;var n=!1,i=2,l;return e.replace(Qr,function(o){var c=Xe(o);switch(nn(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":s.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<s.Types.length;++d)s.Types[d].name==c.name&&(l=s.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?s.Cell.push({type:s.Types[c.t-1].name,index:+c.v}):i==0&&s.Value.push({type:s.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),s}function HL(e){var t=[];if(!e)return t;var r=1;return(e.match(Qr)||[]).forEach(function(s){var n=Xe(s);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n);break}}),t}function KL(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=et(r);var s=e.read_shift(1);return s&2&&(t.l="1"),s&8&&(t.a="1"),t}function GL(e,t,r){var s=[];return Mn(e,function(i,l,o){switch(o){case 63:s.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),s}function WL(e,t,r,s){if(!e)return e;var n=s||{},i=!1;Mn(e,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function YL(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function t2(e,t,r,s){var n=Array.isArray(e),i;t.forEach(function(l){var o=is(l.ref);if(n?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},n?e[o.r][o.c]=i:e[l.ref]=i;var c=Qt(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=ft(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:l.author,t:l.t,r:l.r,T:r};l.h&&(u.h=l.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&s){for(h=0;h<s.length;++h)if(u.a==s[h].id){u.a=s[h].name||u.a;break}}i.c.push(u)})}function qL(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],s=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Xe(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=is(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var h=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!h&&!!h[1]&&Zy(h[1])||{r:"",t:"",h:""};d.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),d.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=f.h),s.push(d)}}}}),s}function XL(e,t){var r=[],s=!1,n={},i=0;return e.replace(Qr,function(o,c){var d=Xe(o);switch(nn(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":n.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":s=!0;break;case"</mentions>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function QL(e,t){var r=[],s=!1;return e.replace(Qr,function(i){var l=Xe(i);switch(nn(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function ZL(e){var t={};t.iauthor=e.read_shift(4);var r=ql(e);return t.rfx=r.s,t.ref=et(r.s),e.l+=16,t}var JL=Yr;function e7(e,t){var r=[],s=[],n={},i=!1;return Mn(e,function(o,c,d){switch(d){case 632:s.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=s[n.iauthor],delete n.iauthor,t.sheetRows&&n.rfx&&t.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var t7="application/vnd.ms-office.vbaProject";function r7(e){var t=ht.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,s){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ht.utils.cfb_add(t,n,e.FileIndex[s].content)}}),ht.write(t)}function s7(){return{"!type":"dialog"}}function a7(){return{"!type":"dialog"}}function n7(){return{"!type":"macro"}}function i7(){return{"!type":"macro"}}var Bo=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(s,n,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=l.length>0?parseInt(l,10)|0:0;return o?u+=t.c:--u,c?d+=t.r:--d,n+(o?"":"$")+gr(u)+(c?"":"$")+Ir(d)}return function(n,i){return t=i,n.replace(e,r)}}(),ET=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,l7=function(){return function(t,r){return t.replace(ET,function(s,n,i,l,o,c){var d=Gy(l)-(i?0:r.c),u=Ky(c)-(o?0:r.r),h=u==0?"":o?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return n+"R"+h+"C"+f})}}();function CT(e,t){return e.replace(ET,function(r,s,n,i,l,o){return s+(n=="$"?n+i:gr(Gy(i)+t.c))+(l=="$"?l+o:Ir(Ky(o)+t.r))})}function o7(e,t,r){var s=Cc(t),n=s.s,i=is(r),l={r:i.r-n.r,c:i.c-n.c};return CT(e,l)}function c7(e){return e.length!=1}function r2(e){return e.replace(/_xlfn\./g,"")}function sr(e){e.l+=1}function zi(e,t){var r=e.read_shift(t==1?1:2);return[r&16383,r>>14&1,r>>15&1]}function DT(e,t,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return AT(e);r.biff==12&&(s=4)}var n=e.read_shift(s),i=e.read_shift(s),l=zi(e,2),o=zi(e,2);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function AT(e){var t=zi(e,2),r=zi(e,2),s=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:s,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function d7(e,t,r){if(r.biff<8)return AT(e);var s=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),i=zi(e,2),l=zi(e,2);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function PT(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return u7(e);var s=e.read_shift(r&&r.biff==12?4:2),n=zi(e,2);return{r:s,c:n[0],cRel:n[1],rRel:n[2]}}function u7(e){var t=zi(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function h7(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function f7(e,t,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return m7(e);var n=e.read_shift(s>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function m7(e){var t=e.read_shift(2),r=e.read_shift(1),s=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,s==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:s}}function x7(e,t,r){var s=(e[e.l++]&96)>>5,n=DT(e,r.biff>=2&&r.biff<=5?6:8,r);return[s,n]}function p7(e,t,r){var s=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=DT(e,i,r);return[s,n,l]}function g7(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function y7(e,t,r){var s=(e[e.l++]&96)>>5,n=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[s,n]}function v7(e,t,r){var s=(e[e.l++]&96)>>5,n=d7(e,t-1,r);return[s,n]}function b7(e,t,r){var s=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[s]}function s2(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function w7(e,t,r){e.l+=2;for(var s=e.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=s;++i)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function N7(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function k7(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(r&&r.biff==2?1:2)]}function j7(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function S7(e,t,r){var s=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[s]}function RT(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function T7(e){return e.read_shift(2),RT(e)}function _7(e){return e.read_shift(2),RT(e)}function E7(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var n=PT(e,0,r);return[s,n]}function C7(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var n=f7(e,0,r);return[s,n]}function D7(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=PT(e,0,r);return[s,n,i]}function A7(e,t,r){var s=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[P9[n],MT[n],s]}function P7(e,t,r){var s=e[e.l++],n=e.read_shift(1),i=r&&r.biff<=3?[s==88?-1:0,e.read_shift(1)]:R7(e);return[n,(i[0]===0?MT:A9)[i[1]]]}function R7(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function F7(e,t,r){e.l+=r&&r.biff==2?3:4}function I7(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var s=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[s,n]}function M7(e){return e.l++,Xl[e.read_shift(1)]}function O7(e){return e.l++,e.read_shift(2)}function L7(e){return e.l++,e.read_shift(1)!==0}function B7(e){return e.l++,Gr(e)}function z7(e,t,r){return e.l++,$u(e,t-1,r)}function $7(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Zt(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Xl[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Gr(e);break;case 2:r[1]=Ql(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function U7(e,t,r){for(var s=e.read_shift(r.biff==12?4:2),n=[],i=0;i!=s;++i)n.push((r.biff==12?ql:em)(e));return n}function V7(e,t,r){var s=0,n=0;r.biff==12?(s=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),s=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--n==0&&(n=256));for(var i=0,l=[];i!=s&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=$7(e,r.biff);return l}function H7(e,t,r){var s=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[s,0,i]}function K7(e,t,r){if(r.biff==5)return G7(e);var s=e.read_shift(1)>>>5&3,n=e.read_shift(2),i=e.read_shift(4);return[s,n,i]}function G7(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var s=e.read_shift(2);return e.l+=12,[t,r,s]}function W7(e,t,r){var s=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[s,n]}function Y7(e,t,r){var s=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[s,n]}function q7(e,t,r){var s=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[s]}function X7(e,t,r){var s=(e[e.l++]&96)>>5,n=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[s,n]}var Q7=Xr,Z7=Xr,J7=Xr;function Vu(e,t,r){return e.l+=2,[h7(e)]}function ev(e){return e.l+=6,[]}var e9=Vu,t9=ev,r9=ev,s9=Vu;function FT(e){return e.l+=2,[ir(e),e.read_shift(2)&1]}var a9=Vu,n9=FT,i9=ev,l9=Vu,o9=Vu,c9=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function d9(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),s=e.read_shift(4),n=e.read_shift(2),i=e.read_shift(2),l=c9[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:s,c:n,C:i}}function u9(e){return e.l+=2,[e.read_shift(4)]}function h9(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function f9(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function m9(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function x9(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function p9(e){return e.l+=4,[0,0]}var a2={1:{n:"PtgExp",f:I7},2:{n:"PtgTbl",f:J7},3:{n:"PtgAdd",f:sr},4:{n:"PtgSub",f:sr},5:{n:"PtgMul",f:sr},6:{n:"PtgDiv",f:sr},7:{n:"PtgPower",f:sr},8:{n:"PtgConcat",f:sr},9:{n:"PtgLt",f:sr},10:{n:"PtgLe",f:sr},11:{n:"PtgEq",f:sr},12:{n:"PtgGe",f:sr},13:{n:"PtgGt",f:sr},14:{n:"PtgNe",f:sr},15:{n:"PtgIsect",f:sr},16:{n:"PtgUnion",f:sr},17:{n:"PtgRange",f:sr},18:{n:"PtgUplus",f:sr},19:{n:"PtgUminus",f:sr},20:{n:"PtgPercent",f:sr},21:{n:"PtgParen",f:sr},22:{n:"PtgMissArg",f:sr},23:{n:"PtgStr",f:z7},26:{n:"PtgSheet",f:h9},27:{n:"PtgEndSheet",f:f9},28:{n:"PtgErr",f:M7},29:{n:"PtgBool",f:L7},30:{n:"PtgInt",f:O7},31:{n:"PtgNum",f:B7},32:{n:"PtgArray",f:b7},33:{n:"PtgFunc",f:A7},34:{n:"PtgFuncVar",f:P7},35:{n:"PtgName",f:H7},36:{n:"PtgRef",f:E7},37:{n:"PtgArea",f:x7},38:{n:"PtgMemArea",f:W7},39:{n:"PtgMemErr",f:Q7},40:{n:"PtgMemNoMem",f:Z7},41:{n:"PtgMemFunc",f:Y7},42:{n:"PtgRefErr",f:q7},43:{n:"PtgAreaErr",f:g7},44:{n:"PtgRefN",f:C7},45:{n:"PtgAreaN",f:v7},46:{n:"PtgMemAreaN",f:m9},47:{n:"PtgMemNoMemN",f:x9},57:{n:"PtgNameX",f:K7},58:{n:"PtgRef3d",f:D7},59:{n:"PtgArea3d",f:p7},60:{n:"PtgRefErr3d",f:X7},61:{n:"PtgAreaErr3d",f:y7},255:{}},g9={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},y9={1:{n:"PtgElfLel",f:FT},2:{n:"PtgElfRw",f:l9},3:{n:"PtgElfCol",f:e9},6:{n:"PtgElfRwV",f:o9},7:{n:"PtgElfColV",f:s9},10:{n:"PtgElfRadical",f:a9},11:{n:"PtgElfRadicalS",f:i9},13:{n:"PtgElfColS",f:t9},15:{n:"PtgElfColSV",f:r9},16:{n:"PtgElfRadicalLel",f:n9},25:{n:"PtgList",f:d9},29:{n:"PtgSxName",f:u9},255:{}},v9={0:{n:"PtgAttrNoop",f:p9},1:{n:"PtgAttrSemi",f:S7},2:{n:"PtgAttrIf",f:k7},4:{n:"PtgAttrChoose",f:w7},8:{n:"PtgAttrGoto",f:N7},16:{n:"PtgAttrSum",f:F7},32:{n:"PtgAttrBaxcel",f:s2},33:{n:"PtgAttrBaxcel",f:s2},64:{n:"PtgAttrSpace",f:T7},65:{n:"PtgAttrSpaceSemi",f:_7},128:{n:"PtgAttrIfError",f:j7},255:{}};function Hu(e,t,r,s){if(s.biff<8)return Xr(e,t);for(var n=e.l+t,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=V7(e,0,s),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=U7(e,r[l][1],s),i.push(r[l][2]);break;case"PtgExp":s&&s.biff==12&&(r[l][1][1]=e.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=n-e.l,t!==0&&i.push(Xr(e,t)),i}function Ku(e,t,r){for(var s=e.l+t,n,i,l=[];s!=e.l;)t=s-e.l,i=e[e.l],n=a2[i]||a2[g9[i]],(i===24||i===25)&&(n=(i===24?y9:v9)[e[e.l+1]]),!n||!n.f?Xr(e,t):l.push([n.n,n.f(e,t,r)]);return l}function b9(e){for(var t=[],r=0;r<e.length;++r){for(var s=e[r],n=[],i=0;i<s.length;++i){var l=s[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var w9={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function N9(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function IT(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var s=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!s)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[s[0]][0]){case 357:return n=s[1]==-1?"#REF":e.SheetNames[s[1]],s[1]==s[2]?n:n+":"+e.SheetNames[s[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[s[0]][0];case 355:default:return"SH33TJSSRC"+e[s[0]][0]}switch(e[s[0]][0][0]){case 1025:return n=s[1]==-1?"#REF":e.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?n:n+":"+e.SheetNames[s[2]];case 14849:return e[s[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[s[0]][0][3]?(n=s[1]==-1?"#REF":e[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?n:n+":"+e[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function n2(e,t,r){var s=IT(e,t,r);return s=="#REF"?s:N9(s,r)}function Ur(e,t,r,s,n){var i=n&&n.biff||8,l={s:{c:0,r:0},e:{c:0,r:0}},o=[],c,d,u,h=0,f=0,x,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,y="",g=0,v=e[0].length;g<v;++g){var b=e[0][g];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),m>=0){switch(e[0][m][1][0]){case 0:y=qt(" ",e[0][m][1][1]);break;case 1:y=qt("\r",e[0][m][1][1]);break;default:if(y="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}d=d+y,m=-1}o.push(d+w9[b[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Sd(b[1][1],l,n),o.push(Td(u,i));break;case"PtgRefN":u=r?Sd(b[1][1],r,n):b[1][1],o.push(Td(u,i));break;case"PtgRef3d":h=b[1][1],u=Sd(b[1][2],l,n),p=n2(s,h,n),o.push(p+"!"+Td(u,i));break;case"PtgFunc":case"PtgFuncVar":var S=b[1][0],D=b[1][1];S||(S=0),S&=127;var N=S==0?[]:o.slice(-S);o.length-=S,D==="User"&&(D=N.shift()),o.push(D+"("+N.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":x=Bw(b[1][1],r?{s:r}:l,n),o.push(qm(x,n));break;case"PtgArea":x=Bw(b[1][1],l,n),o.push(qm(x,n));break;case"PtgArea3d":h=b[1][1],x=b[1][2],p=n2(s,h,n),o.push(p+"!"+qm(x,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=b[1][2];var E=(s.names||[])[f-1]||(s[0]||[])[f],w=E?E.Name:"SH33TJSNAME"+String(f);w&&w.slice(0,6)=="_xlfn."&&!n.xlfn&&(w=w.slice(6)),o.push(w);break;case"PtgNameX":var _=b[1][1];f=b[1][2];var C;if(n.biff<=5)_<0&&(_=-_),s[_]&&(C=s[_][f]);else{var T="";if(((s[_]||[])[0]||[])[0]==14849||(((s[_]||[])[0]||[])[0]==1025?s[_][f]&&s[_][f].itab>0&&(T=s.SheetNames[s[_][f].itab-1]+"!"):T=s.SheetNames[f-1]+"!"),s[_]&&s[_][f])T+=s[_][f].Name;else if(s[0]&&s[0][f])T+=s[0][f].Name;else{var j=(IT(s,_,n)||"").split(";;");j[f-1]?T=j[f-1]:T+="SH33TJSERRX"}o.push(T);break}C||(C={Name:"SH33TJSERRY"}),o.push(C.Name);break;case"PtgParen":var F="(",O=")";if(m>=0){switch(y="",e[0][m][1][0]){case 2:F=qt(" ",e[0][m][1][1])+F;break;case 3:F=qt("\r",e[0][m][1][1])+F;break;case 4:O=qt(" ",e[0][m][1][1])+O;break;case 5:O=qt("\r",e[0][m][1][1])+O;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}o.push(F+o.pop()+O);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:b[1][1],r:b[1][0]};var z={c:r.c,r:r.r};if(s.sharedf[et(u)]){var G=s.sharedf[et(u)];o.push(Ur(G,l,z,s,n))}else{var q=!1;for(c=0;c!=s.arrayf.length;++c)if(d=s.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Ur(d[1],l,z,s,n)),q=!0;break}q||o.push(b[1])}break;case"PtgArray":o.push("{"+b9(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=g;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&m>=0&&H.indexOf(e[0][g][0])==-1){b=e[0][m];var A=!0;switch(b[1][0]){case 4:A=!1;case 0:y=qt(" ",b[1][1]);break;case 5:A=!1;case 1:y=qt("\r",b[1][1]);break;default:if(y="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((A?y:"")+o.pop()+(A?"":y)),m=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function k9(e,t,r){var s=e.l+t,n=r.biff==2?1:2,i,l=e.read_shift(n);if(l==65535)return[[],Xr(e,t-2)];var o=Ku(e,l,r);return t!==l+n&&(i=Hu(e,t-l-n,o,r)),e.l=s,[o,i]}function j9(e,t,r){var s=e.l+t,n=r.biff==2?1:2,i,l=e.read_shift(n);if(l==65535)return[[],Xr(e,t-2)];var o=Ku(e,l,r);return t!==l+n&&(i=Hu(e,t-l-n,o,r)),e.l=s,[o,i]}function S9(e,t,r,s){var n=e.l+t,i=Ku(e,s,r),l;return n!==e.l&&(l=Hu(e,n-e.l,i,r)),[i,l]}function T9(e,t,r){var s=e.l+t,n,i=e.read_shift(2),l=Ku(e,i,r);return i==65535?[[],Xr(e,t-2)]:(t!==i+2&&(n=Hu(e,s-i-2,l,r)),[l,n])}function _9(e){var t;if(bn(e,e.l+6)!==65535)return[Gr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Zm(e,t,r){var s=e.l+t,n=ln(e);r.biff==2&&++e.l;var i=_9(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=j9(e,s-e.l,r);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function tm(e,t,r){var s=e.read_shift(4),n=Ku(e,s,r),i=e.read_shift(4),l=i>0?Hu(e,i,n,r):null;return[n,l]}var E9=tm,rm=tm,C9=tm,D9=tm,A9={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},MT={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},P9={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function i2(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Jm(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Dd={},zo={};function Ad(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function OT(e,t,r,s,n,i){try{s.cellNF&&(e.z=st[t])}catch(o){if(s.WTF)throw o}if(!(e.t==="z"&&!s.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Er(e.v)),(!s||s.cellText!==!1)&&e.t!=="z")try{if(st[t]==null&&Tl(FI[t]||"General",t),e.t==="e")e.w=e.w||Xl[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ou(e.v);else if(e.t==="d"){var l=us(e.v);(l|0)===l?e.w=l.toString(10):e.w=ou(l)}else{if(e.v===void 0)return"";e.w=Bl(e.v,zo)}else e.t==="d"?e.w=sa(t,us(e.v),zo):e.w=sa(t,e.v,zo)}catch(o){if(s.WTF)throw o}if(s.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=hf(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),s.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=hf(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),s.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(s.WTF&&i.Fills)throw o}}}function R9(e,t){var r=Qt(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ft(r))}var F9=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,I9=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,M9=/<(?:\w:)?hyperlink [^>]*>/mg,O9=/"(\w*:\w*)"/,L9=/<(?:\w:)?col\b[^>]*[\/]?>/g,B9=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,z9=/<(?:\w:)?pageMargins[^>]*\/>/g,LT=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,$9=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,U9=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function V9(e,t,r,s,n,i,l){if(!e)return e;s||(s={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=e.match(I9);h?(d=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):d=u=e;var f=d.match(LT);f?tv(f[0],o,n,r):(f=d.match($9))&&H9(f[0],f[1]||"",o,n,r);var x=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(x>0){var p=d.slice(x,x+50).match(O9);p&&R9(o,p[1])}var m=d.match(U9);m&&m[1]&&X9(m[1],n);var y=[];if(t.cellStyles){var g=d.match(L9);g&&W9(y,g)}h&&Q9(h[1],o,t,c,i,l);var v=u.match(B9);v&&(o["!autofilter"]=Y9(v[0]));var b=[],S=u.match(F9);if(S)for(x=0;x!=S.length;++x)b[x]=Qt(S[x].slice(S[x].indexOf('"')+1));var D=u.match(M9);D&&K9(o,D,s);var N=u.match(z9);if(N&&(o["!margins"]=G9(Xe(N[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=ft(c)),t.sheetRows>0&&o["!ref"]){var E=Qt(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=ft(E))}return y.length>0&&(o["!cols"]=y),b.length>0&&(o["!merges"]=b),o}function tv(e,t,r,s){var n=Xe(e);r.Sheets[s]||(r.Sheets[s]={}),n.codeName&&(r.Sheets[s].CodeName=yt(Rt(n.codeName)))}function H9(e,t,r,s,n){tv(e.slice(0,e.indexOf(">")),r,s,n)}function K9(e,t,r){for(var s=Array.isArray(e),n=0;n!=t.length;++n){var i=Xe(Rt(t[n]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+yt(i.location))):(i.Target="#"+yt(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Qt(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var u=et({c:d,r:c});s?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function G9(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function W9(e,t){for(var r=!1,s=0;s!=t.length;++s){var n=Xe(t[s],!0);n.hidden&&(n.hidden=zt(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,Jy(n.width)),vc(n);i<=l;)e[i++]=Fr(n)}}function Y9(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var q9=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function X9(e,t){t.Views||(t.Views=[{}]),(e.match(q9)||[]).forEach(function(r,s){var n=Xe(r);t.Views[s]||(t.Views[s]={}),+n.zoomScale&&(t.Views[s].zoom=+n.zoomScale),zt(n.rightToLeft)&&(t.Views[s].RTL=!0)})}var Q9=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,s=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=cu("v"),l=cu("f");return function(c,d,u,h,f,x){for(var p=0,m="",y=[],g=[],v=0,b=0,S=0,D="",N,E,w=0,_=0,C,T,j=0,F=0,O=Array.isArray(x.CellXf),z,G=[],q=[],H=Array.isArray(d),A=[],V={},L=!1,P=!!u.sheetStubs,I=c.split(t),R=0,U=I.length;R!=U;++R){m=I[R].trim();var M=m.length;if(M!==0){var J=0;e:for(p=0;p<M;++p)switch(m[p]){case">":if(m[p-1]!="/"){++p;break e}if(u&&u.cellStyles){if(E=Xe(m.slice(J,p),!0),w=E.r!=null?parseInt(E.r,10):w+1,_=-1,u.sheetRows&&u.sheetRows<w)continue;V={},L=!1,E.ht&&(L=!0,V.hpt=parseFloat(E.ht),V.hpx=fu(V.hpt)),E.hidden=="1"&&(L=!0,V.hidden=!0),E.outlineLevel!=null&&(L=!0,V.level=+E.outlineLevel),L&&(A[w-1]=V)}break;case"<":J=p;break}if(J>=p)break;if(E=Xe(m.slice(J,p),!0),w=E.r!=null?parseInt(E.r,10):w+1,_=-1,!(u.sheetRows&&u.sheetRows<w)){h.s.r>w-1&&(h.s.r=w-1),h.e.r<w-1&&(h.e.r=w-1),u&&u.cellStyles&&(V={},L=!1,E.ht&&(L=!0,V.hpt=parseFloat(E.ht),V.hpx=fu(V.hpt)),E.hidden=="1"&&(L=!0,V.hidden=!0),E.outlineLevel!=null&&(L=!0,V.level=+E.outlineLevel),L&&(A[w-1]=V)),y=m.slice(p).split(e);for(var se=0;se!=y.length&&y[se].trim().charAt(0)=="<";++se);for(y=y.slice(se),p=0;p!=y.length;++p)if(m=y[p].trim(),m.length!==0){if(g=m.match(r),v=p,b=0,S=0,m="<c "+(m.slice(0,1)=="<"?">":"")+m,g!=null&&g.length===2){for(v=0,D=g[1],b=0;b!=D.length&&!((S=D.charCodeAt(b)-64)<1||S>26);++b)v=26*v+S;--v,_=v}else++_;for(b=0;b!=m.length&&m.charCodeAt(b)!==62;++b);if(++b,E=Xe(m.slice(0,b),!0),E.r||(E.r=et({r:w-1,c:_})),D=m.slice(b),N={t:""},(g=D.match(i))!=null&&g[1]!==""&&(N.v=yt(g[1])),u.cellFormula){if((g=D.match(l))!=null&&g[1]!==""){if(N.f=yt(Rt(g[1])).replace(/\r\n/g,`
`),u.xlfn||(N.f=r2(N.f)),g[0].indexOf('t="array"')>-1)N.F=(D.match(n)||[])[1],N.F.indexOf(":")>-1&&G.push([Qt(N.F),N.F]);else if(g[0].indexOf('t="shared"')>-1){T=Xe(g[0]);var ae=yt(Rt(g[1]));u.xlfn||(ae=r2(ae)),q[parseInt(T.si,10)]=[T,ae,E.r]}}else(g=D.match(/<f[^>]*\/>/))&&(T=Xe(g[0]),q[T.si]&&(N.f=o7(q[T.si][1],q[T.si][2],E.r)));var ie=is(E.r);for(b=0;b<G.length;++b)ie.r>=G[b][0].s.r&&ie.r<=G[b][0].e.r&&ie.c>=G[b][0].s.c&&ie.c<=G[b][0].e.c&&(N.F=G[b][1])}if(E.t==null&&N.v===void 0)if(N.f||N.F)N.v=0,N.t="n";else if(P)N.t="z";else continue;else N.t=E.t||"n";switch(h.s.c>_&&(h.s.c=_),h.e.c<_&&(h.e.c=_),N.t){case"n":if(N.v==""||N.v==null){if(!P)continue;N.t="z"}else N.v=parseFloat(N.v);break;case"s":if(typeof N.v>"u"){if(!P)continue;N.t="z"}else C=Dd[parseInt(N.v,10)],N.v=C.t,N.r=C.r,u.cellHTML&&(N.h=C.h);break;case"str":N.t="s",N.v=N.v!=null?Rt(N.v):"",u.cellHTML&&(N.h=Uy(N.v));break;case"inlineStr":g=D.match(s),N.t="s",g!=null&&(C=Zy(g[1]))?(N.v=C.t,u.cellHTML&&(N.h=C.h)):N.v="";break;case"b":N.v=zt(N.v);break;case"d":u.cellDates?N.v=Er(N.v,1):(N.v=us(Er(N.v,1)),N.t="n");break;case"e":(!u||u.cellText!==!1)&&(N.w=N.v),N.v=nT[N.v];break}if(j=F=0,z=null,O&&E.s!==void 0&&(z=x.CellXf[E.s],z!=null&&(z.numFmtId!=null&&(j=z.numFmtId),u.cellStyles&&z.fillId!=null&&(F=z.fillId))),OT(N,j,F,u,f,x),u.cellDates&&O&&N.t=="n"&&Ec(st[j])&&(N.t="d",N.v=Jf(N.v)),E.cm&&u.xlmeta){var ce=(u.xlmeta.Cell||[])[+E.cm-1];ce&&ce.type=="XLDAPR"&&(N.D=!0)}if(H){var K=is(E.r);d[K.r]||(d[K.r]=[]),d[K.r][K.c]=N}else d[E.r]=N}}}}A.length>0&&(d["!rows"]=A)}}();function Z9(e,t){var r={},s=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=s,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}var J9=ql;function eB(){}function tB(e,t){var r={},s=e[e.l];return++e.l,r.above=!(s&64),r.left=!(s&128),e.l+=18,r.name=kM(e),r}function rB(e){var t=na(e);return[t]}function sB(e){var t=Yl(e);return[t]}function aB(e){var t=na(e),r=e.read_shift(1);return[t,r,"b"]}function nB(e){var t=Yl(e),r=e.read_shift(1);return[t,r,"b"]}function iB(e){var t=na(e),r=e.read_shift(1);return[t,r,"e"]}function lB(e){var t=Yl(e),r=e.read_shift(1);return[t,r,"e"]}function oB(e){var t=na(e),r=e.read_shift(4);return[t,r,"s"]}function cB(e){var t=Yl(e),r=e.read_shift(4);return[t,r,"s"]}function dB(e){var t=na(e),r=Gr(e);return[t,r,"n"]}function BT(e){var t=Yl(e),r=Gr(e);return[t,r,"n"]}function uB(e){var t=na(e),r=qy(e);return[t,r,"n"]}function hB(e){var t=Yl(e),r=qy(e);return[t,r,"n"]}function fB(e){var t=na(e),r=Wy(e);return[t,r,"is"]}function mB(e){var t=na(e),r=Yr(e);return[t,r,"str"]}function xB(e){var t=Yl(e),r=Yr(e);return[t,r,"str"]}function pB(e,t,r){var s=e.l+t,n=na(e);n.r=r["!row"];var i=e.read_shift(1),l=[n,i,"b"];if(r.cellFormula){e.l+=2;var o=rm(e,s-e.l,r);l[3]=Ur(o,null,n,r.supbooks,r)}else e.l=s;return l}function gB(e,t,r){var s=e.l+t,n=na(e);n.r=r["!row"];var i=e.read_shift(1),l=[n,i,"e"];if(r.cellFormula){e.l+=2;var o=rm(e,s-e.l,r);l[3]=Ur(o,null,n,r.supbooks,r)}else e.l=s;return l}function yB(e,t,r){var s=e.l+t,n=na(e);n.r=r["!row"];var i=Gr(e),l=[n,i,"n"];if(r.cellFormula){e.l+=2;var o=rm(e,s-e.l,r);l[3]=Ur(o,null,n,r.supbooks,r)}else e.l=s;return l}function vB(e,t,r){var s=e.l+t,n=na(e);n.r=r["!row"];var i=Yr(e),l=[n,i,"str"];if(r.cellFormula){e.l+=2;var o=rm(e,s-e.l,r);l[3]=Ur(o,null,n,r.supbooks,r)}else e.l=s;return l}var bB=ql;function wB(e,t){var r=e.l+t,s=ql(e),n=Yy(e),i=Yr(e),l=Yr(e),o=Yr(e);e.l=r;var c={rfx:s,relId:n,loc:i,display:o};return l&&(c.Tooltip=l),c}function NB(){}function kB(e,t,r){var s=e.l+t,n=rT(e),i=e.read_shift(1),l=[n];if(l[2]=i,r.cellFormula){var o=E9(e,s-e.l,r);l[1]=o}else e.l=s;return l}function jB(e,t,r){var s=e.l+t,n=ql(e),i=[n];if(r.cellFormula){var l=D9(e,s-e.l,r);i[1]=l,e.l=s}else e.l=s;return i}var SB=["left","right","top","bottom","header","footer"];function TB(e){var t={};return SB.forEach(function(r){t[r]=Gr(e)}),t}function _B(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function EB(){}function CB(){}function DB(e,t,r,s,n,i,l){if(!e)return e;var o=t||{};s||(s={"!id":{}});var c=o.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,f=!1,x,p,m,y,g,v,b,S,D,N=[];o.biff=12,o["!row"]=0;var E=0,w=!1,_=[],C={},T=o.supbooks||n.supbooks||[[]];if(T.sharedf=C,T.arrayf=_,T.SheetNames=n.SheetNames||n.Sheets.map(function(H){return H.name}),!o.supbooks&&(o.supbooks=T,n.Names))for(var j=0;j<n.Names.length;++j)T[0][j+1]=n.Names[j];var F=[],O=[],z=!1;xf[16]={n:"BrtShortReal",f:BT};var G;if(Mn(e,function(A,V,L){if(!f)switch(L){case 148:d=A;break;case 0:x=A,o.sheetRows&&o.sheetRows<=x.r&&(f=!0),S=Ir(y=x.r),o["!row"]=x.r,(A.hidden||A.hpt||A.level!=null)&&(A.hpt&&(A.hpx=fu(A.hpt)),O[A.r]=A);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:A[2]},A[2]){case"n":p.v=A[1];break;case"s":b=Dd[A[1]],p.v=b.t,p.r=b.r;break;case"b":p.v=!!A[1];break;case"e":p.v=A[1],o.cellText!==!1&&(p.w=Xl[p.v]);break;case"str":p.t="s",p.v=A[1];break;case"is":p.t="s",p.v=A[1].t;break}if((m=l.CellXf[A[0].iStyleRef])&&OT(p,m.numFmtId,null,o,i,l),g=A[0].c==-1?g+1:A[0].c,o.dense?(c[y]||(c[y]=[]),c[y][g]=p):c[gr(g)+S]=p,o.cellFormula){for(w=!1,E=0;E<_.length;++E){var P=_[E];x.r>=P[0].s.r&&x.r<=P[0].e.r&&g>=P[0].s.c&&g<=P[0].e.c&&(p.F=ft(P[0]),w=!0)}!w&&A.length>3&&(p.f=A[3])}if(u.s.r>x.r&&(u.s.r=x.r),u.s.c>g&&(u.s.c=g),u.e.r<x.r&&(u.e.r=x.r),u.e.c<g&&(u.e.c=g),o.cellDates&&m&&p.t=="n"&&Ec(st[m.numFmtId])){var I=cl(p.v);I&&(p.t="d",p.v=new Date(I.y,I.m-1,I.d,I.H,I.M,I.S,I.u))}G&&(G.type=="XLDAPR"&&(p.D=!0),G=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;p={t:"z",v:void 0},g=A[0].c==-1?g+1:A[0].c,o.dense?(c[y]||(c[y]=[]),c[y][g]=p):c[gr(g)+S]=p,u.s.r>x.r&&(u.s.r=x.r),u.s.c>g&&(u.s.c=g),u.e.r<x.r&&(u.e.r=x.r),u.e.c<g&&(u.e.c=g),G&&(G.type=="XLDAPR"&&(p.D=!0),G=void 0);break;case 176:N.push(A);break;case 49:G=((o.xlmeta||{}).Cell||[])[A-1];break;case 494:var R=s["!id"][A.relId];for(R?(A.Target=R.Target,A.loc&&(A.Target+="#"+A.loc),A.Rel=R):A.relId==""&&(A.Target="#"+A.loc),y=A.rfx.s.r;y<=A.rfx.e.r;++y)for(g=A.rfx.s.c;g<=A.rfx.e.c;++g)o.dense?(c[y]||(c[y]=[]),c[y][g]||(c[y][g]={t:"z",v:void 0}),c[y][g].l=A):(v=et({c:g,r:y}),c[v]||(c[v]={t:"z",v:void 0}),c[v].l=A);break;case 426:if(!o.cellFormula)break;_.push(A),D=o.dense?c[y][g]:c[gr(g)+S],D.f=Ur(A[1],u,{r:x.r,c:g},T,o),D.F=ft(A[0]);break;case 427:if(!o.cellFormula)break;C[et(A[0].s)]=A[1],D=o.dense?c[y][g]:c[gr(g)+S],D.f=Ur(A[1],u,{r:x.r,c:g},T,o);break;case 60:if(!o.cellStyles)break;for(;A.e>=A.s;)F[A.e--]={width:A.w/256,hidden:!!(A.flags&1),level:A.level},z||(z=!0,Jy(A.w/256)),vc(F[A.e+1]);break;case 161:c["!autofilter"]={ref:ft(A)};break;case 476:c["!margins"]=A;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),A.name&&(n.Sheets[r].CodeName=A.name),(A.above||A.left)&&(c["!outline"]={above:A.above,left:A.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),A.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!V.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+L.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=ft(d||u)),o.sheetRows&&c["!ref"]){var q=Qt(c["!ref"]);o.sheetRows<=+q.e.r&&(q.e.r=o.sheetRows-1,q.e.r>u.e.r&&(q.e.r=u.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>u.e.c&&(q.e.c=u.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ft(q))}return N.length>0&&(c["!merges"]=N),F.length>0&&(c["!cols"]=F),O.length>0&&(c["!rows"]=O),c}function AB(e){var t=[],r=e.match(/^<c:numCache>/),s;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var n=yt((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){s=i.replace(/<.*?>/g,"")}),[t,n,s]}function PB(e,t,r,s,n,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var f=AB(h);u.s.r=u.s.c=0,u.e.c=o,d=gr(o),f[0].forEach(function(x,p){l[d+Ir(p)]={t:"n",v:x,z:f[1]},c=p}),u.e.r<c&&(u.e.r=c),++o}),o>0&&(l["!ref"]=ft(u)),l}function RB(e,t,r,s,n){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(LT);return o&&tv(o[0],i,n,r),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}function FB(e,t){e.l+=10;var r=Yr(e);return{name:r}}function IB(e,t,r,s,n){if(!e)return e;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Mn(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}var zT=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],MB=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],OB=[],LB=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function l2(e,t){for(var r=0;r!=e.length;++r)for(var s=e[r],n=0;n!=t.length;++n){var i=t[n];if(s[i[0]]==null)s[i[0]]=i[1];else switch(i[2]){case"bool":typeof s[i[0]]=="string"&&(s[i[0]]=zt(s[i[0]]));break;case"int":typeof s[i[0]]=="string"&&(s[i[0]]=parseInt(s[i[0]],10));break}}}function o2(e,t){for(var r=0;r!=t.length;++r){var s=t[r];if(e[s[0]]==null)e[s[0]]=s[1];else switch(s[2]){case"bool":typeof e[s[0]]=="string"&&(e[s[0]]=zt(e[s[0]]));break;case"int":typeof e[s[0]]=="string"&&(e[s[0]]=parseInt(e[s[0]],10));break}}}function $T(e){o2(e.WBProps,zT),o2(e.CalcPr,LB),l2(e.WBView,MB),l2(e.Sheets,OB),zo.date1904=zt(e.WBProps.date1904)}var BB="][*?/\\".split("");function zB(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return BB.forEach(function(s){if(e.indexOf(s)!=-1){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}var $B=/<\w+:workbook/;function UB(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},s=!1,n="xmlns",i={},l=0;if(e.replace(Qr,function(c,d){var u=Xe(c);switch(nn(u[0])){case"<?xml":break;case"<workbook":c.match($B)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[n];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":zT.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=zt(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=Rt(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=yt(Rt(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":s=!0;break;case"</definedNames>":s=!1;break;case"<definedName":i={},i.Name=Rt(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),zt(u.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=yt(Rt(e.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":s=!0;break;case"</AlternateContent>":s=!1;break;case"<revisionPtr":break;default:if(!s&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),iM.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return $T(r),r}function VB(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=zp(e),r.name=Yr(e),r}function HB(e,t){var r={},s=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?Yr(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function KB(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function GB(e,t,r){var s=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),i=jM(e),l=C9(e,0,r),o=Yy(e);e.l=s;var c={Name:i,Ptg:l};return n<268435455&&(c.Sheet=n),o&&(c.Comment=o),c}function WB(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},s=[],n=!1;t||(t={}),t.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],xf[16]={n:"BrtFRTArchID$",f:KB},Mn(e,function(c,d,u){switch(u){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ur(c.Ptg,null,null,l,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([u,c]):l[0]=[u,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:s.push(u),n=!0;break;case 36:s.pop(),n=!1;break;case 37:s.push(u),n=!0;break;case 38:s.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||t.WTF&&s[s.length-1]!=37&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),$T(r),r.Names=i,r.supbooks=l,r}function YB(e,t,r){return t.slice(-4)===".bin"?WB(e,r):UB(e,r)}function qB(e,t,r,s,n,i,l,o){return t.slice(-4)===".bin"?DB(e,s,r,n,i,l,o):V9(e,s,r,n,i,l,o)}function XB(e,t,r,s,n,i,l,o){return t.slice(-4)===".bin"?IB(e,s,r,n,i):RB(e,s,r,n,i)}function QB(e,t,r,s,n,i,l,o){return t.slice(-4)===".bin"?n7():i7()}function ZB(e,t,r,s,n,i,l,o){return t.slice(-4)===".bin"?s7():a7()}function JB(e,t,r,s){return t.slice(-4)===".bin"?bL(e,r,s):mL(e,r,s)}function ez(e,t,r){return _T(e,r)}function tz(e,t,r){return t.slice(-4)===".bin"?M8(e,r):F8(e,r)}function rz(e,t,r){return t.slice(-4)===".bin"?e7(e,r):qL(e,r)}function sz(e,t,r){return t.slice(-4)===".bin"?GL(e):HL(e)}function az(e,t,r,s){return r.slice(-4)===".bin"?WL(e,t,r,s):void 0}function nz(e,t,r){return t.slice(-4)===".bin"?UL(e,t,r):VL(e,t,r)}var UT=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,VT=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function la(e,t){var r=e.split(/\s+/),s=[];if(t||(s[0]=r[0]),r.length===1)return s;var n=e.match(UT),i,l,o,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(VT),(l=i[1].indexOf(":"))===-1?s[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),s[o]=i[2].slice(1,i[2].length-1));return s}function iz(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var s=e.match(UT),n,i,l,o;if(s)for(o=0;o!=s.length;++o)n=s[o].match(VT),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),r[l]=n[2].slice(1,n[2].length-1));return r}var Pd;function lz(e,t){var r=Pd[e]||yt(e);return r==="General"?Bl(t):sa(r,t)}function oz(e,t,r,s){var n=s;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=zt(s);break;case"i2":case"int":n=parseInt(s,10);break;case"r4":case"float":n=parseFloat(s);break;case"date":case"dateTime.tz":n=Er(s);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[yt(t)]=n}function cz(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Xl[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ou(e.v):e.w=Bl(e.v):e.w=lz(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var s=Pd[t]||t||"General";if(r.cellNF&&(e.z=s),r.cellDates&&e.t=="n"&&Ec(s)){var n=cl(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function dz(e,t,r){if(r.cellStyles&&t.Interior){var s=t.Interior;s.Pattern&&(s.patternType=oL[s.Pattern]||s.Pattern)}e[t.ID]=t}function uz(e,t,r,s,n,i,l,o,c,d){var u="General",h=s.StyleID,f={};d=d||{};var x=[],p=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&l&&(h=l.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&x.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":s.t="b",s.v=zt(e);break;case"String":s.t="s",s.r=Dw(yt(e)),s.v=e.indexOf("<")>-1?yt(t||e).replace(/<.*?>/g,""):s.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),s.v=(Er(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),s.v!==s.v?s.v=yt(e):s.v<60&&(s.v=s.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":s.v===void 0&&(s.v=+e),s.t||(s.t="n");break;case"Error":s.t="e",s.v=nT[e],d.cellText!==!1&&(s.w=e);break;default:e==""&&t==""?s.t="z":(s.t="s",s.v=Dw(t||e));break}if(cz(s,u,d),d.cellFormula!==!1)if(s.Formula){var m=yt(s.Formula);m.charCodeAt(0)==61&&(m=m.slice(1)),s.f=Bo(m,n),delete s.Formula,s.ArrayRange=="RC"?s.F=Bo("RC:RC",n):s.ArrayRange&&(s.F=Bo(s.ArrayRange,n),c.push([Qt(s.F),s.F]))}else for(p=0;p<c.length;++p)n.r>=c[p][0].s.r&&n.r<=c[p][0].e.r&&n.c>=c[p][0].s.c&&n.c<=c[p][0].e.c&&(s.F=c[p][1]);d.cellStyles&&(x.forEach(function(y){!f.patternType&&y.patternType&&(f.patternType=y.patternType)}),s.s=f),s.StyleID!==void 0&&(s.ixfe=s.StyleID)}function hz(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function ex(e,t){var r=t||{};D4();var s=sd(Vy(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(s=Rt(s));var n=s.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=Fr(r);return l.type="string",uu.to_workbook(s,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ae){n.indexOf("<"+Ae)>=0&&(i=!0)}),i)return wz(s,r);Pd={"General Number":"General","General Date":st[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":st[15],"Short Date":st[14],"Long Time":st[19],"Medium Time":st[18],"Short Time":st[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:st[2],Standard:st[4],Percent:st[10],Scientific:st[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,u={},h=[],f=r.dense?[]:{},x="",p={},m={},y=la('<Data ss:Type="String">'),g=0,v=0,b=0,S={s:{r:2e6,c:2e6},e:{r:0,c:0}},D={},N={},E="",w=0,_=[],C={},T={},j=0,F=[],O=[],z={},G=[],q,H=!1,A=[],V=[],L={},P=0,I=0,R={Sheets:[],WBProps:{date1904:!1}},U={};du.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"");for(var M="";o=du.exec(s);)switch(o[3]=(M=o[3]).toLowerCase()){case"data":if(M=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?uz(s.slice(g,o.index),E,y,c[c.length-1][0]=="comment"?z:p,{c:v,r:b},D,G[v],m,A,r):(E="",y=la(o[0]),g=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(O.length>0&&(p.c=O),(!r.sheetRows||r.sheetRows>b)&&p.v!==void 0&&(r.dense?(f[b]||(f[b]=[]),f[b][v]=p):f[gr(v)+Ir(b)]=p),p.HRef&&(p.l={Target:yt(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(P=v+(parseInt(p.MergeAcross,10)|0),I=b+(parseInt(p.MergeDown,10)|0),_.push({s:{c:v,r:b},e:{c:P,r:I}})),!r.sheetStubs)p.MergeAcross?v=P+1:++v;else if(p.MergeAcross||p.MergeDown){for(var J=v;J<=P;++J)for(var se=b;se<=I;++se)(J>v||se>b)&&(r.dense?(f[se]||(f[se]=[]),f[se][J]={t:"z"}):f[gr(J)+Ir(se)]={t:"z"});v=P+1}else++v;else p=iz(o[0]),p.Index&&(v=+p.Index-1),v<S.s.c&&(S.s.c=v),v>S.e.c&&(S.e.c=v),o[0].slice(-2)==="/>"&&++v,O=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<S.s.r&&(S.s.r=b),b>S.e.r&&(S.e.r=b),o[0].slice(-2)==="/>"&&(m=la(o[0]),m.Index&&(b=+m.Index-1)),v=0,++b):(m=la(o[0]),m.Index&&(b=+m.Index-1),L={},(m.AutoFitHeight=="0"||m.Height)&&(L.hpx=parseInt(m.Height,10),L.hpt=TT(L.hpx),V[b]=L),m.Hidden=="1"&&(L.hidden=!0,V[b]=L));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));h.push(x),S.s.r<=S.e.r&&S.s.c<=S.e.c&&(f["!ref"]=ft(S),r.sheetRows&&r.sheetRows<=S.e.r&&(f["!fullref"]=f["!ref"],S.e.r=r.sheetRows-1,f["!ref"]=ft(S))),_.length&&(f["!merges"]=_),G.length>0&&(f["!cols"]=G),V.length>0&&(f["!rows"]=V),u[x]=f}else S={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=v=0,c.push([o[3],!1]),d=la(o[0]),x=yt(d.Name),f=r.dense?[]:{},_=[],A=[],V=[],U={name:x,Hidden:0},R.Sheets.push(U);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),G=[],H=!1}break;case"style":o[1]==="/"?dz(D,N,r):N=la(o[0]);break;case"numberformat":N.nf=yt(la(o[0]).Format||"General"),Pd[N.nf]&&(N.nf=Pd[N.nf]);for(var ae=0;ae!=392&&st[ae]!=N.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(st[ae]==null){Tl(N.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(q=la(o[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!H&&q.wpx>10){H=!0,ns=jT;for(var ie=0;ie<G.length;++ie)G[ie]&&vc(G[ie])}H&&vc(q),G[q.Index-1||G.length]=q;for(var ce=0;ce<+q.Span;++ce)G[G.length]=Fr(q);break;case"namedrange":if(o[1]==="/")break;R.Names||(R.Names=[]);var K=Xe(o[0]),He={Name:K.Name,Ref:Bo(K.RefersTo.slice(1),{r:0,c:0})};R.Sheets.length>0&&(He.Sheet=R.Sheets.length-1),R.Names.push(He);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=s.slice(w,o.index):w=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;N.Interior=la(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?qM(C,M,s.slice(j,o.index)):j=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));hz(z),O.push(z)}else c.push([o[3],!1]),d=la(o[0]),z={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Pe=la(o[0]);f["!autofilter"]={ref:Bo(Pe.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return m2(s,r);var Le=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Le=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Le=!1}break;case"excelworkbook":switch(o[3]){case"date1904":R.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Le=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Le=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(s.slice(j,o.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else j=o.index+o[0].length;break;case"header":f["!margins"]||Ad(f["!margins"]={},"xlml"),isNaN(+Xe(o[0]).Margin)||(f["!margins"].header=+Xe(o[0]).Margin);break;case"footer":f["!margins"]||Ad(f["!margins"]={},"xlml"),isNaN(+Xe(o[0]).Margin)||(f["!margins"].footer=+Xe(o[0]).Margin);break;case"pagemargins":var Ce=Xe(o[0]);f["!margins"]||Ad(f["!margins"]={},"xlml"),isNaN(+Ce.Top)||(f["!margins"].top=+Ce.Top),isNaN(+Ce.Left)||(f["!margins"].left=+Ce.Left),isNaN(+Ce.Right)||(f["!margins"].right=+Ce.Right),isNaN(+Ce.Bottom)||(f["!margins"].bottom=+Ce.Bottom);break;case"displayrighttoleft":R.Views||(R.Views=[]),R.Views[0]||(R.Views[0]={}),R.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Le=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Le=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Le=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Le=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Le=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Le=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Le=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Le=!1}break;case"smarttags":break;default:Le=!1;break}if(Le||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?oz(T,M,F,s.slice(j,o.index)):(F=o,j=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var de={};return!r.bookSheets&&!r.bookProps&&(de.Sheets=u),de.SheetNames=h,de.Workbook=R,de.SSF=Fr(st),de.Props=C,de.Custprops=T,de}function Hp(e,t){switch(av(t=t||{}),t.type||"base64"){case"base64":return ex(Ls(e),t);case"binary":case"buffer":case"file":return ex(e,t);case"array":return ex(Wl(e),t)}}function fz(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=_M(r),r.length-r.l<=4)return t;var s=r.read_shift(4);if(s==0||s>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(s=r.read_shift(4),s!==1907505652)||(t.UnicodeClipboardFormat=EM(r),s=r.read_shift(4),s==0||s>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var mz=[60,1084,2066,2165,2175];function xz(e,t,r,s,n){var i=s,l=[],o=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),r.l+=i;for(var c=bn(r,r.l),d=Kp[c],u=0;d!=null&&mz.indexOf(c)>-1;)i=bn(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),o=r.slice(u,r.l+4+i),l.push(o),r.l+=4+i,d=Kp[c=bn(r,r.l)];var h=ei(l);Pr(h,0);var f=0;h.lens=[];for(var x=0;x<l.length;++x)h.lens.push(f),f+=l[x].length;if(h.length<s)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+s;return t.f(h,h.length,n)}function Fa(e,t,r){if(e.t!=="z"&&e.XF){var s=0;try{s=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=st[s])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Xl[e.v]:s===0||s=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ou(e.v):e.w=Bl(e.v):e.w=sa(s,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&s&&e.t=="n"&&Ec(st[s]||String(s))){var n=cl(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function O0(e,t,r){return{v:e,ixfe:t,t:r}}function pz(e,t){var r={opts:{}},s={},n=t.dense?[]:{},i={},l={},o=null,c=[],d="",u={},h,f="",x,p,m,y,g={},v=[],b,S,D=[],N=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},w={},_=function(Ze){return Ze<8?_l[Ze]:Ze<64&&N[Ze-8]||_l[Ze]},C=function(Ze,it,At){var kt=it.XF.data;if(!(!kt||!kt.patternType||!At||!At.cellStyles)){it.s={},it.s.patternType=kt.patternType;var Zr;(Zr=hu(_(kt.icvFore)))&&(it.s.fgColor={rgb:Zr}),(Zr=hu(_(kt.icvBack)))&&(it.s.bgColor={rgb:Zr})}},T=function(Ze,it,At){if(!(L>1)&&!(At.sheetRows&&Ze.r>=At.sheetRows)){if(At.cellStyles&&it.XF&&it.XF.data&&C(Ze,it,At),delete it.ixfe,delete it.XF,h=Ze,f=et(Ze),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Ze.r<l.s.r&&(l.s.r=Ze.r),Ze.c<l.s.c&&(l.s.c=Ze.c),Ze.r+1>l.e.r&&(l.e.r=Ze.r+1),Ze.c+1>l.e.c&&(l.e.c=Ze.c+1),At.cellFormula&&it.f){for(var kt=0;kt<v.length;++kt)if(!(v[kt][0].s.c>Ze.c||v[kt][0].s.r>Ze.r)&&!(v[kt][0].e.c<Ze.c||v[kt][0].e.r<Ze.r)){it.F=ft(v[kt][0]),(v[kt][0].s.c!=Ze.c||v[kt][0].s.r!=Ze.r)&&delete it.f,it.f&&(it.f=""+Ur(v[kt][1],l,Ze,A,j));break}}At.dense?(n[Ze.r]||(n[Ze.r]=[]),n[Ze.r][Ze.c]=it):n[f]=it}},j={enc:!1,sbcch:0,snames:[],sharedf:g,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(j.password=t.password);var F,O=[],z=[],G=[],q=[],H=!1,A=[];A.SheetNames=j.snames,A.sharedf=j.sharedf,A.arrayf=j.arrayf,A.names=[],A.XTI=[];var V=0,L=0,P=0,I=[],R=[],U;j.codepage=1200,va(1200);for(var M=!1;e.l<e.length-1;){var J=e.l,se=e.read_shift(2);if(se===0&&V===10)break;var ae=e.l===e.length?0:e.read_shift(2),ie=Kp[se];if(ie&&ie.f){if(t.bookSheets&&V===133&&se!==133)break;if(V=se,ie.r===2||ie.r==12){var ce=e.read_shift(2);if(ae-=2,!j.enc&&ce!==se&&((ce&255)<<8|ce>>8)!==se)throw new Error("rt mismatch: "+ce+"!="+se);ie.r==12&&(e.l+=10,ae-=10)}var K={};if(se===10?K=ie.f(e,ae,j):K=xz(se,ie,e,ae,j),L==0&&[9,521,1033,2057].indexOf(V)===-1)continue;switch(se){case 34:r.opts.Date1904=E.WBProps.date1904=K;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(j.enc||(e.l=0),j.enc=K,!t.password)throw new Error("File is password-protected");if(K.valid==null)throw new Error("Encryption scheme unsupported");if(!K.valid)throw new Error("Password is incorrect");break;case 92:j.lastuser=K;break;case 66:var He=Number(K);switch(He){case 21010:He=1200;break;case 32768:He=1e4;break;case 32769:He=1252;break}va(j.codepage=He),M=!0;break;case 317:j.rrtabid=K;break;case 25:j.winlocked=K;break;case 439:r.opts.RefreshAll=K;break;case 12:r.opts.CalcCount=K;break;case 16:r.opts.CalcDelta=K;break;case 17:r.opts.CalcIter=K;break;case 13:r.opts.CalcMode=K;break;case 14:r.opts.CalcPrecision=K;break;case 95:r.opts.CalcSaveRecalc=K;break;case 15:j.CalcRefMode=K;break;case 2211:r.opts.FullCalc=K;break;case 129:K.fDialog&&(n["!type"]="dialog"),K.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),K.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:D.push(K);break;case 430:A.push([K]),A[A.length-1].XTI=[];break;case 35:case 547:A[A.length-1].push(K);break;case 24:case 536:U={Name:K.Name,Ref:Ur(K.rgce,l,null,A,j)},K.itab>0&&(U.Sheet=K.itab-1),A.names.push(U),A[0]||(A[0]=[],A[0].XTI=[]),A[A.length-1].push(K),K.Name=="_xlnm._FilterDatabase"&&K.itab>0&&K.rgce&&K.rgce[0]&&K.rgce[0][0]&&K.rgce[0][0][0]=="PtgArea3d"&&(R[K.itab-1]={ref:ft(K.rgce[0][0][1][2])});break;case 22:j.ExternCount=K;break;case 23:A.length==0&&(A[0]=[],A[0].XTI=[]),A[A.length-1].XTI=A[A.length-1].XTI.concat(K),A.XTI=A.XTI.concat(K);break;case 2196:if(j.biff<8)break;U!=null&&(U.Comment=K[1]);break;case 18:n["!protect"]=K;break;case 19:K!==0&&j.WTF&&console.error("Password verifier: "+K);break;case 133:i[K.pos]=K,j.snames.push(K.name);break;case 10:{if(--L)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=ft(l),t.sheetRows&&t.sheetRows<=l.e.r){var Pe=l.e.r;l.e.r=t.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=ft(l),l.e.r=Pe}l.e.r++,l.e.c++}O.length>0&&(n["!merges"]=O),z.length>0&&(n["!objects"]=z),G.length>0&&(n["!cols"]=G),q.length>0&&(n["!rows"]=q),E.Sheets.push(w)}d===""?u=n:s[d]=n,n=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(j.biff===8&&(j.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[K.BIFFVer]||8),j.biffguess=K.BIFFVer==0,K.BIFFVer==0&&K.dt==4096&&(j.biff=5,M=!0,va(j.codepage=28591)),j.biff==8&&K.BIFFVer==0&&K.dt==16&&(j.biff=2),L++)break;if(n=t.dense?[]:{},j.biff<8&&!M&&(M=!0,va(j.codepage=t.codepage||1252)),j.biff<5||K.BIFFVer==0&&K.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var Le={pos:e.l-ae,name:d};i[Le.pos]=Le,j.snames.push(d)}else d=(i[J]||{name:""}).name;K.dt==32&&(n["!type"]="chart"),K.dt==64&&(n["!type"]="macro"),O=[],z=[],j.arrayf=v=[],G=[],q=[],H=!1,w={Hidden:(i[J]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(t.dense?(n[K.r]||[])[K.c]:n[et({c:K.c,r:K.r})])&&++K.c,b={ixfe:K.ixfe,XF:D[K.ixfe]||{},v:K.val,t:"n"},P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:K.c,r:K.r},b,t);break;case 5:case 517:b={ixfe:K.ixfe,XF:D[K.ixfe],v:K.val,t:K.t},P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:K.c,r:K.r},b,t);break;case 638:b={ixfe:K.ixfe,XF:D[K.ixfe],v:K.rknum,t:"n"},P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:K.c,r:K.r},b,t);break;case 189:for(var Ce=K.c;Ce<=K.C;++Ce){var de=K.rkrec[Ce-K.c][0];b={ixfe:de,XF:D[de],v:K.rkrec[Ce-K.c][1],t:"n"},P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:Ce,r:K.r},b,t)}break;case 6:case 518:case 1030:{if(K.val=="String"){o=K;break}if(b=O0(K.val,K.cell.ixfe,K.tt),b.XF=D[b.ixfe],t.cellFormula){var Ae=K.formula;if(Ae&&Ae[0]&&Ae[0][0]&&Ae[0][0][0]=="PtgExp"){var Ke=Ae[0][0][1][0],re=Ae[0][0][1][1],oe=et({r:Ke,c:re});g[oe]?b.f=""+Ur(K.formula,l,K.cell,A,j):b.F=((t.dense?(n[Ke]||[])[re]:n[oe])||{}).F}else b.f=""+Ur(K.formula,l,K.cell,A,j)}P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T(K.cell,b,t),o=K}break;case 7:case 519:if(o)o.val=K,b=O0(K,o.cell.ixfe,"s"),b.XF=D[b.ixfe],t.cellFormula&&(b.f=""+Ur(o.formula,l,o.cell,A,j)),P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(K);var me=et(K[0].s);if(x=t.dense?(n[K[0].s.r]||[])[K[0].s.c]:n[me],t.cellFormula&&x){if(!o||!me||!x)break;x.f=""+Ur(K[1],l,K[0],A,j),x.F=ft(K[0])}}break;case 1212:{if(!t.cellFormula)break;if(f){if(!o)break;g[et(o.cell)]=K[0],x=t.dense?(n[o.cell.r]||[])[o.cell.c]:n[et(o.cell)],(x||{}).f=""+Ur(K[0],l,h,A,j)}}break;case 253:b=O0(c[K.isst].t,K.ixfe,"s"),c[K.isst].h&&(b.h=c[K.isst].h),b.XF=D[b.ixfe],P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:K.c,r:K.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:K.ixfe,XF:D[K.ixfe],t:"z"},P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:K.c,r:K.r},b,t));break;case 190:if(t.sheetStubs)for(var we=K.c;we<=K.C;++we){var ve=K.ixfe[we-K.c];b={ixfe:ve,XF:D[ve],t:"z"},P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:we,r:K.r},b,t)}break;case 214:case 516:case 4:b=O0(K.val,K.ixfe,"s"),b.XF=D[b.ixfe],P>0&&(b.z=I[b.ixfe>>8&63]),Fa(b,t,r.opts.Date1904),T({c:K.c,r:K.r},b,t);break;case 0:case 512:L===1&&(l=K);break;case 252:c=K;break;case 1054:if(j.biff==4){I[P++]=K[1];for(var Ne=0;Ne<P+163&&st[Ne]!=K[1];++Ne);Ne>=163&&Tl(K[1],P+163)}else Tl(K[1],K[0]);break;case 30:{I[P++]=K;for(var Ee=0;Ee<P+163&&st[Ee]!=K;++Ee);Ee>=163&&Tl(K,P+163)}break;case 229:O=O.concat(K);break;case 93:z[K.cmo[0]]=j.lastobj=K;break;case 438:j.lastobj.TxO=K;break;case 127:j.lastobj.ImData=K;break;case 440:for(y=K[0].s.r;y<=K[0].e.r;++y)for(m=K[0].s.c;m<=K[0].e.c;++m)x=t.dense?(n[y]||[])[m]:n[et({c:m,r:y})],x&&(x.l=K[1]);break;case 2048:for(y=K[0].s.r;y<=K[0].e.r;++y)for(m=K[0].s.c;m<=K[0].e.c;++m)x=t.dense?(n[y]||[])[m]:n[et({c:m,r:y})],x&&x.l&&(x.l.Tooltip=K[1]);break;case 28:{if(j.biff<=5&&j.biff>=2)break;x=t.dense?(n[K[0].r]||[])[K[0].c]:n[et(K[0])];var We=z[K[2]];x||(t.dense?(n[K[0].r]||(n[K[0].r]=[]),x=n[K[0].r][K[0].c]={t:"z"}):x=n[et(K[0])]={t:"z"},l.e.r=Math.max(l.e.r,K[0].r),l.s.r=Math.min(l.s.r,K[0].r),l.e.c=Math.max(l.e.c,K[0].c),l.s.c=Math.min(l.s.c,K[0].c)),x.c||(x.c=[]),p={a:K[1],t:We.TxO.t},x.c.push(p)}break;case 2173:LL(D[K.ixfe],K.ext);break;case 125:{if(!j.cellStyles)break;for(;K.e>=K.s;)G[K.e--]={width:K.w/256,level:K.level||0,hidden:!!(K.flags&1)},H||(H=!0,Jy(K.w/256)),vc(G[K.e+1])}break;case 520:{var Ge={};K.level!=null&&(q[K.r]=Ge,Ge.level=K.level),K.hidden&&(q[K.r]=Ge,Ge.hidden=!0),K.hpt&&(q[K.r]=Ge,Ge.hpt=K.hpt,Ge.hpx=fu(K.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||Ad(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=K;break;case 161:n["!margins"]||Ad(n["!margins"]={}),n["!margins"].header=K.header,n["!margins"].footer=K.footer;break;case 574:K.RTL&&(E.Views[0].RTL=!0);break;case 146:N=K;break;case 2198:F=K;break;case 140:S=K;break;case 442:d?w.CodeName=K||w.name:E.WBProps.CodeName=K||"ThisWorkbook";break}}else ie||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=ae}return r.SheetNames=sn(i).sort(function(Ct,Ze){return Number(Ct)-Number(Ze)}).map(function(Ct){return i[Ct].name}),t.bookSheets||(r.Sheets=s),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&R.forEach(function(Ct,Ze){r.Sheets[r.SheetNames[Ze]]["!autofilter"]=Ct}),r.Strings=c,r.SSF=Fr(st),j.enc&&(r.Encryption=j.enc),F&&(r.Themes=F),r.Metadata={},S!==void 0&&(r.Metadata.Country=S),A.names.length>0&&(E.Names=A.names),r.Workbook=E,r}var c2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function gz(e,t,r){var s=ht.find(e,"/!DocumentSummaryInformation");if(s&&s.size>0)try{var n=Gw(s,FM,c2.DSI);for(var i in n)t[i]=n[i]}catch(d){if(r.WTF)throw d}var l=ht.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=Gw(l,IM,c2.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(lT(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function HT(e,t){t||(t={}),av(t),y4(),t.codepage&&My(t.codepage);var r,s;if(e.FullPaths){if(ht.find(e,"/encryption"))throw new Error("File is password-protected");r=ht.find(e,"!CompObj"),s=ht.find(e,"/Workbook")||ht.find(e,"/Book")}else{switch(t.type){case"base64":e=ga(Ls(e));break;case"binary":e=ga(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Pr(e,0),s={content:e}}var n,i;if(r&&fz(r),t.bookProps&&!t.bookSheets)n={};else{var l=dt?"buffer":"array";if(s&&s.content)n=pz(s.content,t);else if((i=ht.find(e,"PerfectOffice_MAIN"))&&i.content)n=Cd.to_workbook(i.content,(t.type=l,t));else if((i=ht.find(e,"NativeContent_MAIN"))&&i.content)n=Cd.to_workbook(i.content,(t.type=l,t));else throw(i=ht.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&ht.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=r7(e))}var o={};return e.FullPaths&&gz(e,o,t),n.Props=n.Custprops=o,t.bookFiles&&(n.cfb=e),n}var xf={0:{f:Z9},1:{f:rB},2:{f:uB},3:{f:iB},4:{f:aB},5:{f:dB},6:{f:mB},7:{f:oB},8:{f:vB},9:{f:yB},10:{f:pB},11:{f:gB},12:{f:sB},13:{f:hB},14:{f:lB},15:{f:nB},16:{f:BT},17:{f:xB},18:{f:cB},19:{f:Wy},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:GB},40:{},42:{},43:{f:pL},44:{f:xL},45:{f:gL},46:{f:vL},47:{f:yL},48:{},49:{f:bM},50:{},51:{f:zL},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:vT},62:{f:fB},63:{f:KL},64:{f:EB},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Xr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_B},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:tB},148:{f:J9,p:16},151:{f:NB},152:{},153:{f:HB},154:{},155:{},156:{f:VB},157:{},158:{},159:{T:1,f:I8},160:{T:-1},161:{T:1,f:ql},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:bB},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:BL},336:{T:-1},337:{f:$L,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:zp},357:{},358:{},359:{},360:{T:1},361:{},362:{f:yT},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:kB},427:{f:jB},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:TB},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:eB},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wB},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:zp},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:JL},633:{T:1},634:{T:-1},635:{T:1,f:ZL},636:{T:-1},637:{f:NM},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:FB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:CB},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Kp={6:{f:Zm},10:{f:$n},12:{f:ir},13:{f:ir},14:{f:Zt},15:{f:Zt},16:{f:Gr},17:{f:Zt},18:{f:Zt},19:{f:ir},20:{f:Xw},21:{f:Xw},23:{f:yT},24:{f:Zw},25:{f:Zt},26:{},27:{},28:{f:XO},29:{},34:{f:Zt},35:{f:Qw},38:{f:Gr},39:{f:Gr},40:{f:Gr},41:{f:Gr},42:{f:Zt},43:{f:Zt},47:{f:eL},49:{f:AO},51:{f:ir},60:{},61:{f:EO},64:{f:Zt},65:{f:DO},66:{f:ir},77:{},80:{},81:{},82:{},85:{f:ir},89:{},90:{},91:{},92:{f:bO},93:{f:ZO},94:{},95:{f:Zt},96:{},97:{},99:{f:Zt},125:{f:vT},128:{f:$O},129:{f:wO},130:{f:ir},131:{f:Zt},132:{f:Zt},133:{f:NO},134:{},140:{f:a8},141:{f:ir},144:{},146:{f:i8},151:{},152:{},153:{},154:{},155:{},156:{f:ir},157:{},158:{},160:{f:u8},161:{f:o8},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:OO},190:{f:LO},193:{f:$n},197:{},198:{},199:{},200:{},201:{},202:{f:Zt},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ir},220:{},221:{f:Zt},222:{},224:{f:zO},225:{f:vO},226:{f:$n},227:{},229:{f:QO},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:kO},253:{f:PO},255:{f:jO},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:hT},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Zt},353:{f:$n},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:VO},431:{f:Zt},432:{},433:{},434:{},437:{},438:{f:t8},439:{f:Zt},440:{f:r8},441:{},442:{f:Uu},443:{},444:{f:ir},445:{},446:{},448:{f:$n},449:{f:_O,r:2},450:{f:$n},512:{f:Yw},513:{f:d8},515:{f:UO},516:{f:RO},517:{f:qw},519:{f:h8},520:{f:SO},523:{},545:{f:Jw},549:{f:Ww},566:{},574:{f:CO},638:{f:MO},659:{},1048:{},1054:{f:FO},1084:{},1212:{f:WO},2048:{f:s8},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:F0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:$n},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:l8,r:12},2173:{f:OL,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Zt,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:GO,r:12},2197:{},2198:{f:AL,r:12},2199:{},2200:{},2201:{},2202:{f:YO,r:12},2203:{f:$n},2204:{},2205:{},2206:{},2207:{},2211:{f:TO},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ir},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:c8},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:n8},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Yw},1:{},2:{f:p8},3:{f:x8},4:{f:m8},5:{f:qw},7:{f:g8},8:{},9:{f:F0},11:{},22:{f:ir},30:{f:IO},31:{},32:{},33:{f:Jw},36:{},37:{f:Ww},50:{f:y8},62:{},52:{},67:{},68:{f:ir},69:{},86:{},126:{},127:{f:f8},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:v8},223:{},234:{},354:{},421:{},518:{f:Zm},521:{f:F0},536:{f:Zw},547:{f:Qw},561:{},579:{},1030:{f:Zm},1033:{f:F0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function oa(e,t,r,s){var n=t;if(!isNaN(n)){var i=s||(r||[]).length||0,l=e.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&J4(r)&&e.push(r)}}function d2(e,t){var r=t||{},s=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=n.index,o=i&&i.index||e.length,c=VI(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,f=0,x={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(l=0;l<c.length;++l){var m=c[l].trim(),y=m.slice(0,3).toLowerCase();if(y=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(y!="<td"&&y!="<th")){var g=m.split(/<\/t[dh]>/i);for(o=0;o<g.length;++o){var v=g[o].trim();if(v.match(/<t[dh]/i)){for(var b=v,S=0;b.charAt(0)=="<"&&(S=b.indexOf(">"))>-1;)b=b.slice(S+1);for(var D=0;D<p.length;++D){var N=p[D];N.s.c==u&&N.s.r<d&&d<=N.e.r&&(u=N.e.c+1,D=-1)}var E=Xe(v.slice(0,v.indexOf(">")));f=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||f>1)&&p.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+f-1}});var w=E.t||E["data-t"]||"";if(!b.length){u+=f;continue}if(b=z4(b),x.s.r>d&&(x.s.r=d),x.e.r<d&&(x.e.r=d),x.s.c>u&&(x.s.c=u),x.e.c<u&&(x.e.c=u),!b.length){u+=f;continue}var _={t:"s",v:b};r.raw||!b.trim().length||w=="s"||(b==="TRUE"?_={t:"b",v:!0}:b==="FALSE"?_={t:"b",v:!1}:isNaN(Sa(b))?isNaN(yc(b).getDate())||(_={t:"d",v:Er(b)},r.cellDates||(_={t:"n",v:us(_.v)}),_.z=r.dateNF||st[14]):_={t:"n",v:Sa(b)}),r.dense?(s[d]||(s[d]=[]),s[d][u]=_):s[et({r:d,c:u})]=_,u+=f}}}}return s["!ref"]=ft(x),p.length&&(s["!merges"]=p),s}function yz(e,t,r,s){for(var n=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>l)&&!(n[d].e.r<r||n[d].e.c<l)){if(n[d].s.r<r||n[d].s.c<l){o=-1;break}o=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(o<0)){var u=et({r,c:l}),h=s.dense?(e[r]||[])[l]:e[u],f=h&&h.v!=null&&(h.h||Uy(h.w||(Rn(h),h.w)||""))||"",x={};o>1&&(x.rowspan=o),c>1&&(x.colspan=c),s.editable?f='<span contenteditable="true">'+f+"</span>":h&&(x["data-t"]=h&&h.t||"z",h.v!=null&&(x["data-v"]=h.v),h.z!=null&&(x["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),x.id=(s.id||"sjs")+"-"+u,i.push(aM("td",f,x))}}var p="<tr>";return p+i.join("")+"</tr>"}var vz='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bz="</body></html>";function wz(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ki(d2(r[0],t),t);var s=iv();return r.forEach(function(n,i){lv(s,d2(n,t),"Sheet"+(i+1))}),s}function Nz(e,t,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function kz(e,t){var r=t||{},s=r.header!=null?r.header:vz,n=r.footer!=null?r.footer:bz,i=[s],l=Cc(e["!ref"]);r.dense=Array.isArray(e),i.push(Nz(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(yz(e,l,o,r));return i.push("</table>"+n),i.join("")}function KT(e,t,r){var s=r||{},n=0,i=0;if(s.origin!=null)if(typeof s.origin=="number")n=s.origin;else{var l=typeof s.origin=="string"?is(s.origin):s.origin;n=l.r,i=l.c}var o=t.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(e["!ref"]){var u=Cc(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var h=[],f=0,x=e["!rows"]||(e["!rows"]=[]),p=0,m=0,y=0,g=0,v=0,b=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&m<c;++p){var S=o[p];if(u2(S)){if(s.display)continue;x[m]={hidden:!0}}var D=S.children;for(y=g=0;y<D.length;++y){var N=D[y];if(!(s.display&&u2(N))){var E=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):z4(N.innerHTML),w=N.getAttribute("data-z")||N.getAttribute("z");for(f=0;f<h.length;++f){var _=h[f];_.s.c==g+i&&_.s.r<m+n&&m+n<=_.e.r&&(g=_.e.c+1-i,f=-1)}b=+N.getAttribute("colspan")||1,((v=+N.getAttribute("rowspan")||1)>1||b>1)&&h.push({s:{r:m+n,c:g+i},e:{r:m+n+(v||1)-1,c:g+i+(b||1)-1}});var C={t:"s",v:E},T=N.getAttribute("data-t")||N.getAttribute("t")||"";E!=null&&(E.length==0?C.t=T||"z":s.raw||E.trim().length==0||T=="s"||(E==="TRUE"?C={t:"b",v:!0}:E==="FALSE"?C={t:"b",v:!1}:isNaN(Sa(E))?isNaN(yc(E).getDate())||(C={t:"d",v:Er(E)},s.cellDates||(C={t:"n",v:us(C.v)}),C.z=s.dateNF||st[14]):C={t:"n",v:Sa(E)})),C.z===void 0&&w!=null&&(C.z=w);var j="",F=N.getElementsByTagName("A");if(F&&F.length)for(var O=0;O<F.length&&!(F[O].hasAttribute("href")&&(j=F[O].getAttribute("href"),j.charAt(0)!="#"));++O);j&&j.charAt(0)!="#"&&(C.l={Target:j}),s.dense?(e[m+n]||(e[m+n]=[]),e[m+n][g+i]=C):e[et({c:g+i,r:m+n})]=C,d.e.c<g+i&&(d.e.c=g+i),g+=b}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,m-1+n),e["!ref"]=ft(d),m>=c&&(e["!fullref"]=ft((d.e.r=o.length-p+m-1+n,d))),e}function GT(e,t){var r=t||{},s=r.dense?[]:{};return KT(s,e,t)}function jz(e,t){return Ki(GT(e,t),t)}function u2(e){var t="",r=Sz(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Sz(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Tz(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(s,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=yt(t.replace(/<[^>]*>/g,""));return[r]}var h2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function WT(e,t){var r=t||{},s=Vy(e),n=[],i,l,o={name:""},c="",d=0,u,h,f={},x=[],p=r.dense?[]:{},m,y,g={value:""},v="",b=0,S=[],D=-1,N=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},w=0,_={},C=[],T={},j=0,F=0,O=[],z=1,G=1,q=[],H={Names:[]},A={},V=["",""],L=[],P={},I="",R=0,U=!1,M=!1,J=0;for(du.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");m=du.exec(s);)switch(m[3]=m[3].replace(/_.*$/,"")){case"table":case"":m[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?p["!ref"]=ft(E):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(p["!fullref"]=p["!ref"],E.e.r=r.sheetRows-1,p["!ref"]=ft(E)),C.length&&(p["!merges"]=C),O.length&&(p["!rows"]=O),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),x.push(u.name),f[u.name]=p,M=!1):m[0].charAt(m[0].length-2)!=="/"&&(u=Xe(m[0],!1),D=N=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,p=r.dense?[]:{},C=[],O=[],M=!0);break;case"table-row-group":m[1]==="/"?--w:++w;break;case"table-row":case"":if(m[1]==="/"){D+=z,z=1;break}if(h=Xe(m[0],!1),h.?D=h.-1:D==-1&&(D=0),z=+h["number-rows-repeated"]||1,z<10)for(J=0;J<z;++J)w>0&&(O[D+J]={level:w});N=-1;break;case"covered-table-cell":m[1]!=="/"&&++N,r.sheetStubs&&(r.dense?(p[D]||(p[D]=[]),p[D][N]={t:"z"}):p[et({r:D,c:N})]={t:"z"}),v="",S=[];break;case"table-cell":case"":if(m[0].charAt(m[0].length-2)==="/")++N,g=Xe(m[0],!1),G=parseInt(g["number-columns-repeated"]||"1",10),y={t:"z",v:null},g.formula&&r.cellFormula!=!1&&(y.f=i2(yt(g.formula))),(g.||g["value-type"])=="string"&&(y.t="s",y.v=yt(g["string-value"]||""),r.dense?(p[D]||(p[D]=[]),p[D][N]=y):p[et({r:D,c:N})]=y),N+=G-1;else if(m[1]!=="/"){++N,v="",b=0,S=[],G=1;var se=z?D+z-1:D;if(N>E.e.c&&(E.e.c=N),N<E.s.c&&(E.s.c=N),D<E.s.r&&(E.s.r=D),se>E.e.r&&(E.e.r=se),g=Xe(m[0],!1),L=[],P={},y={t:g.||g["value-type"],v:null},r.cellFormula)if(g.formula&&(g.formula=yt(g.formula)),g["number-matrix-columns-spanned"]&&g["number-matrix-rows-spanned"]&&(j=parseInt(g["number-matrix-rows-spanned"],10)||0,F=parseInt(g["number-matrix-columns-spanned"],10)||0,T={s:{r:D,c:N},e:{r:D+j-1,c:N+F-1}},y.F=ft(T),q.push([T,y.F])),g.formula)y.f=i2(g.formula);else for(J=0;J<q.length;++J)D>=q[J][0].s.r&&D<=q[J][0].e.r&&N>=q[J][0].s.c&&N<=q[J][0].e.c&&(y.F=q[J][1]);switch((g["number-columns-spanned"]||g["number-rows-spanned"])&&(j=parseInt(g["number-rows-spanned"],10)||0,F=parseInt(g["number-columns-spanned"],10)||0,T={s:{r:D,c:N},e:{r:D+j-1,c:N+F-1}},C.push(T)),g["number-columns-repeated"]&&(G=parseInt(g["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=zt(g["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(g.value);break;case"percentage":y.t="n",y.v=parseFloat(g.value);break;case"currency":y.t="n",y.v=parseFloat(g.value);break;case"date":y.t="d",y.v=Er(g["date-value"]),r.cellDates||(y.t="n",y.v=us(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=zI(g["time-value"])/86400,r.cellDates&&(y.t="d",y.v=Jf(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(g.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",g["string-value"]!=null&&(v=yt(g["string-value"]),S=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(U=!1,y.t==="s"&&(y.v=v||"",S.length&&(y.R=S),U=b==0),A.Target&&(y.l=A),L.length>0&&(y.c=L,L=[]),v&&r.cellText!==!1&&(y.w=v),U&&(y.t="z",delete y.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=D))for(var ae=0;ae<z;++ae){if(G=parseInt(g["number-columns-repeated"]||"1",10),r.dense)for(p[D+ae]||(p[D+ae]=[]),p[D+ae][N]=ae==0?y:Fr(y);--G>0;)p[D+ae][N+G]=Fr(y);else for(p[et({r:D+ae,c:N})]=y;--G>0;)p[et({r:D+ae,c:N+G})]=Fr(y);E.e.c<=N&&(E.e.c=N)}G=parseInt(g["number-columns-repeated"]||"1",10),N+=G-1,G=0,y={},v="",S=[]}A={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(m[1]==="/"){if((i=n.pop())[0]!==m[3])throw"Bad state: "+i}else m[0].charAt(m[0].length-2)!=="/"&&n.push([m[3],!0]);break;case"annotation":if(m[1]==="/"){if((i=n.pop())[0]!==m[3])throw"Bad state: "+i;P.t=v,S.length&&(P.R=S),P.a=I,L.push(P)}else m[0].charAt(m[0].length-2)!=="/"&&n.push([m[3],!1]);I="",R=0,v="",b=0,S=[];break;case"creator":m[1]==="/"?I=s.slice(R,m.index):R=m.index+m[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(m[1]==="/"){if((i=n.pop())[0]!==m[3])throw"Bad state: "+i}else m[0].charAt(m[0].length-2)!=="/"&&n.push([m[3],!1]);v="",b=0,S=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(m[1]==="/"){if(_[o.name]=c,(i=n.pop())[0]!==m[3])throw"Bad state: "+i}else m[0].charAt(m[0].length-2)!=="/"&&(c="",o=Xe(m[0],!1),n.push([m[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Xe(m[0],!1),c+=h2[m[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Xe(m[0],!1),c+=h2[m[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(m[0].slice(-2)==="/>")break;if(m[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=s.slice(d,m.index);break}else d=m.index+m[0].length;break;case"named-range":l=Xe(m[0],!1),V=Jm(l["cell-range-address"]);var ie={Name:l.name,Ref:V[0]+"!"+V[1]};M&&(ie.Sheet=x.length),H.Names.push(ie);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(m[1]==="/"&&(!g||!g["string-value"])){var ce=Tz(s.slice(b,m.index));v=(v.length>0?v+`
`:"")+ce[0]}else Xe(m[0],!1),b=m.index+m[0].length;break;case"s":break;case"database-range":if(m[1]==="/")break;try{V=Jm(Xe(m[0])["target-range-address"]),f[V[0]]["!autofilter"]={ref:V[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(m[1]!=="/"){if(A=Xe(m[0],!1),!A.href)break;A.Target=yt(A.href),delete A.href,A.Target.charAt(0)=="#"&&A.Target.indexOf(".")>-1?(V=Jm(A.Target.slice(1)),A.Target="#"+V[0]+"!"+V[1]):A.Target.match(/^\.\.[\\\/]/)&&(A.Target=A.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(m[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(m)}}var K={Sheets:f,SheetNames:x,Workbook:H};return r.bookSheets&&delete K.Sheets,K}function f2(e,t){t=t||{},Gs(e,"META-INF/manifest.xml")&&UM(nr(e,"META-INF/manifest.xml"),t);var r=Rs(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var s=WT(Rt(r),t);return Gs(e,"meta.xml")&&(s.Props=iT(nr(e,"meta.xml"))),s}function m2(e,t){return WT(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function rv(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Gp(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Rt(Wl(e))}function Wp(e){var t=e.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(t),s=0;return e.forEach(function(n){r.set(n,s),s+=n.length}),r}function x2(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function _z(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,s=e[t+14]&1,n=t+13;n>=t;--n)s=s*256+e[n];return(e[t+15]&128?-s:s)*Math.pow(10,r-6176)}function mu(e,t){var r=t?t[0]:0,s=e[r]&127;e:if(e[r++]>=128&&(s|=(e[r]&127)<<7,e[r++]<128||(s|=(e[r]&127)<<14,e[r++]<128)||(s|=(e[r]&127)<<21,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(s+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),s}function br(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Wr(e){for(var t=[],r=[0];r[0]<e.length;){var s=r[0],n=mu(e,r),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=mu(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(s))}var d={data:o,type:i};t[n]==null?t[n]=[d]:t[n].push(d)}return t}function sv(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Ez(e){for(var t,r=[],s=[0];s[0]<e.length;){var n=mu(e,s),i=Wr(e.slice(s[0],s[0]+n));s[0]+=n;var l={id:br(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=Wr(o.data),d=br(c[3][0].data);l.messages.push({meta:c,data:e.slice(s[0],s[0]+d)}),s[0]+=d}),(t=i[3])!=null&&t[0]&&(l.merge=br(i[3][0].data)>>>0>0),r.push(l)}return r}function Cz(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],s=mu(t,r),n=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}n.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[Wp(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=Wp(n);if(u.length!=s)throw new Error("Unexpected length: ".concat(u.length," != ").concat(s));return u}function Dz(e){for(var t=[],r=0;r<e.length;){var s=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Cz(s,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Wp(t)}function Az(e,t,r,s){var n=rv(e),i=n.getUint32(4,!0),l=(s>1?12:8)+x2(i&(s>1?3470:398))*4,o=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=x2(i&(s>1?12288:4096))*4,i&16&&(c=n.getUint32(l,!0),l+=4),i&32&&(d=n.getFloat64(l,!0),l+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function Pz(e,t,r){var s=rv(e),n=s.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,u=new Date(2001,0,1);n&1&&(c=_z(e,i),i+=16),n&2&&(d=s.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+s.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=s.getUint32(i,!0),i+=4),n&16&&(l=s.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[o]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return h}function Rz(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Az(e,t,r,e[0]);case 5:return Pz(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Pi(e){var t=Wr(e);return mu(t[1][0].data)}function p2(e,t){var r=Wr(t.data),s=br(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(l){var o=Wr(l.data),c=br(o[1][0].data)>>>0;switch(s){case 1:i[c]=Gp(o[3][0].data);break;case 8:{var d=e[Pi(o[9][0].data)][0],u=Wr(d.data),h=e[Pi(u[1][0].data)][0],f=br(h.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var x=Wr(h.data);i[c]=x[3].map(function(p){return Gp(p.data)}).join("")}break}}),i}function Fz(e,t){var r,s,n,i,l,o,c,d,u,h,f,x,p,m,y=Wr(e),g=br(y[1][0].data)>>>0,v=br(y[2][0].data)>>>0,b=((s=(r=y[8])==null?void 0:r[0])==null?void 0:s.data)&&br(y[8][0].data)>0||!1,S,D;if((i=(n=y[7])==null?void 0:n[0])!=null&&i.data&&t!=0)S=(o=(l=y[7])==null?void 0:l[0])==null?void 0:o.data,D=(d=(c=y[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=y[4])==null?void 0:u[0])!=null&&h.data&&t!=1)S=(x=(f=y[4])==null?void 0:f[0])==null?void 0:x.data,D=(m=(p=y[3])==null?void 0:p[0])==null?void 0:m.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var N=b?4:1,E=rv(S),w=[],_=0;_<S.length/2;++_){var C=E.getUint16(_*2,!0);C<65535&&w.push([_,C])}if(w.length!=v)throw"Expected ".concat(v," cells, found ").concat(w.length);var T=[];for(_=0;_<w.length-1;++_)T[w[_][0]]=D.subarray(w[_][1]*N,w[_+1][1]*N);return w.length>=1&&(T[w[w.length-1][0]]=D.subarray(w[w.length-1][1]*N)),{R:g,cells:T}}function Iz(e,t){var r,s=Wr(t.data),n=(r=s==null?void 0:s[7])!=null&&r[0]?br(s[7][0].data)>>>0>0?1:0:-1,i=sv(s[5],function(l){return Fz(l,n)});return{nrows:br(s[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function Mz(e,t,r){var s,n=Wr(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(br(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(br(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=ft(i);var l=Wr(n[4][0].data),o=p2(e,e[Pi(l[4][0].data)][0]),c=(s=l[17])!=null&&s[0]?p2(e,e[Pi(l[17][0].data)][0]):[],d=Wr(l[3][0].data),u=0;d[1].forEach(function(h){var f=Wr(h.data),x=e[Pi(f[2][0].data)][0],p=br(x.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var m=Iz(e,x);m.data.forEach(function(y,g){y.forEach(function(v,b){var S=et({r:u+g,c:b}),D=Rz(v,o,c);D&&(r[S]=D)})}),u+=m.nrows})}function Oz(e,t){var r=Wr(t.data),s={"!ref":"A1"},n=e[Pi(r[2][0].data)],i=br(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Mz(e,n[0],s),s}function Lz(e,t){var r,s=Wr(t.data),n={name:(r=s[1])!=null&&r[0]?Gp(s[1][0].data):"",sheets:[]},i=sv(s[2],Pi);return i.forEach(function(l){e[l].forEach(function(o){var c=br(o.meta[1][0].data);c==6e3&&n.sheets.push(Oz(e,o))})}),n}function Bz(e,t){var r=iv(),s=Wr(t.data),n=sv(s[1],Pi);if(n.forEach(function(i){e[i].forEach(function(l){var o=br(l.meta[1][0].data);if(o==2){var c=Lz(e,l);c.sheets.forEach(function(d,u){lv(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function tx(e){var t,r,s,n,i={},l=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Dz(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=Ez(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,l.push(h.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(s=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:s[1])==null?void 0:n[0].data)&&br(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var u=br(d.meta[1][0].data)>>>0;if(u==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Bz(i,o)}function zz(e){return function(r){for(var s=0;s!=e.length;++s){var n=e[s];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function av(e){zz([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function $z(e){return So.WS.indexOf(e)>-1?"sheet":e==So.CS?"chart":e==So.DS?"dialog":e==So.MS?"macro":e&&e.length?e:"sheet"}function Uz(e,t){if(!e)return 0;try{e=t.map(function(s){return s.id||(s.id=s.strRelID),[s.name,e["!id"][s.id].Target,$z(e["!id"][s.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Vz(e,t,r,s,n,i,l,o,c,d,u,h){try{i[s]=_d(Rs(e,r,!0),t);var f=nr(e,t),x;switch(o){case"sheet":x=qB(f,t,n,c,i[s],d,u,h);break;case"chart":if(x=XB(f,t,n,c,i[s],d,u,h),!x||!x["!drawel"])break;var p=nd(x["!drawel"].Target,t),m=$p(p),y=YL(Rs(e,p,!0),_d(Rs(e,m,!0),p)),g=nd(y,p),v=$p(g);x=PB(Rs(e,g,!0),g,c,_d(Rs(e,v,!0),g),d,x);break;case"macro":x=QB(f,t,n,c,i[s],d,u,h);break;case"dialog":x=ZB(f,t,n,c,i[s],d,u,h);break;default:throw new Error("Unrecognized sheet type "+o)}l[s]=x;var b=[];i&&i[s]&&sn(i[s]).forEach(function(S){var D="";if(i[s][S].Type==So.CMNT){D=nd(i[s][S].Target,t);var N=rz(nr(e,D,!0),D,c);if(!N||!N.length)return;t2(x,N,!1)}i[s][S].Type==So.TCMNT&&(D=nd(i[s][S].Target,t),b=b.concat(XL(nr(e,D,!0),c)))}),b&&b.length&&t2(x,b,!0,c.people||[])}catch(S){if(c.WTF)throw S}}function Us(e){return e.charAt(0)=="/"?e.slice(1):e}function Hz(e,t){if(D4(),t=t||{},av(t),Gs(e,"META-INF/manifest.xml")||Gs(e,"objectdata.xml"))return f2(e,t);if(Gs(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof tx<"u"){if(e.FileIndex)return tx(e);var r=ht.utils.cfb_new();return Ew(e).forEach(function(O){KI(r,O,M4(e,O))}),tx(r)}throw new Error("Unsupported NUMBERS file")}if(!Gs(e,"[Content_Types].xml"))throw Gs(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gs(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var s=Ew(e),n=zM(Rs(e,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",nr(e,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!nr(e,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(Dd=[],n.sst)try{Dd=tz(nr(e,Us(n.sst)),n.sst,t)}catch(O){if(t.WTF)throw O}t.cellStyles&&n.themes.length&&(c=ez(Rs(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],t)),n.style&&(d=JB(nr(e,Us(n.style)),n.style,c,t))}n.links.map(function(O){try{var z=_d(Rs(e,$p(Us(O))),O);return az(nr(e,Us(O)),z,O,t)}catch{}});var u=YB(nr(e,Us(n.workbooks[0])),n.workbooks[0],t),h={},f="";n.coreprops.length&&(f=nr(e,Us(n.coreprops[0]),!0),f&&(h=iT(f)),n.extprops.length!==0&&(f=nr(e,Us(n.extprops[0]),!0),f&&KM(f,h,t)));var x={};(!t.bookSheets||t.bookProps)&&n.custprops.length!==0&&(f=Rs(e,Us(n.custprops[0]),!0),f&&(x=WM(f,t)));var p={};if((t.bookSheets||t.bookProps)&&(u.Sheets?l=u.Sheets.map(function(z){return z.name}):h.Worksheets&&h.SheetNames.length>0&&(l=h.SheetNames),t.bookProps&&(p.Props=h,p.Custprops=x),t.bookSheets&&typeof l<"u"&&(p.SheetNames=l),t.bookSheets?p.SheetNames:t.bookProps))return p;l={};var m={};t.bookDeps&&n.calcchain&&(m=sz(nr(e,Us(n.calcchain)),n.calcchain));var y=0,g={},v,b;{var S=u.Sheets;h.Worksheets=S.length,h.SheetNames=[];for(var D=0;D!=S.length;++D)h.SheetNames[D]=S[D].name}var N=i?"bin":"xml",E=n.workbooks[0].lastIndexOf("/"),w=(n.workbooks[0].slice(0,E+1)+"_rels/"+n.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Gs(e,w)||(w="xl/_rels/workbook."+N+".rels");var _=_d(Rs(e,w,!0),w.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(t.xlmeta=nz(nr(e,Us(n.metadata[0])),n.metadata[0],t)),(n.people||[]).length>=1&&(t.people=QL(nr(e,Us(n.people[0])),t)),_&&(_=Uz(_,u.Sheets));var C=nr(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=h.Worksheets;++y){var T="sheet";if(_&&_[y]?(v="xl/"+_[y][1].replace(/[\/]?xl\//,""),Gs(e,v)||(v=_[y][1]),Gs(e,v)||(v=w.replace(/_rels\/.*$/,"")+_[y][1]),T=_[y][2]):(v="xl/worksheets/sheet"+(y+1-C)+"."+N,v=v.replace(/sheet0\./,"sheet.")),b=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(h.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var j=!1,F=0;F!=t.sheets.length;++F)typeof t.sheets[F]=="number"&&t.sheets[F]==y&&(j=1),typeof t.sheets[F]=="string"&&t.sheets[F].toLowerCase()==h.SheetNames[y].toLowerCase()&&(j=1);if(!j)continue e}}Vz(e,v,b,h.SheetNames[y],y,g,l,T,t,u,c,d)}return p={Directory:n,Workbook:u,Props:h,Custprops:x,Deps:m,Sheets:l,SheetNames:h.SheetNames,Strings:Dd,Styles:d,Themes:c,SSF:Fr(st)},t&&t.bookFiles&&(e.files?(p.keys=s,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(O,z){O=O.replace(/^Root Entry[\/]/,""),p.keys.push(O),p.files[O]=e.FileIndex[z]}))),t&&t.bookVBA&&(n.vba.length>0?p.vbaraw=nr(e,Us(n.vba[0]),!0):n.defaults&&n.defaults.bin===t7&&(p.vbaraw=nr(e,"xl/vbaProject.bin",!0))),p}function Kz(e,t){var r=t||{},s="Workbook",n=ht.find(e,s);try{if(s="/!DataSpaces/Version",n=ht.find(e,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(O8(n.content),s="/!DataSpaces/DataSpaceMap",n=ht.find(e,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);var i=B8(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=ht.find(e,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);var l=z8(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=ht.find(e,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);U8(n.content)}catch{}if(s="/EncryptionInfo",n=ht.find(e,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);var o=V8(n.content);if(s="/EncryptedPackage",n=ht.find(e,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function nv(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ls(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Gz(e,t){return ht.find(e,"EncryptedPackage")?Kz(e,t):HT(e,t)}function Wz(e,t){var r,s=e,n=t||{};return n.type||(n.type=dt&&Buffer.isBuffer(e)?"buffer":"base64"),r=O4(s,n),Hz(r,n)}function YT(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Hp(e.slice(r),t);default:break e}return uu.to_workbook(e,t)}function Yz(e,t){var r="",s=nv(e,t);switch(t.type){case"base64":r=Ls(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=zl(e);break;default:throw new Error("Unrecognized type "+t.type)}return s[0]==239&&s[1]==187&&s[2]==191&&(r=Rt(r)),t.type="binary",YT(r,t)}function qz(e,t){var r=e;return t.type=="base64"&&(r=Ls(r)),r=Jn.utils.decode(1200,r.slice(2),"str"),t.type="binary",YT(r,t)}function Xz(e){return e.match(/[^\x00-\x7F]/)?id(e):e}function rx(e,t,r,s){return s?(r.type="string",uu.to_workbook(e,r)):uu.to_workbook(t,r)}function Yp(e,t){y4();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Yp(new Uint8Array(e),(r=Fr(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var s=e,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),zo={},r.dateNF&&(zo.dateNF=r.dateNF),r.type||(r.type=dt&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=dt?"buffer":"binary",s=LI(e),typeof Uint8Array<"u"&&!dt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,s=Xz(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Fr(r),r.type="array",Yp(Oy(s),r)}switch((n=nv(s,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return Gz(ht.read(s,r),r);break;case 9:if(n[1]<=8)return HT(s,r);break;case 60:return Hp(s,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return j8(s,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return N8.to_workbook(s,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?Wz(s,r):rx(e,s,r,i);case 239:return n[3]===60?Hp(s,r):rx(e,s,r,i);case 255:if(n[1]===254)return qz(s,r);if(n[1]===0&&n[2]===2&&n[3]===0)return Cd.to_workbook(s,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return Cd.to_workbook(s,r);break;case 3:case 131:case 139:case 140:return e2.to_workbook(s,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return tL.to_workbook(s,r);break;case 10:case 13:case 32:return Yz(s,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return b8.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?e2.to_workbook(s,r):rx(e,s,r,i)}function Qz(e,t,r,s,n,i,l,o){var c=Ir(r),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,f=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!l||e[r])for(var x=t.s.c;x<=t.e.c;++x){var p=l?e[r][x]:e[s[x]+c];if(p===void 0||p.t===void 0){if(d===void 0)continue;i[x]!=null&&(f[i[x]]=d);continue}var m=p.v;switch(p.t){case"z":if(m==null)break;continue;case"e":m=m==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(i[x]!=null){if(m==null)if(p.t=="e"&&m===null)f[i[x]]=null;else if(d!==void 0)f[i[x]]=d;else if(u&&m===null)f[i[x]]=null;else continue;else f[i[x]]=u&&(p.t!=="n"||p.t==="n"&&o.rawNumbers!==!1)?m:Rn(p,m,o);m!=null&&(h=!1)}}return{row:f,isempty:h}}function qp(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},s=0,n=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)?s=3:d.header==null&&(s=0),typeof u){case"string":c=Qt(u);break;case"number":c=Qt(e["!ref"]),c.s.r=u;break;default:c=u}s>0&&(n=0);var h=Ir(c.s.r),f=[],x=[],p=0,m=0,y=Array.isArray(e),g=c.s.r,v=0,b={};y&&!e[g]&&(e[g]=[]);var S=d.skipHidden&&e["!cols"]||[],D=d.skipHidden&&e["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(S[v]||{}).hidden)switch(f[v]=gr(v),r=y?e[g][v]:e[f[v]+h],s){case 1:i[v]=v-c.s.c;break;case 2:i[v]=f[v];break;case 3:i[v]=d.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Rn(r,null,d),m=b[l]||0,!m)b[l]=1;else{do o=l+"_"+m++;while(b[o]);b[l]=m,b[o]=1}i[v]=o}for(g=c.s.r+n;g<=c.e.r;++g)if(!(D[g]||{}).hidden){var N=Qz(e,c,g,f,s,i,y,d);(N.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows))&&(x[p++]=N.row)}return x.length=p,x}var g2=/"/g;function Zz(e,t,r,s,n,i,l,o){for(var c=!0,d=[],u="",h=Ir(r),f=t.s.c;f<=t.e.c;++f)if(s[f]){var x=o.dense?(e[r]||[])[f]:e[s[f]+h];if(x==null)u="";else if(x.v!=null){c=!1,u=""+(o.rawNumbers&&x.t=="n"?x.v:Rn(x,null,o));for(var p=0,m=0;p!==u.length;++p)if((m=u.charCodeAt(p))===n||m===i||m===34||o.forceQuotes){u='"'+u.replace(g2,'""')+'"';break}u=="ID"&&(u='"ID"')}else x.f!=null&&!x.F?(c=!1,u="="+x.f,u.indexOf(",")>=0&&(u='"'+u.replace(g2,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(l)}function qT(e,t){var r=[],s=t??{};if(e==null||e["!ref"]==null)return"";var n=Qt(e["!ref"]),i=s.FS!==void 0?s.FS:",",l=i.charCodeAt(0),o=s.RS!==void 0?s.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];s.dense=Array.isArray(e);for(var f=s.skipHidden&&e["!cols"]||[],x=s.skipHidden&&e["!rows"]||[],p=n.s.c;p<=n.e.c;++p)(f[p]||{}).hidden||(h[p]=gr(p));for(var m=0,y=n.s.r;y<=n.e.r;++y)(x[y]||{}).hidden||(u=Zz(e,n,y,h,l,c,i,s),u!=null&&(s.strip&&(u=u.replace(d,"")),(u||s.blankrows!==!1)&&r.push((m++?o:"")+u)));return delete s.dense,r.join("")}function Jz(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=qT(e,t);return r}function e$(e){var t="",r,s="";if(e==null||e["!ref"]==null)return[];var n=Qt(e["!ref"]),i="",l=[],o,c=[],d=Array.isArray(e);for(o=n.s.c;o<=n.e.c;++o)l[o]=gr(o);for(var u=n.s.r;u<=n.e.r;++u)for(i=Ir(u),o=n.s.c;o<=n.e.c;++o)if(t=l[o]+i,r=d?(e[u]||[])[o]:e[t],s="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;s=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}c[c.length]=t+"="+s}return c}function XT(e,t,r){var s=r||{},n=+!s.skipHeader,i=e||{},l=0,o=0;if(i&&s.origin!=null)if(typeof s.origin=="number")l=s.origin;else{var c=typeof s.origin=="string"?is(s.origin):s.origin;l=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:l+t.length-1+n}};if(i["!ref"]){var h=Qt(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),l==-1&&(l=h.e.r+1,u.e.r=l+t.length-1+n)}else l==-1&&(l=0,u.e.r=t.length-1+n);var f=s.header||[],x=0;t.forEach(function(m,y){sn(m).forEach(function(g){(x=f.indexOf(g))==-1&&(f[x=f.length]=g);var v=m[g],b="z",S="",D=et({c:o+x,r:l+y+n});d=xu(i,D),v&&typeof v=="object"&&!(v instanceof Date)?i[D]=v:(typeof v=="number"?b="n":typeof v=="boolean"?b="b":typeof v=="string"?b="s":v instanceof Date?(b="d",s.cellDates||(b="n",v=us(v)),S=s.dateNF||st[14]):v===null&&s.nullError&&(b="e",v=0),d?(d.t=b,d.v=v,delete d.w,delete d.R,S&&(d.z=S)):i[D]=d={t:b,v},S&&(d.z=S))})}),u.e.c=Math.max(u.e.c,o+f.length-1);var p=Ir(l);if(n)for(x=0;x<f.length;++x)i[gr(x+o)+p]={t:"s",v:f[x]};return i["!ref"]=ft(u),i}function t$(e,t){return XT(null,e,t)}function xu(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var s=is(t);return e[s.r]||(e[s.r]=[]),e[s.r][s.c]||(e[s.r][s.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?xu(e,et(t)):xu(e,et({r:t,c:r||0}))}function r$(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function iv(){return{SheetNames:[],Sheets:{}}}function lv(e,t,r,s){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=l+n)!=-1;++n);}if(zB(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function s$(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var s=r$(e,t);switch(e.Workbook.Sheets[s]||(e.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[s].Hidden=r}function a$(e,t){return e.z=t,e}function QT(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function n$(e,t,r){return QT(e,"#"+t,r)}function i$(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function l$(e,t,r,s){for(var n=typeof t!="string"?t:Qt(t),i=typeof t=="string"?t:ft(t),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var c=xu(e,l,o);c.t="n",c.F=i,delete c.v,l==n.s.r&&o==n.s.c&&(c.f=r,s&&(c.D=!0))}return e}var o$={encode_col:gr,encode_row:Ir,encode_cell:et,encode_range:ft,decode_col:Gy,decode_row:Ky,split_cell:vM,decode_cell:is,decode_range:Cc,format_cell:Rn,sheet_add_aoa:tT,sheet_add_json:XT,sheet_add_dom:KT,aoa_to_sheet:Dc,json_to_sheet:t$,table_to_sheet:GT,table_to_book:jz,sheet_to_csv:qT,sheet_to_txt:Jz,sheet_to_json:qp,sheet_to_html:kz,sheet_to_formulae:e$,sheet_to_row_object_array:qp,sheet_get_cell:xu,book_new:iv,book_append_sheet:lv,book_set_sheet_visibility:s$,cell_set_number_format:a$,cell_set_hyperlink:QT,cell_set_internal_link:n$,cell_add_comment:i$,sheet_set_array_formula:l$,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};class sm{static async parseCSV(t,r={}){const s=Date.now();return new Promise((n,i)=>{const{preview:l=!1,previewRows:o=this.DEFAULT_PREVIEW_ROWS,hasHeaders:c=!0,delimiter:d="",skipEmptyLines:u=!0,trimHeaders:h=!0,transformHeader:f}=r;qS.parse(t,{header:!1,delimiter:d||void 0,skipEmptyLines:u,preview:l?o+(c?1:0):0,encoding:r.encoding||"UTF-8",complete:x=>{try{const p=Date.now()-s,m=x.data;if(m.length===0){i({type:"INVALID_DATA",message:"File appears to be empty or contains no valid data"});return}let y=[],g=[];if(c&&m.length>0)y=m[0].map((D,N)=>{let E=h?D.trim():D;return f&&(E=f(E)),E||`Column ${N+1}`}),g=m.slice(1);else{const S=Math.max(...m.map(D=>D.length));y=Array.from({length:S},(D,N)=>`Column ${N+1}`),g=m}const v=l?g.slice(0,o):g,b={headers:y,rows:g,totalRows:g.length,preview:v,metadata:{fileName:t.name,fileSize:t.size,fileType:t.type||"text/csv",encoding:r.encoding||"UTF-8",delimiter:x.meta.delimiter,hasHeaders:c,parseTime:p}};n(b)}catch(p){i({type:"PARSE_ERROR",message:"Failed to process CSV data",details:p})}},error:x=>{i({type:"PARSE_ERROR",message:`CSV parsing failed: ${x.message}`,details:x})}})})}static async parseExcel(t,r={}){const s=Date.now();return new Promise((n,i)=>{const l=new FileReader;l.onload=o=>{var c;try{const{preview:d=!1,previewRows:u=this.DEFAULT_PREVIEW_ROWS,hasHeaders:h=!0,trimHeaders:f=!0,transformHeader:x}=r,p=new Uint8Array((c=o.target)==null?void 0:c.result),m=Yp(p,{type:"array"}),y=m.SheetNames[0],g=m.Sheets[y];if(!g){i({type:"INVALID_DATA",message:"Excel file contains no readable worksheets"});return}const v=o$.sheet_to_json(g,{header:1,defval:"",blankrows:!1});if(v.length===0){i({type:"INVALID_DATA",message:"Excel file appears to be empty"});return}let b=[],S=[];if(h&&v.length>0)b=v[0].map((_,C)=>{let T=String(_||"");return f&&(T=T.trim()),x&&(T=x(T)),T||`Column ${C+1}`}),S=v.slice(1);else{const w=Math.max(...v.map(_=>_.length));b=Array.from({length:w},(_,C)=>`Column ${C+1}`),S=v}const D=d?S.slice(0,u):S,N=Date.now()-s,E={headers:b,rows:S,totalRows:S.length,preview:D,metadata:{fileName:t.name,fileSize:t.size,fileType:t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",hasHeaders:h,parseTime:N}};n(E)}catch(d){i({type:"PARSE_ERROR",message:"Failed to parse Excel file",details:d})}},l.onerror=()=>{i({type:"PARSE_ERROR",message:"Failed to read Excel file"})},l.readAsArrayBuffer(t)})}static async parseFile(t,r={}){if(t.size>this.MAX_FILE_SIZE)throw{type:"FILE_TOO_LARGE",message:`File size (${Math.round(t.size/1024/1024)}MB) exceeds maximum allowed size (${Math.round(this.MAX_FILE_SIZE/1024/1024)}MB)`};const s=t.type||this.getFileTypeFromExtension(t.name);if(!this.SUPPORTED_TYPES.includes(s))throw{type:"UNSUPPORTED_FORMAT",message:`Unsupported file format: ${s}. Supported formats: CSV, Excel (.xlsx, .xls)`};if(s==="text/csv"||s==="text/plain")return this.parseCSV(t,r);if(s==="application/vnd.ms-excel"||s==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")return this.parseExcel(t,r);throw{type:"UNSUPPORTED_FORMAT",message:`Unable to determine parser for file type: ${s}`}}static getFileTypeFromExtension(t){switch(t.toLowerCase().split(".").pop()){case"csv":return"text/csv";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xls":return"application/vnd.ms-excel";case"txt":return"text/plain";default:return"application/octet-stream"}}static validateParsedData(t){return t&&Array.isArray(t.headers)&&Array.isArray(t.rows)&&t.headers.length>0&&typeof t.totalRows=="number"&&t.metadata&&typeof t.metadata.fileName=="string"}static getParsingStats(t){const r=t.headers.map((s,n)=>{const i=t.rows.map(o=>o[n]),l=i.filter(o=>o!=null&&o!=="");return{name:s,index:n,totalValues:i.length,nonEmptyValues:l.length,emptyValues:i.length-l.length,fillRate:l.length/i.length,sampleValues:l.slice(0,5)}});return{totalColumns:t.headers.length,totalRows:t.totalRows,parseTime:t.metadata.parseTime,fileSize:t.metadata.fileSize,columnStats:r}}}sm.MAX_FILE_SIZE=50*1024*1024;sm.DEFAULT_PREVIEW_ROWS=10;sm.SUPPORTED_TYPES=["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"];class Xp{static detectValueType(t,r={}){var l,o,c;const s={...this.DEFAULT_OPTIONS,...r};if(t==null)return"null";const n=String(t),i=s.trimWhitespace?n.trim():n;return(l=s.nullValues)!=null&&l.includes(i.toLowerCase())?"null":(o=s.booleanTrueValues)!=null&&o.includes(i.toLowerCase())||(c=s.booleanFalseValues)!=null&&c.includes(i.toLowerCase())?"boolean":this.isEmail(i)?"email":this.isUrl(i)?"url":this.isPhone(i)?"phone":this.isCurrency(i,s.currencySymbols||[])?"currency":this.isPercentage(i)?"percentage":this.isDateTime(i)?"datetime":this.isDate(i)?"date":this.isTime(i)?"time":this.isInteger(i,s)?"integer":this.isFloat(i,s)?"float":"string"}static analyzeColumn(t,r,s,n={}){const i={...this.DEFAULT_OPTIONS,...n},l=t.filter(y=>y!=null&&String(y).trim()!=="");if(l.length===0)return{columnName:r,columnIndex:s,detectedType:"string",confidence:0,totalValues:t.length,nonEmptyValues:0,nullValues:t.length,uniqueValues:0,samples:[],convertedSamples:[],errors:["Column contains no data"]};const o={string:0,number:0,integer:0,float:0,boolean:0,date:0,datetime:0,time:0,email:0,url:0,phone:0,currency:0,percentage:0,null:0,unknown:0},c=l.slice(0,10),d=[],u=[];l.forEach(y=>{const g=this.detectValueType(y,i);o[g]++});const h=Object.entries(o).filter(([y,g])=>g>0).sort(([,y],[,g])=>g-y),[f,x]=h[0]||["string",0],p=x/l.length;c.forEach(y=>{try{const g=this.convertValue(y,f,i);d.push(g)}catch(g){d.push(y),u.push(`Failed to convert "${y}": ${g}`)}});const m=[];if(p<.8&&m.push(`Low confidence (${Math.round(p*100)}%) - consider manual review`),h.length>1){const[,y]=h[1];m.push(`Alternative type detected: ${y}`)}return{columnName:r,columnIndex:s,detectedType:f,confidence:p,totalValues:t.length,nonEmptyValues:l.length,nullValues:t.length-l.length,uniqueValues:new Set(l).size,samples:c,convertedSamples:d,errors:u,suggestions:m.length>0?m:void 0}}static convertValue(t,r,s={}){var o,c;const n={...this.DEFAULT_OPTIONS,...s};if(t==null)return null;const i=String(t),l=n.trimWhitespace?i.trim():i;switch(r){case"null":return null;case"boolean":if((o=n.booleanTrueValues)!=null&&o.includes(l.toLowerCase()))return!0;if((c=n.booleanFalseValues)!=null&&c.includes(l.toLowerCase()))return!1;throw new Error(`Cannot convert "${l}" to boolean`);case"integer":const d=this.parseNumber(l,n);if(!Number.isInteger(d))throw new Error(`"${l}" is not a valid integer`);return d;case"float":case"number":return this.parseNumber(l,n);case"currency":return this.parseCurrency(l,n);case"percentage":return this.parsePercentage(l);case"date":return this.parseDate(l);case"datetime":return this.parseDateTime(l);case"time":return this.parseTime(l);case"email":case"url":case"phone":case"string":default:return l}}static convertColumn(t,r,s={}){const n=[],i=[];return t.forEach((l,o)=>{try{const c=this.convertValue(l,r,s);n.push(c)}catch(c){n.push(l),i.push({index:o,value:l,error:String(c)})}}),{converted:n,errors:i}}static isEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}static isUrl(t){try{return new URL(t),!0}catch{return!1}}static isPhone(t){const r=/^[\+]?[1-9][\d]{0,15}$/,s=t.replace(/[\s\-\(\)\.]/g,"");return r.test(s)&&s.length>=7}static isCurrency(t,r){if(!r.some(i=>t.includes(i)))return!1;const n=t.replace(/[^\d\.,\-]/g,"");return this.isFloat(n,{})}static isPercentage(t){return t.includes("%")&&this.isFloat(t.replace("%",""),{})}static isInteger(t,r){try{const s=this.parseNumber(t,r);return Number.isInteger(s)}catch{return!1}}static isFloat(t,r){try{const s=this.parseNumber(t,r);return!isNaN(s)&&isFinite(s)}catch{return!1}}static isDate(t){return/^\d{1,4}[-\/\.]\d{1,2}[-\/\.]\d{1,4}$/.test(t)&&!isNaN(Date.parse(t))}static isDateTime(t){return/^\d{1,4}[-\/\.]\d{1,2}[-\/\.]\d{1,4}\s+\d{1,2}:\d{2}(:\d{2})?/.test(t)&&!isNaN(Date.parse(t))}static isTime(t){return/^\d{1,2}:\d{2}(:\d{2})?(\s*(AM|PM))?$/i.test(t)}static parseNumber(t,r){const{decimalSeparator:s=".",thousandsSeparator:n=","}=r;let i=t.replace(/\s/g,"");n&&n!==s&&(i=i.replace(new RegExp(`\\${n}`,"g"),"")),s!=="."&&(i=i.replace(s,"."));const l=parseFloat(i);if(isNaN(l))throw new Error(`Cannot parse "${t}" as number`);return l}static parseCurrency(t,r){const s=t.replace(/[^\d\.,\-]/g,"");return this.parseNumber(s,r)}static parsePercentage(t){const r=t.replace("%","");return parseFloat(r)/100}static parseDate(t){const r=new Date(t);if(isNaN(r.getTime()))throw new Error(`Cannot parse "${t}" as date`);return r}static parseDateTime(t){return this.parseDate(t)}static parseTime(t){return t}}Xp.DEFAULT_OPTIONS={dateFormats:["YYYY-MM-DD","DD/MM/YYYY","MM/DD/YYYY","DD-MM-YYYY","MM-DD-YYYY","YYYY/MM/DD","DD.MM.YYYY","YYYY-MM-DD HH:mm:ss","DD/MM/YYYY HH:mm:ss","MM/DD/YYYY HH:mm:ss"],currencySymbols:["$","","","","",""],decimalSeparator:".",thousandsSeparator:",",booleanTrueValues:["true","yes","y","1","on","enabled","active"],booleanFalseValues:["false","no","n","0","off","disabled","inactive"],nullValues:["","null","NULL","nil","NIL","n/a","N/A","undefined"],trimWhitespace:!0,strictMode:!1};const c$={maxFileSize:10*1024*1024,allowedTypes:[".csv",".xlsx",".xls"],previewRows:10,autoDetectTypes:!0,parseOptions:{hasHeaders:!0,skipEmptyLines:!0,trimHeaders:!0},conversionOptions:{trimWhitespace:!0,strictMode:!1}};function d$(e={}){const t={...c$,...e},r=k.useRef(t.parseOptions||{}),s=k.useRef(t.conversionOptions||{}),[n,i]=k.useState({file:null,isUploading:!1,isProcessing:!1,progress:0,error:null,parsedData:null,columnTypes:null,previewData:null}),l=k.useCallback(g=>{var v;if(t.maxFileSize&&g.size>t.maxFileSize)return`File size (${Math.round(g.size/1024/1024)}MB) exceeds maximum allowed size (${Math.round(t.maxFileSize/1024/1024)}MB)`;if(t.allowedTypes&&t.allowedTypes.length>0){const b="."+((v=g.name.split(".").pop())==null?void 0:v.toLowerCase());if(!t.allowedTypes.includes(b))return`File type "${b}" is not allowed. Allowed types: ${t.allowedTypes.join(", ")}`}return null},[t.maxFileSize,t.allowedTypes]),o=k.useCallback(async g=>{const v=l(g);if(v){i(b=>({...b,error:v}));return}i(b=>({...b,file:g,isUploading:!0,error:null,progress:0}));try{for(let b=0;b<=100;b+=10)i(S=>({...S,progress:b})),await new Promise(S=>setTimeout(S,50));i(b=>({...b,isUploading:!1,progress:100})),t.autoDetectTypes&&await c()}catch(b){i(S=>({...S,isUploading:!1,error:b instanceof Error?b.message:"Upload failed"}))}},[l,t.autoDetectTypes]),c=k.useCallback(async()=>{if(!n.file){i(g=>({...g,error:"No file selected"}));return}i(g=>({...g,isProcessing:!0,error:null}));try{const g=await sm.parseFile(n.file,r.current);let v=null;t.autoDetectTypes&&g.rows.length>0&&(v=g.headers.map((S,D)=>{const N=g.rows.map(E=>E[D]);return Xp.analyzeColumn(N,S,D,s.current)}));const b=g.rows.slice(0,t.previewRows||10);i(S=>({...S,isProcessing:!1,parsedData:g,columnTypes:v,previewData:b}))}catch(g){const v=g instanceof Error?`Parse error: ${g.message}`:"Processing failed";i(b=>({...b,isProcessing:!1,error:v}))}},[n.file,t.autoDetectTypes,t.previewRows]),d=k.useCallback(async(g,v)=>{if(!n.parsedData||!n.columnTypes){i(b=>({...b,error:"No data to convert"}));return}try{const b=n.parsedData.rows.map(w=>w[g]),{converted:S,errors:D}=Xp.convertColumn(b,v,s.current),N=n.parsedData.rows.map((w,_)=>{const C=[...w];return C[g]=S[_],C}),E=[...n.columnTypes];E[g]={...E[g],detectedType:v,confidence:D.length===0?1:1-D.length/b.length,errors:D.map(w=>w.error)},i(w=>({...w,parsedData:w.parsedData?{...w.parsedData,rows:N}:null,columnTypes:E,previewData:N.slice(0,t.previewRows||10)}))}catch(b){i(S=>({...S,error:b instanceof Error?b.message:"Conversion failed"}))}},[n.parsedData,n.columnTypes,t.previewRows]),u=k.useCallback(async()=>{if(!n.columnTypes){i(g=>({...g,error:"No column type information available"}));return}try{for(const g of n.columnTypes)await d(g.columnIndex,g.detectedType)}catch(g){i(v=>({...v,error:g instanceof Error?g.message:"Batch conversion failed"}))}},[n.columnTypes,d]),h=k.useCallback(()=>{i({file:null,isUploading:!1,isProcessing:!1,progress:0,error:null,parsedData:null,columnTypes:null,previewData:null})},[]),f=k.useCallback(()=>{i(g=>({...g,file:null,parsedData:null,columnTypes:null,previewData:null,error:null}))},[]),x=k.useCallback(g=>{r.current={...r.current,...g}},[]),p=k.useCallback(g=>{s.current={...s.current,...g}},[]),m=k.useCallback(g=>{if(!n.parsedData)return[];const v=g||t.previewRows||10;return n.parsedData.rows.slice(0,v)},[n.parsedData,t.previewRows]),y=k.useCallback(g=>{var v;if(!n.parsedData){i(b=>({...b,error:"No data to download"}));return}try{const b=[n.parsedData.headers.join(","),...n.parsedData.rows.map(E=>E.map(w=>typeof w=="string"&&w.includes(",")?`"${w.replace(/"/g,'""')}"`:String(w)).join(","))].join(`
`),S=new Blob([b],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a"),N=URL.createObjectURL(S);D.setAttribute("href",N),D.setAttribute("download",g||`processed_${((v=n.file)==null?void 0:v.name)||"data.csv"}`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(N)}catch(b){i(S=>({...S,error:b instanceof Error?b.message:"Download failed"}))}},[n.parsedData,n.file]);return{state:n,actions:{uploadFile:o,processFile:c,convertColumn:d,convertAllColumns:u,reset:h,removeFile:f,updateParseOptions:x,updateConversionOptions:p,getPreviewData:m,downloadProcessedData:y}}}const u$=[{id:"1",name:"iPhone 14 Pro",category:"Telefon",description:"Apple iPhone 14 Pro 128GB"},{id:"2",name:"Samsung Galaxy S23",category:"Telefon",description:"Samsung Galaxy S23 256GB"},{id:"3",name:"MacBook Air M2",category:"Laptop",description:"Apple MacBook Air M2 13 in"},{id:"4",name:"Dell XPS 13",category:"Laptop",description:"Dell XPS 13 Intel i7"},{id:"5",name:"iPad Pro",category:"Tablet",description:"Apple iPad Pro 11 in"},{id:"6",name:"AirPods Pro",category:"Kulaklk",description:"Apple AirPods Pro 2. nesil"},{id:"7",name:"Sony WH-1000XM4",category:"Kulaklk",description:"Sony WH-1000XM4 Kablosuz Kulaklk"},{id:"8",name:"Nintendo Switch",category:"Oyun Konsolu",description:"Nintendo Switch OLED Model"}],h$=()=>{var c;const{results:e,query:t,setQuery:r,isSearching:s}=lI(u$,{keys:["name","category","description"],threshold:.3,includeScore:!0}),{state:n,actions:i}=d$({maxFileSize:5*1024*1024,allowedTypes:[".csv",".xlsx",".xls"],parseOptions:{hasHeaders:!0,delimiter:",",encoding:"utf-8"}}),l=d=>{var h;const u=(h=d.target.files)==null?void 0:h[0];u&&i.uploadFile(u)},o=i.getPreviewData(5);return a.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Core Paket Test Sayfas"}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Fuzzy Search Testi"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"rn Ara"}),a.jsx(ye,{id:"search",type:"text",value:t,onChange:d=>r(d.target.value),placeholder:"iPhone, Samsung, MacBook...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s&&a.jsx("div",{className:"text-blue-600 mb-4",children:"Aranyor..."}),a.jsx("div",{className:"space-y-3",children:e.length>0?e.map((d,u)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:d.item.name}),a.jsx("p",{className:"text-sm text-gray-600",children:d.item.category}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:d.item.description})]}),d.score&&a.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Skor: ",((1-d.score)*100).toFixed(0),"%"]})]})},d.item.id)):t?a.jsxs("div",{className:"text-gray-500 text-center py-8",children:['"',t,'" iin sonu bulunamad']}):a.jsx("div",{className:"text-gray-500 text-center py-8",children:"Arama yapmak iin yukardaki kutuya yazn"})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"File Upload Testi"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV/Excel Dosyas Se"}),a.jsx(ye,{id:"file-upload",type:"file",accept:".csv,.xlsx,.xls",onChange:l,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Dosya Durumu"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Durum:"})," ",a.jsx("span",{className:`px-2 py-1 rounded text-xs ${n.file?n.isProcessing?"bg-yellow-100 text-yellow-800":n.parsedData?"bg-green-100 text-green-800":"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:n.file?n.isProcessing?"leniyor":n.parsedData?"Baarl":"Hata":"Bekliyor"})]}),n.file&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Dosya:"})," ",n.file.name]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Boyut:"})," ",(n.file.size/1024).toFixed(1)," KB"]})]}),n.parsedData&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Satr Says:"})," ",n.parsedData.rows.length]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Stun Says:"})," ",n.parsedData.headers.length]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Stun Tipleri"}),n.columnTypes&&a.jsx("div",{className:"space-y-1 text-sm",children:n.columnTypes.map((d,u)=>{var h;return a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium",children:[(h=n.parsedData)==null?void 0:h.headers[u],":"]})," ",a.jsx("span",{className:"text-blue-600",children:d.detectedType}),d.confidence&&a.jsxs("span",{className:"text-gray-500 ml-1",children:["(",(d.confidence*100).toFixed(0),"%)"]})]},u)})})]})]}),n.error&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:[a.jsx("h4",{className:"text-red-800 font-medium mb-2",children:"Hata"}),a.jsx("p",{className:"text-red-700 text-sm",children:n.error})]}),o.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Veri nizlemesi (lk 5 satr)"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:(c=n.parsedData)==null?void 0:c.headers.map((d,u)=>a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:d},u))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((d,u)=>a.jsx("tr",{className:"hover:bg-gray-50",children:d.map((h,f)=>a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 whitespace-nowrap",children:String(h)},f))},u))})]})})]}),n.parsedData&&a.jsxs("div",{className:"mt-6 flex gap-3",children:[a.jsx(Z,{onClick:()=>i.processFile(),disabled:n.isProcessing,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",variant:"default",children:n.isProcessing?"leniyor...":"Yeniden le"}),a.jsx(Z,{onClick:()=>i.reset(),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",variant:"default",children:"Temizle"})]})]})]})},f$=Or("/test")({component:h$}),m$={blue:{bg:"bg-blue-100",icon:"text-blue-600",trend:"text-blue-600"},green:{bg:"bg-green-100",icon:"text-green-600",trend:"text-green-600"},yellow:{bg:"bg-yellow-100",icon:"text-yellow-600",trend:"text-yellow-600"},purple:{bg:"bg-purple-100",icon:"text-purple-600",trend:"text-purple-600"},red:{bg:"bg-red-100",icon:"text-red-600",trend:"text-red-600"}},L0=({title:e,value:t,icon:r,color:s,trend:n,onClick:i,className:l=""})=>{const o=m$[s];return a.jsx("div",{className:`bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow ${i?"cursor-pointer":""} ${l}`,onClick:i,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:t}),n&&a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx("svg",{className:`w-4 h-4 mr-1 ${n.direction==="up"?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:n.direction==="up"?"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6":"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),a.jsx("span",{className:`text-sm ${n.direction==="up"?"text-green-600":"text-red-600"}`,children:n.value})]})]}),a.jsx("div",{className:`p-3 ${o.bg} rounded-lg`,children:a.jsx(r,{className:`w-6 h-6 ${o.icon}`})})]})})},x$=()=>{const[e,t]=k.useState("overview"),[r,s]=k.useState({dateRange:{start:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}}),[n,i]=k.useState({totalRevenue:0,totalSales:0,averageOrderValue:0,totalPaid:0,totalPending:0,sgkSupport:0,completionRate:0,paymentMethods:{cash:0,card:0,installment:0,transfer:0,sgk:0}}),[l,o]=k.useState({totalCollected:0,pendingPayments:0,overduePayments:0,installmentPayments:0,promissoryNotes:0,collectionRate:0}),[c,d]=k.useState(!1);k.useEffect(()=>{u()},[r]);const u=async()=>{d(!0),setTimeout(()=>{i({totalRevenue:245e4,totalSales:156,averageOrderValue:15705,totalPaid:189e4,totalPending:56e4,sgkSupport:98e4,completionRate:77.1,paymentMethods:{cash:45e4,card:68e4,installment:52e4,transfer:24e4,sgk:56e4}}),o({totalCollected:189e4,pendingPayments:56e4,overduePayments:125e3,installmentPayments:34e4,promissoryNotes:95e3,collectionRate:77.1}),d(!1)},1e3)},h=(m,y)=>{s(g=>({...g,[m]:y}))},f=m=>{console.log(`Exporting report as ${m}`)},x=m=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(m),p=m=>`%${m.toFixed(1)}`;return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Raporlar ve Analizler"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sat performans ve deme takibi raporlar"})]}),a.jsxs("div",{className:"mt-4 flex md:mt-0 md:ml-4 space-x-3",children:[a.jsx(Z,{onClick:()=>f("pdf"),variant:"outline",icon:a.jsx(yr,{className:"w-4 h-4"}),children:"PDF ndir"}),a.jsx(Z,{onClick:()=>f("excel"),variant:"outline",icon:a.jsx(yr,{className:"w-4 h-4"}),children:"Excel ndir"})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Ea,{className:"w-5 h-5 text-gray-500 mr-2"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filtreler"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balang Tarihi"}),a.jsx(ye,{type:"date",value:r.dateRange.start,onChange:m=>h("dateRange",{...r.dateRange,start:m.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biti Tarihi"}),a.jsx(ye,{type:"date",value:r.dateRange.end,onChange:m=>h("dateRange",{...r.dateRange,end:m.target.value})})]}),a.jsx("div",{children:a.jsx(Ue,{label:"ube",value:r.branch||"",onChange:m=>h("branch",m.target.value),options:[{value:"",label:"Tm ubeler"},{value:"merkez",label:"Merkez ube"},{value:"kadikoy",label:"Kadky ube"},{value:"besiktas",label:"Beikta ube"}]})}),a.jsx("div",{children:a.jsx(Ue,{label:"deme Yntemi",value:r.paymentMethod||"",onChange:m=>h("paymentMethod",m.target.value),options:[{value:"",label:"Tm Yntemler"},{value:"cash",label:"Nakit"},{value:"card",label:"Kart"},{value:"installment",label:"Taksit"},{value:"transfer",label:"Havale"},{value:"sgk",label:"SGK"}]})}),a.jsx("div",{children:a.jsx(Ue,{label:"SGK Durumu",value:r.sgkStatus||"",onChange:m=>h("sgkStatus",m.target.value),options:[{value:"",label:"Tm"},{value:"with_sgk",label:"SGK Destekli"},{value:"without_sgk",label:"SGK Desteksiz"}]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:[{id:"overview",label:"Genel Bak",icon:rh},{id:"sales",label:"Sat Performans",icon:Di},{id:"payments",label:"deme Takibi",icon:_a},{id:"analytics",label:"Detayl Analiz",icon:yp}].map(m=>{const y=m.icon;return a.jsxs("button",{onClick:()=>t(m.id),className:`${e===m.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,"data-allow-raw":!0,children:[a.jsx(y,{className:"w-4 h-4 mr-2"}),m.label]},m.id)})})}),a.jsxs("div",{className:"p-6",children:[e==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(L0,{title:"Toplam Ciro",value:x(n.totalRevenue),icon:rr,color:"green",trend:{value:"+12.5%",direction:"up"}}),a.jsx(L0,{title:"Toplam Sat",value:n.totalSales,icon:wt,color:"blue",trend:{value:"+8.3%",direction:"up"}}),a.jsx(L0,{title:"Tahsilat Oran",value:p(l.collectionRate),icon:ea,color:"purple",trend:{value:"+2.1%",direction:"up"}}),a.jsx(L0,{title:"Ortalama Sat",value:x(n.averageOrderValue),icon:Di,color:"yellow",trend:{value:"+5.7%",direction:"up"}})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sat zeti"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Toplam Ciro:"}),a.jsx("span",{className:"font-medium",children:x(n.totalRevenue)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Tahsil Edilen:"}),a.jsx("span",{className:"font-medium text-green-600",children:x(n.totalPaid)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Bekleyen:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:x(n.totalPending)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"SGK Destei:"}),a.jsx("span",{className:"font-medium text-blue-600",children:x(n.sgkSupport)})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"deme Yntemleri"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Nakit:"}),a.jsx("span",{className:"font-medium",children:x(n.paymentMethods.cash)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Kart:"}),a.jsx("span",{className:"font-medium",children:x(n.paymentMethods.card)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Taksit:"}),a.jsx("span",{className:"font-medium",children:x(n.paymentMethods.installment)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Havale:"}),a.jsx("span",{className:"font-medium",children:x(n.paymentMethods.transfer)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"SGK:"}),a.jsx("span",{className:"font-medium",children:x(n.paymentMethods.sgk)})]})]})]})]})]}),e==="sales"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sat Performans Analizi"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Di,{className:"w-8 h-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Aylk Byme"}),a.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"+12.5%"})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zs,{className:"w-8 h-8 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Yeni Mteriler"}),a.jsx("p",{className:"text-2xl font-bold text-green-900",children:"47"})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-8 h-8 text-purple-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600",children:"Gnlk Ortalama"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:x(n.totalRevenue/30)})]})]})})]}),a.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx(rh,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sat Trendi Grafii"}),a.jsx("p",{className:"text-gray-500",children:"Gnlk, haftalk ve aylk sat trendlerini grntleyin"}),a.jsx(Z,{className:"mt-4",variant:"outline",children:"Grafik Grnm"})]})]}),e==="payments"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"deme Takibi ve Tahsilat"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-green-50 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"w-6 h-6 text-green-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Tahsil Edilen"}),a.jsx("p",{className:"text-xl font-bold text-green-900",children:x(l.totalCollected)})]})]})}),a.jsx("div",{className:"bg-yellow-50 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-6 h-6 text-yellow-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-600",children:"Bekleyen demeler"}),a.jsx("p",{className:"text-xl font-bold text-yellow-900",children:x(l.pendingPayments)})]})]})}),a.jsx("div",{className:"bg-red-50 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ea,{className:"w-6 h-6 text-red-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-600",children:"Geciken demeler"}),a.jsx("p",{className:"text-xl font-bold text-red-900",children:x(l.overduePayments)})]})]})}),a.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(_a,{className:"w-6 h-6 text-blue-500 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Taksitli demeler"}),a.jsx("p",{className:"text-xl font-bold text-blue-900",children:x(l.installmentPayments)})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tahsilat Durumu"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Tahsilat Oran"}),a.jsx("span",{className:"text-lg font-semibold text-green-600",children:p(l.collectionRate)})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${l.collectionRate}%`}})}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Hedef: %85 (Mevcut: ",p(l.collectionRate),")"]})]})]}),a.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Senet Takibi"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Toplam Senet:"}),a.jsx("span",{className:"font-medium",children:x(l.promissoryNotes)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Vadesi Gelen:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:x(45e3)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Vadesi Geen:"}),a.jsx("span",{className:"font-medium text-red-600",children:x(15e3)})]})]})]})]})]}),e==="analytics"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detayl Analiz ve statistikler"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx(yp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"rn Kategorisi Analizi"}),a.jsx("p",{className:"text-gray-500",children:"En ok satan rn kategorilerini grntleyin"})]}),a.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx(rh,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mteri Segmentasyonu"}),a.jsx("p",{className:"text-gray-500",children:"Mteri gruplarna gre sat analizi"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gelimi Metrikler"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"4.2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ortalama Mteri Puan"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:"68%"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Mteri Memnuniyeti"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"23%"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Tekrar Sat Oran"})]})]})]})]})]})]})]})]})},p$=Or("/reports")({component:x$}),lr=()=>({appointmentsGetAppointments:(te,le)=>ge.get("/api/appointments",{...le,params:{...te,...le==null?void 0:le.params}}),appointmentsCreateAppointment:(te,le)=>ge.post("/api/appointments",te,le),communicationsListMessages:(te,le)=>ge.get("/api/communications/messages",{...le,params:{...te,...le==null?void 0:le.params}}),communicationsListTemplates:(te,le)=>ge.get("/api/communications/templates",{...le,params:{...te,...le==null?void 0:le.params}}),communicationsCreateTemplate:(te,le)=>ge.post("/api/communications/templates",te,le),communicationsGetTemplate:(te,le)=>ge.get(`/api/communications/templates/${te}`,le),communicationsUpdateTemplate:(te,le,Ye)=>ge.put(`/api/communications/templates/${te}`,le,Ye),communicationsDeleteTemplate:(te,le)=>ge.delete(`/api/communications/templates/${te}`,le),appointmentsDeleteAppointment:(te,le)=>ge.delete(`/api/appointments/${te}`,le),appointmentsCancelAppointment:(te,le,Ye)=>ge.post(`/api/appointments/${te}/cancel`,le,Ye),appointmentsCompleteAppointment:(te,le,Ye)=>ge.post(`/api/appointments/${te}/complete`,le,Ye),appointmentsRescheduleAppointment:(te,le,Ye)=>ge.post(`/api/appointments/${te}/reschedule`,le,Ye),appointmentsGetAvailability:te=>ge.get("/api/appointments/availability",te),appointmentsListAppointments:te=>ge.get("/api/appointments/list",te),automationTriggerBackup:(te,le)=>ge.post("/api/automation/backup",te,le),automationGetAutomationLogs:te=>ge.get("/api/automation/logs",te),automationTriggerSgkProcessing:(te,le)=>ge.post("/api/automation/sgk/process",te,le),automationGetAutomationStatus:te=>ge.get("/api/automation/status",te),campaignsCreateCampaign:(te,le)=>ge.post("/api/campaigns",te,le),dashboardGetDashboardData:te=>ge.get("/api/dashboard",te),campaignsSendCampaign:(te,le,Ye)=>ge.post(`/api/campaigns/${te}/send`,le,Ye),registrationGetTurnstileConfig:te=>ge.get("/api/config/turnstile",te),dashboardPatientTrends:te=>ge.get("/api/dashboard/charts/patient-trends",te),dashboardRevenueTrends:te=>ge.get("/api/dashboard/charts/revenue-trends",te),dashboardGetKpis:te=>ge.get("/api/dashboard/kpis",te),dashboardRecentActivity:te=>ge.get("/api/dashboard/recent-activity",te),devicesGetDevices:(te,le)=>ge.get("/api/devices",{...le,params:{...te,...le==null?void 0:le.params}}),devicesCreateDevice:(te,le)=>ge.post("/api/devices",te,le),devicesDeleteDevice:(te,le)=>ge.delete(`/api/devices/${te}`,le),devicesUpdateDeviceStock:(te,le,Ye)=>ge.post(`/api/devices/${te}/stock-update`,le,Ye),devicesGetDeviceBrands:te=>ge.get("/api/devices/brands",te),devicesCreateDeviceBrand:(te,le)=>ge.post("/api/devices/brands",te,le),devicesGetDeviceCategories:te=>ge.get("/api/devices/categories",te),devicesCreateDeviceCategory:(te,le)=>ge.post("/api/devices/categories",te,le),devicesGetLowStockDevices:te=>ge.get("/api/devices/low-stock",te),healthCheck:te=>ge.get("/api/health",te),inventoryGetInventoryItems:(te,le)=>ge.get("/api/inventory",{...le,params:{...te,...le==null?void 0:le.params}}),inventoryCreateInventoryItem:(te,le)=>ge.post("/api/inventory",te,le),inventoryGetInventoryItem:(te,le)=>ge.get(`/api/inventory/${te}`,le),inventoryDeleteInventoryItem:(te,le)=>ge.delete(`/api/inventory/${te}`,le),inventoryGetInventoryActivities:(te,le)=>ge.get(`/api/inventory/${te}/activity`,le),inventoryAssignToPatient:(te,le,Ye)=>ge.post(`/api/inventory/${te}/assign`,le,Ye),inventoryAddSerialNumbers:(te,le,Ye)=>ge.post(`/api/inventory/${te}/serials`,le,Ye),inventoryGetLowStockItems:te=>ge.get("/api/inventory/low-stock",te),inventoryGetInventoryStats:te=>ge.get("/api/inventory/stats",te),inventoryGetCategories:te=>ge.get("/api/inventory/categories",te),inventoryCreateCategory:(te,le)=>ge.post("/api/inventory/categories",te,le),invoicesCreateInvoice:(te,le)=>ge.post("/api/invoices",te,le),invoicesGetInvoice:(te,le)=>ge.get(`/api/invoices/${te}`,le),invoicesDeleteInvoice:(te,le)=>ge.delete(`/api/invoices/${te}`,le),invoicesGenerateInvoicePdf:(te,le)=>ge.get(`/api/invoices/${te}/pdf`,{responseType:"blob",...le}),invoicesSendToGib:(te,le)=>ge.post(`/api/invoices/${te}/send-to-gib`,void 0,le),notificationsListNotifications:te=>ge.get("/api/notifications",te),notificationsDeleteNotification:(te,le)=>ge.delete(`/api/notifications/${te}`,le),notificationsMarkNotificationRead:(te,le,Ye)=>ge.put(`/api/notifications/${te}/read`,le,Ye),notificationsNotificationStats:te=>ge.get("/api/notifications/stats",te),sgkProcessOcr:(te,le)=>ge.post("/api/ocr/process",te,le),serveOpenapiYaml:te=>ge.get("/api/openapi.yaml",te),patientsGetPatients:(te,le)=>ge.get("/api/patients",{...le,params:{...te,...le==null?void 0:le.params}}),patientsCreatePatient:(te,le)=>ge.post("/api/patients",te,le),patientsDeletePatient:(te,le)=>ge.delete(`/api/patients/${te}`,le),patientsGetPatientDevices:(te,le)=>ge.get(`/api/patients/${te}/devices`,le),salesAssignDevicesExtended:(te,le,Ye)=>ge.post(`/api/patients/${te}/assign-devices-extended`,le,Ye),patientSubresourcesCreatePatientEreceipt:(te,le,Ye)=>ge.post(`/api/patients/${te}/ereceipts`,le,Ye),patientSubresourcesDeletePatientEreceipt:(te,le,Ye)=>ge.delete(`/api/patients/${te}/ereceipts/${le}`,Ye),patientSubresourcesAddPatientHearingTest:(te,le,Ye)=>ge.post(`/api/patients/${te}/hearing-tests`,le,Ye),patientSubresourcesDeletePatientHearingTest:(te,le,Ye)=>ge.delete(`/api/patients/${te}/hearing-tests/${le}`,Ye),patientSubresourcesCreatePatientNote:(te,le,Ye)=>ge.post(`/api/patients/${te}/notes`,le,Ye),patientSubresourcesDeletePatientNote:(te,le,Ye)=>ge.delete(`/api/patients/${te}/notes/${le}`,Ye),paymentsGetPatientPromissoryNotes:(te,le)=>ge.get(`/api/patients/${te}/promissory-notes`,le),salesGetPatientSales:(te,le)=>ge.get(`/api/patients/${te}/sales`,le),sgkGetPatientSgkDocuments:(te,le)=>ge.get(`/api/patients/${te}/sgk-documents`,le),timelineGetPatientTimeline:(te,le)=>ge.get(`/api/patients/${te}/timeline`,le),timelineAddTimelineEvent:(te,le,Ye)=>ge.post(`/api/patients/${te}/timeline`,le,Ye),timelineDeleteTimelineEvent:(te,le,Ye)=>ge.delete(`/api/patients/${te}/timeline/${le}`,Ye),timelineLogPatientActivity:(te,le,Ye)=>ge.post(`/api/patients/${te}/activities`,le,Ye),patientsBulkUploadPatients:(te,le)=>ge.post("/api/patients/bulk_upload",te,le),patientsExportPatientsCsv:te=>ge.get("/api/patients/export",te),patientsSearchPatients:te=>ge.get("/api/patients/search",te),salesPricingPreview:(te,le)=>ge.post("/api/pricing-preview",te,le),suppliersDeleteProductSupplier:(te,le)=>ge.delete(`/api/product-suppliers/${te}`,le),suppliersAddProductSupplier:(te,le,Ye)=>ge.post(`/api/products/${te}/suppliers`,le,Ye),paymentsCreatePromissoryNotes:(te,le)=>ge.post("/api/promissory-notes",te,le),paymentsUpdatePromissoryNote:(te,le,Ye)=>ge.patch(`/api/promissory-notes/${te}`,le,Ye),paymentsCollectPromissoryNote:(te,le,Ye)=>ge.post(`/api/promissory-notes/${te}/collect`,le,Ye),registrationRegisterPhone:(te,le)=>ge.post("/api/register-phone",te,le),reportsReportAppointments:te=>ge.get("/api/reports/appointments",te),reportsReportCampaigns:te=>ge.get("/api/reports/campaigns",te),reportsReportFinancial:te=>ge.get("/api/reports/financial",te),reportsReportOverview:te=>ge.get("/api/reports/overview",te),reportsReportPatients:te=>ge.get("/api/reports/patients",te),reportsReportRevenue:te=>ge.get("/api/reports/revenue",te),salesListSales:te=>ge.get("/api/sales",te),salesCreateSale:(te,le)=>ge.post("/api/sales",te,le),salesGetSale:(te,le)=>ge.get(`/api/sales/${te}`,le),salesUpdateSale:(te,le,Ye)=>ge.put(`/api/sales/${te}`,le,Ye),salesDeleteSale:(te,le)=>ge.delete(`/api/sales/${te}`,le),salesCreateSalePaymentPlan:(te,le,Ye)=>ge.post(`/api/sales/${te}/payment-plan`,le,Ye),paymentsGetSalePromissoryNotes:(te,le)=>ge.get(`/api/sales/${te}/promissory-notes`,le),salesCreateSaleInvoice:(te,le,Ye)=>ge.post(`/api/sales/${te}/invoice`,le,Ye),salesGetSaleInvoice:(te,le)=>ge.get(`/api/sales/${te}/invoice`,le),salesGenerateSaleInvoicePdf:(te,le)=>ge.get(`/api/sales/${te}/invoice/pdf`,{responseType:"blob",...le}),updateSettings:(te,le)=>ge.put("/api/settings",te,le),sgkUploadSgkDocument:(te,le)=>ge.post("/api/sgk/documents",te,le),sgkDeleteSgkDocument:(te,le)=>ge.delete(`/api/sgk/documents/${te}`,le),smsMonitoring:te=>ge.get("/api/sms/monitoring",te),suppliersGetSuppliers:(te,le)=>ge.get("/api/suppliers",{...le,params:{...te,...le==null?void 0:le.params}}),suppliersCreateSupplier:(te,le)=>ge.post("/api/suppliers",te,le),suppliersDeleteSupplier:(te,le)=>ge.delete(`/api/suppliers/${te}`,le),suppliersGetSupplierProducts:(te,le)=>ge.get(`/api/suppliers/${te}/products`,le),suppliersGetSupplierStats:te=>ge.get("/api/suppliers/stats",te),registrationVerifyRegistrationOtp:(te,le)=>ge.post("/api/verify-registration-otp",te,le),usersListUsers:te=>ge.get("/api/users",te),usersCreateUser:(te,le)=>ge.post("/api/users",te,le),usersGetUser:(te,le)=>ge.get(`/api/users/${te}`,le),usersUpdateUser:(te,le,Ye)=>ge.put(`/api/users/${te}`,le,Ye),usersDeleteUser:(te,le)=>ge.delete(`/api/users/${te}`,le),usersGetCurrentUser:te=>ge.get("/api/users/me",te),ocrExtractEntities:(te,le)=>ge.post("/entities",te,le),ocrExtractPatientName:(te,le)=>ge.post("/extract_patient",te,le),ocrHealthCheck:te=>ge.get("/health",te),ocrInitDatabase:(te,le)=>ge.post("/init-db",te,le),ocrInitializeNlpEndpoint:(te,le)=>ge.post("/initialize",te,le),ocrProcessDocument:(te,le)=>ge.post("/process",te,le),ocrCalculateSimilarity:(te,le)=>ge.post("/similarity",te,le),serveSwaggerUi:te=>ge.get("/swagger.html",te)}),y2="patient-search-filters",ov="x-ear.auth.token@v1",g$="x-ear.auth.refresh@v1",y$="x-ear.user.preferences@v1",v2="x-ear.ui.sidebarCollapsed@v1",v$="x-ear.ui.themeMode@v1",b$="x-ear.forms.patient.draft@v1",w$="x-ear.forms.appointment.draft@v1",b2="x-ear.patients.detailsTab@v1",w2="x-ear.cache.api@v1",ld="x-ear.patients.data@v1",N2="x-ear.patients.legacy@v1",N$="x-ear.patients.crm@v1",k$="x-ear.sms.messages@v1",ch="x-ear.sgk.data@v1",Rd="x-ear.sgk.documents@v1",k2="x-ear.patients.documents@v1",j$="x-ear.sgk.unmatchedDocs@v1",S$="x-ear.inventory.filterPreset@v1",j2="x-ear.cashflow.records@v1",dh="x-ear.appointments.data@v1",T$="x-ear.appointments.filterPresets@v1",_$="x-ear.sgk.reports@v1",E$="x-ear.cashflow.incomeTypes@v1",C$="x-ear.cashflow.expenseTypes@v1",D$="x-ear.devices.maintenance@v1",A$="x-ear.notifications.data@v1",P$="x-ear.automation.rules@v1",R$="x-ear.sms.logs@v1",F$="x-ear.automation.logs@v1",S2="x-ear.inventory.data@v1",T2="x-ear.invoices.data@v1",_2="x-ear.purchases.data@v1",I$="x-ear.patients.savedViews@v1",M$="x-ear.ocr.dynamicNames@v1",E2="x-ear.auth.currentUser@v1",O$="x-ear.system.settings@v1",L$="x-ear.sgk.backgroundStatus@v1",B$="x-ear.ui.sgkSubmenuExpanded@v1",z$="x-ear.ui.faturaSubmenuExpanded@v1",$$="x-ear.ui.reportsSubmenuExpanded@v1",U$="x-ear.auth.accessToken@v1",C2="x-ear.auth.jwt@v1",V$="XEarPatientDB",H$=1,Vs="patients",Un="cache",no="blobs";class K${constructor(){qe(this,"db",null);qe(this,"initPromise",null)}async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const s=indexedDB.open(V$,H$);s.onerror=()=>{r(new Error("Failed to open IndexedDB"))},s.onsuccess=()=>{this.db=s.result,t()},s.onupgradeneeded=n=>{const i=n.target.result;if(!i.objectStoreNames.contains(Vs)){const l=i.createObjectStore(Vs,{keyPath:"id"});l.createIndex("tcNumber","tcNumber",{unique:!1}),l.createIndex("status","status",{unique:!1}),l.createIndex("updatedAt","updatedAt",{unique:!1})}i.objectStoreNames.contains(Un)||i.createObjectStore(Un,{keyPath:"key"}),i.objectStoreNames.contains(no)||i.createObjectStore(no,{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1})}}),this.initPromise)}async ensureDB(){if(this.db||await this.init(),!this.db)throw new Error("IndexedDB not initialized");return this.db}async savePatients(t){const s=(await this.ensureDB()).transaction([Vs],"readwrite"),n=s.objectStore(Vs);await new Promise((i,l)=>{const o=n.clear();o.onsuccess=()=>i(),o.onerror=()=>l(o.error)});for(const i of t)await new Promise((l,o)=>{const c=n.add(i);c.onsuccess=()=>l(),c.onerror=()=>o(c.error)});await new Promise((i,l)=>{s.oncomplete=()=>i(),s.onerror=()=>l(s.error)})}async getPatients(){const s=(await this.ensureDB()).transaction([Vs],"readonly").objectStore(Vs);return new Promise((n,i)=>{const l=s.getAll();l.onsuccess=()=>n(l.result||[]),l.onerror=()=>i(l.error)})}async getPatient(t){const n=(await this.ensureDB()).transaction([Vs],"readonly").objectStore(Vs);return new Promise((i,l)=>{const o=n.get(t);o.onsuccess=()=>i(o.result||null),o.onerror=()=>l(o.error)})}async updatePatient(t){const n=(await this.ensureDB()).transaction([Vs],"readwrite").objectStore(Vs);return new Promise((i,l)=>{const o=n.put(t);o.onsuccess=()=>i(),o.onerror=()=>l(o.error)})}async deletePatient(t){const n=(await this.ensureDB()).transaction([Vs],"readwrite").objectStore(Vs);return new Promise((i,l)=>{const o=n.delete(t);o.onsuccess=()=>i(),o.onerror=()=>l(o.error)})}async setCache(t,r,s){const l=(await this.ensureDB()).transaction([Un],"readwrite").objectStore(Un),o={key:t,data:r,timestamp:Date.now(),ttl:s};return new Promise((c,d)=>{const u=l.put(o);u.onsuccess=()=>c(),u.onerror=()=>d(u.error)})}async getCache(t){const n=(await this.ensureDB()).transaction([Un],"readonly").objectStore(Un);return new Promise((i,l)=>{const o=n.get(t);o.onsuccess=()=>{const c=o.result;if(!c){i(null);return}if(c.ttl&&Date.now()-c.timestamp>c.ttl){this.deleteCache(t),i(null);return}i(c.data)},o.onerror=()=>l(o.error)})}async deleteCache(t){const n=(await this.ensureDB()).transaction([Un],"readwrite").objectStore(Un);return new Promise((i,l)=>{const o=n.delete(t);o.onsuccess=()=>i(),o.onerror=()=>l(o.error)})}async saveFileBlob(t,r={}){const i=(await this.ensureDB()).transaction([no],"readwrite").objectStore(no),l=`blob_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o={id:l,blob:t,filename:r.filename||"file",mime:r.mime||(t==null?void 0:t.type)||"application/octet-stream",createdAt:Date.now()};return new Promise((c,d)=>{const u=i.add(o);u.onsuccess=()=>c(l),u.onerror=()=>d(u.error)})}async getFileBlob(t){const n=(await this.ensureDB()).transaction([no],"readonly").objectStore(no);return new Promise((i,l)=>{const o=n.get(t);o.onsuccess=()=>{const c=o.result;if(!c)return i(null);i({blob:c.blob,filename:c.filename,mime:c.mime})},o.onerror=()=>l(o.error)})}async fallbackToLocalStorage(t){try{const r=localStorage.getItem(t);return r?JSON.parse(r):null}catch(r){return console.warn("Failed to read from localStorage fallback:",r),null}}async saveFallbackToLocalStorage(t,r){try{localStorage.setItem(t,JSON.stringify(r))}catch(s){console.warn("Failed to save to localStorage fallback:",s)}}}const xt=new K$,G$=Object.freeze(Object.defineProperty({__proto__:null,indexedDBManager:xt},Symbol.toStringTag,{value:"Module"}));class W${constructor(){qe(this,"patients",[]);qe(this,"initialized",!1);this.init()}async init(){this.initialized||(await xt.init(),await this.loadPatients(),this.initialized=!0,window.addEventListener("storage",this.handleStorageChange.bind(this)))}handleStorageChange(t){t.key===ld&&this.loadPatients()}async loadPatients(){try{const t=await xt.getPatients();if(t.length>0){this.patients=t,console.log(` Loaded ${t.length} patients from IndexedDB cache`),this.refreshFromAPI().catch(r=>console.warn("Background API refresh failed:",r));return}}catch(t){console.warn("Failed to load from IndexedDB, trying API:",t)}await this.refreshFromAPI()}async refreshFromAPI(){try{const t=[];let r;for(;;){const n={per_page:100};r&&(n.cursor=r);const l=await lr().patientsGetPatients(n).catch(u=>{throw u}),o=l==null?void 0:l.data;if(!o||!Array.isArray(o.data))break;const c=o.data;t.push(...c);const d=o.pagination;if(!(d!=null&&d.hasNext)||!(d!=null&&d.nextCursor)||(r=d.nextCursor,c.length===0))break}t.length>0&&(this.patients=t,await xt.savePatients(t),console.log(` Refreshed ${t.length} patients from API and cached in IndexedDB`))}catch(t){console.warn("API refresh failed, trying localStorage fallback:",t);try{const r=localStorage.getItem(ld);if(r){const s=JSON.parse(r);this.patients=Array.isArray(s)?s:[],console.log(` Loaded ${this.patients.length} patients from localStorage fallback`)}}catch(r){console.error("Both API and localStorage failed:",r),this.patients=[]}}}async savePatients(){try{await xt.savePatients(this.patients);const t={count:this.patients.length,lastUpdated:new Date().toISOString(),version:1};await xt.saveFallbackToLocalStorage(ld+"_meta",t),window.dispatchEvent(new CustomEvent("patients:updated",{detail:{patients:this.patients}}))}catch(t){console.error("Failed to save patients to IndexedDB:",t);try{await xt.saveFallbackToLocalStorage(ld,this.patients),console.warn("Used localStorage emergency fallback for patient data")}catch(r){console.error("Failed to save patients even to localStorage fallback:",r)}}}async createPatient(t){var r,s,n,i;try{if(await this.init(),!((r=t.tcNumber)!=null&&r.trim()))throw new Error("TC number is required");if(!((s=t.firstName)!=null&&s.trim()))throw new Error("First name is required");if(!((n=t.lastName)!=null&&n.trim()))throw new Error("Last name is required");if(!((i=t.phone)!=null&&i.trim()))throw new Error("Patient phone is required");if(t.tcNumber&&!await this.validateTcNumber(t.tcNumber))throw new Error("TC number already exists");const l={id:this.generateId(),...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.patients.push(l),this.savePatients();try{await _t.addOperation({method:"POST",endpoint:"/api/patients",data:l,priority:"high"})}catch(o){console.warn("Failed to queue patient creation for sync:",o)}return window.dispatchEvent(new CustomEvent("patient:created",{detail:{patient:l}})),l}catch(l){throw console.error("Failed to create patient:",l),l instanceof Error?l:new Error("Failed to create patient")}}async updatePatient(t,r){try{if(await this.init(),!(t!=null&&t.trim()))throw new Error("Patient ID is required");const s=this.patients.findIndex(l=>l.id===t);if(s===-1)throw new Error("Patient not found");if(r.tcNumber&&r.tcNumber!==this.patients[s].tcNumber&&!await this.validateTcNumber(r.tcNumber,t))throw new Error("TC number already exists");const n={...this.patients[s]},i={...this.patients[s],...r,id:t,updatedAt:new Date().toISOString()};this.patients[s]=i,this.savePatients();try{await _t.addOperation({method:"PUT",endpoint:`/api/patients/${t}`,data:r,headers:{"If-Match":n.updatedAt||new Date().toISOString()},priority:"high"})}catch(l){console.warn("Failed to queue patient update for sync:",l)}return window.dispatchEvent(new CustomEvent("patient:updated",{detail:{patient:i,oldPatient:n,changes:r}})),i}catch(s){throw console.error("Failed to update patient:",s),s instanceof Error?s:new Error("Failed to update patient")}}async deletePatient(t){try{if(await this.init(),!(t!=null&&t.trim()))throw new Error("Patient ID is required");const r=this.patients.findIndex(n=>n.id===t);if(r===-1)throw new Error("Patient not found");const s=this.patients[r];this.patients.splice(r,1),this.savePatients();try{await _t.addOperation({method:"DELETE",endpoint:`/api/patients/${t}`,priority:"normal"})}catch(n){console.warn("Failed to queue patient deletion for sync:",n)}return window.dispatchEvent(new CustomEvent("patient:deleted",{detail:{patient:s}})),!0}catch(r){throw console.error("Failed to delete patient:",r),r instanceof Error?r:new Error("Failed to delete patient")}}async getPatient(t){try{return await this.init(),t!=null&&t.trim()&&this.patients.find(r=>r.id===t)||null}catch(r){return console.error("Failed to get patient:",r),null}}async getPatients(t={}){var r;try{await this.init();let s=[...this.patients];if((r=t.search)!=null&&r.trim()){const u=t.search.toLowerCase();s=s.filter(h=>h.firstName&&h.firstName.toLowerCase().includes(u)||h.lastName&&h.lastName.toLowerCase().includes(u)||h.phone.includes(t.search)||h.tcNumber&&h.tcNumber.includes(t.search)||h.email&&h.email&&h.email.toLowerCase().includes(u))}if(t.status&&(s=s.filter(u=>u.status===t.status)),t.segment&&(s=s.filter(u=>u.segment===t.segment)),t.acquisitionType&&(s=s.filter(u=>u.acquisitionType===t.acquisitionType)),t.tags&&t.tags.length>0&&(s=s.filter(u=>u.tags&&t.tags.some(h=>u.tags.includes(h)))),t.dateRange)try{const u=new Date(t.dateRange.start),h=new Date(t.dateRange.end);s=s.filter(f=>{const x=f.createdAt?new Date(f.createdAt):new Date(0);return x>=u&&x<=h})}catch(u){console.warn("Invalid date range filter:",u)}s.sort((u,h)=>{const f=new Date(u.createdAt||0).getTime();return new Date(h.createdAt||0).getTime()-f});const n=t.page||1,i=t.limit||20,l=(n-1)*i,o=l+i,c=s.slice(l,o),d=o<s.length;return{patients:c,total:s.length,page:n,pageSize:i,hasMore:d}}catch(s){return console.error("Failed to get patients:",s),{patients:[],total:0,page:1,pageSize:0,hasMore:!1}}}async getPatientStats(){try{await this.init();const t={total:this.patients.length,byStatus:{},bySegment:{}};return this.patients.forEach(r=>{try{r.status&&(t.byStatus[r.status]=(t.byStatus[r.status]||0)+1),r.segment&&(t.bySegment[r.segment]=(t.bySegment[r.segment]||0)+1)}catch(s){console.warn("Error processing patient stats for patient:",r.id,s)}}),t}catch(t){return console.error("Failed to get patient stats:",t),{total:0,byStatus:{},bySegment:{}}}}async findMatches(t){await this.init();const r=[];for(const s of this.patients){const n=this.calculatePatientMatch(t,s);n.score>.3&&r.push(n)}return r.sort((s,n)=>n.score-s.score),r.slice(0,10)}calculatePatientMatch(t,r){let s=0;const n=[];if(t.tcNo&&r.tcNumber&&t.tcNo===r.tcNumber&&(s+=.8,n.push("tcNumber")),t.name&&(r.firstName||r.lastName)){const l=`${r.firstName||""} ${r.lastName||""}`.trim(),o=this.calculateStringSimilarity(t.name,l);o>.6&&(s+=o*.4,n.push("name"))}if(t.birthDate&&r.birthDate&&t.birthDate===r.birthDate&&(s+=.3,n.push("birthDate")),t.phone&&r.phone){const l=this.calculateStringSimilarity(t.phone,r.phone);l>.8&&(s+=l*.2,n.push("phone"))}let i="low";return s>=.8?i="high":s>=.6&&(i="medium"),{patient:r,score:s,matchedFields:n,confidence:i}}calculateStringSimilarity(t,r){const s=t.length>r.length?t:r,n=t.length>r.length?r:t;if(s.length===0)return 1;const i=this.levenshteinDistance(s,n);return(s.length-i)/s.length}levenshteinDistance(t,r){const s=Array(r.length+1).fill(null).map(()=>Array(t.length+1).fill(null));for(let n=0;n<=t.length;n++)s[0][n]=n;for(let n=0;n<=r.length;n++)s[n][0]=n;for(let n=1;n<=r.length;n++)for(let i=1;i<=t.length;i++){const l=t[i-1]===r[n-1]?0:1;s[n][i]=Math.min(s[n][i-1]+1,s[n-1][i]+1,s[n-1][i-1]+l)}return s[r.length][t.length]}generateId(){return`patient_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async validateTcNumber(t,r){try{return await this.init(),!(t!=null&&t.trim())||!/^\d{11}$/.test(t)?!1:!this.patients.some(s=>s.tcNumber===t&&s.id!==r)}catch(s){return console.error("Failed to validate TC number:",s),!1}}async bulkUpdatePatients(t){var n;const r=[],s=[];for(const i of t)try{if(!((n=i.id)!=null&&n.trim())){s.push("Missing patient ID in bulk update");continue}const l=await this.updatePatient(i.id,i.data);l&&r.push(l)}catch(l){s.push(`Failed to update patient ${i.id}: ${l}`)}return s.length>0&&console.warn("Bulk update errors:",s),r}async exportPatients(){try{return await this.init(),JSON.stringify(this.patients,null,2)}catch(t){throw console.error("Failed to export patients:",t),new Error("Failed to export patients")}}async importPatients(t){try{await this.init();const r=JSON.parse(t);if(!Array.isArray(r))throw new Error("Invalid data format");const s={success:0,errors:[]};for(const n of r)try{await this.createPatient(n),s.success++}catch(i){s.errors.push(`Failed to import patient: ${i instanceof Error?i.message:"Unknown error"}`)}return s}catch(r){throw new Error(`Import failed: ${r instanceof Error?r.message:"Unknown error"}`)}}calculatePriorityScore(t){let r=0;if(t.birthDate){const s=new Date().getFullYear()-new Date(t.birthDate).getFullYear();s>=65?r+=20:s>=50&&(r+=10)}return(!t.phone||!t.email)&&(r-=15),Math.max(0,Math.min(100,r))}addNote(t,r){const s={...r,id:this.generateId()};return{...t,notes:[...t.notes||[],s]}}updateDevice(t,r,s){const i=(t.devices||[]).map(l=>l.id===r?{...l,...s}:l);return{...t,devices:i}}addCommunication(t,r){const s={...r,id:this.generateId(),date:r.timestamp||new Date().toISOString()};return{...t,communications:[...t.communications||[],s]}}addDevice(t,r){const s={...r,id:this.generateId()};return{...t,devices:[...t.devices||[],s]}}async getHighPriorityPatients(){return(await this.getPatients()).patients.filter(r=>this.calculatePriorityScore(r)>=50).sort((r,s)=>this.calculatePriorityScore(s)-this.calculatePriorityScore(r))}}const Gi=new W$;class Y${constructor(){qe(this,"fuseInstance",null);this.initializeFuse()}initializeFuse(){const t={keys:[{name:"firstName",weight:.3},{name:"lastName",weight:.3},{name:"phone",weight:.2},{name:"tcNumber",weight:.15},{name:"email",weight:.1},{name:"tags",weight:.05}],threshold:.3,includeScore:!0,includeMatches:!0,minMatchCharLength:2};this.fuseInstance=new Kl([],t)}updateSearchIndex(t){this.fuseInstance&&this.fuseInstance.setCollection(t)}searchPatients(t,r={}){let s=[...t];if(r.search&&r.search.trim())if(this.fuseInstance)s=this.fuseInstance.search(r.search.trim()).map(u=>u.item);else{const d=r.search.toLowerCase();s=t.filter(u=>{var h,f,x,p,m;return((h=u.firstName)==null?void 0:h.toLowerCase().includes(d))||((f=u.lastName)==null?void 0:f.toLowerCase().includes(d))||((x=u.phone)==null?void 0:x.includes(d))||((p=u.tcNumber)==null?void 0:p.includes(d))||((m=u.email)==null?void 0:m.toLowerCase().includes(d))})}s=this.applyFilters(s,r);const n=r.page||1,i=r.limit||50,l=(n-1)*i,o=l+i;return{patients:s.slice(l,o),total:s.length,page:n,pageSize:i,hasMore:o<s.length}}applyFilters(t,r){return t.filter(s=>!(r.status&&s.status!==r.status||r.segment&&s.segment!==r.segment||r.acquisitionType&&s.acquisitionType!==r.acquisitionType||r.tags&&r.tags.length>0&&!r.tags.some(i=>{var l;return(l=s.tags)==null?void 0:l.includes(i)})))}findMatches(t,r){const s=[];for(const n of r){const i=this.calculatePatientMatch(t,n);i.score>.3&&s.push(i)}return s.sort((n,i)=>i.score-n.score)}calculatePatientMatch(t,r){let s=0,n=0;const i=[];if((t.firstName||t.lastName)&&(r.firstName||r.lastName)){const c=`${t.firstName||""} ${t.lastName||""}`.trim(),d=`${r.firstName||""} ${r.lastName||""}`.trim(),u=this.calculateStringSimilarity(c,d);s+=u*.4,n+=.4,u>.7&&i.push("name")}if(t.tcNo&&r.tcNumber){const c=t.tcNo===r.tcNumber?1:0;s+=c*.3,n+=.3,c>0&&i.push("tcNumber")}if(t.phone&&r.phone){const c=this.calculatePhoneSimilarity(t.phone,r.phone);s+=c*.2,n+=.2,c>.8&&i.push("phone")}if(t.birthDate&&r.birthDate){const c=t.birthDate===r.birthDate?1:0;s+=c*.1,n+=.1,c>0&&i.push("birthDate")}const l=n>0?s/n:0;let o="low";return l>.8?o="high":l>.6&&(o="medium"),{patient:r,score:l,matchedFields:i,confidence:o}}calculateStringSimilarity(t,r){const s=t.toLowerCase().trim(),n=r.toLowerCase().trim();if(s===n)return 1;const i=Math.max(s.length,n.length);return i===0?1:1-this.levenshteinDistance(s,n)/i}calculatePhoneSimilarity(t,r){const s=l=>l.replace(/[\s\-\(\)]/g,""),n=s(t),i=s(r);return n===i?1:n.includes(i)||i.includes(n)?.9:this.calculateStringSimilarity(n,i)}levenshteinDistance(t,r){const s=Array(r.length+1).fill(null).map(()=>Array(t.length+1).fill(null));for(let n=0;n<=t.length;n++)s[0][n]=n;for(let n=0;n<=r.length;n++)s[n][0]=n;for(let n=1;n<=r.length;n++)for(let i=1;i<=t.length;i++){const l=t[i-1]===r[n-1]?0:1;s[n][i]=Math.min(s[n][i-1]+1,s[n-1][i]+1,s[n-1][i-1]+l)}return s[r.length][t.length]}}const q$=new Y$;class X${constructor(){qe(this,"CACHE_PREFIX","patient_cache_");qe(this,"METADATA_KEY","patient_cache_metadata");qe(this,"DEFAULT_TTL",24*60*60*1e3);qe(this,"MAX_CACHE_SIZE",1e4)}async cachePatients(t,r={}){try{await xt.savePatients(t),await this.updateCacheMetadata(t.length);const s=r.ttl||this.DEFAULT_TTL,n=t.map(i=>xt.setCache(`${this.CACHE_PREFIX}${i.id}`,i,s));await Promise.all(n)}catch(s){throw console.error("Failed to cache patients:",s),s}}async getCachedPatient(t){try{const r=await xt.getPatient(t);if(r)return r;const s=await xt.getCache(`${this.CACHE_PREFIX}${t}`);return s||null}catch(r){return console.error(`Failed to get cached patient ${t}:`,r),null}}async getCachedPatients(){try{return await xt.getPatients()}catch(t){return console.error("Failed to get cached patients:",t),[]}}async searchCachedPatients(t){try{let s=[...await this.getCachedPatients()];if(t.search){const d=t.search.toLowerCase();s=s.filter(u=>{var h,f,x,p,m;return((h=u.firstName)==null?void 0:h.toLowerCase().includes(d))||((f=u.lastName)==null?void 0:f.toLowerCase().includes(d))||((x=u.phone)==null?void 0:x.includes(d))||((p=u.tcNumber)==null?void 0:p.includes(d))||((m=u.email)==null?void 0:m.toLowerCase().includes(d))})}t.status&&t.status.length>0&&(s=s.filter(d=>d.status&&t.status.includes(d.status))),t.segment&&t.segment.length>0&&(s=s.filter(d=>d.segment&&t.segment.includes(d.segment))),t.acquisitionType&&t.acquisitionType.length>0&&(s=s.filter(d=>d.acquisitionType&&t.acquisitionType.includes(d.acquisitionType))),t.tags&&t.tags.length>0&&(s=s.filter(d=>{var u;return(u=d.tags)==null?void 0:u.some(h=>t.tags.includes(h))}));const n=t.page||1,i=t.limit||50,l=(n-1)*i;return{patients:s.slice(l,l+i).map(d=>({id:d.id,firstName:d.firstName,lastName:d.lastName,tcNumber:d.tcNumber,phone:d.phone,email:d.email,status:d.status,segment:d.segment,registrationDate:d.createdAt,lastVisitDate:d.updatedAt,deviceCount:0,hasInsurance:!!(d.sgkInfo&&Object.keys(d.sgkInfo).length>0),outstandingBalance:0,priority:d.priorityScore||0})),totalCount:s.length,filteredCount:s.length}}catch(r){return console.error("Failed to search cached patients:",r),{patients:[],totalCount:0,filteredCount:0}}}async updateCachedPatient(t){try{await xt.updatePatient(t),await xt.setCache(`${this.CACHE_PREFIX}${t.id}`,t)}catch(r){throw console.error(`Failed to update cached patient ${t.id}:`,r),r}}async removeCachedPatient(t){try{await xt.deletePatient(t),await xt.deleteCache(`${this.CACHE_PREFIX}${t}`)}catch(r){throw console.error(`Failed to remove cached patient ${t}:`,r),r}}async getCacheStats(){try{const t=await this.getCachedPatients(),r=await xt.getCache(this.METADATA_KEY),s={totalPatients:t.length,lastUpdated:(r==null?void 0:r.lastUpdated)||null,cacheSize:this.calculateCacheSize(t),oldestEntry:null,newestEntry:null};if(t.length>0){const n=t.filter(i=>i.createdAt);if(n.length>0){const i=[...n].sort((l,o)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime());s.oldestEntry=i[0].createdAt,s.newestEntry=i[i.length-1].createdAt}}return s}catch(t){return console.error("Failed to get cache stats:",t),{totalPatients:0,lastUpdated:null,cacheSize:0,oldestEntry:null,newestEntry:null}}}async clearCache(){try{const r=(await this.getCachedPatients()).filter(s=>s.id).map(s=>this.removeCachedPatient(s.id));await Promise.all(r),await xt.deleteCache(this.METADATA_KEY)}catch(t){throw console.error("Failed to clear cache:",t),t}}async optimizeCache(){try{const t=await this.getCachedPatients();if(t.length>this.MAX_CACHE_SIZE){const i=[...t.filter(l=>l.updatedAt)].sort((l,o)=>new Date(l.updatedAt).getTime()-new Date(o.updatedAt).getTime()).slice(0,t.length-this.MAX_CACHE_SIZE).filter(l=>l.id).map(l=>this.removeCachedPatient(l.id));await Promise.all(i)}}catch(t){console.error("Failed to optimize cache:",t)}}async isPatientCached(t){try{return await this.getCachedPatient(t)!==null}catch(r){return console.error(`Failed to check if patient ${t} is cached:`,r),!1}}async preloadPatients(t){console.log("Preloading patients:",t)}async updateCacheMetadata(t){try{const r={lastUpdated:new Date().toISOString(),patientCount:t,version:"1.0.0"};await xt.setCache(this.METADATA_KEY,r)}catch(r){console.error("Failed to update cache metadata:",r)}}calculateCacheSize(t){const r=JSON.stringify(t);return new Blob([r]).size}getNestedValue(t,r){return r.split(".").reduce((s,n)=>s==null?void 0:s[n],t)}}const io=new X$;class Q${validatePatient(t,r=[]){const s=[],n=[];return this.validateRequiredFields(t,s),this.validateFormats(t,s,n),this.validateBusinessRules(t,s,n),this.validateUniqueness(t,r,s),{isValid:s.filter(i=>i.severity==="error").length===0,errors:s,warnings:n}}validateTcNumber(t,r,s=[]){return!t||t.length!==11||!/^\d{11}$/.test(t)||!this.isValidTcNumberAlgorithm(t)?!1:!s.find(i=>i.tcNumber===t&&i.id!==r)}validatePhone(t){if(!t)return!1;const r=t.replace(/\D/g,"");return r.length===10?/^[235]\d{9}$/.test(r):r.length===11?/^0[235]\d{9}$/.test(r):r.length===12?/^90[235]\d{9}$/.test(r):r.length===13?/^0090[235]\d{9}$/.test(r):!1}validateEmail(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!0}validateBirthDate(t){if(!t)return!0;const r=new Date(t),s=new Date;if(isNaN(r.getTime())||r>=s)return!1;const n=new Date;return n.setFullYear(n.getFullYear()-120),r>=n}validateRequiredFields(t,r){(!t.phone||!t.phone.trim())&&r.push({field:"phone",code:"REQUIRED",message:"Telefon numaras zorunludur",severity:"error"}),(!t.firstName||!t.firstName.trim())&&r.push({field:"firstName",code:"REQUIRED",message:"Hasta ad zorunludur",severity:"error"}),(!t.lastName||!t.lastName.trim())&&r.push({field:"lastName",code:"REQUIRED",message:"Hasta soyad zorunludur",severity:"error"})}validateFormats(t,r,s){t.phone&&!this.validatePhone(t.phone)&&r.push({field:"phone",code:"INVALID_FORMAT",message:"Geersiz telefon numaras format",severity:"error"}),t.tcNumber&&!this.isValidTcNumberAlgorithm(t.tcNumber)&&r.push({field:"tcNumber",code:"INVALID_FORMAT",message:"Geersiz TC Kimlik Numaras",severity:"error"}),t.email&&!this.validateEmail(t.email)&&r.push({field:"email",code:"INVALID_FORMAT",message:"Geersiz e-posta adresi format",severity:"error"}),t.birthDate&&!this.validateBirthDate(t.birthDate)&&r.push({field:"birthDate",code:"INVALID_DATE",message:"Geersiz doum tarihi",severity:"error"})}validateBusinessRules(t,r,s){if(t.birthDate){const n=this.calculateAge(t.birthDate);n<18&&s.push({field:"birthDate",code:"MINOR_PATIENT",message:"Hasta 18 yandan kk",suggestion:"Veli bilgilerini eklemeyi unutmayn"}),n>90&&s.push({field:"birthDate",code:"ELDERLY_PATIENT",message:"Hasta 90 yandan byk",suggestion:"Ya bilgisini kontrol edin"})}}validateUniqueness(t,r,s){if(t.tcNumber){const n=r.find(i=>i.tcNumber===t.tcNumber&&i.id!==t.id);if(n){const i=`${n.firstName||""} ${n.lastName||""}`.trim();s.push({field:"tcNumber",code:"DUPLICATE",message:`Bu TC Kimlik Numaras baka bir hasta tarafndan kullanlyor: ${i}`,severity:"error"})}}if(t.phone){const n=r.find(i=>i.phone===t.phone&&i.id!==t.id);if(n){const i=`${n.firstName||""} ${n.lastName||""}`.trim();s.push({field:"phone",code:"DUPLICATE_WARNING",message:`Bu telefon numaras baka bir hasta tarafndan kullanlyor: ${i}`,severity:"warning"})}}}isValidTcNumberAlgorithm(t){if(!t||t.length!==11)return!1;const r=t.split("").map(Number);if(r[0]===0)return!1;const s=r[0]+r[2]+r[4]+r[6]+r[8],n=r[1]+r[3]+r[5]+r[7],i=(s*7-n)%10,l=(s+n+r[9])%10;return r[9]===i&&r[10]===l}calculateAge(t){const r=new Date(t),s=new Date;let n=s.getFullYear()-r.getFullYear();const i=s.getMonth()-r.getMonth();return(i<0||i===0&&s.getDate()<r.getDate())&&n--,n}}const D2=new Q$;class Z${constructor(){qe(this,"SYNC_KEY","patient_last_sync");qe(this,"BATCH_SIZE",50);qe(this,"syncInProgress",!1);qe(this,"api",lr())}async syncPatients(t={}){if(this.syncInProgress)throw new Error("Sync already in progress");this.syncInProgress=!0;try{const r=await this.performSync(t);return await this.updateLastSyncTime(),r}finally{this.syncInProgress=!1}}async syncSinglePatient(t,r={}){try{if(!await xt.getPatient(t))throw new Error(`Patient ${t} not found locally`);return(await _t.getPendingOperations()).filter(l=>l.endpoint.includes(`/patients/${t}`)||l.data&&typeof l.data=="object"&&"id"in l.data&&l.data.id===t).length>0&&!r.force&&await this.pushPendingChanges([t]),await this.pullPatientFromServer(t),!0}catch(s){return console.error(`Failed to sync patient ${t}:`,s),!1}}async getLastSyncTime(){try{const t=await xt.getCache(this.SYNC_KEY);return typeof t=="string"?t:null}catch(t){return console.error("Failed to get last sync time:",t),null}}async getPendingSyncCount(){try{return(await _t.getPendingOperations()).filter(r=>r.endpoint.includes("/patients")).length}catch(t){return console.error("Failed to get pending sync count:",t),0}}async hasPendingChanges(t){try{const r=await _t.getPendingOperations();return t?r.some(s=>s.endpoint.includes(`/patients/${t}`)||s.data&&typeof s.data=="object"&&"id"in s.data&&s.data.id===t):r.some(s=>s.endpoint.includes("/patients"))}catch(r){return console.error("Failed to check pending changes:",r),!1}}async resolveConflict(t,r){switch(r){case"local":return await this.pushPatientToServer(t.localVersion),t.localVersion;case"remote":return await xt.updatePatient(t.remoteVersion),t.remoteVersion;case"merge":const s=this.mergePatients(t.localVersion,t.remoteVersion);return await xt.updatePatient(s),await this.pushPatientToServer(s),s;default:throw new Error(`Invalid conflict resolution: ${r}`)}}async performSync(t){const r={success:!1,synced:0,failed:0,conflicts:[],lastSyncTime:new Date().toISOString()};try{const s=await this.pushPendingChanges(),n=await this.pullRemoteChanges(t);return r.synced=(s.synced||0)+(n.synced||0),r.failed=(s.failed||0)+(n.failed||0),r.conflicts=[...s.conflicts||[],...n.conflicts||[]],r.success=r.failed===0&&r.conflicts.length===0,r}catch(s){return console.error("Sync failed:",s),r.success=!1,r}}async pushPendingChanges(t){const r={synced:0,failed:0,conflicts:[]};try{const n=(await _t.getPendingOperations()).filter(i=>t?t.some(l=>i.endpoint.includes(`/patients/${l}`)||i.data&&typeof i.data=="object"&&"id"in i.data&&i.data.id===l):i.endpoint.includes("/patients"));for(const i of n)try{await this.processPendingOperation(i),r.synced++}catch(l){console.error(`Failed to process operation ${i.id}:`,l),r.failed++}}catch(s){console.error("Failed to push pending changes:",s)}return r}async pullRemoteChanges(t){var s;const r={synced:0,failed:0,conflicts:[]};try{const n=t.batchSize||this.BATCH_SIZE,l=(s=(await this.api.patientsGetPatients()).data)==null?void 0:s.data;if(l&&l.length>0)for(const o of l)try{const c=await this.syncRemotePatient(o,t);c.conflict?r.conflicts.push(c.conflict):r.synced++}catch(c){console.error("Failed to sync patient:",c),r.failed++}}catch(n){console.error("Failed to pull remote changes:",n)}return r}async syncRemotePatient(t,r){if(!t.id)return console.error("Remote patient missing ID, skipping sync"),{};const s=await xt.getPatient(t.id);if(!s)return await xt.updatePatient(t),{};const n=await this.hasPendingChanges(t.id),i=new Date(s.updatedAt||"")>new Date(t.updatedAt||"");if(n||i){const l={patientId:t.id,localVersion:s,remoteVersion:t,conflictType:"update"};return r.conflictResolution&&r.conflictResolution!=="prompt"?(await this.resolveConflict(l,r.conflictResolution),{}):{conflict:l}}return await xt.updatePatient(t),{}}async processPendingOperation(t){console.log("Processing pending operation:",t.id,t.method,t.endpoint)}async pushPatientToServer(t){await _t.addOperation({method:"PUT",endpoint:`/api/patients/${t.id}`,data:t,headers:{"Idempotency-Key":`update-patient-${t.id}-${Date.now()}`}})}async pullPatientFromServer(t){console.log("Pulling patient from server:",t)}mergePatients(t,r){const s=new Date(t.updatedAt||"").getTime(),n=new Date(r.updatedAt||"").getTime();return s>n?{...r,...t,updatedAt:new Date().toISOString()}:{...t,...r,updatedAt:new Date().toISOString()}}async updateLastSyncTime(){try{await xt.setCache(this.SYNC_KEY,new Date().toISOString())}catch(t){console.error("Failed to update last sync time:",t)}}}const sx=new Z$;function ZT(e={}){const{cacheEnabled:t=!0,autoRefresh:r=!1,refreshInterval:s=3e5,enableRealTimeSync:n=!1}=e,[i,l]=k.useState([]),[o,c]=k.useState(null),[d,u]=k.useState(!0),[h,f]=k.useState(!1),[x,p]=k.useState(!1),[m,y]=k.useState(null),[g,v]=k.useState({});k.useEffect(()=>{(async()=>{try{if(u(!0),y(null),t){const q=await io.getCachedPatients();q.length>0&&(l(q),u(!1))}const G=await Gi.getPatients({limit:1e4});l(G.patients)}catch(G){console.error("Failed to initialize patients:",G),y(G instanceof Error?G.message:"Failed to load patients")}finally{u(!1)}})()},[t]),k.useEffect(()=>{if(!r)return;const z=setInterval(async()=>{try{const G=await Gi.getPatients({limit:1e4});l(G.patients)}catch(G){console.error("Auto refresh failed:",G)}},s);return()=>clearInterval(z)},[r,s]),k.useEffect(()=>{if(!n)return;const z=G=>{var q;(q=G.key)!=null&&q.startsWith("patient_")&&Gi.getPatients().then(H=>{l(H.patients)})};return window.addEventListener("storage",z),()=>window.removeEventListener("storage",z)},[n]);const b=k.useCallback(async z=>{try{f(!0),y(null),v(z);let G;if(t&&!z.search)G=await io.searchCachedPatients(z);else{const q={search:z.search,status:z.status,segment:z.segment,labels:z.label?[z.label[0]]:void 0,hasDevice:z.hasDevices,page:z.page,limit:z.limit};G=await q$.searchPatients(i,q)}c(G)}catch(G){console.error("Search failed:",G),y(G instanceof Error?G.message:"Search failed")}finally{f(!1)}},[i,t]),S=k.useCallback(()=>{c(null),v({})},[]),D=k.useCallback(z=>{v(z),b(z)},[b]),N=k.useCallback(async z=>{try{y(null);const G=D2.validatePatient(z);if(!G.isValid)throw new Error(`Validation failed: ${G.errors.join(", ")}`);const q=await Gi.createPatient(z);return l(H=>[...H,q]),t&&await io.updateCachedPatient(q),n&&await sx.syncSinglePatient(q.id),q}catch(G){throw console.error("Failed to create patient:",G),y(G instanceof Error?G.message:"Failed to create patient"),G}},[t,n]),E=k.useCallback(async(z,G)=>{try{if(y(null),!i.find(A=>A.id===z))throw new Error("Patient not found");const H=await Gi.updatePatient(z,G);if(!H)throw new Error("Failed to update patient");return l(A=>A.map(V=>V.id===z?H:V)),t&&await io.updateCachedPatient(H),n&&await sx.syncSinglePatient(z),H}catch(q){throw console.error("Failed to update patient:",q),y(q instanceof Error?q.message:"Failed to update patient"),q}},[i,t,n]),w=k.useCallback(async z=>{try{if(y(null),!await Gi.deletePatient(z))throw new Error("Failed to delete patient");l(q=>q.filter(H=>H.id!==z)),t&&await io.removeCachedPatient(z),n&&console.log("Marking patient for deletion:",z)}catch(G){throw console.error("Failed to delete patient:",G),y(G instanceof Error?G.message:"Failed to delete patient"),G}},[t,n]),_=k.useCallback(async()=>{try{u(!0),y(null);const z=await Gi.getPatients({limit:1e4});l(z.patients),Object.keys(g).length>0&&await b(g)}catch(z){console.error("Failed to refresh patients:",z),y(z instanceof Error?z.message:"Failed to refresh patients")}finally{u(!1)}},[g,b]),C=k.useCallback(async()=>{try{p(!0),y(null);const z=await sx.syncPatients();z.conflicts.length>0&&console.warn("Sync conflicts detected:",z.conflicts),await _()}catch(z){console.error("Failed to sync patients:",z),y(z instanceof Error?z.message:"Failed to sync patients")}finally{p(!1)}},[_]),T=k.useCallback(async()=>{try{t&&(await io.clearCache(),await _())}catch(z){console.error("Failed to clear cache:",z),y(z instanceof Error?z.message:"Failed to clear cache")}},[t,_]),j=k.useCallback(z=>i.find(G=>G.id===z),[i]),F=k.useCallback(z=>{const G=D2.validatePatient(z);return{isValid:G.isValid,errors:G.errors.map(q=>q.message)}},[]),O=k.useMemo(()=>o?o.totalCount:i.length,[o,i.length]);return{patients:i,searchResults:o,totalCount:O,isLoading:d,isSearching:h,isSyncing:x,error:m,searchPatients:b,clearSearch:S,applyFilters:D,createPatient:N,updatePatient:E,deletePatient:w,refreshPatients:_,syncPatients:C,clearCache:T,getPatientById:j,validatePatient:F}}function J$({isOpen:e,onClose:t,onSubmit:r,initialData:s,title:n,className:i=""}){const[l,o]=k.useState({firstName:"",lastName:"",phone:"",tcNumber:"",birthDate:"",email:"",address:"",status:"ACTIVE",segment:"NEW",label:"yeni",acquisitionType:"tabela",tags:[]}),[c,d]=k.useState({}),[u,h]=k.useState(!1),[f,x]=k.useState("");k.useEffect(()=>{var S;s?(o({firstName:s.firstName||"",lastName:s.lastName||"",phone:s.phone||"",tcNumber:s.tcNumber||"",birthDate:s.birthDate||"",email:s.email||"",address:typeof s.address=="string"?s.address:s.addressFull||"",status:s.status||"ACTIVE",segment:s.segment||"",label:s.label||"",acquisitionType:s.acquisitionType||"",tags:s.tags||[]}),x(((S=s.tags)==null?void 0:S.join(", "))||"")):(o({firstName:"",lastName:"",phone:"",tcNumber:"",birthDate:"",email:"",address:"",status:"ACTIVE",segment:"NEW",label:"yeni",acquisitionType:"tabela",tags:[]}),x("")),d({})},[s,e]);const p=k.useCallback(()=>{var D;const S={};return(D=l.phone)!=null&&D.trim()?/^[\d\s\-()+]+$/.test(l.phone)||(S.phone="Geerli bir telefon numaras giriniz"):S.phone="Telefon numaras gereklidir",l.tcNumber&&l.tcNumber.length!==11&&(S.tcNumber="TC Kimlik No 11 haneli olmaldr"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(S.email="Geerli bir e-posta adresi giriniz"),l.birthDate&&new Date(l.birthDate)>new Date&&(S.birthDate="Doum tarihi bugnden sonra olamaz"),d(S),Object.keys(S).length===0},[l]),m=k.useCallback((S,D)=>{o(N=>({...N,[S]:D})),c[S]&&d(N=>({...N,[S]:""}))},[c]),y=k.useCallback((S,D)=>{o(N=>({...N,[S]:D.target.value})),c[S]&&d(N=>({...N,[S]:""}))},[c]),g=k.useCallback(S=>{x(S);const D=S.split(",").map(N=>N.trim()).filter(Boolean);o(N=>({...N,tags:D}))},[]),v=k.useCallback(async S=>{if(S.preventDefault(),!!p()){h(!0);try{await r(l)&&t()}catch(D){console.error("Form submission error:",D),d({submit:"Bir hata olutu. Ltfen tekrar deneyin."})}finally{h(!1)}}},[l,p,r,t]),b=k.useCallback(()=>{u||t()},[u,t]);return e?a.jsx("div",{className:`fixed inset-0 z-50 overflow-y-auto ${i}`,children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:b}),a.jsxs("div",{className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n}),a.jsx(Z,{type:"button",onClick:b,disabled:u,variant:"ghost",size:"sm",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","data-allow-raw":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12","data-allow-raw":"true"})})})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad"}),a.jsx(ye,{type:"text",value:l.firstName,onChange:S=>m("firstName",S.target.value),placeholder:"Hasta ad"}),c.firstName&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad"}),a.jsx(ye,{type:"text",value:l.lastName,onChange:S=>m("lastName",S.target.value),placeholder:"Hasta soyad"}),c.lastName&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.lastName})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Telefon ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(ye,{type:"tel",value:l.phone,onChange:S=>m("phone",S.target.value),placeholder:"0555 123 45 67",required:!0}),c.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.phone})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta"}),a.jsx(ye,{type:"email",value:l.email,onChange:S=>m("email",S.target.value),placeholder:"ornek@email.com"}),c.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TC Kimlik No"}),a.jsx(ye,{type:"text",value:l.tcNumber,onChange:S=>m("tcNumber",S.target.value),placeholder:"12345678901",maxLength:11}),c.tcNumber&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.tcNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doum Tarihi"}),a.jsx(ye,{type:"date",value:l.birthDate,onChange:S=>m("birthDate",S.target.value)}),c.birthDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.birthDate})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adres"}),a.jsx(wr,{value:l.address,onChange:S=>m("address",S.target.value),rows:3,placeholder:"Hasta adresi"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),a.jsx(Ue,{value:l.status,onChange:S=>y("status",S),options:[{value:"ACTIVE",label:"Aktif"},{value:"INACTIVE",label:"Pasif"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Segment"}),a.jsx(Ue,{value:l.segment,onChange:S=>y("segment",S),options:[{value:"NEW",label:"Yeni"},{value:"TRIAL",label:"Deneme"},{value:"PURCHASED",label:"Satn Alm"},{value:"CONTROL",label:"Kontrol"},{value:"RENEWAL",label:"Yenileme"},{value:"EXISTING",label:"Mevcut"},{value:"VIP",label:"VIP"}]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiket"}),a.jsx(Ue,{value:l.label,onChange:S=>y("label",S),options:[{value:"yeni",label:"Yeni"},{value:"arama-bekliyor",label:"Arama Bekliyor"},{value:"randevu-verildi",label:"Randevu Verildi"},{value:"deneme-yapildi",label:"Deneme Yapld"},{value:"kontrol-hastasi",label:"Kontrol Hastas"},{value:"satis-tamamlandi",label:"Sat Tamamland"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kazanm Tr"}),a.jsx(Ue,{value:l.acquisitionType,onChange:S=>y("acquisitionType",S),options:[{value:"tabela",label:"Tabela"},{value:"sosyal-medya",label:"Sosyal Medya"},{value:"tanitim",label:"Tantm"},{value:"referans",label:"Referans"},{value:"diger",label:"Dier"}]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiketler"}),a.jsx(ye,{type:"text",value:f,onChange:S=>g(S.target.value),placeholder:"Etiketleri virglle ayrn (rn: vip, acil, takip)"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Etiketleri virglle ayrarak giriniz"})]}),c.submit&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:c.submit})}),a.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[a.jsx(Z,{type:"button",onClick:b,disabled:u,variant:"ghost",children:"ptal"}),a.jsx(Z,{type:"submit",disabled:u,variant:"primary",children:u?"Kaydediliyor...":s?"Gncelle":"Kaydet"})]})]})]})]})}):null}function eU(){const e=Sc(),{patientId:t}=Fu({strict:!1}),[r,s]=k.useState(""),[n,i]=k.useState(!1),[l,o]=k.useState([]),[c,d]=k.useState(!1);k.useState({});const[u,h]=k.useState(1),[f,x]=k.useState(20),[p,m]=k.useState(""),[y,g]=k.useState(""),{patients:v,isLoading:b,error:S}=ZT(),D={total:(v==null?void 0:v.length)||0,active:(v==null?void 0:v.filter(A=>A.status==="ACTIVE").length)||0,inactive:(v==null?void 0:v.filter(A=>A.status==="INACTIVE").length)||0,withDevices:0},N=A=>{s(A)},E=()=>{window.location.reload()},w=()=>{d(!0)},_=(A,V)=>{o(V?L=>[...L,A]:L=>L.filter(P=>P!==A))},C=A=>{e({to:`/patients/${A.id}`})},T=v.filter(A=>{var V,L,P,I;if(r){const R=r.toLowerCase();if(!(((V=A.firstName)==null?void 0:V.toLowerCase().includes(R))||((L=A.lastName)==null?void 0:L.toLowerCase().includes(R))||((P=A.tcNumber)==null?void 0:P.includes(r))||((I=A.phone)==null?void 0:I.includes(r))))return!1}return!(p&&A.status!==p||y&&A.segment!==y)}),j=T.length,F=Math.ceil(j/f),O=(u-1)*f,z=O+f,G=T.slice(O,z),q=A=>{h(A)},H=A=>{x(A),h(1)};return t?a.jsx(Vf,{}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hastalar"}),a.jsx("p",{className:"text-gray-600",children:"Hasta kaytlarn ynetin"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Z,{variant:"outline",onClick:E,disabled:b,children:[a.jsx(ds,{className:`w-4 h-4 mr-2 ${b?"animate-spin":""}`}),"Yenile"]}),a.jsxs(Z,{onClick:w,children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),"Yeni Hasta"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zs,{className:"w-8 h-8 text-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Hasta"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.total})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-8 h-8 text-green-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aktif"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.active})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(p5,{className:"w-8 h-8 text-orange-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pasif"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.inactive})]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(xy,{className:"w-8 h-8 text-purple-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cihazl"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.withDevices})]})]})})]}),a.jsxs(ts,{defaultValue:"list",className:"w-full",children:[a.jsx(vy,{className:"grid w-full grid-cols-1",children:a.jsx(Gh,{value:"list",children:"Hasta Listesi"})}),a.jsxs(su,{value:"list",className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ye,{placeholder:"Hasta ara (ad, soyad, TC, telefon)...",value:r,onChange:A=>N(A.target.value),className:"pl-10"})]})}),a.jsxs(Z,{variant:"outline",onClick:()=>i(!n),children:[a.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Filtreler"]})]}),n&&a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),a.jsxs("select",{value:p,onChange:A=>m(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Tm"}),a.jsx("option",{value:"ACTIVE",children:"Aktif"}),a.jsx("option",{value:"INACTIVE",children:"Pasif"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Segment"}),a.jsxs("select",{value:y,onChange:A=>g(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Tm"}),a.jsx("option",{value:"NEW",children:"Yeni"}),a.jsx("option",{value:"TRIAL",children:"Deneme"}),a.jsx("option",{value:"PURCHASED",children:"Satn Alnm"}),a.jsx("option",{value:"CONTROL",children:"Kontrol"}),a.jsx("option",{value:"RENEWAL",children:"Yenileme"}),a.jsx("option",{value:"EXISTING",children:"Mevcut"}),a.jsx("option",{value:"VIP",children:"VIP"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx(Z,{variant:"outline",onClick:()=>{m(""),g("")},className:"w-full",children:"Filtreleri Temizle"})})]})}),a.jsxs("div",{className:"bg-white rounded-lg border",children:[S&&a.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:a.jsxs("p",{className:"text-red-600",children:["Hata: ",typeof S=="string"?S:"Bir hata olutu"]})}),b?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Hastalar ykleniyor..."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300",onChange:A=>{A.target.checked?o(T.map(V=>V.id)):o([])}})}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Ad Soyad"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"TC Kimlik"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Telefon"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Durum"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-900",children:"Kayt Tarihi"}),a.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-900",children:"lemler"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:G.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:r?"Arama kriterlerine uygun hasta bulunamad.":"Henz hasta kayd bulunmuyor."})}):G.map(A=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:l.includes(A.id),onChange:V=>_(A.id,V.target.checked)})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600",onClick:()=>C(A),children:[A.firstName," ",A.lastName]})}),a.jsx("td",{className:"px-4 py-3 text-gray-600",children:A.tcNumber}),a.jsx("td",{className:"px-4 py-3 text-gray-600",children:A.phone}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:A.status==="ACTIVE"?"Aktif":"Pasif"})}),a.jsx("td",{className:"px-4 py-3 text-gray-600",children:A.createdAt?new Date(A.createdAt).toLocaleDateString("tr-TR"):"-"}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>C(A),children:"Grntle"})})]},A.id))})]})}),j>0&&a.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"text-sm text-gray-700",children:[O+1,"-",Math.min(z,j)," / ",j," hasta gsteriliyor"]}),a.jsx(nP,{currentPage:u,totalPages:F,totalItems:j,itemsPerPage:f,onPageChange:q,onItemsPerPageChange:H,showItemsPerPage:!0,showTotalItems:!1,itemsPerPageOptions:[10,20,50,100],size:"md"})]})]})]}),a.jsx(su,{value:"bulk",className:"space-y-4",children:a.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Toplu lemler"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV Dosyas Ykle"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx(ka,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"CSV dosyasn srkleyip brakn veya sein"}),a.jsx(Z,{variant:"outline",className:"mt-2",children:"Dosya Se"})]})]})})]})})]}),a.jsx(J$,{isOpen:c,onClose:()=>d(!1),onSubmit:async A=>{try{return console.log("Creating new patient:",A),d(!1),E(),null}catch(V){return console.error("Error creating patient:",V),null}},title:"Yeni Hasta Ekle"})]})}const tU=Or("/patients")({component:eU}),rU=Or("/invoices")({component:sU});function sU(){return a.jsx(Vf,{})}const aU=Or("/inventory")({component:nU});function nU(){return a.jsx(mP,{})}class iU{constructor(){qe(this,"appointments",[]);qe(this,"listeners",new Set);this.loadAppointments(),this.setupStorageListener()}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notify(){this.listeners.forEach(t=>t())}setupStorageListener(){window.addEventListener("storage",t=>{t.key===dh&&(this.loadAppointments(),this.notify())})}loadAppointments(){try{const t=localStorage.getItem(dh);this.appointments=t?JSON.parse(t):[]}catch(t){console.error("Failed to load appointments:",t),this.appointments=[]}}saveAppointments(){try{localStorage.setItem(dh,JSON.stringify(this.appointments))}catch(t){console.error("Failed to save appointments:",t)}}async createAppointment(t){const r={id:t.id||`apt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,patientId:t.patientId,patientName:t.patientName,date:t.date,time:t.time,startTime:t.startTime||`${t.date}T${t.time}:00.000Z`,endTime:t.endTime||this.calculateEndTime(t.date,t.time,t.duration),duration:t.duration||30,title:t.title||this.generateTitle(t.type),type:t.type,status:t.status||"scheduled",notes:t.notes,clinician:t.clinician,clinicianId:t.clinicianId,location:t.location,branchId:t.branchId,reminderSent:!1,createdBy:t.createdBy,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s=this.validateAppointment(r);if(!s.isValid)throw new Error(`Appointment validation failed: ${s.errors.join(", ")}`);return this.appointments.push(r),this.saveAppointments(),await _t.addOperation({method:"POST",endpoint:"/api/appointments",data:r,priority:"normal"}),this.notify(),r}async updateAppointment(t,r){const s=this.appointments.findIndex(l=>l.id===t);if(s===-1)throw new Error(`Appointment with id ${t} not found`);const n={...this.appointments[s],...r,id:t,updatedAt:new Date().toISOString()},i=this.validateAppointment(n);if(!i.isValid)throw new Error(`Appointment validation failed: ${i.errors.join(", ")}`);return this.appointments[s]=n,this.saveAppointments(),await _t.addOperation({method:"PUT",endpoint:`/api/appointments/${t}`,data:n,priority:"normal"}),this.notify(),n}async deleteAppointment(t){const r=this.appointments.findIndex(s=>s.id===t);if(r===-1)throw new Error(`Appointment with id ${t} not found`);this.appointments.splice(r,1),this.saveAppointments(),await _t.addOperation({method:"DELETE",endpoint:`/api/appointments/${t}`,priority:"normal"}),this.notify()}getAppointment(t){return this.appointments.find(r=>r.id===t)}getAppointments(t){let r=[...this.appointments];if(t&&(t.patientId&&(r=r.filter(s=>s.patientId===t.patientId)),t.status&&(r=r.filter(s=>s.status===t.status)),t.type&&(r=r.filter(s=>s.type===t.type)),t.clinician&&(r=r.filter(s=>{var n;return(n=s.clinician)==null?void 0:n.toLowerCase().includes(t.clinician.toLowerCase())})),t.branchId&&(r=r.filter(s=>s.branchId===t.branchId)),t.startDate&&(r=r.filter(s=>s.date>=t.startDate)),t.endDate&&(r=r.filter(s=>s.date<=t.endDate)),t.search)){const s=t.search.toLowerCase();r=r.filter(n=>{var i,l,o,c;return((i=n.patientName)==null?void 0:i.toLowerCase().includes(s))||((l=n.title)==null?void 0:l.toLowerCase().includes(s))||((o=n.notes)==null?void 0:o.toLowerCase().includes(s))||((c=n.clinician)==null?void 0:c.toLowerCase().includes(s))})}return r.sort((s,n)=>{const i=new Date(`${s.date}T${s.time}`),l=new Date(`${n.date}T${n.time}`);return i.getTime()-l.getTime()})}getAppointmentsByPatient(t){return this.getAppointments({patientId:t})}getAppointmentsByDate(t){return this.appointments.filter(r=>r.date===t)}getAppointmentsByDateRange(t,r){return this.getAppointments({startDate:t,endDate:r})}getTodaysAppointments(){const t=new Date().toISOString().split("T")[0];return this.getAppointmentsByDate(t)}getUpcomingAppointments(t=7){const r=new Date,s=new Date(r);return s.setDate(r.getDate()+t),this.getAppointmentsByDateRange(r.toISOString().split("T")[0],s.toISOString().split("T")[0]).filter(n=>n.status==="scheduled"||n.status==="confirmed")}getAppointmentStats(t){const r=this.getAppointments(t),s={total:r.length,scheduled:0,confirmed:0,completed:0,cancelled:0,no_show:0,byType:{},byClinician:{}};return r.forEach(n=>{switch(n.status){case"scheduled":s.scheduled++;break;case"confirmed":s.confirmed++;break;case"completed":s.completed++;break;case"cancelled":s.cancelled++;break;case"no_show":s.no_show++;break}s.byType[n.type]=(s.byType[n.type]||0)+1,n.clinician&&(s.byClinician[n.clinician]=(s.byClinician[n.clinician]||0)+1)}),s}searchAppointments(t,r=50){const s=this.getAppointments({search:t});return{appointments:s.slice(0,r),total:s.length,hasMore:s.length>r}}async checkAvailability(t){var c;const{date:r,duration:s=30,clinicianId:n,branchId:i}=t;let l=this.getAppointmentsByDate(r);n&&(l=l.filter(d=>d.clinicianId===n)),i&&(l=l.filter(d=>d.branchId===i));const o=[];for(let d=9;d<18;d++)for(let u=0;u<60;u+=30){const h=`${d.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`,f=l.some(x=>{const p=this.timeToMinutes(x.time),m=p+x.duration,y=this.timeToMinutes(h),g=y+s;return y<m&&g>p});o.push({time:h,available:!f,appointmentId:f?(c=l.find(x=>this.timeToMinutes(x.time)<=this.timeToMinutes(h)&&this.timeToMinutes(x.time)+x.duration>this.timeToMinutes(h)))==null?void 0:c.id:void 0})}return{date:r,timeSlots:o,workingHours:{start:"09:00",end:"18:00"}}}async rescheduleAppointment(t){const{appointmentId:r,newDate:s,newTime:n,reason:i}=t,l=this.getAppointment(r);if(!l)throw new Error(`Appointment with id ${r} not found`);const c=(await this.checkAvailability({date:s,duration:l.duration,clinicianId:l.clinicianId,branchId:l.branchId})).timeSlots.find(d=>d.time===n);if(!(c!=null&&c.available))throw new Error("The requested time slot is not available");return this.updateAppointment(r,{date:s,time:n,startTime:`${s}T${n}:00.000Z`,endTime:this.calculateEndTime(s,n,l.duration),status:"rescheduled",notes:l.notes?`${l.notes}

Rescheduled: ${i||"No reason provided"}`:`Rescheduled: ${i||"No reason provided"}`})}async cancelAppointment(t,r){return this.updateAppointment(t,{status:"cancelled",notes:r?`Cancelled: ${r}`:"Cancelled"})}async completeAppointment(t,r){return this.updateAppointment(t,{status:"completed",notes:r||"Appointment completed"})}async markNoShow(t){return this.updateAppointment(t,{status:"no_show",notes:"Patient did not show up"})}async bulkOperation(t){var s,n,i,l;const r={success:!0,processed:0,failed:0,errors:[]};for(const o of t.appointmentIds)try{switch(t.operation){case"cancel":await this.cancelAppointment(o,(s=t.data)==null?void 0:s.reason);break;case"complete":await this.completeAppointment(o,(n=t.data)==null?void 0:n.reason);break;case"reschedule":(i=t.data)!=null&&i.newDate&&((l=t.data)!=null&&l.newTime)&&await this.rescheduleAppointment({appointmentId:o,newDate:t.data.newDate,newTime:t.data.newTime,reason:t.data.reason});break;case"send_reminder":break}r.processed++}catch(c){r.failed++,r.errors.push({appointmentId:o,error:c instanceof Error?c.message:"Unknown error"})}return r.success=r.failed===0,r}validateAppointment(t){const r={isValid:!0,errors:[],warnings:[],conflicts:[]};if(t.patientId||r.errors.push("Patient ID is required"),t.date||r.errors.push("Date is required"),t.time||r.errors.push("Time is required"),t.type||r.errors.push("Appointment type is required"),t.date){const n=new Date(t.date),i=new Date;i.setHours(0,0,0,0),n<i&&r.warnings.push("Appointment is scheduled in the past")}t.time&&!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(t.time)&&r.errors.push("Invalid time format (use HH:MM)"),t.duration<=0&&r.errors.push("Duration must be greater than 0");const s=this.findConflicts(t);return r.conflicts=s,s.length>0&&r.warnings.push(`Found ${s.length} potential conflict(s)`),r.isValid=r.errors.length===0,r}findConflicts(t){const r=[];return this.appointments.filter(n=>n.id!==t.id&&n.date===t.date&&n.status!=="cancelled"&&this.timesOverlap(n.time,n.duration,t.time,t.duration)).forEach(n=>{r.push({appointmentId:t.id,conflictType:"time_overlap",conflictingAppointmentId:n.id,message:`Time overlaps with appointment ${n.id}`})}),r}calculateEndTime(t,r,s){const n=new Date(`${t}T${r}:00.000Z`);return new Date(n.getTime()+s*6e4).toISOString()}generateTitle(t){return{consultation:"Konsltasyon",follow_up:"Kontrol Muayenesi",trial:"Deneme Balang",delivery:"Cihaz Teslimi",control_visit:"Kontrol Ziyareti",battery_renewal:"Pil Yenileme",repair:"Tamir",fitting:"Cihaz Ayar",assessment:"Deerlendirme"}[t]||"Randevu"}timeToMinutes(t){const[r,s]=t.split(":").map(Number);return r*60+s}timesOverlap(t,r,s,n){const i=this.timeToMinutes(t),l=i+r,o=this.timeToMinutes(s),c=o+n;return i<c&&l>o}}const hr=new iU;function Gu(e={}){const{filters:t,autoRefresh:r=!1,refreshInterval:s=12e4}=e,[n,i]=k.useState([]),[l,o]=k.useState(null),[c,d]=k.useState(t||{}),[u,h]=k.useState(!1),[f,x]=k.useState(!1),[p,m]=k.useState(!1),[y,g]=k.useState(!1),[v,b]=k.useState(null),S=k.useCallback(()=>{try{h(!0),b(null);const U=hr.getAppointments(c);i(U)}catch(U){b(U instanceof Error?U.message:"Failed to load appointments")}finally{h(!1)}},[c]);k.useEffect(()=>{const U=hr.subscribe(()=>{S()});return S(),U},[S]),k.useEffect(()=>{if(!r)return;const U=setInterval(()=>{S()},s);return()=>clearInterval(U)},[r,s,S]);const D=k.useCallback(async U=>{try{return x(!0),b(null),await hr.createAppointment(U)}catch(M){const J=M instanceof Error?M.message:"Failed to create appointment";throw b(J),new Error(J)}finally{x(!1)}},[]),N=k.useCallback(async(U,M)=>{try{return m(!0),b(null),await hr.updateAppointment(U,M)}catch(J){const se=J instanceof Error?J.message:"Failed to update appointment";throw b(se),new Error(se)}finally{m(!1)}},[]),E=k.useCallback(async U=>{try{g(!0),b(null),await hr.deleteAppointment(U)}catch(M){const J=M instanceof Error?M.message:"Failed to delete appointment";throw b(J),new Error(J)}finally{g(!1)}},[]),w=k.useCallback(U=>{try{const M=hr.getAppointment(U);o(M||null)}catch(M){b(M instanceof Error?M.message:"Failed to get appointment")}},[]),_=k.useCallback(()=>{S()},[S]),C=k.useCallback(()=>{b(null)},[]),T=k.useCallback(U=>{d(U)},[]),j=k.useCallback((U,M)=>hr.searchAppointments(U,M),[]),F=k.useCallback(U=>hr.getAppointmentsByPatient(U),[]),O=k.useCallback(U=>hr.getAppointmentsByDate(U),[]),z=k.useCallback(()=>hr.getTodaysAppointments(),[]),G=k.useCallback(U=>hr.getUpcomingAppointments(U),[]),q=k.useCallback(async U=>{try{return b(null),await hr.checkAvailability(U)}catch(M){const J=M instanceof Error?M.message:"Failed to check availability";throw b(J),new Error(J)}},[]),H=k.useCallback(async U=>{try{return m(!0),b(null),await hr.rescheduleAppointment(U)}catch(M){const J=M instanceof Error?M.message:"Failed to reschedule appointment";throw b(J),new Error(J)}finally{m(!1)}},[]),A=k.useCallback(async(U,M)=>{try{return m(!0),b(null),await hr.cancelAppointment(U,M)}catch(J){const se=J instanceof Error?J.message:"Failed to cancel appointment";throw b(se),new Error(se)}finally{m(!1)}},[]),V=k.useCallback(async(U,M)=>{try{return m(!0),b(null),await hr.completeAppointment(U,M)}catch(J){const se=J instanceof Error?J.message:"Failed to complete appointment";throw b(se),new Error(se)}finally{m(!1)}},[]),L=k.useCallback(async U=>{try{return m(!0),b(null),await hr.markNoShow(U)}catch(M){const J=M instanceof Error?M.message:"Failed to mark no-show";throw b(J),new Error(J)}finally{m(!1)}},[]),P=k.useCallback(async U=>{try{return m(!0),b(null),await hr.bulkOperation(U)}catch(M){const J=M instanceof Error?M.message:"Failed to perform bulk operation";throw b(J),new Error(J)}finally{m(!1)}},[]),I=k.useCallback(U=>hr.validateAppointment(U),[]),R=k.useMemo(()=>hr.getAppointmentStats(c),[n,c]);return{appointments:n,appointment:l,stats:R,loading:u,creating:f,updating:p,deleting:y,error:v,createAppointment:D,updateAppointment:N,deleteAppointment:E,getAppointment:w,refreshAppointments:_,clearError:C,setFilters:T,searchAppointments:j,getAppointmentsByPatient:F,getAppointmentsByDate:O,getTodaysAppointments:z,getUpcomingAppointments:G,checkAvailability:q,rescheduleAppointment:H,cancelAppointment:A,completeAppointment:V,markNoShow:L,bulkOperation:P,validateAppointment:I}}const JT=e=>{const{onArrowUp:t,onArrowDown:r,onArrowLeft:s,onArrowRight:n,onEnter:i,onEscape:l,onSpace:o,onTab:c,onShiftTab:d,onHome:u,onEnd:h,onPageUp:f,onPageDown:x,enabled:p=!0,preventDefault:m=!0,stopPropagation:y=!0}=e,g=k.useRef(null),v=k.useCallback(b=>{if(!p)return;const{key:S,shiftKey:D}=b;let N=!1;switch(S){case"ArrowUp":t&&(t(),N=!0);break;case"ArrowDown":r&&(r(),N=!0);break;case"ArrowLeft":s&&(s(),N=!0);break;case"ArrowRight":n&&(n(),N=!0);break;case"Enter":i&&(i(),N=!0);break;case"Escape":l&&(l(),N=!0);break;case" ":o&&(o(),N=!0);break;case"Tab":D&&d?(d(),N=!0):!D&&c&&(c(),N=!0);break;case"Home":u&&(u(),N=!0);break;case"End":h&&(h(),N=!0);break;case"PageUp":f&&(f(),N=!0);break;case"PageDown":x&&(x(),N=!0);break}N&&(m&&b.preventDefault(),y&&b.stopPropagation())},[p,t,r,s,n,i,l,o,c,d,u,h,f,x,m,y]);return k.useEffect(()=>{const b=g.current;if(!(!b||!p))return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)},[v,p]),g},cv=e=>{const{currentDate:t,onDateChange:r,onDateSelect:s,onEscape:n,enabled:i=!0,viewMode:l="month"}=e,o=k.useCallback(u=>{const h=new Date(t);switch(l){case"month":switch(u){case"up":h.setDate(h.getDate()-7);break;case"down":h.setDate(h.getDate()+7);break;case"left":h.setDate(h.getDate()-1);break;case"right":h.setDate(h.getDate()+1);break}break;case"week":switch(u){case"up":h.setHours(h.getHours()-1);break;case"down":h.setHours(h.getHours()+1);break;case"left":h.setDate(h.getDate()-1);break;case"right":h.setDate(h.getDate()+1);break}break;case"day":switch(u){case"up":h.setHours(h.getHours()-1);break;case"down":h.setHours(h.getHours()+1);break;case"left":h.setDate(h.getDate()-1);break;case"right":h.setDate(h.getDate()+1);break}break}r(h)},[t,r,l]),c=k.useCallback(u=>{const h=new Date(t);u==="prev"?h.setMonth(h.getMonth()-1):h.setMonth(h.getMonth()+1),r(h)},[t,r]),d=k.useCallback(()=>{r(new Date)},[r]);return JT({onArrowUp:()=>o("up"),onArrowDown:()=>o("down"),onArrowLeft:()=>o("left"),onArrowRight:()=>o("right"),onEnter:()=>s==null?void 0:s(t),onEscape:n,onPageUp:()=>c("prev"),onPageDown:()=>c("next"),onHome:d,enabled:i})},lU=e=>{const{appointments:t,selectedIndex:r,onSelectionChange:s,onAppointmentSelect:n,onAppointmentEdit:i,onAppointmentDelete:l,onEscape:o,enabled:c=!0}=e,d=k.useCallback(h=>{if(t.length===0)return;let f=r;h==="up"?f=r>0?r-1:t.length-1:f=r<t.length-1?r+1:0,s(f)},[t.length,r,s]),u=k.useCallback(()=>{r>=0&&r<t.length&&(n==null||n(t[r]))},[r,t,n]);return k.useCallback(()=>{r>=0&&r<t.length&&(i==null||i(t[r]))},[r,t,i]),k.useCallback(()=>{r>=0&&r<t.length&&(l==null||l(t[r]))},[r,t,l]),JT({onArrowUp:()=>d("up"),onArrowDown:()=>d("down"),onEnter:u,onEscape:o,onSpace:u,enabled:c})},oU=({patientId:e,showFilters:t=!0,showActions:r=!0,onAppointmentClick:s,onEditAppointment:n,onDeleteAppointment:i,className:l=""})=>{const[o,c]=k.useState({patientId:e,status:void 0,type:void 0,startDate:"",endDate:"",search:""}),[d,u]=k.useState(-1),{appointments:h,loading:f,error:x,cancelAppointment:p,completeAppointment:m,markNoShow:y,rescheduleAppointment:g}=Gu({filters:o}),v=(C,T)=>{c(j=>({...j,[C]:T}))},b=C=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-orange-100 text-orange-800",rescheduled:"bg-purple-100 text-purple-800"})[C]||"bg-gray-100 text-gray-800",S=C=>({scheduled:"Planland",confirmed:"Onayland",completed:"Tamamland",cancelled:"ptal Edildi",no_show:"Gelmedi",rescheduled:"Ertelendi"})[C]||C,D=C=>({consultation:"Konsltasyon",follow_up:"Kontrol",trial:"Deneme",delivery:"Teslim",control_visit:"Kontrol Ziyareti",battery_renewal:"Pil Yenileme",repair:"Tamir",fitting:"Ayar",assessment:"Deerlendirme"})[C]||C,N=C=>new Date(C).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}),E=C=>C.substring(0,5),w=async(C,T)=>{try{switch(T){case"cancelled":await p(C.id,"Kullanc tarafndan iptal edildi");break;case"completed":await m(C.id,"Randevu tamamland");break;case"no_show":await y(C.id);break}}catch(j){console.error("Failed to update appointment status:",j)}},_=k.useMemo(()=>[...h].sort((C,T)=>{const j=new Date(`${C.date}T${C.time}`),F=new Date(`${T.date}T${T.time}`);return j.getTime()-F.getTime()}),[h]);return lU({appointments:_,selectedIndex:d,onSelectionChange:u,onAppointmentSelect:C=>s==null?void 0:s(C),onAppointmentEdit:C=>n==null?void 0:n(C),onAppointmentDelete:C=>i==null?void 0:i(C)}),f?a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Randevular ykleniyor..."})]}):x?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Hata"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:x})]})]})}):a.jsxs("div",{className:`appointment-list ${l}`,children:[t&&a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{children:a.jsx(Ue,{label:"Durum",value:o.status||"",onChange:C=>v("status",C.target.value||void 0),options:[{value:"",label:"Tm"},{value:"scheduled",label:"Planland"},{value:"confirmed",label:"Onayland"},{value:"completed",label:"Tamamland"},{value:"cancelled",label:"ptal Edildi"},{value:"no_show",label:"Gelmedi"}],fullWidth:!0})}),a.jsx("div",{children:a.jsx(Ue,{label:"Tr",value:o.type||"",onChange:C=>v("type",C.target.value||void 0),options:[{value:"",label:"Tm"},{value:"consultation",label:"Konsltasyon"},{value:"follow_up",label:"Kontrol"},{value:"trial",label:"Deneme"},{value:"delivery",label:"Teslim"},{value:"control_visit",label:"Kontrol Ziyareti"},{value:"battery_renewal",label:"Pil Yenileme"},{value:"repair",label:"Tamir"},{value:"fitting",label:"Ayar"},{value:"assessment",label:"Deerlendirme"}],fullWidth:!0})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balang Tarihi"}),a.jsx(ye,{type:"date",value:o.startDate||"",onChange:C=>v("startDate",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti Tarihi"}),a.jsx(ye,{type:"date",value:o.endDate||"",onChange:C=>v("endDate",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arama"}),a.jsx(ye,{type:"text",placeholder:"Hasta ad, doktor, notlar...",value:o.search||"",onChange:C=>v("search",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),_.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4h3a2 2 0 012 2v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h3z"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Randevu bulunamad"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Belirtilen kriterlere uygun randevu bulunmuyor."})]}):a.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hasta"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih & Saat"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tr"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doktor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sre"}),r&&a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((C,T)=>{var j;return a.jsxs("tr",{className:`
                      hover:bg-gray-50 
                      ${s?"cursor-pointer":""} 
                      ${d===T?"bg-blue-50 border-blue-200":""}
                    `,onClick:()=>s==null?void 0:s(C),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-blue-800",children:((j=C.patientName)==null?void 0:j.split(" ").map(F=>F[0]).join("").toUpperCase())||"N/A"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.patientName||"simsiz Hasta"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",C.patientId]})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:N(C.date)}),a.jsxs("div",{className:"text-sm text-gray-500",children:[E(C.time)," (",C.duration," dk)"]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:D(C.type)}),C.title&&C.title!==D(C.type)&&a.jsx("div",{className:"text-sm text-gray-500",children:C.title})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(C.status)}`,children:S(C.status)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.clinician||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[C.duration," dakika"]}),r&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[C.status==="scheduled"&&a.jsxs(a.Fragment,{children:[a.jsx(Z,{onClick:F=>{F.stopPropagation(),w(C,"completed")},className:"text-green-600 hover:text-green-900 text-xs",title:"Tamamla",variant:"default",children:"Tamamla"}),a.jsx(Z,{onClick:F=>{F.stopPropagation(),w(C,"no_show")},className:"text-orange-600 hover:text-orange-900 text-xs",title:"Gelmedi",variant:"default",children:"Gelmedi"}),a.jsx(Z,{onClick:F=>{F.stopPropagation(),w(C,"cancelled")},className:"text-red-600 hover:text-red-900 text-xs",title:"ptal Et",variant:"default",children:"ptal"})]}),n&&a.jsx(Z,{onClick:F=>{F.stopPropagation(),n(C)},className:"text-blue-600 hover:text-blue-900 text-xs",title:"Dzenle",variant:"default",children:"Dzenle"}),i&&a.jsx(Z,{onClick:F=>{F.stopPropagation(),i(C)},className:"text-red-600 hover:text-red-900 text-xs",title:"Sil",variant:"default",children:"Sil"})]})})]},C.id)})})]})})}),a.jsxs("div",{className:"mt-4 text-sm text-gray-500 text-center",children:["Toplam ",_.length," randevu gsteriliyor"]})]})};class cU{constructor(){qe(this,"activeRequests",0);qe(this,"maxConcurrentRequests",3);qe(this,"requestQueue",[]);qe(this,"requestDelay",100)}async throttle(t){return new Promise((r,s)=>{this.requestQueue.push(async()=>{try{this.activeRequests++;const n=await t();r(n)}catch(n){s(n)}finally{this.activeRequests--,setTimeout(()=>this.processQueue(),this.requestDelay)}}),this.processQueue()})}processQueue(){if(this.activeRequests<this.maxConcurrentRequests&&this.requestQueue.length>0){const t=this.requestQueue.shift();t&&t()}}getActiveRequestCount(){return this.activeRequests}getQueueLength(){return this.requestQueue.length}}class On{constructor(){qe(this,"cache",new Map);qe(this,"CACHE_TTL",5*60*1e3);qe(this,"ongoingRequests",new Map);qe(this,"throttler",new cU)}async fetchAllPatients(){const t="all_patients",r=this.cache.get(t);if(r&&Date.now()-r.timestamp<this.CACHE_TTL)return console.log(" Returning cached patients data"),r.data;if(this.ongoingRequests.has(t))return console.log(" Waiting for ongoing request..."),this.ongoingRequests.get(t);const s=this._fetchAllPatientsInternal();this.ongoingRequests.set(t,s);try{const n=await s;return this.cache.set(t,{data:n,timestamp:Date.now()}),n}finally{this.ongoingRequests.delete(t)}}async _fetchAllPatientsInternal(){var t,r;console.log(" Starting to fetch all patients...");try{const s=await Zi.getPatients();return(r=(t=s.data)==null?void 0:t.data)!=null&&r.patients?(console.log(` Successfully fetched ${s.data.data.patients.length} patients`),s.data.data.patients):(console.warn(" No patients data in response:",s),[])}catch(s){throw console.error(" Error fetching patients:",s),s}}async getSales(t){try{const r=await this.throttler.throttle(async()=>await lr().salesGetPatientSales(t)),s=(r==null?void 0:r.data)??r;return{data:Array.isArray(s==null?void 0:s.data)?s.data:Array.isArray(s)?s:[],success:!0,message:"Sales data retrieved successfully"}}catch(r){return console.error(" Error fetching sales:",r),{data:[],success:!1,message:"Failed to fetch sales data"}}}clearCache(){this.cache.clear(),console.log(" Cache cleared")}invalidateCache(t="all_patients"){this.cache.delete(t),console.log(` Cache invalidated for key: ${t}`)}async fetchPatient(t){var r;try{const s=await Zi.getPatient(t);return(r=s.data)!=null&&r.patient?s.data.patient:null}catch(s){throw console.error(` Error fetching patient ${t}:`,s),s}}async createPatient(t){var r;try{const s=await Zi.createPatient(t);if((r=s.data)!=null&&r.patient)return this.invalidateCache(),s.data.patient;throw new Error("Failed to create patient")}catch(s){throw console.error(" Error creating patient:",s),s}}async updatePatient(t,r){var s;try{const n=await Zi.updatePatient(t,r);return(s=n.data)!=null&&s.patient?(this.invalidateCache(),n.data.patient):null}catch(n){throw console.error(` Error updating patient ${t}:`,n),n}}async deletePatient(t){var r;try{return(r=(await Zi.deletePatient(t)).data)!=null&&r.success?(this.invalidateCache(),!0):!1}catch(s){throw console.error(` Error deleting patient ${t}:`,s),s}}async createSale(t,r){try{let s=r.productId;if(!s&&r.devices&&r.devices.length>0&&(s=r.devices[0].inventoryId||r.devices[0].id),!s)throw new Error("Product ID is required for sale creation");const n={product_id:s,discount:r.discount||0,payment_type:r.paymentMethod||"cash",notes:r.notes||""},i=await fetch(`http://localhost:8084/api/patients/${t}/product-sales`,{method:"POST",headers:{"Content-Type":"application/json","Idempotency-Key":`sale-${t}-${s}-${Date.now()}`},body:JSON.stringify(n)});if(!i.ok){const o=await i.text();throw console.error("API Error Response:",o),new Error(`HTTP error! status: ${i.status}, message: ${o}`)}return{data:await i.json()}}catch(s){throw console.error("Error creating sale:",s),s}}async updateSale(t,r){try{return{data:(await this.throttler.throttle(async()=>await lr().salesUpdateSale(t,r))).data,success:!0,message:"Sale updated successfully"}}catch(s){return console.error(" Error updating sale:",s),{data:null,success:!1,message:"Failed to update sale"}}}async getTimeline(t){var r,s;try{const i=await lr().timelineGetPatientTimeline(t);return{data:((r=i.data)==null?void 0:r.data)||[],success:!0,meta:(s=i.data)==null?void 0:s.meta}}catch(n){return console.error("Failed to fetch patient timeline:",n),{data:[],success:!1,error:n instanceof Error?n.message:"Failed to fetch timeline"}}}async getSgk(t){try{const r=await this.throttler.throttle(async()=>await lr().sgkGetPatientSgkDocuments(t));return{data:(r==null?void 0:r.data)||[],success:!0}}catch(r){return console.error("Failed to fetch patient SGK documents:",r),{data:[],success:!1,error:r instanceof Error?r.message:"Failed to fetch SGK documents"}}}async getAppointments(t){var r;try{return{data:(((r=(await this.throttler.throttle(async()=>await lr().appointmentsListAppointments())).data)==null?void 0:r.data)||[]).filter(l=>l.patientId===t||l.patient_id===t),success:!0}}catch(s){return console.error("Failed to fetch patient appointments:",s),{data:[],success:!1,error:s instanceof Error?s.message:"Failed to fetch appointments"}}}async getHearingTests(t){try{return console.warn("Hearing tests endpoint not yet available in generated client"),{data:[],success:!0,message:"Hearing tests endpoint not yet implemented in backend"}}catch(r){return console.error("Failed to fetch patient hearing tests:",r),{data:[],success:!1,error:r instanceof Error?r.message:"Failed to fetch hearing tests"}}}async getNotes(t){try{return console.warn("Get notes endpoint not yet available in generated client"),{data:[],success:!0,message:"Get notes endpoint not yet implemented in backend"}}catch(r){return console.error("Failed to fetch patient notes:",r),{data:[],success:!1,error:r instanceof Error?r.message:"Failed to fetch notes"}}}async bulkUpload(t){return{data:[],success:!0,message:"Bulk upload not available in simplified version"}}async search(t){return{data:[],success:!0,message:"Search not available in simplified version"}}async exportCsv(t){return{data:[],success:!0,message:"Export not available in simplified version"}}async list(t){return this.fetchAllPatients()}async getPatients(t){return this.fetchAllPatients()}async createNote(t,r){try{return{data:(await this.throttler.throttle(async()=>await lr().patientSubresourcesCreatePatientNote(t,r))).data,success:!0}}catch(s){return console.error("Failed to create patient note:",s),{data:null,success:!1,error:s instanceof Error?s.message:"Failed to create note"}}}async deleteNote(t,r){try{return{data:(await this.throttler.throttle(async()=>await lr().patientSubresourcesDeletePatientNote(t,r))).data,success:!0}}catch(s){return console.error("Failed to delete patient note:",s),{data:null,success:!1,error:s instanceof Error?s.message:"Failed to delete note"}}}generateId(){return Math.random().toString(36).substr(2,9)}}const e_=new On,dU=e=>({id:e.id,tcNumber:e.identityNumber||e.identity_number||e.tcNumber,firstName:e.firstName||e.first_name,lastName:e.lastName||e.last_name,phone:e.phone,email:e.email,birthDate:e.birthDate||e.birth_date,gender:e.gender,addressCity:e.addressCity||e.address_city,addressDistrict:e.addressDistrict||e.address_district,addressFull:e.addressFull||e.address_full,status:e.status,segment:e.segment,acquisitionType:e.acquisitionType||e.acquisition_type,conversionStep:e.conversionStep||e.conversion_step,referredBy:e.referredBy||e.referred_by,priorityScore:e.priorityScore||e.priority_score||0,tags:e.tags||[],sgkInfo:e.sgkInfo||e.sgk_info,customData:e.customData||e.custom_data,createdAt:e.createdAt||e.created_at,updatedAt:e.updatedAt||e.updated_at,devices:e.devices||[],notes:e.notes||[],communications:e.communications||[]}),B0={API_BASE:"/api/patients",PAGINATION:{DEFAULT_PAGE_SIZE:25,MAX_PAGE_SIZE:50},CACHE:{STALE_TIME:10*60*1e3,GC_TIME:60*60*1e3},TC_NUMBER_LENGTH:11,MIN_NAME_LENGTH:1,STATUS_OPTIONS:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],GENDER_OPTIONS:[{value:"M",label:"Male"},{value:"F",label:"Female"}],SORT_OPTIONS:[{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"createdAt",label:"Created Date"},{value:"priorityScore",label:"Priority Score"}],FORM_FIELDS:{TC_NUMBER:"tcNumber",FIRST_NAME:"firstName",LAST_NAME:"lastName",PHONE:"phone",EMAIL:"email",BIRTH_DATE:"birthDate",GENDER:"gender",ADDRESS_CITY:"addressCity",ADDRESS_DISTRICT:"addressDistrict",ADDRESS_FULL:"addressFull",STATUS:"status",SEGMENT:"segment",ACQUISITION_TYPE:"acquisitionType",CONVERSION_STEP:"conversionStep",REFERRED_BY:"referredBy",PRIORITY_SCORE:"priorityScore",TAGS:"tags"},ERROR_MESSAGES:{TC_NUMBER_REQUIRED:"TC Number is required",TC_NUMBER_INVALID:"TC Number must be 11 digits",TC_NUMBER_FORMAT:"Invalid TC Number format",FIRST_NAME_REQUIRED:"First name is required",LAST_NAME_REQUIRED:"Last name is required",PHONE_REQUIRED:"Phone number is required",PHONE_INVALID:"Invalid phone number format",EMAIL_INVALID:"Invalid email format",BIRTH_DATE_INVALID:"Invalid birth date"},SUCCESS_MESSAGES:{PATIENT_CREATED:"Patient created successfully",PATIENT_UPDATED:"Patient updated successfully",PATIENT_DELETED:"Patient deleted successfully",NOTE_ADDED:"Note added successfully",NOTE_DELETED:"Note deleted successfully"}},Ma={all:["patients"],lists:()=>[...Ma.all,"list"],list:e=>[...Ma.lists(),e],details:()=>[...Ma.all,"detail"],detail:e=>[...Ma.details(),e],notes:e=>[...Ma.all,"notes",e],ereceipts:e=>[...Ma.all,"ereceipts",e],hearingTests:e=>[...Ma.all,"hearingTests",e],sales:e=>[...Ma.all,"sales",e],timeline:e=>[...Ma.all,"timeline",e]};function t_(e={}){const t={page:1,per_page:B0.PAGINATION.DEFAULT_PAGE_SIZE,...e};return ay({queryKey:Ma.list(t),queryFn:async()=>{var i,l,o,c,d;const s=await e_.fetchAllPatients();return{patients:(s.data||[]).map(dU),total:((i=s.pagination)==null?void 0:i.total)||0,page:((l=s.pagination)==null?void 0:l.page)||1,pageSize:((o=s.pagination)==null?void 0:o.perPage)||B0.PAGINATION.DEFAULT_PAGE_SIZE,hasMore:(((c=s.pagination)==null?void 0:c.page)||1)<(((d=s.pagination)==null?void 0:d.totalPages)||1)}},staleTime:B0.CACHE.STALE_TIME,gcTime:B0.CACHE.GC_TIME})}const uU=({appointment:e,patientId:t,onSave:r,onCancel:s,mode:n="create",className:i=""})=>{const{createAppointment:l,updateAppointment:o,creating:c,updating:d,error:u}=Gu(),{data:h}=t_(),{patients:f=[]}=h||{},[x,p]=k.useState({patientId:t||(e==null?void 0:e.patientId)||"",patientName:(e==null?void 0:e.patientName)||"",date:(e==null?void 0:e.date)||new Date().toISOString().split("T")[0],time:(e==null?void 0:e.time)||"09:00",duration:(e==null?void 0:e.duration)||30,type:(e==null?void 0:e.type)||"consultation",status:(e==null?void 0:e.status)||"scheduled",title:(e==null?void 0:e.title)||"",notes:(e==null?void 0:e.notes)||"",clinician:(e==null?void 0:e.clinician)||"",clinicianId:(e==null?void 0:e.clinicianId)||"",location:(e==null?void 0:e.location)||"",branchId:(e==null?void 0:e.branchId)||""}),[m,y]=k.useState({}),[g,v]=k.useState(!1);k.useEffect(()=>{if(x.patientId&&f.length>0){const w=f.find(_=>_.id===x.patientId);if(w){const _=w.firstName&&w.lastName?`${w.firstName} ${w.lastName}`:`${w.firstName||w.lastName||"simsiz Hasta"}`;p(C=>({...C,patientName:_}))}}},[x.patientId,f]),k.useEffect(()=>{(!x.title||x.title===b(x.type))&&p(w=>({...w,title:b(x.type)}))},[x.type]);const b=w=>({consultation:"Konsltasyon",follow_up:"Kontrol Muayenesi",trial:"Deneme Balang",delivery:"Cihaz Teslimi",control_visit:"Kontrol Ziyareti",battery_renewal:"Pil Yenileme",repair:"Tamir",fitting:"Cihaz Ayar",assessment:"Deerlendirme"})[w]||w,S=()=>{const w={};if(x.patientId||(w.patientId="Hasta seimi zorunludur"),!x.date)w.date="Tarih zorunludur";else{const _=new Date(x.date),C=new Date;C.setHours(0,0,0,0),_<C&&(w.date="Gemi tarih seilemez")}return x.time?/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(x.time)||(w.time="Geerli bir saat format giriniz (HH:MM)"):w.time="Saat zorunludur",!x.duration||x.duration<=0?w.duration="Sre 0'dan byk olmaldr":x.duration>480&&(w.duration="Sre 8 saatten fazla olamaz"),x.type||(w.type="Randevu tr zorunludur"),x.title.trim()||(w.title="Balk zorunludur"),y(w),Object.keys(w).length===0},D=(w,_)=>{p(C=>({...C,[w]:_})),m[w]&&y(C=>({...C,[w]:void 0}))},N=async w=>{if(w.preventDefault(),!!S()){v(!0);try{if(n==="create"){const _={patientId:x.patientId,patientName:x.patientName,date:x.date,time:x.time,duration:x.duration,type:x.type,status:x.status,title:x.title.trim(),notes:x.notes.trim()||void 0,clinician:x.clinician.trim()||void 0,clinicianId:x.clinicianId.trim()||void 0,location:x.location.trim()||void 0,branchId:x.branchId.trim()||void 0,createdBy:"current-user"},C=await l(_);r==null||r(C)}else if(e){const _={patientId:x.patientId,patientName:x.patientName,date:x.date,time:x.time,duration:x.duration,type:x.type,status:x.status,title:x.title.trim(),notes:x.notes.trim()||void 0,clinician:x.clinician.trim()||void 0,clinicianId:x.clinicianId.trim()||void 0,location:x.location.trim()||void 0,branchId:x.branchId.trim()||void 0},C=await o(e.id,_);r==null||r(C)}}catch(_){console.error("Failed to save appointment:",_)}finally{v(!1)}}},E=c||d||g;return a.jsx("div",{className:`appointment-form ${i}`,children:a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[u&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Hata"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:u})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta *"}),a.jsx(Ue,{value:x.patientId,onChange:w=>D("patientId",w.target.value),options:[{value:"",label:"Hasta seiniz"},...f.map(w=>({value:w.id,label:w.firstName&&w.lastName?`${w.firstName} ${w.lastName}`:`${w.firstName||w.lastName||"simsiz Hasta"}`}))],className:`w-full ${m.patientId?"border-red-300":""}`,disabled:!!t}),m.patientId&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.patientId})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarih *"}),a.jsx(ye,{type:"date",value:x.date,onChange:w=>D("date",w.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.date?"border-red-300":"border-gray-300"}`}),m.date&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.date})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saat *"}),a.jsx(ye,{type:"time",value:x.time,onChange:w=>D("time",w.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.time?"border-red-300":"border-gray-300"}`}),m.time&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.time})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sre (dakika) *"}),a.jsx(ye,{type:"number",min:"15",max:"480",step:"15",value:x.duration,onChange:w=>D("duration",parseInt(w.target.value)||0),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.duration?"border-red-300":"border-gray-300"}`}),m.duration&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.duration})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Randevu Tr *"}),a.jsx(Ue,{value:x.type,onChange:w=>D("type",w.target.value),options:[{value:"consultation",label:"Konsltasyon"},{value:"follow_up",label:"Kontrol Muayenesi"},{value:"trial",label:"Deneme Balang"},{value:"delivery",label:"Cihaz Teslimi"},{value:"control_visit",label:"Kontrol Ziyareti"},{value:"battery_renewal",label:"Pil Yenileme"},{value:"repair",label:"Tamir"},{value:"fitting",label:"Cihaz Ayar"},{value:"assessment",label:"Deerlendirme"}],className:`w-full ${m.type?"border-red-300":""}`}),m.type&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),a.jsx(Ue,{value:x.status,onChange:w=>D("status",w.target.value),options:[{value:"scheduled",label:"Planland"},{value:"confirmed",label:"Onayland"},{value:"completed",label:"Tamamland"},{value:"cancelled",label:"ptal Edildi"},{value:"no_show",label:"Gelmedi"},{value:"rescheduled",label:"Ertelendi"}],className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk *"}),a.jsx(ye,{type:"text",value:x.title,onChange:w=>D("title",w.target.value),placeholder:"Randevu bal",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${m.title?"border-red-300":"border-gray-300"}`}),m.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doktor"}),a.jsx(ye,{type:"text",value:x.clinician,onChange:w=>D("clinician",w.target.value),placeholder:"Doktor ad",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lokasyon"}),a.jsx(ye,{type:"text",value:x.location,onChange:w=>D("location",w.target.value),placeholder:"Muayene odas, ube vb.",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),a.jsx(wr,{value:x.notes,onChange:w=>D("notes",w.target.value),placeholder:"Randevu ile ilgili notlar...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[s&&a.jsx(Z,{type:"button",onClick:s,disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",variant:"default",children:"ptal"}),a.jsxs(Z,{type:"submit",disabled:E,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 flex items-center",variant:"default",children:[E&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),n==="create"?"Randevu Olutur":"Randevuyu Gncelle"]})]})]})})},r_=({appointment:e,isOpen:t,onClose:r,mode:s="view",patientId:n,initialDate:i,initialTime:l})=>{const{updateAppointment:o,deleteAppointment:c,updating:d,deleting:u}=Gu(),[h,f]=k.useState(s),[x,p]=k.useState(!1);if(!t)return null;const m=w=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-orange-100 text-orange-800",rescheduled:"bg-yellow-100 text-yellow-800"})[w]||"bg-gray-100 text-gray-800",y=w=>({scheduled:"Planland",confirmed:"Onayland",completed:"Tamamland",cancelled:"ptal Edildi",no_show:"Gelmedi",rescheduled:"Ertelendi"})[w]||w,g=w=>({consultation:"Konsltasyon",follow_up:"Kontrol Muayenesi",trial:"Deneme Balang",delivery:"Cihaz Teslimi",control_visit:"Kontrol Ziyareti",battery_renewal:"Pil Yenileme",repair:"Tamir",fitting:"Cihaz Ayar",assessment:"Deerlendirme"})[w]||w,v=w=>new Date(w).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),b=w=>w.substring(0,5),S=async w=>{if(e)try{await o(e.id,{status:w})}catch(_){console.error("Failed to update appointment status:",_)}},D=async()=>{if(e)try{await c(e.id),p(!1),r()}catch(w){console.error("Failed to delete appointment:",w)}},N=w=>{f("view")},E=()=>{h==="create"?r():f("view")};return a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:r}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:[h==="create"&&"Yeni Randevu",h==="edit"&&"Randevuyu Dzenle",h==="view"&&"Randevu Detaylar"]}),a.jsx(Z,{onClick:r,className:"text-gray-400 hover:text-gray-600 focus:outline-none",variant:"default",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h==="view"&&e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Hasta Bilgileri"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.patientName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",e.patientId]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tarih"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:v(e.date)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Saat"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b(e.time)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sre"}),a.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[e.duration," dakika"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tr"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g(e.type)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Durum"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m(e.status)}`,children:y(e.status)})]}),e.clinician&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Doktor"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.clinician})]}),e.location&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lokasyon"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.location})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Balk"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.title})]}),e.notes&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notlar"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:e.notes})]}),a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsxs("p",{children:["Oluturulma: ",new Date(e.createdAt).toLocaleString("tr-TR")]}),e.updatedAt!==e.createdAt&&a.jsxs("p",{children:["Gncelleme: ",new Date(e.updatedAt).toLocaleString("tr-TR")]})]}),!["completed","cancelled"].includes(e.status)&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Hzl lemler"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.status!=="confirmed"&&a.jsx(Z,{onClick:()=>S("confirmed"),disabled:d,className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full hover:bg-green-200 disabled:opacity-50",variant:"default",children:"Onayla"}),a.jsx(Z,{onClick:()=>S("completed"),disabled:d,className:"px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 disabled:opacity-50",variant:"default",children:"Tamamla"}),a.jsx(Z,{onClick:()=>S("no_show"),disabled:d,className:"px-3 py-1 text-xs font-medium text-orange-700 bg-orange-100 rounded-full hover:bg-orange-200 disabled:opacity-50",variant:"default",children:"Gelmedi"}),a.jsx(Z,{onClick:()=>S("rescheduled"),disabled:d,className:"px-3 py-1 text-xs font-medium text-yellow-700 bg-yellow-100 rounded-full hover:bg-yellow-200 disabled:opacity-50",variant:"default",children:"Ertele"})]})]})]}):a.jsx(uU,{appointment:h==="edit"?e:void 0,patientId:n,mode:h==="create"?"create":"edit",onSave:N,onCancel:E})]}),h==="view"&&e&&a.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsx(Z,{onClick:()=>f("edit"),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",variant:"default",children:"Dzenle"}),a.jsx(Z,{onClick:()=>p(!0),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",variant:"default",children:"Sil"}),a.jsx(Z,{onClick:r,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",variant:"default",children:"Kapat"})]})]})]}),x&&a.jsx("div",{className:"fixed inset-0 z-60 overflow-y-auto",children:a.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[a.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Randevuyu Sil"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Bu randevuyu silmek istediinizden emin misiniz? Bu ilem geri alnamaz."}),e&&a.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.patientName}),a.jsxs("p",{className:"text-sm text-gray-600",children:[v(e.date)," - ",b(e.time)]}),a.jsx("p",{className:"text-sm text-gray-600",children:e.title})]})]})]})]})}),a.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsx(Z,{onClick:D,disabled:u,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",variant:"default",children:u?"Siliniyor...":"Sil"}),a.jsx(Z,{onClick:()=>p(!1),disabled:u,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50",variant:"default",children:"ptal"})]})]})]})})]})};function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}function an(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ut(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Cr(e){Ut(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||pf(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function s_(e,t){Ut(2,arguments);var r=Cr(e),s=an(t);return isNaN(s)?new Date(NaN):(s&&r.setDate(r.getDate()+s),r)}function hU(e,t){Ut(2,arguments);var r=Cr(e).getTime(),s=an(t);return new Date(r+s)}var fU={};function Ac(){return fU}function Qp(e,t){var r,s,n,i,l,o,c,d;Ut(1,arguments);var u=Ac(),h=an((r=(s=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Cr(e),x=f.getDay(),p=(x<h?7:0)+x-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function mU(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function gf(e){Ut(1,arguments);var t=Cr(e);return t.setHours(0,0,0,0),t}function yf(e,t){Ut(2,arguments);var r=gf(e),s=gf(t);return r.getTime()===s.getTime()}function xU(e){return Ut(1,arguments),e instanceof Date||pf(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function pU(e){if(Ut(1,arguments),!xU(e)&&typeof e!="number")return!1;var t=Cr(e);return!isNaN(Number(t))}function gU(e){Ut(1,arguments);var t=Cr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function yU(e){Ut(1,arguments);var t=Cr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function a_(e,t){var r,s,n,i,l,o,c,d;Ut(1,arguments);var u=Ac(),h=an((r=(s=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Cr(e),x=f.getDay(),p=(x<h?-7:0)+6-(x-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function vU(e,t){Ut(2,arguments);var r=an(t);return hU(e,-r)}var bU=864e5;function wU(e){Ut(1,arguments);var t=Cr(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),n=r-s;return Math.floor(n/bU)+1}function vf(e){Ut(1,arguments);var t=1,r=Cr(e),s=r.getUTCDay(),n=(s<t?7:0)+s-t;return r.setUTCDate(r.getUTCDate()-n),r.setUTCHours(0,0,0,0),r}function n_(e){Ut(1,arguments);var t=Cr(e),r=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(r+1,0,4),s.setUTCHours(0,0,0,0);var n=vf(s),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var l=vf(i);return t.getTime()>=n.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function NU(e){Ut(1,arguments);var t=n_(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var s=vf(r);return s}var kU=6048e5;function jU(e){Ut(1,arguments);var t=Cr(e),r=vf(t).getTime()-NU(t).getTime();return Math.round(r/kU)+1}function bf(e,t){var r,s,n,i,l,o,c,d;Ut(1,arguments);var u=Ac(),h=an((r=(s=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Cr(e),x=f.getUTCDay(),p=(x<h?7:0)+x-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function i_(e,t){var r,s,n,i,l,o,c,d;Ut(1,arguments);var u=Cr(e),h=u.getUTCFullYear(),f=Ac(),x=an((r=(s=(n=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:f.firstWeekContainsDate)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,x),p.setUTCHours(0,0,0,0);var m=bf(p,t),y=new Date(0);y.setUTCFullYear(h,0,x),y.setUTCHours(0,0,0,0);var g=bf(y,t);return u.getTime()>=m.getTime()?h+1:u.getTime()>=g.getTime()?h:h-1}function SU(e,t){var r,s,n,i,l,o,c,d;Ut(1,arguments);var u=Ac(),h=an((r=(s=(n=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(o=l.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&n!==void 0?n:u.firstWeekContainsDate)!==null&&s!==void 0?s:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1),f=i_(e,t),x=new Date(0);x.setUTCFullYear(f,0,h),x.setUTCHours(0,0,0,0);var p=bf(x,t);return p}var TU=6048e5;function _U(e,t){Ut(1,arguments);var r=Cr(e),s=bf(r,t).getTime()-SU(r,t).getTime();return Math.round(s/TU)+1}function Tt(e,t){for(var r=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return r+s}var EU={y:function(t,r){var s=t.getUTCFullYear(),n=s>0?s:1-s;return Tt(r==="yy"?n%100:n,r.length)},M:function(t,r){var s=t.getUTCMonth();return r==="M"?String(s+1):Tt(s+1,2)},d:function(t,r){return Tt(t.getUTCDate(),r.length)},a:function(t,r){var s=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,r){return Tt(t.getUTCHours()%12||12,r.length)},H:function(t,r){return Tt(t.getUTCHours(),r.length)},m:function(t,r){return Tt(t.getUTCMinutes(),r.length)},s:function(t,r){return Tt(t.getUTCSeconds(),r.length)},S:function(t,r){var s=r.length,n=t.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,s-3));return Tt(i,r.length)}};const Vn=EU;var lo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},CU={G:function(t,r,s){var n=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(t,r,s){if(r==="yo"){var n=t.getUTCFullYear(),i=n>0?n:1-n;return s.ordinalNumber(i,{unit:"year"})}return Vn.y(t,r)},Y:function(t,r,s,n){var i=i_(t,n),l=i>0?i:1-i;if(r==="YY"){var o=l%100;return Tt(o,2)}return r==="Yo"?s.ordinalNumber(l,{unit:"year"}):Tt(l,r.length)},R:function(t,r){var s=n_(t);return Tt(s,r.length)},u:function(t,r){var s=t.getUTCFullYear();return Tt(s,r.length)},Q:function(t,r,s){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return Tt(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,r,s){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return Tt(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,r,s){var n=t.getUTCMonth();switch(r){case"M":case"MM":return Vn.M(t,r);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(t,r,s){var n=t.getUTCMonth();switch(r){case"L":return String(n+1);case"LL":return Tt(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(t,r,s,n){var i=_U(t,n);return r==="wo"?s.ordinalNumber(i,{unit:"week"}):Tt(i,r.length)},I:function(t,r,s){var n=jU(t);return r==="Io"?s.ordinalNumber(n,{unit:"week"}):Tt(n,r.length)},d:function(t,r,s){return r==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):Vn.d(t,r)},D:function(t,r,s){var n=wU(t);return r==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):Tt(n,r.length)},E:function(t,r,s){var n=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(t,r,s,n){var i=t.getUTCDay(),l=(i-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return Tt(l,2);case"eo":return s.ordinalNumber(l,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,s,n){var i=t.getUTCDay(),l=(i-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return Tt(l,r.length);case"co":return s.ordinalNumber(l,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,s){var n=t.getUTCDay(),i=n===0?7:n;switch(r){case"i":return String(i);case"ii":return Tt(i,r.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(t,r,s){var n=t.getUTCHours(),i=n/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,s){var n=t.getUTCHours(),i;switch(n===12?i=lo.noon:n===0?i=lo.midnight:i=n/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,s){var n=t.getUTCHours(),i;switch(n>=17?i=lo.evening:n>=12?i=lo.afternoon:n>=4?i=lo.morning:i=lo.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,s){if(r==="ho"){var n=t.getUTCHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return Vn.h(t,r)},H:function(t,r,s){return r==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Vn.H(t,r)},K:function(t,r,s){var n=t.getUTCHours()%12;return r==="Ko"?s.ordinalNumber(n,{unit:"hour"}):Tt(n,r.length)},k:function(t,r,s){var n=t.getUTCHours();return n===0&&(n=24),r==="ko"?s.ordinalNumber(n,{unit:"hour"}):Tt(n,r.length)},m:function(t,r,s){return r==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Vn.m(t,r)},s:function(t,r,s){return r==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Vn.s(t,r)},S:function(t,r){return Vn.S(t,r)},X:function(t,r,s,n){var i=n._originalDate||t,l=i.getTimezoneOffset();if(l===0)return"Z";switch(r){case"X":return P2(l);case"XXXX":case"XX":return Qi(l);case"XXXXX":case"XXX":default:return Qi(l,":")}},x:function(t,r,s,n){var i=n._originalDate||t,l=i.getTimezoneOffset();switch(r){case"x":return P2(l);case"xxxx":case"xx":return Qi(l);case"xxxxx":case"xxx":default:return Qi(l,":")}},O:function(t,r,s,n){var i=n._originalDate||t,l=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+A2(l,":");case"OOOO":default:return"GMT"+Qi(l,":")}},z:function(t,r,s,n){var i=n._originalDate||t,l=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+A2(l,":");case"zzzz":default:return"GMT"+Qi(l,":")}},t:function(t,r,s,n){var i=n._originalDate||t,l=Math.floor(i.getTime()/1e3);return Tt(l,r.length)},T:function(t,r,s,n){var i=n._originalDate||t,l=i.getTime();return Tt(l,r.length)}};function A2(e,t){var r=e>0?"-":"+",s=Math.abs(e),n=Math.floor(s/60),i=s%60;if(i===0)return r+String(n);var l=t||"";return r+String(n)+l+Tt(i,2)}function P2(e,t){if(e%60===0){var r=e>0?"-":"+";return r+Tt(Math.abs(e)/60,2)}return Qi(e,t)}function Qi(e,t){var r=t||"",s=e>0?"-":"+",n=Math.abs(e),i=Tt(Math.floor(n/60),2),l=Tt(n%60,2);return s+i+r+l}const DU=CU;var R2=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},l_=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},AU=function(t,r){var s=t.match(/(P+)(p+)?/)||[],n=s[1],i=s[2];if(!i)return R2(t,r);var l;switch(n){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",R2(n,r)).replace("{{time}}",l_(i,r))},PU={p:l_,P:AU};const RU=PU;var FU=["D","DD"],IU=["YY","YYYY"];function MU(e){return FU.indexOf(e)!==-1}function OU(e){return IU.indexOf(e)!==-1}function F2(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var LU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BU=function(t,r,s){var n,i=LU[t];return typeof i=="string"?n=i:r===1?n=i.one:n=i.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};const zU=BU;function $o(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,s=e.formats[r]||e.formats[e.defaultWidth];return s}}var $U={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},UU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HU={date:$o({formats:$U,defaultWidth:"full"}),time:$o({formats:UU,defaultWidth:"full"}),dateTime:$o({formats:VU,defaultWidth:"full"})};const KU=HU;var GU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WU=function(t,r,s,n){return GU[t]};const YU=WU;function Ha(e){return function(t,r){var s=r!=null&&r.context?String(r.context):"standalone",n;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;n=e.formattingValues[l]||e.formattingValues[i]}else{var o=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;n=e.values[c]||e.values[o]}var d=e.argumentCallback?e.argumentCallback(t):t;return n[d]}}var qU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tV=function(t,r){var s=Number(t),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},rV={ordinalNumber:tV,era:Ha({values:qU,defaultWidth:"wide"}),quarter:Ha({values:XU,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ha({values:QU,defaultWidth:"wide"}),day:Ha({values:ZU,defaultWidth:"wide"}),dayPeriod:Ha({values:JU,defaultWidth:"wide",formattingValues:eV,defaultFormattingWidth:"wide"})};const sV=rV;function Ka(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.width,n=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(n);if(!i)return null;var l=i[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?nV(o,function(h){return h.test(l)}):aV(o,function(h){return h.test(l)}),d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;var u=t.slice(l.length);return{value:d,rest:u}}}function aV(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function nV(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function o_(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var n=s[0],i=t.match(e.parsePattern);if(!i)return null;var l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;var o=t.slice(n.length);return{value:l,rest:o}}}var iV=/^(\d+)(th|st|nd|rd)?/i,lV=/\d+/i,oV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cV={any:[/^b/i,/^(a|c)/i]},dV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uV={any:[/1/i,/2/i,/3/i,/4/i]},hV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yV={ordinalNumber:o_({matchPattern:iV,parsePattern:lV,valueCallback:function(t){return parseInt(t,10)}}),era:Ka({matchPatterns:oV,defaultMatchWidth:"wide",parsePatterns:cV,defaultParseWidth:"any"}),quarter:Ka({matchPatterns:dV,defaultMatchWidth:"wide",parsePatterns:uV,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ka({matchPatterns:hV,defaultMatchWidth:"wide",parsePatterns:fV,defaultParseWidth:"any"}),day:Ka({matchPatterns:mV,defaultMatchWidth:"wide",parsePatterns:xV,defaultParseWidth:"any"}),dayPeriod:Ka({matchPatterns:pV,defaultMatchWidth:"any",parsePatterns:gV,defaultParseWidth:"any"})};const vV=yV;var bV={code:"en-US",formatDistance:zU,formatLong:KU,formatRelative:YU,localize:sV,match:vV,options:{weekStartsOn:0,firstWeekContainsDate:1}};const wV=bV;var NV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jV=/^'([^]*?)'?$/,SV=/''/g,TV=/[a-zA-Z]/;function Ga(e,t,r){var s,n,i,l,o,c,d,u,h,f,x,p,m,y,g,v,b,S;Ut(2,arguments);var D=String(t),N=Ac(),E=(s=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:N.locale)!==null&&s!==void 0?s:wV,w=an((i=(l=(o=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(d=r.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&o!==void 0?o:N.firstWeekContainsDate)!==null&&l!==void 0?l:(h=N.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=an((x=(p=(m=(y=r==null?void 0:r.weekStartsOn)!==null&&y!==void 0?y:r==null||(g=r.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&m!==void 0?m:N.weekStartsOn)!==null&&p!==void 0?p:(b=N.locale)===null||b===void 0||(S=b.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&x!==void 0?x:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var C=Cr(e);if(!pU(C))throw new RangeError("Invalid time value");var T=mU(C),j=vU(C,T),F={firstWeekContainsDate:w,weekStartsOn:_,locale:E,_originalDate:C},O=D.match(kV).map(function(z){var G=z[0];if(G==="p"||G==="P"){var q=RU[G];return q(z,E.formatLong)}return z}).join("").match(NV).map(function(z){if(z==="''")return"'";var G=z[0];if(G==="'")return _V(z);var q=DU[G];if(q)return!(r!=null&&r.useAdditionalWeekYearTokens)&&OU(z)&&F2(z,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&MU(z)&&F2(z,t,String(e)),q(j,z,E.localize,F);if(G.match(TV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+G+"`");return z}).join("");return O}function _V(e){var t=e.match(jV);return t?t[1].replace(SV,"'"):e}function EV(e,t){Ut(2,arguments);var r=Cr(e),s=Cr(t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function CV(e){return Ut(1,arguments),yf(e,Date.now())}var DV={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},AV=function(t,r,s){var n,i=DV[t];return typeof i=="string"?n=i:r===1?n=i.one:n=i.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?n+" sonra":n+" nce":n};const PV=AV;var RV={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},FV={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},IV={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MV={date:$o({formats:RV,defaultWidth:"full"}),time:$o({formats:FV,defaultWidth:"full"}),dateTime:$o({formats:IV,defaultWidth:"full"})};const OV=MV;var LV={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},BV=function(t,r,s,n){return LV[t]};const zV=BV;var $V={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},UV={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},VV={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},HV={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},KV={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},GV={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},WV=function(t,r){var s=Number(t);return s+"."},YV={ordinalNumber:WV,era:Ha({values:$V,defaultWidth:"wide"}),quarter:Ha({values:UV,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Ha({values:VV,defaultWidth:"wide"}),day:Ha({values:HV,defaultWidth:"wide"}),dayPeriod:Ha({values:KV,defaultWidth:"wide",formattingValues:GV,defaultFormattingWidth:"wide"})};const qV=YV;var XV=/^(\d+)(\.)?/i,QV=/\d+/i,ZV={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},JV={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},eH={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},tH={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},rH={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},sH={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},aH={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},nH={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},iH={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},lH={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},oH={ordinalNumber:o_({matchPattern:XV,parsePattern:QV,valueCallback:function(t){return parseInt(t,10)}}),era:Ka({matchPatterns:ZV,defaultMatchWidth:"wide",parsePatterns:JV,defaultParseWidth:"any"}),quarter:Ka({matchPatterns:eH,defaultMatchWidth:"wide",parsePatterns:tH,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ka({matchPatterns:rH,defaultMatchWidth:"wide",parsePatterns:sH,defaultParseWidth:"any"}),day:Ka({matchPatterns:aH,defaultMatchWidth:"wide",parsePatterns:nH,defaultParseWidth:"any"}),dayPeriod:Ka({matchPatterns:iH,defaultMatchWidth:"any",parsePatterns:lH,defaultParseWidth:"any"})};const cH=oH;var dH={code:"tr",formatDistance:PV,formatLong:OV,formatRelative:zV,localize:qV,match:cH,options:{weekStartsOn:1,firstWeekContainsDate:1}};const Uo=dH,uH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hH(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function fH(e){return"nodeType"in e}function mH(e){var t,r;return e?hH(e)?e:fH(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}const c_=uH?k.useLayoutEffect:k.useEffect;function d_(e){const t=k.useRef(e);return c_(()=>{t.current=e}),k.useCallback(function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return t.current==null?void 0:t.current(...s)},[])}function I2(e,t){t===void 0&&(t=[e]);const r=k.useRef(e);return c_(()=>{r.current!==e&&(r.current=e)},t),r}function xH(e){const t=d_(e),r=k.useRef(null),s=k.useCallback(n=>{n!==r.current&&(t==null||t(n,r.current)),r.current=n},[]);return[r,s]}let ax={};function pH(e,t){return k.useMemo(()=>{if(t)return t;const r=ax[e]==null?0:ax[e]+1;return ax[e]=r,e+"-"+r},[e,t])}var Fd;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Fd||(Fd={}));function M2(){}const gH=Object.freeze({x:0,y:0});function yH(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function vH(e,t,r){const s=yH(t);if(!s)return e;const{scaleX:n,scaleY:i,x:l,y:o}=s,c=e.left-l-(1-n)*parseFloat(r),d=e.top-o-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=n?e.width/n:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c}}const bH={ignoreTransform:!1};function u_(e,t){t===void 0&&(t=bH);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=mH(e).getComputedStyle(e);d&&(r=vH(r,d,u))}const{top:s,left:n,width:i,height:l,bottom:o,right:c}=r;return{top:s,left:n,width:i,height:l,bottom:o,right:c}}function O2(e){return u_(e,{ignoreTransform:!0})}var To;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(To||(To={}));var L2;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(L2||(L2={}));var qn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(qn||(qn={}));qn.Space,qn.Enter,qn.Esc,qn.Space,qn.Enter,qn.Tab;var B2;(function(e){e[e.RightClick=2]="RightClick"})(B2||(B2={}));var z2;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(z2||(z2={}));var $2;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($2||($2={}));To.Backward+"",To.Forward+"",To.Backward+"",To.Forward+"";var Zp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Zp||(Zp={}));var Jp;(function(e){e.Optimized="optimized"})(Jp||(Jp={}));function wH(e){let{callback:t,disabled:r}=e;const s=d_(t),n=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[r]);return k.useEffect(()=>()=>n==null?void 0:n.disconnect(),[n]),n}Zp.WhileDragging,Jp.Optimized;const NH={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:M2,draggableNodes:new Map,over:null,measureDroppableContainers:M2},kH=k.createContext(NH);({...gH});var U2;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(U2||(U2={}));const jH="Droppable",SH={timeout:25};function dv(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:n}=e;const i=pH(jH),{active:l,dispatch:o,over:c,measureDroppableContainers:d}=k.useContext(kH),u=k.useRef({disabled:r}),h=k.useRef(!1),f=k.useRef(null),x=k.useRef(null),{disabled:p,updateMeasurementsFor:m,timeout:y}={...SH,...n},g=I2(m??s),v=k.useCallback(()=>{if(!h.current){h.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(g.current)?g.current:[g.current]),x.current=null},y)},[y]),b=wH({callback:v,disabled:p||!l}),S=k.useCallback((w,_)=>{b&&(_&&(b.unobserve(_),h.current=!1),w&&b.observe(w))},[b]),[D,N]=xH(S),E=I2(t);return k.useEffect(()=>{!b||!D.current||(b.disconnect(),h.current=!1,b.observe(D.current))},[D,b]),k.useEffect(()=>(o({type:Fd.RegisterDroppable,element:{id:s,key:i,disabled:r,node:D,rect:f,data:E}}),()=>o({type:Fd.UnregisterDroppable,key:i,id:s})),[s]),k.useEffect(()=>{r!==u.current.disabled&&(o({type:Fd.SetDroppableDisabled,id:s,key:i,disabled:r}),u.current.disabled=r)},[s,i,r,o]),{active:l,rect:f,isOver:(c==null?void 0:c.id)===s,node:D,over:c,setNodeRef:N}}const TH={scheduled:"default",confirmed:"success",completed:"secondary",cancelled:"danger",no_show:"warning",rescheduled:"warning"},_H={consultation:"primary",follow_up:"secondary",trial:"success",delivery:"warning",control_visit:"primary",battery_renewal:"warning",repair:"danger",fitting:"primary",assessment:"secondary"},V2={scheduled:"Planland",confirmed:"Onayland",completed:"Tamamland",cancelled:"ptal Edildi",no_show:"Gelmedi",rescheduled:"Ertelendi"},EH={consultation:"Konsltasyon",follow_up:"Kontrol",trial:"Deneme",delivery:"Teslimat",control_visit:"Kontrol Ziyareti",battery_renewal:"Pil Yenileme",repair:"Tamir",fitting:"Uyum",assessment:"Deerlendirme"};function uv({appointment:e,isDragging:t=!1,isCompact:r=!1,showDate:s=!1,onClick:n,onEdit:i,onDelete:l,onCall:o,className:c=""}){const d=TH[e.status]||"default",u=_H[e.type]||"default",h=["transition-all duration-200",t?"shadow-lg scale-105 rotate-1":"hover:shadow-md",n?"cursor-pointer":"",c].filter(Boolean).join(" "),f=x=>{x.target.closest("button")||n==null||n()};return r?a.jsx(Bt,{className:h,onClick:f,children:a.jsx("div",{className:"p-2",children:a.jsxs(Gc,{spacing:"xs",className:"items-center",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(Hr,{className:"text-sm font-medium truncate",children:e.patientName}),a.jsx(Hr,{className:"text-xs text-gray-500",children:e.time})]}),a.jsx(jt,{variant:d,className:"text-xs",children:V2[e.status]})]})})}):a.jsx(Bt,{className:h,onClick:f,children:a.jsx("div",{className:"p-4",children:a.jsxs(pb,{spacing:"sm",children:[a.jsxs(Gc,{spacing:"sm",className:"items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs(Gc,{spacing:"xs",className:"items-center mb-1",children:[a.jsx(Mt,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),a.jsx(Hr,{className:"font-medium truncate",children:e.patientName})]}),a.jsxs(Gc,{spacing:"xs",className:"items-center text-sm text-gray-600",children:[a.jsx(Xt,{className:"w-3 h-3 flex-shrink-0"}),a.jsxs(Hr,{children:[s&&Ga(new Date(e.date),"dd MMM",{locale:Uo})," ",e.time]}),e.duration&&a.jsxs(Hr,{className:"text-xs",children:["(",e.duration," dk)"]})]})]}),a.jsxs(pb,{spacing:"xs",className:"items-end",children:[a.jsx(jt,{variant:d,className:"text-xs",children:V2[e.status]}),a.jsx(jt,{variant:u,className:"text-xs",children:EH[e.type]})]})]}),e.notes&&a.jsx(Hr,{className:"text-sm text-gray-600 line-clamp-2",children:e.notes}),(i||l||o)&&a.jsxs(Gc,{spacing:"xs",className:"pt-2 border-t",children:[o&&a.jsxs(Z,{size:"sm",variant:"ghost",onClick:x=>{x.stopPropagation(),o()},className:"flex-1",children:[a.jsx(Ii,{className:"w-3 h-3 mr-1"}),"Ara"]}),i&&a.jsxs(Z,{size:"sm",variant:"ghost",onClick:x=>{x.stopPropagation(),i()},className:"flex-1",children:[a.jsx(rn,{className:"w-3 h-3 mr-1"}),"Dzenle"]}),l&&a.jsxs(Z,{size:"sm",variant:"ghost",onClick:x=>{x.stopPropagation(),l()},className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Es,{className:"w-3 h-3 mr-1"}),"Sil"]})]})]})})})}const CH=({selectedDate:e,appointments:t,onDateChange:r,onDateClick:s,onAppointmentClick:n,onDayDoubleClick:i,isCompactView:l=!1})=>{const o=k.useMemo(()=>{const u=yU(e),h=gU(e),f=Qp(u,{weekStartsOn:1}),x=a_(h,{weekStartsOn:1}),p=[];let m=f;for(;m<=x;){const y=t.filter(g=>yf(new Date(g.date),m));p.push({date:new Date(m),isCurrentMonth:EV(m,e),isToday:CV(m),appointments:y}),m=s_(m,1)}return p},[e,t]);cv({currentDate:e,onDateChange:r,viewMode:"month"});const c=({day:u})=>{const{setNodeRef:h,isOver:f}=dv({id:`month-day-${Ga(u.date,"yyyy-MM-dd")}`,data:{type:"calendar-day",date:u.date}}),x=()=>{i&&i(u.date)},p=k.useMemo(()=>u.appointments.reduce((m,y)=>(m[y.status]=(m[y.status]||0)+1,m),{}),[u.appointments]);return a.jsx("div",{ref:h,className:`
          min-h-[120px] border border-gray-200 p-2 cursor-pointer transition-all
          ${f?"bg-blue-50 border-blue-300":""}
          ${u.isToday?"bg-yellow-50 border-yellow-300":""}
          ${u.isCurrentMonth?"":"bg-gray-50 text-gray-400"}
          hover:bg-gray-50
        `,onClick:()=>s(u.date),onDoubleClick:x,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Hr,{className:`
                text-sm font-medium
                ${u.isToday?"text-blue-600 font-bold":""}
                ${u.isCurrentMonth?"":"text-gray-400"}
              `,children:Ga(u.date,"d")}),u.appointments.length>0&&a.jsx(jt,{variant:"secondary",className:"text-xs",children:u.appointments.length})]}),a.jsxs("div",{className:"flex-1 space-y-1 overflow-hidden",children:[l?a.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(p).map(([m,y])=>a.jsx("div",{className:`
                      w-2 h-2 rounded-full
                      ${m==="scheduled"?"bg-blue-500":""}
                      ${m==="confirmed"?"bg-green-500":""}
                      ${m==="cancelled"?"bg-red-500":""}
                      ${m==="completed"?"bg-gray-500":""}
                    `,title:`${y} ${m} appointments`},m))}):u.appointments.slice(0,3).map(m=>a.jsx(uv,{appointment:m,onClick:()=>n(m),isCompact:!0},m.id)),u.appointments.length>3&&!l&&a.jsxs(Hr,{className:"text-xs text-gray-500 text-center",children:["+",u.appointments.length-3," daha"]})]})]})})},d=["Pzt","Sal","ar","Per","Cum","Cmt","Paz"];return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const u=new Date(e);u.setMonth(u.getMonth()-1),r(u)},children:""}),a.jsx(Hr,{className:"text-lg font-semibold",children:Ga(e,"MMMM yyyy",{locale:Uo})}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const u=new Date(e);u.setMonth(u.getMonth()+1),r(u)},children:""})]}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>r(new Date),children:"Bu Ay"})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:d.map(u=>a.jsx("div",{className:"p-3 text-center bg-gray-50",children:a.jsx(Hr,{className:"text-sm font-medium text-gray-600",children:u})},u))}),a.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6",children:o.map(u=>a.jsx(c,{day:u},u.date.toISOString()))})]})]})},DH=({selectedDate:e,appointments:t,onDateChange:r,onAppointmentClick:s,onTimeSlotClick:n,isCompactView:i=!1})=>{const[l,o]=k.useState(new Date);k.useEffect(()=>{const m=setInterval(()=>o(new Date),6e4);return()=>clearInterval(m)},[]);const c=k.useMemo(()=>{const m=Qp(e,{weekStartsOn:1}),y=[];for(let g=0;g<7;g++){const v=s_(m,g),b=t.filter(S=>yf(new Date(S.date),v));y.push({date:v,isToday:yf(v,new Date),appointments:b})}return y},[e,t]),d=k.useMemo(()=>{const m=[];for(let v=8;v<=18;v++){const b=`${v.toString().padStart(2,"0")}:00`;m.push({time:b,hour:v})}return m},[]);cv({currentDate:e,onDateChange:r,viewMode:"week"});const u=(m,y)=>m.appointments.filter(g=>parseInt(g.time.split(":")[0])===y),h=(m,y)=>m.isToday&&l.getHours()===y,f=({day:m,slot:y})=>{const{setNodeRef:g,isOver:v}=dv({id:`week-time-slot-${Ga(m.date,"yyyy-MM-dd")}-${y.hour}`,data:{type:"time-slot",date:m.date,time:y.time}}),b=u(m,y.hour);return a.jsx("div",{ref:g,className:`
          min-h-[60px] border-r border-b border-gray-200 p-1 transition-colors
          ${v?"bg-blue-50 border-blue-300":""}
          ${h(m,y.hour)?"bg-yellow-50":""}
          hover:bg-gray-50 cursor-pointer
        `,onClick:()=>n(m.date,y.time),children:a.jsx("div",{className:"space-y-1",children:b.map(S=>a.jsx(uv,{appointment:S,onClick:()=>s(S),isCompact:!0},S.id))})})},x=Qp(e,{weekStartsOn:1}),p=a_(e,{weekStartsOn:1});return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const m=new Date(e);m.setDate(m.getDate()-7),r(m)},children:""}),a.jsxs(Hr,{className:"text-lg font-semibold",children:[Ga(x,"dd MMM",{locale:Uo})," - ",Ga(p,"dd MMM yyyy",{locale:Uo})]}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const m=new Date(e);m.setDate(m.getDate()+7),r(m)},children:""})]}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>r(new Date),children:"Bu Hafta"})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("div",{className:"grid grid-cols-8 min-w-full",children:[a.jsx("div",{className:"border-r border-gray-200 bg-gray-50 p-2",children:a.jsx(Hr,{className:"text-sm font-medium text-gray-600",children:"Saat"})}),c.map(m=>a.jsxs("div",{className:`
                border-r border-gray-200 bg-gray-50 p-2 text-center
                ${m.isToday?"bg-blue-50":""}
              `,children:[a.jsx(Hr,{className:"text-sm font-medium",children:Ga(m.date,"EEE",{locale:Uo})}),a.jsx(Hr,{className:`text-lg ${m.isToday?"text-blue-600 font-bold":""}`,children:Ga(m.date,"dd")})]},m.date.toISOString())),d.map(m=>a.jsxs(bt.Fragment,{children:[a.jsx("div",{className:"border-r border-b border-gray-200 bg-gray-50 p-2 text-center",children:a.jsx(Hr,{className:"text-xs text-gray-600",children:m.time})}),c.map(y=>a.jsx(f,{day:y,slot:m},`${y.date.toISOString()}-${m.time}`))]},m.time))]})}),c.some(m=>m.isToday)&&a.jsx("div",{className:"absolute left-0 right-0 h-0.5 bg-red-500 z-10 pointer-events-none",style:{top:`${(l.getHours()-8)*60+l.getMinutes()+120}px`},children:a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1 -mt-0.5"})})]})},AH=({selectedDate:e,appointments:t,onDateChange:r,onAppointmentClick:s,onTimeSlotClick:n,isCompactView:i=!1})=>{const[l,o]=k.useState(new Date);k.useEffect(()=>{const f=setInterval(()=>o(new Date),6e4);return()=>clearInterval(f)},[]);const c=k.useMemo(()=>{const f=[];for(let m=8;m<=18;m++){const y=`${m.toString().padStart(2,"0")}:00`,g=t.filter(v=>parseInt(v.time.split(":")[0])===m);f.push({time:y,hour:m,appointments:g})}return f},[t]);cv({currentDate:e,onDateChange:r,viewMode:"day"});const d=gf(e).getTime()===gf(new Date).getTime(),u=f=>d&&l.getHours()===f,h=({slot:f})=>{const{setNodeRef:x,isOver:p}=dv({id:`time-slot-${f.hour}`,data:{type:"time-slot",date:e,time:f.time}});return a.jsx("div",{ref:x,className:`
          min-h-[80px] border-b border-gray-200 p-2 transition-colors
          ${p?"bg-blue-50 border-blue-300":""}
          ${u(f.hour)?"bg-yellow-50":""}
          hover:bg-gray-50 cursor-pointer
        `,onClick:()=>n(e,f.time),children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"w-16 text-sm text-gray-600 font-medium",children:f.time}),a.jsx("div",{className:"flex-1 space-y-1",children:f.appointments.map(m=>a.jsx(uv,{appointment:m,onClick:()=>s(m),isCompact:i},m.id))})]})})};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const f=new Date(e);f.setDate(f.getDate()-1),r(f)},children:""}),a.jsx(Hr,{className:"text-lg font-semibold",children:Ga(e,"dd MMMM yyyy, EEEE",{locale:Uo})}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{const f=new Date(e);f.setDate(f.getDate()+1),r(f)},children:""})]}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>r(new Date),children:"Bugn"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:c.map(f=>a.jsx(h,{slot:f},f.time))}),d&&a.jsx("div",{className:"absolute left-16 right-4 h-0.5 bg-red-500 z-10 pointer-events-none",style:{top:`${(l.getHours()-8)*80+l.getMinutes()*80/60+120}px`},children:a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full -ml-1 -mt-0.5"})})]})},PH=({className:e="",onAppointmentClick:t,onDateClick:r,view:s="month",selectedDate:n=new Date})=>{const{appointments:i,loading:l}=Gu(),[o,c]=k.useState(n),[d,u]=k.useState(s),[h,f]=k.useState(null),[x,p]=k.useState(!1),[m,y]=k.useState("view"),g=N=>{f(N),y("view"),p(!0),t==null||t(N)},v=N=>{const E=N.toISOString().split("T")[0];r==null||r(E)},b=(N,E)=>{c(N),y("create"),p(!0)},S=N=>{c(N)},D=N=>{c(N),y("create"),p(!0)};return l?a.jsx("div",{className:`appointment-calendar ${e}`,children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:`appointment-calendar ${e}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx(Z,{onClick:()=>u("day"),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d==="day"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,variant:"ghost",children:"Gn"}),a.jsx(Z,{onClick:()=>u("week"),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d==="week"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,variant:"ghost",children:"Hafta"}),a.jsx(Z,{onClick:()=>u("month"),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d==="month"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,variant:"ghost",children:"Ay"})]})}),a.jsxs(Z,{onClick:()=>{y("create"),p(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Yeni Randevu"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[d==="month"&&a.jsx(CH,{selectedDate:o,appointments:i,onDateChange:S,onDateClick:v,onAppointmentClick:g,onDayDoubleClick:D}),d==="week"&&a.jsx(DH,{selectedDate:o,appointments:i,onDateChange:S,onAppointmentClick:g,onTimeSlotClick:b}),d==="day"&&a.jsx(AH,{selectedDate:o,appointments:i,onDateChange:S,onAppointmentClick:g,onTimeSlotClick:b})]}),a.jsx(r_,{appointment:h||void 0,isOpen:x,onClose:()=>p(!1),mode:m,initialDate:(h==null?void 0:h.date)||o.toISOString().split("T")[0],initialTime:h==null?void 0:h.time})]})};function RH(){const{error:e,stats:t}=Gu(),[r,s]=k.useState("calendar"),[n,i]=k.useState(!1),[l,o]=k.useState();k.useState({});const c=f=>{o(f)},d=()=>{i(!0)},u=()=>{i(!1),o(void 0)},h=()=>t?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Randevu"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.total})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tamamlanan"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.completed||0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bekleyen"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t.scheduled||0)+(t.confirmed||0)})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ptal/Gelmedi"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(t.cancelled||0)+(t.no_show||0)})]})]})})]}):null;return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Randevular"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Hasta randevularn ynetin ve takip edin"})]}),a.jsxs(Z,{onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",variant:"default",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Yeni Randevu"]})]})}),e&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Hata"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:e})]})]})}),h(),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsxs(Z,{onClick:()=>s("calendar"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="calendar"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Takvim"]}),a.jsxs(Z,{onClick:()=>s("list"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${r==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Liste"]})]})})}),a.jsx("div",{className:"space-y-6",children:r==="calendar"?a.jsx(PH,{onDateClick:c,className:"w-full"}):a.jsx(oU,{className:"w-full"})}),a.jsx(r_,{isOpen:n,onClose:u,mode:"create",initialDate:l})]})})}const FH=Or("/appointments")({component:RH}),IH=({stats:e,onCardClick:t})=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(fi,{title:"Toplam Hasta",value:e.totalPatients.toString(),icon:a.jsx(Zs,{className:"w-6 h-6"}),color:"blue",trend:{value:"+12%",direction:"up"},onClick:()=>t==null?void 0:t("patients")}),a.jsx(fi,{title:"Aktif Denemeler",value:e.activeTrials.toString(),icon:a.jsx(ea,{className:"w-6 h-6"}),color:"green",trend:{value:"+5%",direction:"up"},onClick:()=>t==null?void 0:t("trials")}),a.jsx(fi,{title:"Aylk Ciro",value:`${e.monthlyRevenue.toLocaleString()}`,icon:a.jsx(Di,{className:"w-6 h-6"}),color:"purple",trend:{value:"+8%",direction:"up"},onClick:()=>t==null?void 0:t("revenue")}),a.jsx(fi,{title:"Bugnk Randevular",value:e.todayAppointments.toString(),icon:a.jsx(pt,{className:"w-6 h-6"}),color:"yellow",trend:{value:"3 bekleyen",direction:"neutral"},onClick:()=>t==null?void 0:t("appointments")})]}),MH=({stats:e})=>{const t=n=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),r=[{label:"Aktif Hastalar",value:e.activePatients,icon:Zs,color:"blue"},{label:"Gnlk Ciro",value:t(e.dailyRevenue),icon:rr,color:"green"},{label:"Bekleyen Randevular",value:e.pendingAppointments,icon:pt,color:"orange"},{label:"Biten Denemeler",value:e.endingTrials,icon:Xt,color:"yellow"}],s=n=>({blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",orange:"bg-orange-100 text-orange-600",yellow:"bg-yellow-100 text-yellow-600"})[n]||"bg-gray-100 text-gray-600";return a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hzl statistikler"}),a.jsx("div",{className:"space-y-4",children:r.map((n,i)=>{const l=n.icon;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-full ${s(n.color)}`,children:a.jsx(l,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-sm text-gray-600",children:n.label})]}),a.jsx("span",{className:`text-lg font-semibold ${n.color==="green"?"text-green-600":n.color==="orange"?"text-orange-600":n.color==="yellow"?"text-yellow-600":"text-gray-900"}`,children:n.value})]},i)})})]})},OH=({lastTransaction:e,onClick:t})=>a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-8 cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:scale-105",onClick:t,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"p-4 bg-green-100 rounded-full",children:a.jsx(mS,{className:"w-8 h-8 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-gray-900",children:"Kasa Kayd"}),a.jsx("p",{className:"text-lg text-green-700 font-medium",children:"Hzl Giri"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gelir ve gider ilemlerinizi kolayca kaydedin"})]})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Son ilem"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(e==null?void 0:e.amount)||"-"}),a.jsx("p",{className:"text-xs text-gray-500",children:(e==null?void 0:e.date)||"-"})]}),a.jsx("div",{className:"p-3 bg-white rounded-full shadow-sm",children:a.jsx(_s,{className:"w-6 h-6 text-green-600"})})]})]})}),LH=({lastCalculation:e,onClick:t})=>a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-8 cursor-pointer hover:shadow-xl transition-all duration-300 transform hover:scale-105",onClick:t,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:a.jsx(Hf,{className:"w-8 h-8 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-gray-900",children:"Fiyat Hesapla"}),a.jsx("p",{className:"text-lg text-blue-700 font-medium",children:"SGK Destei"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Cihaz fiyatlarn SGK destekleriyle hesaplayn"})]})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Son hesaplama"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(e==null?void 0:e.amount)||"-"}),a.jsx("p",{className:"text-xs text-gray-500",children:(e==null?void 0:e.date)||"-"})]}),a.jsx("div",{className:"p-3 bg-white rounded-full shadow-sm",children:a.jsx(Xt,{className:"w-6 h-6 text-blue-600"})})]})]})}),BH=({isOpen:e,onClose:t,onSubmit:r})=>{const[s,n]=k.useState({type:"income",recordType:"cash",amount:0,description:""}),i=()=>{s.amount>0&&s.description.trim()&&(r(s),t(),n({type:"income",recordType:"cash",amount:0,description:""}))};return a.jsx(cr,{isOpen:e,onClose:t,onSave:i,title:"Kasa lemi",size:"md",saveButtonText:"Kaydet",cancelButtonText:"ptal",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lem Tr"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(Z,{type:"button",onClick:()=>n({...s,type:"income"}),className:`flex-1 py-2 px-4 rounded-lg border ${s.type==="income"?"bg-green-50 border-green-200 text-green-700":"bg-gray-50 border-gray-200 text-gray-700"}`,variant:"default",children:"Gelir"}),a.jsx(Z,{type:"button",onClick:()=>n({...s,type:"expense"}),className:`flex-1 py-2 px-4 rounded-lg border ${s.type==="expense"?"bg-red-50 border-red-200 text-red-700":"bg-gray-50 border-gray-200 text-gray-700"}`,variant:"default",children:"Gider"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kayt Tr"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"cash",label:"Nakit",icon:rr},{value:"card",label:"Kart",icon:_a},{value:"transfer",label:"Havale",icon:Sl}].map(({value:l,label:o,icon:c})=>a.jsxs(Z,{type:"button",onClick:()=>n({...s,recordType:l}),className:`flex flex-col items-center py-3 px-2 rounded-lg border ${s.recordType===l?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-700"}`,variant:"default",children:[a.jsx(c,{className:"w-5 h-5 mb-1"}),a.jsx("span",{className:"text-sm",children:o})]},l))})]}),a.jsx("div",{children:a.jsxs("div",{className:"relative",children:[a.jsx(Mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx(Ue,{label:"Hasta (Opsiyonel)",value:s.patientId||"",onChange:l=>n({...s,patientId:l.target.value||void 0}),options:[{value:"",label:"Hasta sein..."},{value:"1",label:"Ahmet Ylmaz"},{value:"2",label:"Aye Kaya"},{value:"3",label:"Mehmet Demir"}],className:"pl-10",fullWidth:!0})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tutar ()"}),a.jsx(ye,{type:"number",value:s.amount||"",onChange:l=>n({...s,amount:parseFloat(l.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aklama"}),a.jsx(wr,{value:s.description,onChange:l=>n({...s,description:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"lem aklamas...",rows:3})]})]})})},zH=({isOpen:e,onClose:t,onCalculate:r})=>{const[s,n]=k.useState(0),[i,l]=k.useState(0),[o,c]=k.useState(0),[d,u]=k.useState(1),[h,f]=k.useState({devicePrice:0,discountPercent:0,discountAmount:0,finalPrice:0}),x=[{name:"Temel Model",price:15e3},{name:"Orta Seviye",price:25e3},{name:"Premium Model",price:45e3},{name:"Lks Model",price:65e3}];k.useEffect(()=>{const v=s-o,b=d>1?v/d:v;f({devicePrice:s,discountPercent:i,discountAmount:o,finalPrice:Math.max(0,v),installments:d>1?d:void 0,installmentAmount:d>1?b:void 0})},[s,i,o,d]);const p=v=>{l(v),c(s*v/100)},m=v=>{c(v),l(s>0?v/s*100:0)},y=v=>{if(v.preventDefault(),s<=0){alert("Ltfen geerli bir cihaz fiyat giriniz");return}r(h),t()},g=()=>{n(0),l(0),c(0),u(1)};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[a.jsx(Hf,{className:"w-6 h-6 mr-2 text-blue-600"}),"Fiyat Hesaplama"]}),a.jsx(Z,{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",variant:"default",children:a.jsx(vr,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hzl Cihaz Seimi"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(v=>a.jsxs(Z,{type:"button",onClick:()=>n(v.price),className:"p-2 text-sm border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",variant:"default",children:[a.jsx("div",{className:"font-medium",children:v.name}),a.jsxs("div",{className:"text-gray-600",children:[v.price.toLocaleString("tr-TR")," "]})]},v.name))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(rr,{className:"w-4 h-4 inline mr-1"}),"Cihaz Fiyat ()"]}),a.jsx(ye,{type:"number",step:"0.01",min:"0",value:s,onChange:v=>n(parseFloat(v.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(fS,{className:"w-4 h-4 inline mr-1"}),"ndirim (%)"]}),a.jsx(ye,{type:"number",step:"0.1",min:"0",max:"100",value:i,onChange:v=>p(parseFloat(v.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ndirim Tutar ()"}),a.jsx(ye,{type:"number",step:"0.01",min:"0",value:o,onChange:v=>m(parseFloat(v.target.value)||0),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]})]}),a.jsx("div",{children:a.jsx(Ue,{label:"Taksit Says",value:d,onChange:v=>u(parseInt(v.target.value)),options:[{value:"1",label:"Pein"},{value:"2",label:"2 Taksit"},{value:"3",label:"3 Taksit"},{value:"6",label:"6 Taksit"},{value:"9",label:"9 Taksit"},{value:"12",label:"12 Taksit"}],fullWidth:!0})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Hesaplama Sonucu"}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Cihaz Fiyat:"}),a.jsxs("span",{className:"font-medium",children:[s.toLocaleString("tr-TR")," "]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"ndirim:"}),a.jsxs("span",{className:"font-medium text-red-600",children:["-",o.toLocaleString("tr-TR"),"  (",i.toFixed(1),"%)"]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-2",children:[a.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[a.jsx("span",{children:"Toplam:"}),a.jsxs("span",{className:"text-green-600",children:[h.finalPrice.toLocaleString("tr-TR")," "]})]}),h.installmentAmount&&a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[a.jsx("span",{children:"Taksit Tutar:"}),a.jsxs("span",{children:[h.installmentAmount.toLocaleString("tr-TR"),"  x ",d]})]})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(Z,{type:"button",onClick:g,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",variant:"default",children:"Temizle"}),a.jsx(Z,{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",variant:"default",children:"ptal"}),a.jsx(Z,{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",variant:"default",children:"Hesaplamay Kaydet"})]})]})]})}):null},$H=()=>{const[e,t]=k.useState({stats:{totalPatients:0,todayAppointments:0,monthlyRevenue:0,activeTrials:0,activePatients:0,dailyRevenue:0,pendingAppointments:0,endingTrials:0},loading:!0,error:null});return k.useEffect(()=>{(async()=>{try{await new Promise(l=>setTimeout(l,500)),t({stats:{totalPatients:156,todayAppointments:8,monthlyRevenue:485e3,activeTrials:23,activePatients:142,dailyRevenue:12500,pendingAppointments:5,endingTrials:3},lastTransaction:{amount:"2,500",date:"2 saat nce"},lastCalculation:{amount:"8,750",date:"1 gn nce"},loading:!1,error:null})}catch(s){t(n=>({...n,loading:!1,error:s instanceof Error?s.message:"Veri yklenirken hata olutu"}))}})()},[]),e},UH=Or("/")({component:VH});function VH(){const{stats:e,lastTransaction:t,lastCalculation:r,loading:s,error:n}=$H(),[i,l]=k.useState("week"),[o,c]=k.useState(!1),[d,u]=k.useState(!1),h=g=>{switch(g){case"patients":window.location.href="/patients";break;case"trials":window.location.href="/patients?filter=trial";break;case"revenue":window.location.href="/reports";break;case"appointments":window.location.href="/appointments";break}},f=()=>{c(!0)},x=()=>{u(!0)},p=g=>{console.log("Cash register data:",g)},m=g=>{console.log("Pricing calculation data:",g)},y=()=>{window.location.reload()};return s?a.jsx("div",{className:"flex items-center justify-center min-h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-red-600",children:["Hata: ",n]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 rounded-lg shadow-sm",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Ue,{value:i,onChange:g=>l(g.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",options:[{value:"today",label:"Bugn"},{value:"week",label:"Son 1 Hafta"},{value:"month",label:"Son 1 Ay"},{value:"quarter",label:"Son eyrek"}]}),a.jsx(Z,{onClick:y,className:"p-2 text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",variant:"secondary",children:a.jsx(ds,{className:"w-5 h-5"})})]})})}),a.jsx(IH,{stats:{totalPatients:e.totalPatients,todayAppointments:e.todayAppointments,monthlyRevenue:e.monthlyRevenue,activeTrials:e.activeTrials},onCardClick:h}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx(OH,{lastTransaction:t,onClick:f}),a.jsx(LH,{lastCalculation:r,onClick:x}),a.jsx(MH,{stats:{activePatients:e.activePatients,dailyRevenue:e.dailyRevenue,pendingAppointments:e.pendingAppointments,endingTrials:e.endingTrials}})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trend Analizi"}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsx("p",{className:"text-gray-500",children:"Chart component will be implemented here"})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hasta Dalm"}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsx("p",{className:"text-gray-500",children:"Chart component will be implemented here"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cihaz Dalm"}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsx("p",{className:"text-gray-500",children:"Device distribution chart"})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Son Aktiviteler"}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsx("p",{className:"text-gray-500",children:"Recent activities list"})})]})]}),a.jsx(BH,{isOpen:o,onClose:()=>c(!1),onSubmit:p}),a.jsx(zH,{isOpen:d,onClose:()=>u(!1),onCalculate:m})]})}class HH{constructor(){qe(this,"documents",[]);qe(this,"workflows",[]);qe(this,"eReceipts",[]);qe(this,"utsRecords",[]);qe(this,"initialized",!1);qe(this,"api",lr());this.init()}async init(){this.initialized||(await this.loadData(),this.initialized=!0,window.addEventListener("storage",this.handleStorageChange.bind(this)))}async loadData(){try{const t=localStorage.getItem(Rd);t&&(this.documents=JSON.parse(t));const r=localStorage.getItem(ch);if(r){const s=JSON.parse(r);this.workflows=s.workflows||[],this.eReceipts=s.eReceipts||[],this.utsRecords=s.utsRecords||[]}this.documents.length===0&&await this.initializeSampleData()}catch(t){console.error("Error loading SGK data:",t),await this.initializeSampleData()}}async initializeSampleData(){const t=[{id:"sgk-doc-1",patientId:"patient-1",filename:"sgk-rapor-001.pdf",documentType:"rapor",fileUrl:"/uploads/sgk-rapor-001.pdf",fileSize:245760,mimeType:"application/pdf",ocrText:"SGK Raporu - Hasta: Ahmet Ylmaz - TC: 12345678901",extractedInfo:{patientName:"Ahmet Ylmaz",tcNumber:"12345678901",reportNumber:"RPT-2024-001",reportDate:"2024-01-15",validityDate:"2024-07-15",confidence:.95,extractionMethod:"ocr"},processingStatus:"completed",uploadedBy:"user-1",uploadedAt:"2024-01-15T10:00:00Z",processedAt:"2024-01-15T10:05:00Z",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:05:00Z"}],r=[{id:"workflow-1",documentId:"sgk-doc-1",patientId:"patient-1",currentStatus:"approved",statusHistory:[{status:"draft",timestamp:"2024-01-15T10:00:00Z",userId:"user-1",userName:"Admin User"},{status:"submitted",timestamp:"2024-01-15T11:00:00Z",userId:"user-1",userName:"Admin User"},{status:"approved",timestamp:"2024-01-16T09:00:00Z",systemGenerated:!0}],submittedDate:"2024-01-15T11:00:00Z",approvalDate:"2024-01-16T09:00:00Z",deadline:"2024-02-15T23:59:59Z",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-16T09:00:00Z",createdBy:"user-1"}];this.documents=t,this.workflows=r,await this.saveData()}async saveData(){try{localStorage.setItem(Rd,JSON.stringify(this.documents)),localStorage.setItem(ch,JSON.stringify({workflows:this.workflows,eReceipts:this.eReceipts,utsRecords:this.utsRecords}))}catch(t){console.error("Error saving SGK data:",t)}}handleStorageChange(t){(t.key===Rd||t.key===ch)&&this.loadData()}async getDocuments(t){await this.init();let r=[...this.documents];if(t){if(t.patientId&&(r=r.filter(s=>s.patientId===t.patientId)),t.documentType&&(r=r.filter(s=>s.documentType===t.documentType)),t.status&&(r=r.filter(s=>{const n=this.workflows.find(i=>i.documentId===s.id);return(n==null?void 0:n.currentStatus)===t.status})),t.processingStatus&&(r=r.filter(s=>s.processingStatus===t.processingStatus)),t.search){const s=t.search.toLowerCase();r=r.filter(n=>{var i,l,o;return n.filename.toLowerCase().includes(s)||((i=n.ocrText)==null?void 0:i.toLowerCase().includes(s))||((o=(l=n.extractedInfo)==null?void 0:l.patientName)==null?void 0:o.toLowerCase().includes(s))})}if(t.dateRange){const s=new Date(t.dateRange.start),n=new Date(t.dateRange.end);r=r.filter(i=>{const l=new Date(i.createdAt);return l>=s&&l<=n})}}return r.sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()),{documents:r,total:r.length,page:1,pageSize:r.length,hasMore:!1}}async getDocument(t){return await this.init(),this.documents.find(r=>r.id===t)||null}async createDocument(t){await this.init();const r={...t,id:`sgk-doc-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.documents.push(r),await this.saveData();const s={method:"POST",endpoint:"/api/sgk/documents",data:r,headers:{"Idempotency-Key":`create-sgk-doc-${r.id}-${Date.now()}`}};return _t.addOperation(s),r}async updateDocument(t,r){await this.init();const s=this.documents.findIndex(l=>l.id===t);if(s===-1)throw new Error("Document not found");const n={...this.documents[s],...r,updatedAt:new Date().toISOString()};this.documents[s]=n,await this.saveData();const i={method:"PUT",endpoint:`/api/sgk/documents/${t}`,data:n,headers:{"Idempotency-Key":`update-sgk-doc-${t}-${Date.now()}`}};return _t.addOperation(i),n}async deleteDocument(t){await this.init();const r=this.documents.findIndex(i=>i.id===t);if(r===-1)throw new Error("Document not found");this.documents.splice(r,1);const s=this.workflows.findIndex(i=>i.documentId===t);s!==-1&&this.workflows.splice(s,1),await this.saveData();const n={method:"DELETE",endpoint:`/api/sgk/documents/${t}`,headers:{"Idempotency-Key":`delete-sgk-doc-${t}-${Date.now()}`}};_t.addOperation(n)}async processDocument(t){await this.init();const r={method:"POST",endpoint:"/api/ocr/process",data:t,headers:{"Idempotency-Key":`ocr-process-${Date.now()}`}};return _t.addOperation(r),{success:!0,extractedText:"Mock OCR text extraction",confidence:.85,processingTime:2500,extractedInfo:{patientName:"Mock Patient",confidence:.85,extractionMethod:"ocr"}}}async getWorkflowLegacy(t){return await this.init(),this.workflows.find(r=>r.documentId===t)||null}async updateWorkflowStatus(t,r,s){await this.init();const n=this.workflows.findIndex(c=>c.id===t);if(n===-1)throw new Error("Workflow not found");const i=this.workflows[n],l={status:r,timestamp:new Date().toISOString(),notes:s,userId:"current-user",userName:"Current User"};i.currentStatus=r,i.statusHistory.push(l),i.updatedAt=new Date().toISOString(),r==="submitted"?i.submittedDate=new Date().toISOString():r==="approved"?i.approvalDate=new Date().toISOString():r==="paid"&&(i.paymentDate=new Date().toISOString()),this.workflows[n]=i,await this.saveData();const o={method:"PUT",endpoint:`/api/sgk/workflows/${t}/status`,data:{status:r,notes:s},headers:{"Idempotency-Key":`update-workflow-${t}-${Date.now()}`}};return _t.addOperation(o),i}async getEReceipts(t){return await this.init(),t?this.eReceipts.filter(r=>r.patientId===t):[...this.eReceipts]}async getEReceipt(t){return await this.init(),this.eReceipts.find(r=>r.id===t)||null}async createEReceipt(t){await this.init();const r={...t,id:`ereceipt-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.eReceipts.push(r),await this.saveData();const s={method:"POST",endpoint:`/api/patients/${t.patientId}/ereceipts`,data:r,headers:{"Idempotency-Key":`create-ereceipt-${r.id}-${Date.now()}`}};return _t.addOperation(s),r}async updateEReceipt(t,r){await this.init();const s=this.eReceipts.findIndex(l=>l.id===t);if(s===-1)throw new Error("E-Receipt not found");const n={...this.eReceipts[s],...r,updatedAt:new Date().toISOString()};this.eReceipts[s]=n,await this.saveData();const i={method:"PUT",endpoint:`/api/patients/${n.patientId}/ereceipts/${t}`,data:n,headers:{"Idempotency-Key":`update-ereceipt-${t}-${Date.now()}`}};return _t.addOperation(i),n}async deliverMaterial(t,r,s){await this.init();const n=this.eReceipts.find(u=>u.id===t);if(!n)throw new Error("E-Receipt not found");const i=n.materials.findIndex(u=>u.id===r);if(i===-1)throw new Error("Material not found");const l=n.materials[i],o={...l,...s,deliveryStatus:"delivered",deliveryDate:s.deliveryDate||new Date().toISOString(),deliveredQuantity:l.quantity};n.materials[i]=o,n.updatedAt=new Date().toISOString(),n.materials.every(u=>u.deliveryStatus==="delivered")&&(n.status="completed",n.deliveryStatus="delivered"),await this.saveData();const d={method:"PUT",endpoint:`/api/patients/${n.patientId}/ereceipts/${t}/materials/${r}/deliver`,data:s,headers:{"Idempotency-Key":`deliver-material-${r}-${Date.now()}`}};return _t.addOperation(d),o}async getStats(){await this.init();const t={totalDocuments:this.documents.length,byType:{recete:0,rapor:0,belge:0,fatura:0,teslim:0,iade:0},byStatus:{draft:0,submitted:0,under_review:0,approved:0,rejected:0,paid:0,completed:0,cancelled:0},pendingApprovals:0,expiringSoon:0,totalValue:0,monthlySubmissions:0,approvalRate:0};this.documents.forEach(l=>{t.byType[l.documentType]++}),this.workflows.forEach(l=>{t.byStatus[l.currentStatus]++,l.currentStatus==="under_review"&&t.pendingApprovals++});const r=new Date().getMonth(),s=new Date().getFullYear();t.monthlySubmissions=this.workflows.filter(l=>{if(!l.submittedDate)return!1;const o=new Date(l.submittedDate);return o.getMonth()===r&&o.getFullYear()===s}).length;const n=this.workflows.filter(l=>l.currentStatus!=="draft").length,i=this.workflows.filter(l=>l.currentStatus==="approved"||l.currentStatus==="paid"||l.currentStatus==="completed").length;return t.approvalRate=n>0?i/n*100:0,t.totalValue=this.eReceipts.reduce((l,o)=>l+o.totalAmount,0),t}async getPatientSGKInfo(t){return await this.init(),{hasInsurance:!0,insuranceNumber:"12345678901",insuranceType:"sgk",coveragePercentage:80,deviceEntitlement:{hasEntitlement:!0,validFrom:"2024-01-01",validUntil:"2029-01-01",maxQuantity:2,remainingQuantity:1},batteryEntitlement:{hasEntitlement:!0,validFrom:"2024-01-01",validUntil:"2025-01-01",maxQuantity:12,remainingQuantity:8},currentStatus:"approved"}}validateDocument(t){const r={},s={};return t.patientId||(r.patientId="Patient is required"),t.documentType||(r.documentType="Document type is required"),!t.file&&!t.notes&&(r.file="Either file or notes must be provided"),t.file&&t.file.size>10*1024*1024&&(r.file="File size must be less than 10MB"),{isValid:Object.keys(r).length===0,errors:r,warnings:s}}validateEReceipt(t){const r={},s={};return t.patientId||(r.patientId="Patient is required"),t.tcNumber?/^\d{11}$/.test(t.tcNumber)||(r.tcNumber="TC Number must be 11 digits"):r.tcNumber="TC Number is required",t.prescriptionNumber||(r.prescriptionNumber="Prescription number is required"),{isValid:Object.keys(r).length===0,errors:r,warnings:s}}async bulkOperation(t){var s,n,i;await this.init();const r={success:!0,processed:0,failed:0,errors:[]};for(const l of t.documentIds)try{switch(t.type){case"process":await this.processDocument({imagePath:l});break;case"approve":const o=this.workflows.find(u=>u.documentId===l);o&&await this.updateWorkflowStatus(o.id,"approved",(s=t.data)==null?void 0:s.notes);break;case"reject":const c=this.workflows.find(u=>u.documentId===l);c&&await this.updateWorkflowStatus(c.id,"rejected",(n=t.data)==null?void 0:n.rejectionReason);break;case"submit":const d=this.workflows.find(u=>u.documentId===l);d&&await this.updateWorkflowStatus(d.id,"submitted",(i=t.data)==null?void 0:i.notes);break}r.processed++}catch(o){r.failed++,r.errors.push({documentId:l,error:o instanceof Error?o.message:"Unknown error"})}return r.success=r.failed===0,r}async downloadPatientForm(t){try{const r=await fetch(`/api/sgk/e-receipts/${t}/download-patient-form`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.blob()}catch(r){throw console.error("Download patient form error:",r),r}}async queryPatientRights(t){try{return(await this.api.sgkGetPatientSgkDocuments(t)).data}catch(r){throw console.error("Patient rights query error:",r),r}}async createWorkflow(t,r,s="approval"){try{return(await this.api.automationTriggerSgkProcessing({patientId:t,documentId:r,workflowType:s})).data}catch(n){throw console.error("SGK workflow creation error:",n),n}}async updateWorkflow(t,r,s,n){try{return(await this.api.automationTriggerSgkProcessing({workflowId:t,stepId:r,status:s,notes:n})).data}catch(i){throw console.error("SGK workflow update error:",i),i}}async getWorkflow(t){try{return(await this.api.sgkGetPatientSgkDocuments(t)).data}catch(r){throw console.error("SGK workflow get error:",r),r}}}const Wi=new HH,KH=lr(),{sgkUploadSgkDocument:GH,sgkDeleteSgkDocument:WH,sgkProcessOcr:YH,automationTriggerSgkProcessing:qH,sgkGetPatientSgkDocuments:XH}=KH,QH={uploadDocument:(e,t)=>GH(e,t),deleteDocument:(e,t)=>WH(e,t),listDocuments:(e,t)=>XH(e,t),processOcr:(e,t)=>YH(e,t),triggerProcessing:(e,t)=>qH(e,t),getWorkflow:e=>Wi.getWorkflow(e),updateWorkflowStatus:(e,t,r)=>Wi.updateWorkflowStatus(e,t,r),createWorkflow:(e,t,r)=>Wi.createWorkflow(e,t,r),validateDocument:e=>Wi.validateDocument(e),createDocument:e=>Wi.createDocument(e),processDocument:e=>Wi.processDocument(e),updateDocumentStatus:(e,t)=>Wi.updateDocument(e,{processingStatus:t})},ZH=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`;function JH(){return Fj({mutationFn:async e=>{const t=ZH();return await QH.uploadDocument(e,{idempotencyKey:t})}})}const eK=({isOpen:e,onClose:t,onUploadStart:r,onUploadComplete:s})=>{const[n,i]=k.useState([]),[l,o]=k.useState(!1),[c,d]=k.useState(!1),[u,h]=k.useState(null),f=k.useRef(null),x=JH(),p=w=>["image/jpeg","image/jpg","image/png","image/tiff","image/bmp"].includes(w.type)?w.size>10485760?(h(`Dosya ok byk: ${w.name} (Max: 10MB)`),!1):!0:(h(`Desteklenmeyen dosya tr: ${w.name}`),!1),m=k.useCallback(w=>{h(null);const _=[];for(const T of w)if(p(T))_.push(T);else return;const C=_.filter(T=>!n.some(j=>j.name===T.name&&j.size===T.size));i(T=>[...T,...C])},[n]),y=k.useCallback(w=>{const _=w.map(C=>C.file||C);m(_)},[m]);k.useCallback(w=>{const _=Array.from(w.target.files||[]);m(_)},[m]);const g=k.useCallback(w=>{w.preventDefault(),w.stopPropagation(),d(!0)},[]),v=k.useCallback(w=>{w.preventDefault(),w.stopPropagation(),d(!1)},[]),b=k.useCallback(w=>{w.preventDefault(),w.stopPropagation(),d(!1);const _=Array.from(w.dataTransfer.files);m(_)},[m]),S=k.useCallback(w=>{i(_=>_.filter((C,T)=>T!==w)),h(null)},[]),D=async()=>{if(n.length!==0){o(!0),h(null),r();try{const w=new FormData;n.forEach(C=>{w.append("files",C)});const _=await x.mutateAsync(w);s([])}catch(w){console.error("Upload failed:",w),h("Ykleme srasnda bir hata olutu. Ltfen tekrar deneyin."),s([])}finally{o(!1)}}},N=()=>{l||(i([]),h(null),d(!1),t())},E=()=>{var w;(w=f.current)==null||w.click()};return a.jsx(cr,{isOpen:e,onClose:N,title:"SGK Dokmanlarn Ykle",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:`
            border-2 border-dashed rounded-lg p-8 text-center transition-colors
            ${c?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}
            ${l?"opacity-50 pointer-events-none":"cursor-pointer"}
          `,onDragOver:g,onDragLeave:v,onDrop:b,onClick:E,children:a.jsx(sP,{multiple:!0,accept:"image/*",onChange:y,disabled:l,className:"w-full",description:"JPEG, PNG, TIFF, BMP formatlarnda, maksimum 10MB boyutunda dosyalar"})}),u&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[a.jsx(mt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-700",children:u})]}),n.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium mb-3",children:["Seilen Dosyalar (",n.length,")"]}),a.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:n.map((w,_)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(cS,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[(w.size/1024/1024).toFixed(2)," MB"]})]})]}),!l&&a.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(_),className:"text-gray-400 hover:text-red-500 p-1",children:a.jsx(vr,{className:"h-4 w-4"})})]},`${w.name}-${_}`))})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[a.jsx(Z,{type:"button",variant:"ghost",onClick:N,disabled:l,children:"ptal"}),a.jsx(Z,{onClick:D,disabled:n.length===0||l,className:"min-w-[120px]",children:l?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ykleniyor..."]}):`Ykle (${n.length} dosya)`})]})]})})},tK=({result:e,isOpen:t,onClose:r,onChangeDocumentType:s,onSave:n})=>{var T,j,F,O;const[i,l]=k.useState(1),[o,c]=k.useState(0),[d,u]=k.useState(!1),[h,f]=k.useState(""),[x,p]=k.useState(""),m=k.useRef(null),y=k.useRef(null);if(!e.result)return null;const{result:g}=e;k.useEffect(()=>{t&&(l(1),c(0),u(!1),f(""),p(""))},[t]);const v=()=>l(z=>Math.min(z+.25,3)),b=()=>l(z=>Math.max(z-.25,.5)),S=()=>c(z=>(z+90)%360),D=()=>{l(1),c(0)},N=(z,G)=>{if(!G)return z;const q=new RegExp(`(${G})`,"gi");return z.replace(q,'<mark class="bg-yellow-200 px-1 rounded">$1</mark>')},E=()=>g.ocr_text?g.ocr_text:g.entities&&g.entities.length>0?g.entities.map(z=>z.text||"").filter(z=>z.trim()).join(" "):"",w=z=>{if(!z)return"Bilinmiyor";const G=["B","KB","MB","GB"],q=Math.floor(Math.log(z)/Math.log(1024));return`${(z/Math.pow(1024,q)).toFixed(1)} ${G[q]}`},_=z=>z?z>=.8?"text-green-600":z>=.6?"text-yellow-600":"text-red-600":"text-gray-500",C=E();return a.jsx(cr,{isOpen:t,onClose:r,title:`Dokman nizleme - ${e.fileName}`,size:"xl",children:a.jsxs("div",{className:"space-y-6 max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(m5,{className:"w-4 h-4 text-blue-600"}),a.jsx("label",{className:"text-sm font-medium text-blue-900",children:"Dokman Tr"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-blue-800",children:g.document_type||"Belirlenemedi"}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:s,children:"Deitir"})]})]}),a.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Mt,{className:"w-4 h-4 text-green-600"}),a.jsx("label",{className:"text-sm font-medium text-green-900",children:"Hasta Bilgisi"})]}),a.jsx("div",{className:"text-sm font-semibold text-green-800",children:((j=(T=g.matched_patient)==null?void 0:T.patient)==null?void 0:j.fullName)||"Hasta seilmedi"}),((O=(F=g.matched_patient)==null?void 0:F.patient)==null?void 0:O.tcNo)&&a.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["TC: ",g.matched_patient.patient.tcNo]})]}),a.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ah,{className:"w-4 h-4 text-purple-600"}),a.jsx("label",{className:"text-sm font-medium text-purple-900",children:"lem Bilgisi"})]}),g.confidence_score&&a.jsxs("div",{className:"text-sm mb-1",children:[a.jsx("span",{className:"text-purple-700",children:"Gven: "}),a.jsxs("span",{className:`font-semibold ${_(g.confidence_score)}`,children:[(g.confidence_score*100).toFixed(1),"%"]})]}),g.processing_time&&a.jsxs("div",{className:"text-xs text-purple-600",children:["lem sresi: ",g.processing_time,"ms"]})]})]}),g.image_url&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Belge nizleme"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Z,{size:"sm",variant:"outline",onClick:b,disabled:i<=.5,children:a.jsx(z5,{className:"w-4 h-4"})}),a.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[Math.round(i*100),"%"]}),a.jsx(Z,{size:"sm",variant:"outline",onClick:v,disabled:i>=3,children:a.jsx(B5,{className:"w-4 h-4"})}),a.jsx(Z,{size:"sm",variant:"outline",onClick:S,children:a.jsx(C5,{className:"w-4 h-4"})}),a.jsx(Z,{size:"sm",variant:"outline",onClick:D,children:a.jsx(b5,{className:"w-4 h-4"})})]})]}),a.jsx("div",{ref:y,className:"border rounded-lg overflow-auto bg-gray-50 max-h-96 flex items-center justify-center",children:a.jsx("img",{ref:m,src:g.image_url,alt:e.fileName,className:"transition-transform duration-200 cursor-grab active:cursor-grabbing",style:{transform:`scale(${i}) rotate(${o}deg)`,maxWidth:i<=1?"100%":"none",maxHeight:i<=1?"100%":"none"},draggable:!1})}),g.dimensions&&a.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Boyutlar: ",g.dimensions.width,"  ",g.dimensions.height," px",g.file_size&&`  Dosya boyutu: ${w(g.file_size)}`]})]}),C&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"OCR Metin Analizi"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx(ye,{type:"text",placeholder:"Metinde ara...",value:x,onChange:z=>p(z.target.value),className:"pl-10"})]}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>u(!d),children:d?"Ksalt":"Tmn Gster"})]})]}),a.jsxs("div",{className:"bg-gray-50 border rounded-lg",children:[a.jsx("div",{className:"p-4",children:a.jsx("div",{className:`text-sm text-gray-800 whitespace-pre-wrap leading-relaxed ${d?"max-h-64 overflow-y-auto":"max-h-32 overflow-hidden"}`,dangerouslySetInnerHTML:{__html:N(d?C:C.substring(0,500)+(C.length>500?"...":""),x)}})}),a.jsxs("div",{className:"px-4 py-2 bg-gray-100 border-t text-xs text-gray-600 flex items-center justify-between",children:[a.jsxs("span",{children:["Toplam karakter: ",C.length]}),a.jsxs("span",{children:["Kelime says: ",C.split(/\s+/).filter(z=>z.length>0).length]}),x&&a.jsxs("span",{children:["Arama sonucu: ",(C.match(new RegExp(x,"gi"))||[]).length," eleme"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PDF Durumu"}),g.pdf_generated?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx(St,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-green-800",children:"PDF baaryla oluturuldu"}),a.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Dosya: ",g.pdf_filename]})]}),a.jsxs(Z,{size:"sm",variant:"outline",className:"flex items-center gap-2",children:[a.jsx(yr,{className:"w-4 h-4"}),"ndir"]})]}):a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx(mt,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-yellow-800",children:"PDF oluturulamad"}),a.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Belge ileme srasnda bir sorun olutu"})]}),a.jsx(Z,{size:"sm",variant:"outline",className:"text-yellow-700 border-yellow-300",children:"Tekrar Dene"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Belge Detaylar"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pt,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600",children:"Oluturulma:"}),a.jsx("span",{className:"font-medium",children:g.created_at?new Date(g.created_at).toLocaleDateString("tr-TR"):"Bilinmiyor"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600",children:"Dosya ad:"}),a.jsx("span",{className:"font-medium truncate",children:e.fileName})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(Z,{variant:"ghost",onClick:r,children:"ptal"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[g.pdf_generated&&a.jsxs(Z,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(yr,{className:"w-4 h-4"}),"PDF ndir"]}),a.jsxs(Z,{onClick:n||r,className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4"}),"Kaydet ve Devam"]})]})]})]})})},h_=({isOpen:e,onClose:t,onSelect:r,ocrResult:s})=>{var f,x;const[n,i]=k.useState(""),[l,o]=k.useState(null),{patients:c,isLoading:d}=ZT();k.useEffect(()=>{var p;(p=s==null?void 0:s.matched_patient)!=null&&p.patient&&o(s.matched_patient.patient)},[s]);const u=(c==null?void 0:c.filter(p=>{if(!p.id)return!1;const m=`${p.firstName} ${p.lastName}`.toLowerCase(),y=p.tcNumber||"",g=p.phone||"",v=n.toLowerCase();return m.includes(v)||y.includes(v)||g.includes(v)}))||[],h=()=>{l&&r(l)};return a.jsx(cr,{isOpen:e,onClose:t,title:"Hasta Se",children:a.jsxs("div",{className:"space-y-4",children:[(s==null?void 0:s.matched_patient)&&a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-blue-800 mb-1",children:"OCR nerisi"}),a.jsxs("div",{className:"text-sm text-blue-700",children:[(f=s.matched_patient.patient)==null?void 0:f.fullName,((x=s.matched_patient.match_details)==null?void 0:x.confidence)&&a.jsxs("span",{className:"ml-2 text-xs",children:["(",Math.round(s.matched_patient.match_details.confidence*100),"% gven)"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hasta Ara"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ye,{placeholder:"sim, TC veya telefon ile ara...",value:n,onChange:p=>i(p.target.value),className:"pl-10"})]})]}),a.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg",children:d?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Ykleniyor..."}):u.length===0?a.jsx("div",{className:"p-4 text-center text-gray-500",children:n?"Hasta bulunamad":"Arama yapmak iin yazn"}):a.jsx("div",{className:"divide-y",children:u.slice(0,10).map(p=>a.jsxs("div",{className:`p-3 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${(l==null?void 0:l.id)===p.id?"bg-blue-50":""}`,onClick:()=>o(p),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[p.firstName," ",p.lastName]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[p.tcNumber&&`TC: ${p.tcNumber}`,p.phone&&`  Tel: ${p.phone}`]})]})]}),(l==null?void 0:l.id)===p.id&&a.jsx(Kh,{className:"w-4 h-4 text-blue-600"})]},p.id))})}),a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[a.jsx(Z,{variant:"ghost",onClick:t,children:"ptal"}),a.jsx(Z,{onClick:h,disabled:!l,children:"Se"})]})]})})},rK={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-[95vw]"},on=({open:e,title:t,onClose:r,children:s,size:n="xl",showCloseButton:i=!0,closeOnOverlayClick:l=!0,className:o=""})=>{if(k.useEffect(()=>{const d=u=>{u.key==="Escape"&&e&&r()};return e&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[e,r]),!e)return null;const c=d=>{l&&d.target===d.currentTarget&&r()};return a.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:c}),a.jsxs("div",{className:`
        bg-white rounded-lg shadow-xl z-10 w-full h-full max-h-[90vh] 
        flex flex-col overflow-hidden
        ${rK[n]}
        ${o}
      `,children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 flex-shrink-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),i&&a.jsx(Z,{onClick:r,"aria-label":"close",variant:"ghost",className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(vr,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s})]})]})},sK=[{value:"sgk_reete",label:"SGK Reete"},{value:"sgk_rapor",label:"SGK Rapor"},{value:"odyometri_sonucu",label:"Odyometri Sonucu"},{value:"garanti_belgesi",label:"Garanti Belgesi"},{value:"kimlik",label:"Kimlik"},{value:"diger",label:"Dier"}],f_=({isOpen:e,onClose:t,onSelect:r,currentType:s})=>{const[n,i]=k.useState(s||""),l=()=>{n&&r(n)};return a.jsx(on,{open:e,onClose:t,title:"Dokman Tr Se",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Dokman Tr"}),a.jsx(Ue,{value:n,onChange:o=>i(o.target.value),options:[{value:"",label:"Tr sein"},...sK],className:"w-full"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:["Otomatik olarak belirlenen tr: ",a.jsx("strong",{children:s||"Belirlenemedi"})]}),a.jsx("p",{className:"mt-1",children:"Gerekirse manuel olarak deitirebilirsiniz."})]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[a.jsx(Z,{variant:"ghost",onClick:t,children:"ptal"}),a.jsx(Z,{onClick:l,disabled:!n,children:"Se"})]})]})})},aK=({results:e,isProcessing:t,onRetry:r})=>{var x;const[s,n]=k.useState(null),[i,l]=k.useState(!1),[o,c]=k.useState(!1),d=e.filter(p=>p.status==="processed"),u=e.filter(p=>p.status==="error"),h=(p,m)=>{console.log("Patient selected:",m,"for result:",p),l(!1)},f=(p,m)=>{console.log("Document type selected:",m,"for result:",p),c(!1)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"leme Sonular"}),a.jsx(Z,{onClick:r,variant:"outline",children:"Tekrar Ykle"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(Bt,{children:[a.jsx(N0,{className:"pb-2",children:a.jsxs(k0,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4"}),"Toplam Dosya"]})}),a.jsx(j0,{children:a.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),a.jsxs(Bt,{children:[a.jsx(N0,{className:"pb-2",children:a.jsxs(k0,{className:"text-sm font-medium flex items-center gap-2 text-green-600",children:[a.jsx(St,{className:"w-4 h-4"}),"Baarl"]})}),a.jsx(j0,{children:a.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.length})})]}),a.jsxs(Bt,{children:[a.jsx(N0,{className:"pb-2",children:a.jsxs(k0,{className:"text-sm font-medium flex items-center gap-2 text-red-600",children:[a.jsx(xb,{className:"w-4 h-4"}),"Hata"]})}),a.jsx(j0,{children:a.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.length})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((p,m)=>{var y,g,v,b;return a.jsxs(Bt,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[a.jsx(N0,{className:"pb-2",children:a.jsx(k0,{className:"text-sm font-medium truncate",children:p.fileName})}),a.jsx(j0,{className:"space-y-3",children:p.status==="processed"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[a.jsx(St,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"lendi"})]}),(y=p.result)!=null&&y.matched_patient?a.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[a.jsx(Mt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:((g=p.result.matched_patient.patient)==null?void 0:g.fullName)||"Hasta bulundu"})]}):a.jsxs(Z,{size:"sm",variant:"outline",onClick:()=>{n(p),l(!0)},className:"w-full",children:[a.jsx(Lr,{className:"w-4 h-4 mr-1"}),"Hasta Se"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Tr: ",((v=p.result)==null?void 0:v.document_type)||"Belirlenemedi"]}),((b=p.result)==null?void 0:b.pdf_generated)&&a.jsxs("div",{className:"text-xs text-green-600",children:["PDF oluturuldu: ",p.result.pdf_filename]}),a.jsx(Z,{size:"sm",variant:"ghost",onClick:()=>n(p),className:"w-full",children:"nizle"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[a.jsx(xb,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Hata"})]}),a.jsx("div",{className:"text-xs text-red-500",children:p.error})]})})]},m)})}),s&&a.jsx(tK,{result:s,isOpen:!!s,onClose:()=>n(null),onChangeDocumentType:()=>{c(!0)}}),i&&s&&a.jsx(h_,{isOpen:i,onClose:()=>l(!1),onSelect:p=>h(s,p),ocrResult:s.result}),o&&s&&a.jsx(f_,{isOpen:o,onClose:()=>c(!1),onSelect:p=>f(s,p),currentType:(x=s.result)==null?void 0:x.document_type})]})},nK=({isOpen:e,onClose:t,onCapture:r,maxImages:s=10})=>{const n=k.useRef(null),i=k.useRef(null),l=k.useRef(null),[o,c]=k.useState(!1),[d,u]=k.useState([]),[h,f]=k.useState(!1),[x,p]=k.useState(!1),[m,y]=k.useState(null),g=k.useCallback(async()=>{try{y(null);const w={video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1},_=await navigator.mediaDevices.getUserMedia(w);l.current=_,n.current&&(n.current.srcObject=_,n.current.play(),c(!0)),_.getVideoTracks()[0].getCapabilities().torch&&p(!1)}catch(w){console.error("Camera access failed:",w),y("Kameraya eriim salanamad. Ltfen kamera izinlerini kontrol edin.")}},[]),v=k.useCallback(()=>{l.current&&(l.current.getTracks().forEach(w=>w.stop()),l.current=null),c(!1)},[]),b=k.useCallback(async()=>{if(l.current){const w=l.current.getVideoTracks()[0];if(w.getCapabilities().torch)try{await w.applyConstraints({advanced:[{torch:!x}]}),p(!x)}catch(C){console.error("Flash toggle failed:",C)}}},[x]),S=k.useCallback(async()=>{if(!n.current||!i.current)return;const w=n.current,_=i.current,C=_.getContext("2d");if(!C)return;_.width=w.videoWidth,_.height=w.videoHeight,C.drawImage(w,0,0,_.width,_.height);const T=_.toDataURL("image/jpeg",.9),j={id:`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dataUrl:T,timestamp:Date.now(),processed:!1};u(F=>[...F,j]),setTimeout(()=>{u(F=>F.map(O=>O.id===j.id?{...O,processed:!0}:O))},1e3)},[]),D=k.useCallback(w=>{u(_=>_.filter(C=>C.id!==w))},[]),N=k.useCallback(async()=>{if(d.length!==0){f(!0);try{await new Promise(_=>setTimeout(_,2e3));const w=await Promise.all(d.map(async(_,C)=>{const j=await(await fetch(_.dataUrl)).blob();return new File([j],`captured-image-${C+1}.jpg`,{type:"image/jpeg"})}));r(w),u([]),v(),t()}catch(w){console.error("Image processing failed:",w),y("Grsel ileme srasnda hata olutu.")}finally{f(!1)}}},[d,r,v,t]);k.useEffect(()=>(e?g():(v(),u([]),y(null)),()=>{v()}),[e,g,v]);const E=()=>{h||(v(),t())};return a.jsxs(cr,{isOpen:e,onClose:E,title:"Belge Fotoraf ek",size:"lg",children:[a.jsxs("div",{className:"space-y-4",children:[m&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:m})}),a.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"16/9"},children:[a.jsx("video",{ref:n,className:"w-full h-full object-cover",playsInline:!0,muted:!0}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute inset-4 border-2 border-white border-dashed opacity-50 rounded-lg"}),a.jsx("div",{className:"absolute top-4 left-4 w-6 h-6 border-l-4 border-t-4 border-white"}),a.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 border-r-4 border-t-4 border-white"}),a.jsx("div",{className:"absolute bottom-4 left-4 w-6 h-6 border-l-4 border-b-4 border-white"}),a.jsx("div",{className:"absolute bottom-4 right-4 w-6 h-6 border-r-4 border-b-4 border-white"})]}),a.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-4",children:[a.jsx(Z,{variant:"ghost",size:"sm",onClick:b,className:"bg-black/50 text-white hover:bg-black/70",children:x?a.jsx(xS,{className:"w-5 h-5"}):a.jsx(L5,{className:"w-5 h-5"})}),a.jsx(Z,{onClick:S,disabled:!o||d.length>=s,className:"bg-white text-black hover:bg-gray-100 rounded-full w-16 h-16",children:a.jsx(sh,{className:"w-6 h-6"})}),a.jsxs("div",{className:"bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[d.length,"/",s]})]})]}),d.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium mb-2",children:["ekilen Fotoraflar (",d.length,")"]}),a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:d.map(w=>a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("img",{src:w.dataUrl,alt:"Captured",className:"w-20 h-20 object-cover rounded-lg border"}),!w.processed&&a.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg",children:a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>D(w.id),className:"absolute -top-2 -right-2 w-6 h-6 p-0 bg-red-500 text-white hover:bg-red-600 rounded-full",children:a.jsx(vr,{className:"w-3 h-3"})}),w.processed&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 text-white rounded-full flex items-center justify-center",children:a.jsx(Kh,{className:"w-3 h-3"})})]},w.id))})]}),a.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[a.jsx("p",{className:"font-medium mb-1",children:"Kullanm Talimatlar:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[a.jsx("li",{children:"Belgeyi beyaz ereve iine yerletirin"}),a.jsx("li",{children:"Belgenin tm kenarlarnn grnr olduundan emin olun"}),a.jsx("li",{children:"Ik yetersizse fla an"}),a.jsx("li",{children:"Her fotoraf otomatik olarak krplacak ve ilenecek"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsx(Z,{variant:"ghost",onClick:E,disabled:h,children:"ptal"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Z,{variant:"outline",onClick:()=>u([]),disabled:d.length===0||h,children:[a.jsx(py,{className:"w-4 h-4 mr-2"}),"Temizle"]}),a.jsx(Z,{onClick:N,disabled:d.length===0||h,children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"leniyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kh,{className:"w-4 h-4 mr-2"}),"Tamamla (",d.length," fotoraf)"]})})]})]})]}),a.jsx("canvas",{ref:i,className:"hidden"})]})},iK=({isOpen:e,onClose:t,images:r,onProcessingComplete:s})=>{var O,z,G,q;const[n,i]=k.useState([]),[l,o]=k.useState("processing"),[c,d]=k.useState(0),[u,h]=k.useState(null),[f,x]=k.useState(!1),[p,m]=k.useState(!1),[y,g]=k.useState(!1),v=k.useCallback(async(H,A=.8)=>new Promise(V=>{const L=new FileReader;L.onload=P=>{var M;const I=document.createElement("canvas"),R=I.getContext("2d"),U=new Image;U.onload=()=>{var ce;let{width:ae,height:ie}=U;if(ae>1920||ie>1080){const K=Math.min(1920/ae,1080/ie);ae*=K,ie*=K}I.width=ae,I.height=ie,R?(R.imageSmoothingEnabled=!0,R.imageSmoothingQuality="high",R.filter="contrast(1.1) brightness(1.05)",R.drawImage(U,0,0,ae,ie),R.filter="none",V(I.toDataURL("image/jpeg",A))):V((ce=P.target)==null?void 0:ce.result)},U.src=(M=P.target)==null?void 0:M.result},L.readAsDataURL(H)}),[]),b=k.useCallback(async H=>(await new Promise(V=>setTimeout(V,1500)),{croppedImage:H,corners:[{x:50,y:50},{x:350,y:45},{x:355,y:450},{x:45,y:455}],confidence:.85+Math.random()*.1}),[]),S=k.useCallback(H=>{var R;const A={sgk_reete:["reete","ila","eczane","sgk","sosyal gvenlik","prescription","medicine"],sgk_rapor:["rapor","doktor","hekim","muayene","tan","report","diagnosis"],odyometri:["odyometri","iitme","audiometry","hearing","kulak","ear"],garanti_belgesi:["garanti","warranty","cihaz","device","serial"],diger:[]},V={},L=H.toLowerCase();Object.entries(A).forEach(([U,M])=>{V[U]=0,M.forEach(J=>{const se=(L.match(new RegExp(J,"g"))||[]).length;V[U]+=se*(J.length>5?2:1)})});const P=Math.max(...Object.values(V)),I=(R=Object.entries(V).find(([U,M])=>M===P))==null?void 0:R[0];return P>=3?I:"diger"},[]),D=k.useCallback(async H=>{await new Promise(P=>setTimeout(P,1500+Math.random()*1e3));const A=[{text:`T.C. SALIK BAKANLII
SGK REETE
Hasta Ad: AHMET YILMAZ
TC Kimlik No: 12345678901
Tarih: ${new Date().toLocaleDateString("tr-TR")}
la Listesi:
- Aspirin 100mg
- Vitamin D3`,patientInfo:{firstName:"AHMET",lastName:"YILMAZ",tcNumber:"12345678901",confidence:.92},documentType:{type:"sgk_reete",confidence:.95}},{text:`ODYOMETRI TEST SONUCU
Hasta: FATMA KAYA
TC: 98765432109
Test Tarihi: ${new Date().toLocaleDateString("tr-TR")}
Sa Kulak: Normal
Sol Kulak: Hafif kayp`,patientInfo:{firstName:"FATMA",lastName:"KAYA",tcNumber:"98765432109",confidence:.88},documentType:{type:"odyometri",confidence:.91}},{text:`DOKTOR RAPORU
Dr. Mehmet zkan
Hasta: AL DEMR
TC: 11223344556
Tan: Kronik otitis media
nerilen tedavi: Antibiyotik`,patientInfo:{firstName:"AL",lastName:"DEMR",tcNumber:"11223344556",confidence:.85},documentType:{type:"sgk_rapor",confidence:.89}}],V=A[Math.floor(Math.random()*A.length)],L=.8+Math.random()*.15;return{text:V.text,confidence:L,patientInfo:V.patientInfo?{...V.patientInfo,confidence:V.patientInfo.confidence*L}:void 0,documentType:V.documentType?{...V.documentType,confidence:V.documentType.confidence*L}:void 0}},[]),N=k.useCallback((H,A)=>{const V=(H==null?void 0:H.firstName)||"Bilinmeyen",L=(H==null?void 0:H.lastName)||"Hasta",P=A.replace(/\s+/g,"_"),I=new Date().toISOString().slice(0,10);return`${V}_${L}_${P}_${I}.pdf`},[]),E=k.useCallback(async()=>{var A;if(r.length===0)return;g(!0),o("processing"),d(0);const H=[];for(let V=0;V<r.length;V++){const L=r[V],P=V/r.length*100;d(P);try{d(P+10);const I=await v(L);d(P+30);const R=await b(I);d(P+60);const U=await D(R.croppedImage),M=S(U.text),J=N(U.patientInfo,M),se={id:`doc_${Date.now()}_${V}`,originalImage:URL.createObjectURL(L),processedImage:I,croppedImage:R.croppedImage,ocrResult:{...U,documentType:{type:M,confidence:((A=U.documentType)==null?void 0:A.confidence)||.8}},edgeDetection:{corners:R.corners,confidence:R.confidence,applied:!0},finalFileName:J};H.push(se),d(P+90)}catch(I){console.error("Error processing image:",I),H.push({id:`doc_${Date.now()}_${V}`,originalImage:URL.createObjectURL(L),processedImage:URL.createObjectURL(L),finalFileName:`error_${L.name}`})}}i(H),d(100),g(!1),o("review")},[r,v,b,D,S,N]),w=k.useCallback(H=>{u&&i(A=>A.map(V=>V.id===u?{...V,selectedPatient:H}:V)),x(!1),h(null)},[u]),_=k.useCallback(H=>{u&&i(A=>A.map(V=>{var L;return V.id===u?{...V,selectedDocumentType:H,finalFileName:N((L=V.ocrResult)==null?void 0:L.patientInfo,H)}:V})),m(!1),h(null)},[u,N]),C=k.useCallback(async H=>{var P;const V=(await Ij(()=>import("./jspdf.es.min-8f8e456d.js"),[])).default,L=new V;if(L.setFontSize(16),L.text("Belge leme Raporu",20,20),H.selectedPatient&&(L.setFontSize(12),L.text(`Hasta: ${H.selectedPatient.firstName} ${H.selectedPatient.lastName}`,20,40),L.text(`TC: ${H.selectedPatient.tcNumber}`,20,50)),H.selectedDocumentType&&L.text(`Belge Tr: ${H.selectedDocumentType}`,20,60),H.processedImage)try{L.addImage(H.processedImage,"JPEG",20,80,160,120)}catch(I){console.error("Error adding image to PDF:",I)}if((P=H.ocrResult)!=null&&P.text){L.setFontSize(10),L.text("OCR Metni:",20,220);const I=L.splitTextToSize(H.ocrResult.text,160);L.text(I,20,230)}return L.output("bloburl")},[]),T=k.useCallback(async()=>{g(!0),o("generating");try{const H=await Promise.all(n.map(async A=>{const V=await C(A);return{...A,pdfData:V}}));i(H),s(H),o("complete")}catch(H){console.error("Error generating PDFs:",H)}finally{g(!1)}},[n,C,s]);bt.useEffect(()=>{e&&r.length>0&&n.length===0&&E()},[e,r,n.length,E]),bt.useEffect(()=>{l==="review"&&n.length>0&&!u&&h(n[0].id)},[l,n,u]);const j=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Belgeler leniyor"}),a.jsx("p",{className:"text-gray-600",children:"Ltfen bekleyin, belgeleriniz analiz ediliyor..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"lerleme"}),a.jsxs("span",{children:[Math.round(c),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xS,{className:"w-4 h-4"}),a.jsx("span",{children:"Grntler sktrlyor"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hb,{className:"w-4 h-4"}),a.jsx("span",{children:"Belge kenarlar tespit ediliyor"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4"}),a.jsx("span",{children:"Metin karlyor (OCR)"})]})]})]}),F=()=>{var A,V;const H=n.find(L=>L.id===u);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Belgeleri nceleyin"}),a.jsx("div",{className:"flex gap-2",children:n.map((L,P)=>a.jsx(Z,{variant:L.id===u?"default":"outline",size:"sm",onClick:()=>h(L.id),children:P+1},L.id))})]}),H&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Belge nizleme"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("img",{src:H.croppedImage||H.processedImage,alt:"Processed document",className:"w-full h-auto"})}),H.edgeDetection&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hb,{className:"w-4 h-4"}),a.jsxs("span",{children:["Kenar Tespiti: %",Math.round(H.edgeDetection.confidence*100)]})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"OCR Sonular"}),H.ocrResult&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Tespit Edilen Metin:"}),a.jsx("div",{className:"text-sm whitespace-pre-wrap",children:H.ocrResult.text}),a.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Gven: %",Math.round(H.ocrResult.confidence*100)]})]}),H.ocrResult.patientInfo&&a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Hasta Bilgileri:"}),a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("div",{children:["Ad: ",H.ocrResult.patientInfo.firstName]}),a.jsxs("div",{children:["Soyad: ",H.ocrResult.patientInfo.lastName]}),a.jsxs("div",{children:["TC: ",H.ocrResult.patientInfo.tcNumber]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Gven: %",Math.round(H.ocrResult.patientInfo.confidence*100)]})]})]}),H.ocrResult.documentType&&a.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Belge Tr:"}),a.jsxs("div",{className:"text-sm",children:[H.ocrResult.documentType.type,a.jsxs("div",{className:"text-xs text-gray-500",children:["Gven: %",Math.round(H.ocrResult.documentType.confidence*100)]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Z,{variant:"outline",className:"w-full justify-start",onClick:()=>{h(H.id),x(!0)},children:[a.jsx(In,{className:"w-4 h-4 mr-2"}),H.selectedPatient?`${H.selectedPatient.firstName} ${H.selectedPatient.lastName}`:"Hasta Se"]}),a.jsxs(Z,{variant:"outline",className:"w-full justify-start",onClick:()=>{h(H.id),m(!0)},children:[a.jsx(wt,{className:"w-4 h-4 mr-2"}),H.selectedDocumentType||((V=(A=H.ocrResult)==null?void 0:A.documentType)==null?void 0:V.type)||"Belge Tr Se"]})]}),H.finalFileName&&a.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:"Dosya Ad:"}),a.jsx("div",{className:"text-sm text-gray-600",children:H.finalFileName})]})]})]})]})};return a.jsxs(a.Fragment,{children:[a.jsx(cr,{isOpen:e,onClose:t,title:"Belge leme",size:"xl",children:a.jsxs("div",{className:"space-y-6",children:[l==="processing"&&j(),l==="review"&&F(),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsx(Z,{variant:"ghost",onClick:t,disabled:y,children:"ptal"}),l==="review"&&a.jsx(Z,{onClick:T,disabled:y,children:y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"PDF Oluturuluyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),"Tamamla (",n.length," belge)"]})})]})]})}),a.jsx(h_,{isOpen:f,onClose:()=>{x(!1),h(null)},onSelect:w,ocrResult:u?(O=n.find(H=>H.id===u))==null?void 0:O.ocrResult:void 0}),a.jsx(f_,{isOpen:p,onClose:()=>{m(!1),h(null)},onSelect:_,currentType:u?(q=(G=(z=n.find(H=>H.id===u))==null?void 0:z.ocrResult)==null?void 0:G.documentType)==null?void 0:q.type:void 0})]})},lK=()=>{const[e,t]=k.useState(!1),[r,s]=k.useState(!1),[n,i]=k.useState(!1),[l,o]=k.useState([]),[c,d]=k.useState(!1),[u,h]=k.useState([]),[f,x]=k.useState([]),p=v=>{o(v),d(!1)},m=()=>{d(!0)},y=v=>{h(v),s(!1),i(!0)},g=v=>{o(v),i(!1),h([]),x([])};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"SGK Dokman leme"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(Z,{onClick:()=>s(!0),className:"flex items-center gap-2",children:[a.jsx(sh,{size:16}),"Kamera ile ek"]}),a.jsxs(Z,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[a.jsx(ka,{size:16}),"Dosya Ykle"]})]})]}),a.jsxs(ts,{defaultValue:"results",className:"w-full",children:[a.jsxs(vy,{className:"grid w-full grid-cols-2",children:[a.jsx(Gh,{value:"results",children:"leme Sonular"}),a.jsx(Gh,{value:"upload",children:"Yeni Ykleme"})]}),a.jsx(su,{value:"results",className:"mt-6",children:l.length>0?a.jsx(aK,{results:l,isProcessing:c,onRetry:()=>t(!0)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-500 mb-4",children:"Henz ilenmi dokman bulunmuyor"}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs(Z,{onClick:()=>s(!0),className:"flex items-center gap-2",children:[a.jsx(sh,{size:16}),"Kamera ile Bala"]}),a.jsxs(Z,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[a.jsx(ka,{size:16}),"Dosya Ykle"]})]})]})}),a.jsx(su,{value:"upload",className:"mt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[a.jsx(sh,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Kamera ile ekim"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Kamera ile arka arkaya fotoraf ekerek belgeleri ykleyin"}),a.jsx(Z,{onClick:()=>s(!0),className:"w-full",children:"Kameray A"})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[a.jsx(ka,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Dosya Ykleme"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Bilgisayarnzdan grsel dosyalarn seerek ykleyin"}),a.jsx(Z,{onClick:()=>t(!0),className:"w-full",children:"Dosya Se"})]})]})})]}),a.jsx(nK,{isOpen:r,onClose:()=>s(!1),onCapture:y}),a.jsx(eK,{isOpen:e,onClose:()=>t(!1),onUploadStart:m,onUploadComplete:p}),a.jsx(iK,{isOpen:n,onClose:()=>i(!1),images:u.length>0?u:f,onProcessingComplete:g})]})},oK=Or("/sgk/")({component:lK});class cK{constructor(){qe(this,"STORAGE_KEYS",{messages:"communication_messages",templates:"communication_templates",outbox:"communication_outbox",syncMetadata:"communication_sync_metadata"});qe(this,"syncInProgress",!1);qe(this,"listeners",new Set)}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}notifyListeners(){this.listeners.forEach(t=>t())}async saveMessage(t){const r=this.getMessages(),s={...t,syncStatus:"pending",updatedAt:new Date().toISOString()};r.push(s),localStorage.setItem(this.STORAGE_KEYS.messages,JSON.stringify(r)),this.addToOutbox("create","message",t.id,s),this.notifyListeners(),navigator.onLine&&this.syncOutbox()}async updateMessage(t,r){const s=this.getMessages(),n=s.findIndex(i=>i.id===t);if(n===-1)throw new Error("Message not found");s[n]={...s[n],...r,syncStatus:"pending",updatedAt:new Date().toISOString()},localStorage.setItem(this.STORAGE_KEYS.messages,JSON.stringify(s)),this.addToOutbox("update","message",t,r),this.notifyListeners(),navigator.onLine&&this.syncOutbox()}getMessages(t){const r=localStorage.getItem(this.STORAGE_KEYS.messages);let s=r?JSON.parse(r):[];if(t!=null&&t.type&&(s=s.filter(n=>n.type===t.type)),t!=null&&t.status&&(s=s.filter(n=>n.status===t.status)),t!=null&&t.patientId&&(s=s.filter(n=>n.patientId===t.patientId)),s.sort((n,i)=>new Date(i.createdAt).getTime()-new Date(n.createdAt).getTime()),t!=null&&t.offset||t!=null&&t.limit){const n=t.offset||0,i=t.limit?n+t.limit:void 0;s=s.slice(n,i)}return s}async saveTemplate(t){const r=this.getTemplates(),s={...t,syncStatus:"pending"};r.push(s),localStorage.setItem(this.STORAGE_KEYS.templates,JSON.stringify(r)),this.addToOutbox("create","template",t.id,s),this.notifyListeners(),navigator.onLine&&this.syncOutbox()}async updateTemplate(t,r){const s=this.getTemplates(),n=s.findIndex(i=>i.id===t);if(n===-1)throw new Error("Template not found");s[n]={...s[n],...r,syncStatus:"pending",updatedAt:new Date().toISOString()},localStorage.setItem(this.STORAGE_KEYS.templates,JSON.stringify(s)),this.addToOutbox("update","template",t,r),this.notifyListeners(),navigator.onLine&&this.syncOutbox()}async deleteTemplate(t){const s=this.getTemplates().filter(n=>n.id!==t);localStorage.setItem(this.STORAGE_KEYS.templates,JSON.stringify(s)),this.addToOutbox("delete","template",t,null),this.notifyListeners(),navigator.onLine&&this.syncOutbox()}getTemplates(t){const r=localStorage.getItem(this.STORAGE_KEYS.templates);let s=r?JSON.parse(r):[];return t!=null&&t.type&&(s=s.filter(n=>n.templateType===t.type)),t!=null&&t.category&&(s=s.filter(n=>n.category===t.category)),(t==null?void 0:t.active)!==void 0&&(s=s.filter(n=>n.isActive===t.active)),s.sort((n,i)=>n.name.localeCompare(i.name)),s}addToOutbox(t,r,s,n){const i=localStorage.getItem(this.STORAGE_KEYS.outbox),l=i?JSON.parse(i):[];l.push({id:`${r}_${t}_${s}_${Date.now()}`,action:t,entityType:r,entityId:s,data:n,createdAt:new Date().toISOString(),retryCount:0}),localStorage.setItem(this.STORAGE_KEYS.outbox,JSON.stringify(l))}async syncOutbox(){if(!(this.syncInProgress||!navigator.onLine)){this.syncInProgress=!0,this.notifyListeners();try{const t=localStorage.getItem(this.STORAGE_KEYS.outbox),r=t?JSON.parse(t):[],s=[];for(const n of r)try{await this.syncOutboxItem(n)}catch(i){console.error("Failed to sync outbox item:",n.id,i),n.retryCount++,n.lastRetryAt=new Date().toISOString(),n.error=i instanceof Error?i.message:"Unknown error",s.push(n)}localStorage.setItem(this.STORAGE_KEYS.outbox,JSON.stringify(s))}finally{this.syncInProgress=!1,this.notifyListeners()}}}async syncOutboxItem(t){try{const r=lr();t.entityType==="template"&&(t.action==="create"?await r.communicationsCreateTemplate(t.data):t.action==="update"?await r.communicationsUpdateTemplate(t.entityId,t.data):t.action==="delete"&&await r.communicationsDeleteTemplate(t.entityId))}catch(r){throw new Error(`Failed to sync ${t.action} ${t.entityType}: ${r}`)}if(t.action!=="delete"){if(t.entityType==="message"){const r=this.getMessages(),s=r.findIndex(n=>n.id===t.entityId);s!==-1&&(r[s].syncStatus="synced",localStorage.setItem(this.STORAGE_KEYS.messages,JSON.stringify(r)))}else if(t.entityType==="template"){const r=this.getTemplates(),s=r.findIndex(n=>n.id===t.entityId);s!==-1&&(r[s].syncStatus="synced",localStorage.setItem(this.STORAGE_KEYS.templates,JSON.stringify(r)))}}}async syncFromServer(){if(navigator.onLine)try{await Promise.all([this.syncMessagesFromServer(),this.syncTemplatesFromServer()]),this.notifyListeners()}catch(t){console.error("Failed to sync from server:",t)}}async syncMessagesFromServer(){var t;try{const s=await lr().communicationsListMessages({per_page:1e3});if(!s.data.success)return;const n=((t=s.data.data)==null?void 0:t.map(o=>({...o,syncStatus:"synced"})))||[],i=this.getMessages(),l=[...n];i.forEach(o=>{n.find(c=>c.id===o.id)||l.push(o)}),localStorage.setItem(this.STORAGE_KEYS.messages,JSON.stringify(l))}catch(r){console.error("Failed to sync messages from server:",r)}}async syncTemplatesFromServer(){var t;try{const s=await lr().communicationsListTemplates();if(!s.data.success)return;const n=((t=s.data.data)==null?void 0:t.map(o=>({...o,syncStatus:"synced"})))||[],i=this.getTemplates(),l=[...n];i.forEach(o=>{n.find(c=>c.id===o.id)||l.push(o)}),localStorage.setItem(this.STORAGE_KEYS.templates,JSON.stringify(l))}catch(r){console.error("Failed to sync templates from server:",r)}}getPendingSyncCount(){const t=this.getMessages().filter(i=>i.syncStatus==="pending"),r=this.getTemplates().filter(i=>i.syncStatus==="pending"),s=localStorage.getItem(this.STORAGE_KEYS.outbox),n=s?JSON.parse(s):[];return{messages:t.length,templates:r.length,outbox:n.length}}isOnline(){return navigator.onLine}isSyncInProgress(){return this.syncInProgress}}const Nr=new cK,dK=()=>{const[e,t]=k.useState({isOnline:navigator.onLine,isSyncing:!1,pendingCount:{messages:0,templates:0,outbox:0}}),r=k.useCallback(()=>{t({isOnline:Nr.isOnline(),isSyncing:Nr.isSyncInProgress(),pendingCount:Nr.getPendingSyncCount()})},[]);k.useEffect(()=>{r();const h=()=>{r(),Nr.syncOutbox(),Nr.syncFromServer()},f=()=>{r()};window.addEventListener("online",h),window.addEventListener("offline",f),Nr.addListener(r);const x=setInterval(()=>{navigator.onLine&&(Nr.syncOutbox(),Nr.syncFromServer())},3e5);return()=>{window.removeEventListener("online",h),window.removeEventListener("offline",f),Nr.removeListener(r),clearInterval(x)}},[r]);const s=k.useCallback(async h=>{await Nr.saveMessage(h),r()},[r]),n=k.useCallback(async(h,f)=>{await Nr.updateMessage(h,f),r()},[r]),i=k.useCallback(h=>Nr.getMessages(h),[]),l=k.useCallback(async h=>{await Nr.saveTemplate(h),r()},[r]),o=k.useCallback(async(h,f)=>{await Nr.updateTemplate(h,f),r()},[r]),c=k.useCallback(async h=>{await Nr.deleteTemplate(h),r()},[r]),d=k.useCallback(h=>Nr.getTemplates(h),[]),u=k.useCallback(async()=>{await Nr.syncOutbox(),await Nr.syncFromServer(),r()},[r]);return{syncStatus:e,saveMessage:s,updateMessage:n,getMessages:i,saveTemplate:l,updateTemplate:o,deleteTemplate:c,getTemplates:d,forcSync:u}},H2=[{id:"appointment_reminder",name:"Randevu Hatrlatmas",type:"sms",content:"Sayn {{patientName}}, {{appointmentDate}} tarihinde saat {{appointmentTime}}'da randevunuz bulunmaktadr. Teekkrler.",category:"appointment"},{id:"follow_up",name:"Tedavi Sonras Takip",type:"sms",content:"Sayn {{patientName}}, tedaviniz sonras durumunuz nasl? Herhangi bir sorunuz varsa bize ulaabilirsiniz.",category:"follow_up"},{id:"payment_reminder",name:"deme Hatrlatmas",type:"sms",content:"Sayn {{patientName}}, {{amount}} TL tutarndaki demenizin son tarihi {{dueDate}}'dir. Teekkrler.",category:"reminder"},{id:"welcome_email",name:"Ho Geldiniz E-postas",type:"email",subject:"Kliniimize Ho Geldiniz",content:`Sayn {{patientName}},

Kliniimizi tercih ettiiniz iin teekkr ederiz. Size en iyi hizmeti sunmak iin buradayz.

Sayglarmzla,
Klinik Ekibi`,category:"general"}],uK=({patient:e,onClose:t})=>{const[r,s]=k.useState("send"),[n,i]=k.useState("sms"),[l,o]=k.useState(""),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,x]=k.useState(""),[p,m]=k.useState(""),[y,g]=k.useState(!1),[v,b]=k.useState(!1),[S,D]=k.useState(""),[N,E]=k.useState("all"),{getMessages:w,getTemplates:_,saveMessage:C,syncStatus:T}=dK(),{success:j,error:F}=Hl(),O=k.useMemo(()=>w().filter(P=>P.patientId===e.id||P.recipient===e.phone||P.recipient===e.email),[w,e.id,e.phone,e.email]),z=k.useMemo(()=>O.filter(L=>{var P,I;if(N!=="all"&&L.status!==N)return!1;if(S){const R=S.toLowerCase();if(!(((P=L.content)==null?void 0:P.toLowerCase().includes(R))||((I=L.subject)==null?void 0:I.toLowerCase().includes(R))))return!1}return!0}),[O,N,S]),G=k.useCallback(L=>{o(L);const P=H2.find(I=>I.id===L);if(P){let I=P.content;const R=`${e.firstName||""} ${e.lastName||""}`.trim();I=I.replace(/\{\{patientName\}\}/g,R||""),I=I.replace(/\{\{patientPhone\}\}/g,e.phone||""),I=I.replace(/\{\{patientEmail\}\}/g,e.email||""),d(I),h(P.subject||""),i(P.type)}},[e]),q=k.useCallback(async()=>{if(!c.trim()){F("Mesaj ierii bo olamaz");return}const L=n==="sms"?e.phone:e.email;if(!L){F(`Hasta ${n==="sms"?"telefon numaras":"e-posta adresi"} bulunamad`);return}b(!0);try{const P=y&&f&&p?new Date(`${f}T${p}`).toISOString():void 0,I={type:n,recipient:L,recipientName:`${e.firstName||""} ${e.lastName||""}`.trim()||"simsiz Hasta",patientId:e.id,subject:n==="email"?u:void 0,content:c,templateId:l||void 0,scheduledAt:P,status:P?"scheduled":"sent",messageType:"manual",sentAt:P?void 0:new Date().toISOString()};await C({...I,id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString()}),j(P?"Mesaj zamanland":"Mesaj gnderildi"),d(""),h(""),o(""),g(!1),x(""),m("")}catch(P){F("Mesaj gnderme srasnda hata olutu: "+(P instanceof Error?P.message:"Bilinmeyen hata"))}finally{b(!1)}},[c,n,e,u,y,f,p,l,C,j,F]),H=L=>{switch(L){case"sent":return a.jsx(wd,{className:"w-4 h-4 text-blue-500"});case"delivered":return a.jsx(St,{className:"w-4 h-4 text-green-500"});case"failed":return a.jsx(mt,{className:"w-4 h-4 text-red-500"});case"scheduled":return a.jsx(Xt,{className:"w-4 h-4 text-yellow-500"});default:return a.jsx(Xt,{className:"w-4 h-4 text-gray-500"})}},A=L=>{switch(L){case"sent":return"Gnderildi";case"delivered":return"Teslim Edildi";case"failed":return"Baarsz";case"scheduled":return"Zamanland";case"draft":return"Taslak";default:return L}},V=L=>{switch(L){case"sent":return"bg-blue-100 text-blue-800";case"delivered":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return T?a.jsxs("div",{className:"space-y-6",children:[a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:a.jsx(Mt,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:`${e.firstName||""} ${e.lastName||""}`.trim()||"simsiz Hasta"}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[e.phone&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ii,{className:"w-4 h-4"}),a.jsx("span",{children:e.phone})]}),e.email&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(r5,{className:"w-4 h-4"}),a.jsx("span",{children:e.email})]})]})]}),t&&a.jsx(Z,{variant:"outline",size:"sm",onClick:t,children:"Kapat"})]})}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>s("send"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="send"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wd,{className:"w-4 h-4"}),a.jsx("span",{children:"Mesaj Gnder"})]})}),a.jsx("button",{onClick:()=>s("history"),className:`py-2 px-1 border-b-2 font-medium text-sm ${r==="history"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(g5,{className:"w-4 h-4"}),a.jsxs("span",{children:["Mesaj Gemii (",O.length,")"]})]})})]})}),r==="send"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Bt,{className:"p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Mesaj Tr"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"messageType",value:"sms",checked:n==="sms",onChange:L=>i(L.target.value),className:"mr-2"}),a.jsx(Za,{className:"w-4 h-4 mr-1"}),"SMS"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"messageType",value:"email",checked:n==="email",onChange:L=>i(L.target.value),className:"mr-2"}),a.jsx(Ml,{className:"w-4 h-4 mr-1"}),"E-posta"]})]})]}),a.jsxs(Bt,{className:"p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Hzl ablonlar"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:H2.filter(L=>L.type===n).map(L=>a.jsxs("button",{onClick:()=>G(L.id),className:`p-3 text-left border rounded-lg hover:bg-gray-50 transition-colors ${l===L.id?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:L.name}),a.jsx("div",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:L.content})]},L.id))})]}),a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"space-y-4",children:[n==="email"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konu"}),a.jsx(ye,{value:u,onChange:L=>h(L.target.value),placeholder:"E-posta konusu"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mesaj erii"}),a.jsx(wr,{value:c,onChange:L=>d(L.target.value),placeholder:`${n==="sms"?"SMS":"E-posta"} ieriini yazn...`,rows:n==="sms"?4:8,className:"resize-none"}),n==="sms"&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[c.length,"/160 karakter"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx(kn,{checked:y,onChange:L=>g(L.target.checked)}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Mesaj zamanla"})]}),y&&a.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarih"}),a.jsx(ye,{type:"date",value:f,onChange:L=>x(L.target.value),min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saat"}),a.jsx(ye,{type:"time",value:p,onChange:L=>m(L.target.value)})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(Z,{onClick:q,disabled:v||!c.trim(),className:"flex items-center space-x-2",children:[v?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(wd,{className:"w-4 h-4"}),a.jsx("span",{children:y?"Zamanla":"Gnder"})]})})]})})]}),r==="history"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ye,{placeholder:"Mesajlarda ara...",value:S,onChange:L=>D(L.target.value),className:"w-full"})}),a.jsx(Ue,{value:N,onChange:L=>E(L.target.value),options:[{value:"all",label:"Tm Durumlar"},{value:"sent",label:"Gnderildi"},{value:"delivered",label:"Teslim Edildi"},{value:"failed",label:"Baarsz"},{value:"scheduled",label:"Zamanland"}]})]})}),z.length>0?a.jsx("div",{className:"space-y-3",children:z.map(L=>a.jsx(Bt,{className:"p-4",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[L.type==="sms"?a.jsx(Za,{className:"w-4 h-4 text-blue-500"}):a.jsx(Ml,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"font-medium text-sm",children:L.type.toUpperCase()})]}),a.jsx(jt,{className:V(L.status),children:a.jsxs("div",{className:"flex items-center space-x-1",children:[H(L.status),a.jsx("span",{children:A(L.status)})]})})]}),L.subject&&a.jsx("div",{className:"font-medium text-gray-900 mb-1",children:L.subject}),a.jsx("div",{className:"text-sm text-gray-700 mb-2 line-clamp-3",children:L.content}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsxs("span",{children:["Oluturulma: ",new Date(L.createdAt).toLocaleString("tr-TR")]}),L.sentAt&&a.jsxs("span",{children:["Gnderilme: ",new Date(L.sentAt).toLocaleString("tr-TR")]}),L.deliveredAt&&a.jsxs("span",{children:["Teslim: ",new Date(L.deliveredAt).toLocaleString("tr-TR")]})]})]})})},L.id))}):a.jsxs(Bt,{className:"p-8 text-center",children:[a.jsx(Za,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mesaj bulunamad"}),a.jsx("p",{className:"text-gray-600",children:S||N!=="all"?"Arama kriterlerinize uygun mesaj bulunamad.":"Bu hasta ile henz mesaj alverii yaplmam."})]})]})]}):a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"letiim sistemi ykleniyor..."})]})})};function qc({field:e,label:t,sortBy:r,sortOrder:s,onSort:n}){const i=r===e;return a.jsxs("button",{onClick:()=>n==null?void 0:n(e),className:`flex items-center space-x-1 text-left font-medium text-gray-700 hover:text-gray-900 ${i?"text-blue-600":""}`,children:[a.jsx("span",{children:t}),i&&a.jsx("span",{className:"text-xs",children:s==="asc"?"":""})]})}function hK({patients:e,loading:t=!1,selectedPatients:r=[],onPatientSelect:s,onPatientClick:n,onEdit:i,onDelete:l,onBulkAction:o,showSelection:c=!1,showActions:d=!0,viewMode:u="list",sortBy:h,sortOrder:f,onSort:x,className:p=""}){const[m,y]=k.useState(null),[g,v]=k.useState(null),b=k.useMemo(()=>e.length>0&&e.every(T=>T.id&&r.includes(T.id)),[e,r]),S=k.useMemo(()=>r.length>0&&!b,[r,b]),D=k.useCallback(()=>{b?e.forEach(T=>T.id&&(s==null?void 0:s(T.id))):e.forEach(T=>{T.id&&!r.includes(T.id)&&(s==null||s(T.id))})},[e,r,b,s]),N=T=>{switch(T){case"ACTIVE":return a.jsx(jt,{variant:"success",size:"sm",children:"Aktif"});case"INACTIVE":return a.jsx(jt,{variant:"warning",size:"sm",children:"Pasif"});default:return a.jsx(jt,{variant:"secondary",size:"sm",children:"Bilinmiyor"})}},E=T=>{if(!T)return"-";try{return new Date(T).toLocaleDateString("tr-TR")}catch{return"-"}},w=T=>{if(!T)return"-";const j=T.replace(/\D/g,"");return j.length===11&&j.startsWith("0")?`${j.slice(0,4)} ${j.slice(4,7)} ${j.slice(7,9)} ${j.slice(9)}`:T},_=T=>{if(!T)return a.jsx(jt,{variant:"secondary",size:"sm",children:"-"});switch(T.toUpperCase()){case"PREMIUM":return a.jsx(jt,{variant:"success",size:"sm",children:"Premium"});case"STANDARD":return a.jsx(jt,{variant:"default",size:"sm",children:"Standard"});case"BASIC":return a.jsx(jt,{variant:"secondary",size:"sm",children:"Basic"});default:return a.jsx(jt,{variant:"secondary",size:"sm",children:T})}},C=T=>{if(!T)return a.jsx(jt,{variant:"secondary",size:"sm",children:"-"});switch(T.toLowerCase()){case"organic":return a.jsx(jt,{variant:"success",size:"sm",children:"Organik"});case"referral":return a.jsx(jt,{variant:"default",size:"sm",children:"Referans"});case"marketing":return a.jsx(jt,{variant:"warning",size:"sm",children:"Pazarlama"});case"social":return a.jsx(jt,{variant:"primary",size:"sm",children:"Sosyal"});default:return a.jsx(jt,{variant:"secondary",size:"sm",children:T})}};return t?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(bp,{size:"lg"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Hastalar ykleniyor..."})]}):e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Mt,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Hasta bulunamad"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Arama kriterlerinizi deitirmeyi deneyin."})]}):u==="grid"?a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ${p}`,children:e.map(T=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n==null?void 0:n(T),onMouseEnter:()=>y(T.id||null),onMouseLeave:()=>y(null),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[c&&a.jsx(kn,{checked:T.id?r.includes(T.id):!1,onChange:()=>T.id&&(s==null?void 0:s(T.id)),onClick:j=>j.stopPropagation()}),a.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:[T.firstName," ",T.lastName]})]}),a.jsxs("div",{className:"mt-2 space-y-1",children:[T.tcNumber&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(_a,{className:"h-3 w-3 mr-1"}),T.tcNumber]}),T.phone&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Ii,{className:"h-3 w-3 mr-1"}),w(T.phone)]}),T.email&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(Ml,{className:"h-3 w-3 mr-1"}),T.email]})]}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[N(T.status),T.createdAt&&a.jsx("span",{className:"text-xs text-gray-400",children:E(T.createdAt)})]})]}),d&&m===T.id&&a.jsxs("div",{className:"flex space-x-1",children:[a.jsx(Z,{variant:"ghost",size:"sm",onClick:j=>{j.stopPropagation(),i==null||i(T)},children:a.jsx(rn,{className:"h-3 w-3"})}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:j=>{j.stopPropagation(),l==null||l(T)},children:a.jsx(Es,{className:"h-3 w-3"})})]})]})},T.id))}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`bg-white shadow-sm border border-gray-200 rounded-lg overflow-hidden ${p}`,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[c&&a.jsx("th",{className:"px-4 py-3 text-left w-12",children:a.jsx(kn,{checked:b,indeterminate:S,onChange:D})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[200px]",children:a.jsx(qc,{field:"firstName",label:"Ad Soyad",sortBy:h,sortOrder:f,onSort:x})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:a.jsx(qc,{field:"tcNumber",label:"TC Kimlik",sortBy:h,sortOrder:f,onSort:x})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[140px]",children:a.jsx(qc,{field:"phone",label:"Telefon",sortBy:h,sortOrder:f,onSort:x})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"Segment"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:"Kazanm Durumu"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:a.jsx(qc,{field:"status",label:"Durum",sortBy:h,sortOrder:f,onSort:x})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:a.jsx(qc,{field:"createdAt",label:"Kayt Tarihi",sortBy:h,sortOrder:f,onSort:x})}),d&&a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[160px]",children:"lemler"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(T=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>n==null?void 0:n(T),onMouseEnter:()=>y(T.id||null),onMouseLeave:()=>y(null),children:[c&&a.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:a.jsx(kn,{checked:T.id?r.includes(T.id):!1,onChange:()=>T.id&&(s==null?void 0:s(T.id)),onClick:j=>j.stopPropagation()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center",children:a.jsx(Mt,{className:"h-5 w-5 text-blue-600"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[T.firstName," ",T.lastName]}),T.email&&a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[180px]",children:T.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:T.tcNumber||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(T.phone)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_(T.segment)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(T.acquisitionType)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(T.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E(T.createdAt)}),d&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[a.jsx(Z,{variant:"ghost",size:"sm",onClick:j=>{j.stopPropagation(),i==null||i(T)},className:"h-8 w-8 p-0 hover:bg-blue-50 hover:text-blue-600",title:"Dzenle",children:a.jsx(rn,{className:"h-4 w-4"})}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:j=>{j.stopPropagation(),v(T)},className:"h-8 w-8 p-0 hover:bg-green-50 hover:text-green-600",title:"letiim",children:a.jsx(Za,{className:"h-4 w-4"})}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:j=>{j.stopPropagation(),l==null||l(T)},className:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-600",title:"Sil",children:a.jsx(Es,{className:"h-4 w-4"})})]})})]},T.id))})]})})}),g&&a.jsx(cr,{isOpen:!0,onClose:()=>v(null),title:`letiim - ${g.firstName} ${g.lastName}`,size:"xl",children:a.jsx(uK,{patient:g,onClose:()=>v(null)})})]})}function fK({value:e,onChange:t,onSearch:r,onFiltersChange:s,onClear:n,results:i=[],isSearching:l=!1,placeholder:o="Hasta ara... (ad, soyad, telefon, TC)",className:c="",debounceMs:d=300,disabled:u=!1,showRecentSearches:h=!0,showFilters:f=!1,initialFilters:x={}}){const[p,m]=k.useState(e),[y,g]=k.useState(!1),[v,b]=k.useState(!1),[S,D]=k.useState(!1),[N,E]=k.useState(x),[w,_]=k.useState([]),C=k.useRef(null),T=k.useRef(null);k.useEffect(()=>{if(h){const I=localStorage.getItem("patient-recent-searches");if(I)try{const R=JSON.parse(I);_(R.map(U=>({...U,timestamp:new Date(U.timestamp)})))}catch(R){console.error("Failed to load recent searches:",R)}}},[h]),k.useEffect(()=>{const I=setTimeout(()=>{p!==e&&(t(p),r&&p.trim().length>=2&&r(p.trim()))},d);return()=>clearTimeout(I)},[p,t,e,d,r]),k.useEffect(()=>{e!==p&&m(e)},[e]);const j=k.useCallback((I,R)=>{if(!h||!I.trim()||I.length<2)return;const M=[{id:Date.now().toString(),query:I.trim(),timestamp:new Date,resultCount:R},...w.filter(J=>J.query!==I.trim())].slice(0,10);_(M),localStorage.setItem("patient-recent-searches",JSON.stringify(M))},[w,h]),F=k.useCallback(I=>{const R=I.target.value;m(R);const U={...N,query:R};E(U),s==null||s(U),R.length>0||h&&w.length>0?b(!0):b(!1)},[h,w.length,N,s]),O=k.useCallback((I,R)=>{const U={...N,[I]:R};E(U),s==null||s(U)},[N,s]),z=k.useCallback(()=>{const I={query:p};E(I),s==null||s(I)},[p,s]),G=bt.useMemo(()=>Object.entries(N).filter(([I,R])=>I!=="query"&&R&&(Array.isArray(R)?R.length>0:!0)).length,[N]),q=k.useCallback(()=>{var I;m(""),t(""),n==null||n(),b(!1),(I=C.current)==null||I.focus()},[t,n]),H=k.useCallback(()=>{g(!0),(p.length>0||h&&w.length>0)&&b(!0)},[p,h,w.length]),A=k.useCallback(()=>{g(!1),setTimeout(()=>b(!1),200)},[]),V=k.useCallback(I=>{var R;I.key==="Enter"?(I.preventDefault(),r&&p.trim()&&(r(p.trim()),j(p.trim(),i.length),b(!1))):I.key==="Escape"&&(b(!1),(R=C.current)==null||R.blur())},[r,p,j,i.length]),L=k.useCallback(I=>{m(I),t(I),r&&r(I),b(!1)},[t,r]),P=k.useCallback(()=>{_([]),localStorage.removeItem("patient-recent-searches")},[]);return k.useEffect(()=>{const I=R=>{T.current&&!T.current.contains(R.target)&&C.current&&!C.current.contains(R.target)&&b(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),a.jsxs("div",{className:`relative ${c}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l?a.jsx(bp,{className:"h-5 w-5 text-gray-400"}):a.jsx(Lr,{className:"h-5 w-5 text-gray-400"})}),a.jsx(ye,{ref:C,type:"text",value:p,onChange:F,onKeyDown:V,onFocus:H,onBlur:A,placeholder:o,disabled:u,className:`pl-10 ${p?"pr-20":"pr-4"} ${f?"pr-28":""} ${y?"ring-2 ring-blue-500":""}`}),p&&a.jsx("button",{type:"button",onClick:q,className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:u,children:a.jsx(vr,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})}),f&&a.jsx("button",{type:"button",onClick:()=>D(!S),className:`absolute inset-y-0 ${p?"right-8":"right-0"} pr-3 flex items-center`,disabled:u,children:a.jsxs("div",{className:"relative",children:[a.jsx(Ea,{className:`h-5 w-5 ${S?"text-blue-600":"text-gray-400"} hover:text-gray-600`}),G>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:G})]})})]}),f&&S&&a.jsxs("div",{className:"absolute z-40 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Gelimi Filtreler"}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:z,className:"text-xs",children:"Temizle"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Durum"}),a.jsxs("select",{value:N.status||"",onChange:I=>O("status",I.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Tm"}),a.jsx("option",{value:"active",children:"Aktif"}),a.jsx("option",{value:"inactive",children:"Pasif"}),a.jsx("option",{value:"pending",children:"Beklemede"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Segment"}),a.jsxs("select",{value:N.segment||"",onChange:I=>O("segment",I.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Tm"}),a.jsx("option",{value:"trial",children:"Deneme"}),a.jsx("option",{value:"purchased",children:"Satn Alnm"}),a.jsx("option",{value:"lead",children:"Potansiyel"}),a.jsx("option",{value:"follow_up",children:"Takip"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Kazanm Tr"}),a.jsxs("select",{value:N.acquisitionType||"",onChange:I=>O("acquisitionType",I.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Tm"}),a.jsx("option",{value:"referral",children:"Referans"}),a.jsx("option",{value:"online",children:"Online"}),a.jsx("option",{value:"walk-in",children:"Yryerek Gelen"}),a.jsx("option",{value:"social-media",children:"Sosyal Medya"}),a.jsx("option",{value:"advertisement",children:"Reklam"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Balang Tarihi"}),a.jsx("input",{type:"date",value:N.dateFrom||"",onChange:I=>O("dateFrom",I.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Biti Tarihi"}),a.jsx("input",{type:"date",value:N.dateTo||"",onChange:I=>O("dateTo",I.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"ube"}),a.jsxs("select",{value:N.branchId||"",onChange:I=>O("branchId",I.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Tm ubeler"}),a.jsx("option",{value:"branch-1",children:"Merkez ube"}),a.jsx("option",{value:"branch-2",children:"Kadky ube"}),a.jsx("option",{value:"branch-3",children:"Beikta ube"})]})]})]})]}),v&&!S&&a.jsxs("div",{ref:T,className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:[p.length>0&&a.jsx("div",{children:l?a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(bp,{className:"h-6 w-6 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Aranyor..."})]}):i.length>0?a.jsxs("div",{children:[a.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 bg-gray-50 border-b",children:["Arama Sonular (",i.length,")"]}),i.slice(0,8).map(I=>a.jsx("div",{className:"px-3 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>console.log("Select patient:",I.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-gray-400"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[I.firstName," ",I.lastName]}),a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${I.status==="ACTIVE"?"bg-green-100 text-green-800":I.status==="INACTIVE"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:I.status==="ACTIVE"?"Aktif":I.status==="INACTIVE"?"Pasif":"Ariv"})]}),a.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[I.phone&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ii,{className:"h-3 w-3"}),a.jsx("span",{children:I.phone})]}),a.jsxs("span",{children:["Kayt: ",new Date(I.registrationDate).toLocaleDateString("tr-TR")]}),I.deviceCount>0&&a.jsxs("span",{className:"text-blue-600",children:[I.deviceCount," cihaz"]})]})]}),a.jsxs("div",{className:"text-right",children:[I.priority>0&&a.jsxs("div",{className:"text-xs text-orange-600 font-medium",children:["ncelik: ",I.priority]}),I.outstandingBalance>0&&a.jsxs("div",{className:"text-xs text-red-600",children:["Bor: ",I.outstandingBalance.toLocaleString("tr-TR")]})]})]})},I.id)),i.length>8&&a.jsxs("div",{className:"px-3 py-2 text-center text-sm text-gray-500 bg-gray-50",children:["+",i.length-8," hasta daha"]})]}):p.length>=2?a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(Mt,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"Hasta bulunamad"}),a.jsx("p",{className:"text-xs mt-1",children:"Farkl arama terimleri deneyin"})]}):null}),h&&p.length===0&&w.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs font-medium text-gray-500 bg-gray-50 border-b",children:[a.jsx("span",{children:"Son Aramalar"}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:P,className:"text-xs p-1 h-auto",children:"Temizle"})]}),w.slice(0,5).map(I=>a.jsx("div",{className:"px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>L(I.query),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Xt,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900",children:I.query})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[I.resultCount," sonu"]})]})},I.id))]}),p.length===0&&w.length===0&&a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(Lr,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),a.jsx("p",{className:"text-sm",children:"Hasta aramaya balayn"}),a.jsx("p",{className:"text-xs mt-1",children:"Ad, soyad, telefon veya TC ile arayabilirsiniz"})]})]})]})}function mK({filters:e,onChange:t,onClearFilters:r,patientCount:s=0,loading:n=!1,className:i="",showCompact:l=!1}){var y,g;const[o,c]=k.useState(!l),d=k.useCallback((v,b)=>{t({...e,[v]:b})},[e,t]),u=Object.entries(e).some(([v,b])=>v==="query"?!1:Array.isArray(b)?b.length>0:b!=null&&b!==""),h=[{value:"active",label:"Aktif"},{value:"inactive",label:"Pasif"},{value:"pending",label:"Beklemede"}],f=[{value:"trial",label:"Deneme"},{value:"purchased",label:"Satn Alnm"},{value:"lead",label:"Potansiyel"},{value:"follow_up",label:"Takip"}],x=[{value:"branch-1",label:"Merkez ube"},{value:"branch-2",label:"Kadky ube"},{value:"branch-3",label:"Beikta ube"}],p=k.useCallback(v=>{const b=e.tags||[];b.includes(v)||d("tags",[...b,v])},[e.tags,d]),m=k.useCallback(v=>{const b=e.tags||[];d("tags",b.filter(S=>S!==v))},[e.tags,d]);return l&&!o?a.jsxs("div",{className:`flex items-center space-x-2 ${i}`,children:[a.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"flex items-center space-x-2",children:[a.jsx(Ea,{className:"h-4 w-4"}),a.jsx("span",{children:"Filtreler"}),u&&a.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-0.5",children:Object.entries(e).filter(([v,b])=>v!=="query"&&b&&(Array.isArray(b)?b.length>0:!0)).length})]}),u&&a.jsxs(Z,{variant:"ghost",size:"sm",onClick:r,className:"text-gray-500 hover:text-gray-700",children:[a.jsx(vr,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Filtreleri temizle"})]})]}):a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ea,{className:"w-5 h-5 text-gray-500"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filtreler"}),u&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Aktif"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",s," hasta)"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[u&&a.jsxs(Z,{variant:"outline",size:"sm",onClick:r,disabled:n,className:"flex items-center space-x-1",children:[a.jsx(vr,{className:"w-4 h-4"}),a.jsx("span",{children:"Temizle"})]}),l&&a.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:a.jsx(oS,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Zs,{className:"h-4 w-4 text-gray-500"}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Durum"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(v=>{var b;return a.jsxs("button",{onClick:()=>{var S;return d("status",(S=e.status)!=null&&S.includes(v.value)?e.status.filter(D=>D!==v.value):[...e.status||[],v.value])},className:`px-3 py-1.5 text-sm rounded-full border transition-colors ${(b=e.status)!=null&&b.includes(v.value)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[v.label,v.count!==void 0&&v.count>0&&a.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",v.count,")"]})]},v.value)})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Mi,{className:"h-4 w-4 text-gray-500"}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Segment"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(v=>{var b;return a.jsxs("button",{onClick:()=>{var S;return d("segment",(S=e.segment)!=null&&S.includes(v.value)?e.segment.filter(D=>D!==v.value):[...e.segment||[],v.value])},className:`px-3 py-1.5 text-sm rounded-full border transition-colors ${(b=e.segment)!=null&&b.includes(v.value)?"bg-green-100 border-green-300 text-green-800":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[v.label,v.count!==void 0&&v.count>0&&a.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",v.count,")"]})]},v.value)})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(pt,{className:"h-4 w-4 text-gray-500"}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Tarih Aral"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Balang"}),a.jsx("input",{type:"date",value:((y=e.registrationDateRange)==null?void 0:y.start)||"",onChange:v=>d("registrationDateRange",v.target.value?{...e.registrationDateRange,start:v.target.value}:void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Biti"}),a.jsx("input",{type:"date",value:((g=e.registrationDateRange)==null?void 0:g.end)||"",onChange:v=>d("registrationDateRange",v.target.value?{...e.registrationDateRange,end:v.target.value}:void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(iS,{className:"h-4 w-4 text-gray-500"}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"ube"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(v=>a.jsxs("button",{onClick:()=>d("branchId",e.branchId===v.value?void 0:v.value),className:`px-3 py-1.5 text-sm rounded-full border transition-colors ${e.branchId===v.value?"bg-orange-100 border-orange-300 text-orange-800":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[v.label,v.count!==void 0&&v.count>0&&a.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",v.count,")"]})]},v.value))})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Mi,{className:"h-4 w-4 text-gray-500"}),a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Etiketler"})]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.tags.map(v=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[v,a.jsx("button",{onClick:()=>m(v),className:"ml-1 hover:text-blue-600",children:a.jsx(vr,{className:"h-3 w-3"})})]},v))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",placeholder:"Etiket ekle...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:v=>{if(v.key==="Enter"){const b=v.target,S=b.value.trim();S&&(p(S),b.value="")}}}),a.jsx(Z,{variant:"outline",size:"sm",onClick:v=>{var D;const b=(D=v.target.parentElement)==null?void 0:D.querySelector("input"),S=b==null?void 0:b.value.trim();S&&b&&(p(S),b.value="")},children:"Ekle"})]})]})]})]})}const xK=({selectedPatients:e,totalPatients:t,onSelectAll:r,onDeselectAll:s,onBulkAddTag:n,onBulkRemoveTag:i,onBulkSendSMS:l,onBulkSendEmail:o,onBulkExport:c,onBulkStatusChange:d,onBulkDelete:u,onBulkScheduleAppointment:h,onBulkAssignToSegment:f,availableTags:x=[],availableSegments:p=[],className:m="",loading:y=!1,disabled:g=!1})=>{var V;const[v,b]=k.useState(!1),[S,D]=k.useState(null),[N,E]=k.useState(""),[w,_]=k.useState({}),[C,T]=k.useState(!1),j=e.length,F=k.useMemo(()=>[{id:"add-tag",name:"Etiket Ekle",icon:Mi,color:"text-blue-600",bgColor:"bg-blue-100",description:"Seili hastalara etiket ekle",requiresInput:!0,inputType:"select",inputPlaceholder:"Etiket sein veya yeni etiket yazn",inputOptions:x.map(L=>({value:L,label:L})),category:"organization",minSelection:1},{id:"remove-tag",name:"Etiket Kaldr",icon:Mi,color:"text-orange-600",bgColor:"bg-orange-100",description:"Seili hastalardan etiket kaldr",requiresInput:!0,inputType:"select",inputPlaceholder:"Kaldrlacak etiketi sein",inputOptions:x.map(L=>({value:L,label:L})),category:"organization",minSelection:1},{id:"send-sms",name:"SMS Gnder",icon:Za,color:"text-green-600",bgColor:"bg-green-100",description:"Seili hastalara SMS gnder",requiresInput:!0,inputType:"textarea",inputPlaceholder:"SMS mesajnz yazn...",category:"communication",minSelection:1,maxSelection:100},{id:"send-email",name:"E-posta Gnder",icon:Ml,color:"text-purple-600",bgColor:"bg-purple-100",description:"Seili hastalara e-posta gnder",requiresInput:!0,inputType:"textarea",inputPlaceholder:"E-posta mesajnz yazn...",category:"communication",minSelection:1,maxSelection:50},{id:"export-csv",name:"CSV Da Aktar",icon:yr,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Seili hastalar CSV formatnda da aktar",category:"data",minSelection:1},{id:"export-excel",name:"Excel Da Aktar",icon:wt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Seili hastalar Excel formatnda da aktar",category:"data",minSelection:1},{id:"activate",name:"Aktifletir",icon:I5,color:"text-green-600",bgColor:"bg-green-100",description:"Seili hastalar aktif duruma getir",requiresConfirmation:!0,category:"status",minSelection:1},{id:"deactivate",name:"Pasifletir",icon:M5,color:"text-yellow-600",bgColor:"bg-yellow-100",description:"Seili hastalar pasif duruma getir",requiresConfirmation:!0,category:"status",minSelection:1},{id:"archive",name:"Arivle",icon:nS,color:"text-gray-600",bgColor:"bg-gray-100",description:"Seili hastalar arivle",requiresConfirmation:!0,category:"status",minSelection:1},{id:"assign-segment",name:"Segment Ata",icon:Zs,color:"text-cyan-600",bgColor:"bg-cyan-100",description:"Seili hastalar bir segmente ata",requiresInput:!0,inputType:"select",inputPlaceholder:"Segment sein",inputOptions:p.map(L=>({value:L,label:L})),category:"organization",minSelection:1},{id:"schedule-appointment",name:"Randevu Planla",icon:pt,color:"text-pink-600",bgColor:"bg-pink-100",description:"Seili hastalar iin randevu planla",requiresInput:!0,inputType:"text",inputPlaceholder:"Randevu notlar (opsiyonel)",category:"organization",minSelection:1,maxSelection:20},{id:"delete",name:"Sil",icon:Es,color:"text-red-600",bgColor:"bg-red-100",description:"Seili hastalar kalc olarak sil",requiresConfirmation:!0,category:"dangerous",minSelection:1}],[x,p]),O=k.useMemo(()=>F.filter(L=>!(L.minSelection&&j<L.minSelection||L.maxSelection&&j>L.maxSelection)),[F,j]),z=k.useMemo(()=>{const L={};return O.forEach(P=>{L[P.category]||(L[P.category]=[]),L[P.category].push(P)}),L},[O]),G={communication:"letiim",data:"Veri lemleri",status:"Durum Deiiklikleri",organization:"Organizasyon",dangerous:"Tehlikeli lemler"},q=k.useCallback(L=>{g||y||(D(L),E(""),_({}),L.requiresInput||L.requiresConfirmation?b(!0):H(L))},[g,y]),H=k.useCallback(async(L,P)=>{if(!(!L||j===0)){T(!0);try{switch(L.id){case"add-tag":await n(P||N);break;case"remove-tag":await i(P||N);break;case"send-sms":await l(P||N,[]);break;case"send-email":await o("Toplu E-posta",P||N,[]);break;case"export-csv":await c("csv");break;case"export-excel":await c("excel");break;case"activate":await d("active");break;case"deactivate":await d("inactive");break;case"archive":await d("archived");break;case"assign-segment":await f(P||N);break;case"schedule-appointment":await h({notes:P||N});break;case"delete":await u();break}b(!1),D(null)}catch(I){console.error("Bulk action failed:",I)}finally{T(!1)}}},[j,N,n,i,l,o,c,d,u,h,f]),A=k.useCallback(()=>{S&&H(S,N)},[S,N,H]);return j===0?a.jsx("div",{className:`bg-gray-50 border border-gray-200 rounded-lg p-4 ${m}`,children:a.jsxs("div",{className:"flex items-center justify-center text-gray-500",children:[a.jsx(ub,{className:"w-5 h-5 mr-2"}),a.jsx("span",{children:"Toplu ilem yapmak iin hasta sein"})]})}):a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm ${m}`,children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ub,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsxs("span",{className:"font-medium text-blue-900",children:[j," hasta seili"]}),j<t&&a.jsxs("button",{onClick:r,className:"ml-3 text-sm text-blue-600 hover:text-blue-800 underline",disabled:g||y,children:["Tmn se (",t,")"]})]}),a.jsxs("button",{onClick:s,className:"text-sm text-gray-600 hover:text-gray-800 flex items-center",disabled:g||y,children:[a.jsx(vr,{className:"w-4 h-4 mr-1"}),"Seimi temizle"]})]})}),a.jsx("div",{className:"p-4",children:Object.entries(z).map(([L,P])=>a.jsxs("div",{className:"mb-6 last:mb-0",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:G[L]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:P.map(I=>{const R=I.icon,U=g||y||C,M=I.category==="dangerous";return a.jsxs("button",{onClick:()=>q(I),disabled:U,className:`
                      relative p-3 rounded-lg border transition-all duration-200
                      ${U?"opacity-50 cursor-not-allowed":"hover:shadow-md hover:-translate-y-0.5"}
                      ${M?"border-red-200 hover:border-red-300 hover:bg-red-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
                    `,title:I.description,children:[a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:`w-8 h-8 ${I.bgColor} rounded-full flex items-center justify-center mb-2`,children:a.jsx(R,{className:`w-4 h-4 ${I.color}`})}),a.jsx("span",{className:"text-xs font-medium text-gray-700 leading-tight",children:I.name})]}),(I.minSelection||I.maxSelection)&&a.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:I.maxSelection?`${I.maxSelection}`:`${I.minSelection}`})]},I.id)})})]},L))}),v&&S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:S.name}),a.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",disabled:C,children:a.jsx(vr,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:S.description}),S.category==="dangerous"&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(os,{className:"w-5 h-5 text-red-600 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-red-800",children:"Bu ilem geri alnamaz!"})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("span",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:j})," hasta etkilenecek"]})}),S.requiresInput&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:S.inputPlaceholder}),S.inputType==="textarea"?a.jsx("textarea",{value:N,onChange:L=>E(L.target.value),placeholder:S.inputPlaceholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,disabled:C}):S.inputType==="select"?a.jsxs("div",{children:[a.jsxs("select",{value:N,onChange:L=>E(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:C,children:[a.jsx("option",{value:"",children:"Sein..."}),(V=S.inputOptions)==null?void 0:V.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))]}),(S.id==="add-tag"||S.id==="remove-tag")&&a.jsx("div",{className:"mt-2",children:a.jsx("input",{type:"text",value:N,onChange:L=>E(L.target.value),placeholder:"Veya yeni etiket yazn...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:C})})]}):a.jsx("input",{type:"text",value:N,onChange:L=>E(L.target.value),placeholder:S.inputPlaceholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:C})]})]}),a.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:C,children:"ptal"}),a.jsx("button",{onClick:A,disabled:C||S.requiresInput&&!N.trim(),className:`
                  px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2
                  ${S.category==="dangerous"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}
                  ${C||S.requiresInput&&!N.trim()?"opacity-50 cursor-not-allowed":""}
                `,children:C?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"leniyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(wd,{className:"w-4 h-4 mr-2 inline"}),S.name]})})]})]})})]})},pK=({onUpload:e,className:t=""})=>{const[r,s]=k.useState({status:"idle"}),[n,i]=k.useState(!1),l=k.useRef(null),o=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?i(!0):x.type==="dragleave"&&i(!1)},c=x=>{x.preventDefault(),x.stopPropagation(),i(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&u(x.dataTransfer.files[0])},d=x=>{x.preventDefault(),x.target.files&&x.target.files[0]&&u(x.target.files[0])},u=async x=>{if(!x.name.toLowerCase().endsWith(".csv")){s({status:"error",message:"Ltfen sadece CSV dosyas ykleyin"});return}if(x.size>10*1024*1024){s({status:"error",message:"Dosya boyutu 10MB'dan kk olmaldr"});return}try{s({status:"uploading",progress:0});const p=setInterval(()=>{s(m=>({...m,progress:Math.min((m.progress||0)+10,90)}))},200);e&&await e(x),clearInterval(p),s({status:"success",message:`${x.name} baaryla yklendi`}),setTimeout(()=>{s({status:"idle"}),l.current&&(l.current.value="")},3e3)}catch{s({status:"error",message:"Dosya yklenirken hata olutu"})}},h=()=>{var x;(x=l.current)==null||x.click()},f=()=>{s({status:"idle"}),l.current&&(l.current.value="")};return a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${t}`,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"CSV Dosyas Ykle"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Hasta verilerini toplu olarak ie aktarmak iin CSV dosyas ykleyin"})]}),r.status==="idle"&&a.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors ${n?"border-indigo-400 bg-indigo-50":"border-gray-300"}`,onDragEnter:o,onDragLeave:o,onDragOver:o,onDrop:c,children:[a.jsx("input",{ref:l,type:"file",accept:".csv",onChange:d,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","data-allow-raw":!0}),a.jsx(ka,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx(Z,{type:"button",variant:"ghost",onClick:h,className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Dosya sein"})," ","veya srkleyip brakn"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV dosyas, maksimum 10MB"})]})]}),r.status==="uploading"&&a.jsxs("div",{className:"text-center py-6",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Dosya ykleniyor..."}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${r.progress||0}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["%",r.progress||0," tamamland"]})]}),r.status==="success"&&a.jsxs("div",{className:"text-center py-6",children:[a.jsx(St,{className:"mx-auto h-12 w-12 text-green-500 mb-4"}),a.jsx("p",{className:"text-sm text-green-600 font-medium",children:r.message}),a.jsx(Z,{onClick:f,variant:"ghost",className:"mt-3 text-sm text-gray-500 hover:text-gray-700",children:"Yeni dosya ykle"})]}),r.status==="error"&&a.jsxs("div",{className:"text-center py-6",children:[a.jsx(mt,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),a.jsx("p",{className:"text-sm text-red-600 font-medium mb-3",children:r.message}),a.jsxs("div",{className:"flex justify-center space-x-3",children:[a.jsx(Z,{onClick:f,variant:"ghost",className:"text-sm text-gray-500 hover:text-gray-700",children:"ptal"}),a.jsx(Z,{onClick:h,variant:"ghost",className:"text-sm text-indigo-600 hover:text-indigo-500 font-medium",children:"Tekrar dene"})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(wt,{className:"h-5 w-5 text-gray-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"CSV Format Bilgisi"}),a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"CSV dosyanz aadaki stunlar iermelidir:"}),a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"firstName"})," - Ad (zorunlu)"]}),a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"lastName"})," - Soyad (zorunlu)"]}),a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"tcNumber"})," - TC Kimlik No"]}),a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"phone"})," - Telefon"]}),a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"email"})," - E-posta"]}),a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"birthDate"})," - Doum Tarihi (YYYY-MM-DD)"]}),a.jsxs("div",{children:[" ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"gender"})," - Cinsiyet (M/F)"]})]})]})]})})]})},gK=()=>{const[e,t]=k.useState(()=>{try{const l=localStorage.getItem(y2);return l?JSON.parse(l):{}}catch{return{}}});k.useEffect(()=>{localStorage.setItem(y2,JSON.stringify(e))},[e]);const r=k.useCallback((l,o)=>{t(c=>({...c,[l]:o}))},[]),s=k.useCallback(l=>{t(o=>{const c={...o};return delete c[l],c})},[]),n=k.useCallback(()=>{t({})},[]),i=k.useCallback(()=>{t({})},[]);return{filters:e,updateFilter:r,clearFilter:s,clearAllFilters:n,resetFilters:i,setFilters:t}},yK=({className:e=""})=>{const{filters:t,setFilters:r}=gK(),[s,n]=k.useState([{id:"1",name:"Aktif Hastalar",filters:{status:"active"},isDefault:!0,createdAt:"2024-01-15"},{id:"2",name:"Bu Ay Kayt Olanlar",filters:{dateRange:{from:new Date().toISOString().slice(0,7)+"-01",to:new Date().toISOString().slice(0,10)}},createdAt:"2024-01-10"},{id:"3",name:"stanbul Hastalar",filters:{city:"stanbul"},createdAt:"2024-01-05"}]),[i,l]=k.useState(!1),[o,c]=k.useState(""),[d,u]=k.useState(null),h=y=>{r(y.filters)},f=()=>{if(!o.trim())return;const y={id:Date.now().toString(),name:o.trim(),filters:{...t},createdAt:new Date().toISOString().slice(0,10)};n(g=>[...g,y]),c(""),l(!1)},x=(y,g)=>{n(v=>v.map(b=>b.id===y?{...b,name:g,filters:{...t}}:b)),u(null)},p=y=>{window.confirm("Bu grnm silmek istediinizden emin misiniz?")&&n(g=>g.filter(v=>v.id!==y))},m=Object.keys(t).some(y=>y!=="search"&&t[y]);return a.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg ${e}`,children:[a.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(db,{className:"h-5 w-5 text-gray-400"}),a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Kaytl Grnmler"})]}),m&&a.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-indigo-600 bg-indigo-50 rounded hover:bg-indigo-100",children:[a.jsx(_s,{className:"h-3 w-3 mr-1"}),"Kaydet"]})]})}),a.jsx("div",{className:"p-2",children:s.length===0?a.jsxs("div",{className:"text-center py-6",children:[a.jsx(db,{className:"mx-auto h-8 w-8 text-gray-300 mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Henz kaytl grnm yok"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Filtre uygulayp kaydet butonuna tklayn"})]}):a.jsx("div",{className:"space-y-1",children:s.map(y=>a.jsxs("div",{className:"group flex items-center justify-between p-2 rounded hover:bg-gray-50",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[(d==null?void 0:d.id)===y.id?a.jsx("input",{type:"text",value:d.name,onChange:g=>u({...d,name:g.target.value}),onBlur:()=>x(y.id,d.name),onKeyDown:g=>{g.key==="Enter"?x(y.id,d.name):g.key==="Escape"&&u(null)},className:"w-full text-sm font-medium text-gray-900 bg-transparent border-none outline-none focus:ring-1 focus:ring-indigo-500 rounded px-1",autoFocus:!0}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>h(y),className:"text-sm font-medium text-gray-900 hover:text-indigo-600 truncate",children:y.name}),y.isDefault&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Varsaylan"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[Object.keys(y.filters).length," filtre  ",y.createdAt]})]}),a.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>h(y),className:"p-1 text-gray-400 hover:text-indigo-600 rounded",title:"Grnm uygula",children:a.jsx(In,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>u(y),className:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Dzenle",children:a.jsx(T5,{className:"h-3 w-3"})}),!y.isDefault&&a.jsx("button",{onClick:()=>p(y.id),className:"p-1 text-gray-400 hover:text-red-600 rounded",title:"Sil",children:a.jsx(Es,{className:"h-3 w-3"})})]})]},y.id))})}),i&&a.jsx("div",{className:"border-t border-gray-200 p-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Grnm Ad"}),a.jsx("input",{type:"text",value:o,onChange:y=>c(y.target.value),placeholder:"rn: Aktif stanbul Hastalar",className:"block w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-1",children:[a.jsx("button",{onClick:()=>{l(!1),c("")},className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800",children:"ptal"}),a.jsx("button",{onClick:f,disabled:!o.trim(),className:"px-2 py-1 text-xs font-medium text-white bg-indigo-600 rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Kaydet"})]})]})})]})},vK=[{id:"export-csv",label:"CSV Da Aktar",icon:a.jsx(yr,{className:"w-4 h-4"}),description:"Seili hastalar CSV formatnda da aktar",requiresConfirmation:!1,color:"primary"},{id:"bulk-tag",label:"Toplu Etiketleme",icon:a.jsx(Mi,{className:"w-4 h-4"}),description:"Seili hastalara toplu etiket ekle/kar",requiresConfirmation:!1,color:"secondary"},{id:"bulk-sms",label:"Toplu SMS",icon:a.jsx(Za,{className:"w-4 h-4"}),description:"Seili hastalara toplu SMS gnder",requiresConfirmation:!0,color:"primary"},{id:"bulk-delete",label:"Toplu Silme",icon:a.jsx(Es,{className:"w-4 h-4"}),description:"Seili hastalar kalc olarak sil",requiresConfirmation:!0,color:"danger"}],bK={name:"Ad Soyad",phone:"Telefon",email:"E-posta",birthDate:"Doum Tarihi",address:"Adres",notes:"Notlar",tags:"Etiketler",segment:"Segment",status:"Durum"},wK=({selectedPatients:e,onClearSelection:t,onRefresh:r})=>{const{success:s,error:n,warning:i}=Hl(),[l,o]=k.useState(null),[c,d]=k.useState(!1),[u,h]=k.useState({file:null,mapping:{},preview:[],errors:[]}),[f,x]=k.useState({action:"add",tags:[],newTag:""}),[p,m]=k.useState({message:"",template:"",sendTime:"now",scheduledTime:""}),y=Va(),g=Va(),v=Va(),b=Va(),S=Va(),D=k.useCallback(j=>{switch(o(j),j){case"export-csv":y.openModal();break;case"import-csv":g.openModal();break;case"bulk-tag":v.openModal();break;case"bulk-sms":b.openModal();break;case"bulk-delete":S.openModal();break}},[y,g,v,b,S]),N=k.useCallback(async()=>{try{d(!0);const j=e.map(H=>({"Ad Soyad":`${H.firstName} ${H.lastName}`,Telefon:H.phone||"","E-posta":H.email||"","TC No":H.tcNumber||"","Doum Tarihi":H.birthDate||"",Adres:(()=>{const A=H.address;if(typeof A=="object"&&A!==null){const V=A;return V.fullAddress||`${V.district||""} ${V.city||""}`.trim()||""}return H.addressFull||A||""})(),Durum:H.status||"active"})),F=Object.keys(j[0]||{}),O=[F.join(","),...j.map(H=>F.map(A=>`"${H[A]||""}"`).join(","))].join(`
`),z=new Blob([O],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),q=URL.createObjectURL(z);G.setAttribute("href",q),G.setAttribute("download",`hastalar_export_${new Date().toISOString().split("T")[0]}.csv`),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(q),s(`${e.length} hasta verisi CSV formatnda da aktarld`),y.closeModal()}catch(j){console.error("CSV export error:",j),n("CSV da aktarma srasnda hata olutu")}finally{d(!1)}},[e,s,n,y]),E=k.useCallback(async j=>{try{d(!0);const O=(await j.text()).split(`
`).filter(q=>q.trim());if(O.length<2)throw new Error("CSV dosyas en az 2 satr iermelidir (balk + veri)");const z=O[0].split(",").map(q=>q.replace(/"/g,"").trim()),G=O.slice(1,6).map(q=>{const H=q.split(",").map(A=>A.replace(/"/g,"").trim());return z.reduce((A,V,L)=>(A[V]=H[L]||"",A),{})});h({file:j,mapping:{},preview:G,errors:[]})}catch(F){console.error("CSV read error:",F),n("CSV dosyas okunurken hata olutu")}finally{d(!1)}},[n]),w=k.useCallback(async()=>{if(u.file)try{d(!0),await new Promise(F=>setTimeout(F,2e3));const j={created:Math.floor(Math.random()*10)+1,updated:Math.floor(Math.random()*5),errors:[]};j.errors.length>0?i(`${j.created+j.updated} hasta ilendi, ${j.errors.length} hata olutu`):s(`${j.created} yeni hasta eklendi, ${j.updated} hasta gncellendi`),g.closeModal(),r(),h({file:null,mapping:{},preview:[],errors:[]})}catch(j){console.error("CSV import error:",j),n("CSV ie aktarma srasnda hata olutu")}finally{d(!1)}},[u.file,s,i,n,g,r]),_=k.useCallback(async()=>{try{d(!0),await new Promise(F=>setTimeout(F,1e3));const j=f.action==="add"?"eklendi":"kaldrld";s(`${e.length} hastaya etiket ${j}`),v.closeModal(),r()}catch{n("Toplu etiketleme srasnda hata olutu")}finally{d(!1)}},[f,e.length,s,n,v,r]),C=k.useCallback(async()=>{try{d(!0),await new Promise(j=>setTimeout(j,2e3)),s(`${e.length} hastaya SMS gnderildi`),b.closeModal(),r()}catch{n("Toplu SMS gnderimi srasnda hata olutu")}finally{d(!1)}},[e.length,s,n,b,r]),T=k.useCallback(async()=>{try{d(!0),await new Promise(j=>setTimeout(j,1500)),s(`${e.length} hasta silindi`),S.closeModal(),t(),r()}catch{n("Toplu silme srasnda hata olutu")}finally{d(!1)}},[e.length,s,n,S,t,r]);return e.length===0?null:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zs,{className:"w-5 h-5 text-blue-600"}),a.jsxs("span",{className:"font-medium text-blue-900",children:[e.length," hasta seildi"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[vK.map(j=>a.jsxs(Z,{variant:j.color==="danger"?"danger":j.color==="primary"?"primary":"secondary",size:"sm",onClick:()=>D(j.id),disabled:c,children:[j.icon,j.label]},j.id)),a.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>D("import-csv"),disabled:c,children:[a.jsx(ka,{className:"w-4 h-4"}),"CSV e Aktar"]})]})]}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:t,children:"Seimi Temizle"})]})}),a.jsx(cr,{isOpen:y.isOpen,onClose:y.closeModal,title:"CSV Da Aktarma",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Da Aktarlacak Veriler"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:Object.values(bK).map(j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wt,{className:"w-3 h-3"}),a.jsx("span",{children:j})]},j))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:y.closeModal,children:"ptal"}),a.jsxs(Z,{onClick:N,loading:c,children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),"Da Aktar"]})]})]})}),a.jsx(cr,{isOpen:g.isOpen,onClose:g.closeModal,title:"CSV e Aktarma",size:"lg",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV Dosyas Se"}),a.jsx("input",{type:"file",accept:".csv",onChange:j=>{var O;const F=(O=j.target.files)==null?void 0:O[0];F&&E(F)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),u.preview.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"nizleme"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:Object.keys(u.preview[0]).map(j=>a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:j},j))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.preview.map((j,F)=>a.jsx("tr",{children:Object.values(j).map((O,z)=>a.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:O},z))},F))})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:g.closeModal,children:"ptal"}),a.jsxs(Z,{disabled:!u.file,loading:c,onClick:w,children:[a.jsx(ka,{className:"w-4 h-4 mr-2"}),"e Aktar"]})]})]})}),a.jsx(cr,{isOpen:v.isOpen,onClose:v.closeModal,title:"Toplu Etiketleme",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lem Tr"}),a.jsx(Ue,{value:f.action,onChange:j=>x(F=>({...F,action:j.target.value})),options:[{label:"Etiket Ekle",value:"add"},{label:"Etiket Kaldr",value:"remove"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Etiket Ekle"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(ye,{value:f.newTag,onChange:j=>x(F=>({...F,newTag:j.target.value})),placeholder:"Etiket ad..."}),a.jsx(Z,{variant:"outline",onClick:()=>{f.newTag.trim()&&x(j=>({...j,tags:[...j.tags,j.newTag.trim()],newTag:""}))},children:"Ekle"})]})]}),f.tags.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seili Etiketler"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.tags.map((j,F)=>a.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200",onClick:()=>x(O=>({...O,tags:O.tags.filter((z,G)=>G!==F)})),children:[j," "]},F))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:v.closeModal,children:"ptal"}),a.jsxs(Z,{onClick:_,loading:c,disabled:f.tags.length===0,children:[a.jsx(Mi,{className:"w-4 h-4 mr-2"}),"Uygula"]})]})]})}),a.jsx(cr,{isOpen:b.isOpen,onClose:b.closeModal,title:"Toplu SMS Gnderimi",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMS Mesaj"}),a.jsx(wr,{value:p.message,onChange:j=>m(F=>({...F,message:j.target.value})),placeholder:"SMS mesajnz yazn...",rows:4}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[p.message.length,"/160 karakter"]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(mt,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Uyar:"})," ",e.length," hastaya SMS gnderilecek. Bu ilem geri alnamaz ve SMS creti uygulanacaktr."]})]})}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:b.closeModal,children:"ptal"}),a.jsxs(Z,{onClick:C,loading:c,disabled:!p.message.trim(),children:[a.jsx(Za,{className:"w-4 h-4 mr-2"}),"SMS Gnder"]})]})]})}),a.jsx(cr,{isOpen:S.isOpen,onClose:S.closeModal,title:"Toplu Silme Onay",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(mt,{className:"w-6 h-6 text-red-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-red-900",children:"Dikkat!"}),a.jsxs("p",{className:"text-sm text-red-800 mt-1",children:[e.length," hasta kalc olarak silinecek. Bu ilem geri alnamaz ve tm hasta verileri kaybolacaktr."]})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:"Silinecek Hastalar:"}),a.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[e.slice(0,10).map(j=>a.jsxs("div",{className:"text-sm text-gray-600",children:[" ",`${j.firstName||""} ${j.lastName||""}`.trim()||"simsiz Hasta"," (",j.phone,")"]},j.id)),e.length>10&&a.jsxs("div",{className:"text-sm text-gray-500",children:["... ve ",e.length-10," hasta daha"]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:S.closeModal,children:"ptal"}),a.jsxs(Z,{variant:"danger",onClick:T,loading:c,children:[a.jsx(Es,{className:"w-4 h-4 mr-2"}),"Sil"]})]})]})})]})};function eg(e,t){const r=Array(t.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let s=0;s<=e.length;s++)r[0][s]=s;for(let s=0;s<=t.length;s++)r[s][0]=s;for(let s=1;s<=t.length;s++)for(let n=1;n<=e.length;n++){const i=e[n-1]===t[s-1]?0:1;r[s][n]=Math.min(r[s][n-1]+1,r[s-1][n]+1,r[s-1][n-1]+i)}return r[t.length][e.length]}function NK(e,t){if(e===t)return 1;if(!e||!t)return 0;const r=Math.max(e.length,t.length);return r===0?1:1-eg(e.toLowerCase(),t.toLowerCase())/r}function kK(e,t,r={}){const{threshold:s=.3,caseSensitive:n=!1,includeScore:i=!0,keys:l=[]}=r;if(!t.trim())return e.map(d=>({item:d,score:1,matches:[],relevance:"high"}));const o=n?t:t.toLowerCase(),c=[];for(const d of e){let u=0;const h=[],f=l.length>0?l:Object.keys(d).filter(x=>typeof d[x]=="string");for(const x of f){const p=d[x];if(typeof p!="string")continue;const m=n?p:p.toLowerCase();let y=0,g="fuzzy",v=-1,b=-1;m===o?(y=1,g="exact",v=0,b=o.length):m.startsWith(o)?(y=.9,g="partial",v=0,b=o.length):m.includes(o)?(y=.8,g="partial",v=m.indexOf(o),b=v+o.length):(y=NK(m,o),g="fuzzy"),y>=s&&(h.push({key:x,value:p,score:y,type:g,startIndex:v>=0?v:void 0,endIndex:b>=0?b:void 0}),u=Math.max(u,y))}if(u>=s){const x=u>=.8?"high":u>=.5?"medium":"low";c.push({item:d,score:u,matches:h,relevance:x})}}return c.sort((d,u)=>u.score-d.score),c}const jK={maxQueries:50,storageKey:"patient-saved-queries"};class SK{constructor(t={}){qe(this,"options");this.options={...jK,...t}}loadQueries(){try{const t=localStorage.getItem(this.options.storageKey);return t?JSON.parse(t).map(s=>({...s,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt),lastUsed:s.lastUsed?new Date(s.lastUsed):void 0})):[]}catch(t){return console.error("Failed to load saved queries:",t),[]}}saveQueries(t){try{localStorage.setItem(this.options.storageKey,JSON.stringify(t))}catch(r){throw console.error("Failed to save queries:",r),new Error("Sorgu kaydedilemedi")}}createQuery(t,r,s,n={}){const i=this.loadQueries();if(i.some(o=>o.name===t))throw new Error("Bu isimde bir sorgu zaten mevcut");i.length>=this.options.maxQueries&&(i.sort((o,c)=>{var d,u;return((d=o.lastUsed)==null?void 0:d.getTime())||0-(((u=c.lastUsed)==null?void 0:u.getTime())||0)}),i.splice(0,i.length-this.options.maxQueries+1));const l={id:this.generateId(),name:t,description:n.description,query:r,filters:s,createdAt:new Date,updatedAt:new Date,usageCount:0,isDefault:n.isDefault||!1,tags:n.tags||[]};return i.push(l),this.saveQueries(i),l}updateQuery(t,r){const s=this.loadQueries(),n=s.findIndex(l=>l.id===t);if(n===-1)throw new Error("Sorgu bulunamad");const i={...s[n],...r,updatedAt:new Date};return s[n]=i,this.saveQueries(s),i}deleteQuery(t){const r=this.loadQueries(),s=r.filter(n=>n.id!==t);if(s.length===r.length)throw new Error("Sorgu bulunamad");this.saveQueries(s)}getQuery(t){return this.loadQueries().find(s=>s.id===t)||null}useQuery(t){const r=this.loadQueries(),s=r.findIndex(n=>n.id===t);if(s===-1)throw new Error("Sorgu bulunamad");return r[s].usageCount++,r[s].lastUsed=new Date,this.saveQueries(r),r[s]}getPopularQueries(t=10){return this.loadQueries().sort((s,n)=>n.usageCount-s.usageCount).slice(0,t)}getRecentQueries(t=10){return this.loadQueries().filter(s=>s.lastUsed).sort((s,n)=>{var i,l;return(((i=n.lastUsed)==null?void 0:i.getTime())||0)-(((l=s.lastUsed)==null?void 0:l.getTime())||0)}).slice(0,t)}getDefaultQueries(){return this.loadQueries().filter(r=>r.isDefault)}searchQueries(t){const r=this.loadQueries(),s=t.toLowerCase();return r.filter(n=>n.name.toLowerCase().includes(s)||n.description&&n.description.toLowerCase().includes(s)||n.tags&&n.tags.some(i=>i.toLowerCase().includes(s)))}exportQueries(){const t=this.loadQueries();return JSON.stringify(t,null,2)}importQueries(t,r={}){try{const s=JSON.parse(t);if(!Array.isArray(s))throw new Error("Geersiz format");const i=[...r.merge?this.loadQueries():[]];for(const l of s){if(!l.id||!l.name||!l.query)continue;const o=i.findIndex(c=>c.id===l.id);o!==-1?i[o]={...l,createdAt:new Date(l.createdAt),updatedAt:new Date(l.updatedAt),lastUsed:l.lastUsed?new Date(l.lastUsed):void 0}:i.push({...l,createdAt:new Date(l.createdAt),updatedAt:new Date(l.updatedAt),lastUsed:l.lastUsed?new Date(l.lastUsed):void 0})}this.saveQueries(i)}catch(s){throw console.error("Failed to import queries:",s),new Error("Sorgu ie aktarma baarsz")}}clearAllQueries(){localStorage.removeItem(this.options.storageKey)}generateId(){return`query_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const Hn=new SK,Yi={load:()=>Hn.loadQueries(),create:(e,t,r,s)=>Hn.createQuery(e,t,r,s),update:(e,t)=>Hn.updateQuery(e,t),delete:e=>Hn.deleteQuery(e),use:e=>Hn.useQuery(e),getPopular:e=>Hn.getPopularQueries(e),getRecent:e=>Hn.getRecentQueries(e),search:e=>Hn.searchQueries(e)},K2={query:"",fuzzySearch:!0,fuzzyThreshold:.6,ageRange:{min:null,max:null},dateRange:{start:"",end:""},location:"",tags:[],segment:"",status:"",hasPhone:null,hasEmail:null,hasNotes:null,sortBy:"name",sortOrder:"asc"},TK=({patients:e,onFilteredResults:t,onClearFilters:r})=>{const[s,n]=k.useState(K2),[i,l]=k.useState(!1);k.useState([]);const[o,c]=k.useState([]),[d,u]=k.useState(!1),[h,f]=k.useState(null),x=Va();Va();const{success:p,error:m,warning:y}=Hl(),[g,v]=k.useState({name:"",description:"",isDefault:!1,tags:[]});k.useEffect(()=>{c(Yi.load())},[]),k.useMemo(()=>{const T=new Set;return e.forEach(j=>{var F;(F=j.tags)==null||F.forEach(O=>T.add(O))}),Array.from(T).sort()},[e]);const b=k.useMemo(()=>{let T=[...e];if(s.query.trim())if(s.fuzzySearch){const j={threshold:s.fuzzyThreshold,keys:["name","phone","email","address","tcNumber"],includeScore:!0};T=kK(T,s.query,j).map(O=>O.item)}else{const j=s.query.toLowerCase();T=T.filter(F=>{var z,G,q,H;const O=typeof F.address=="string"?F.address:F.addressFull;return((z=F.firstName)==null?void 0:z.toLowerCase().includes(j))||((G=F.lastName)==null?void 0:G.toLowerCase().includes(j))||((q=F.phone)==null?void 0:q.toLowerCase().includes(j))||((H=F.email)==null?void 0:H.toLowerCase().includes(j))||(O==null?void 0:O.toLowerCase().includes(j))})}if((s.ageRange.min!==null||s.ageRange.max!==null)&&(T=T.filter(j=>{if(!j.birthDate)return!1;const F=new Date().getFullYear()-new Date(j.birthDate).getFullYear();return!(s.ageRange.min!==null&&F<s.ageRange.min||s.ageRange.max!==null&&F>s.ageRange.max)})),(s.dateRange.start||s.dateRange.end)&&(T=T.filter(j=>{if(!j.createdAt)return!1;const F=new Date(j.createdAt);return!(s.dateRange.start&&F<new Date(s.dateRange.start)||s.dateRange.end&&F>new Date(s.dateRange.end))})),s.location.trim()){const j=s.location.toLowerCase();T=T.filter(F=>{const O=typeof F.address=="string"?F.address:F.addressFull;return O==null?void 0:O.toLowerCase().includes(j)})}return s.tags.length>0&&(T=T.filter(j=>s.tags.some(F=>{var O;return(O=j.tags)==null?void 0:O.includes(F)}))),s.segment&&(T=T.filter(j=>j.segment===s.segment)),s.status&&(T=T.filter(j=>j.status===s.status)),s.hasPhone!==null&&(T=T.filter(j=>s.hasPhone?!!j.phone:!j.phone)),s.hasEmail!==null&&(T=T.filter(j=>s.hasEmail?!!j.email:!j.email)),s.hasNotes!==null&&(T=T.filter(j=>s.hasNotes?j.notes&&j.notes.length>0:!j.notes||j.notes.length===0)),T.sort((j,F)=>{let O,z;return s.sortBy==="name"?(O=`${j.firstName} ${j.lastName}`.toLowerCase(),z=`${F.firstName} ${F.lastName}`.toLowerCase()):s.sortBy==="age"?(O=j.birthDate?new Date().getFullYear()-new Date(j.birthDate).getFullYear():0,z=F.birthDate?new Date().getFullYear()-new Date(F.birthDate).getFullYear():0):(O=j[s.sortBy],z=F[s.sortBy]),typeof O=="string"&&(O=O.toLowerCase(),z=(z==null?void 0:z.toLowerCase())||""),O<z?s.sortOrder==="asc"?-1:1:O>z?s.sortOrder==="asc"?1:-1:0}),T},[e,s]),S=k.useCallback(async()=>{try{if(!g.name.trim()){m("Sorgu ad gereklidir");return}const T=Yi.create(g.name,s.query,s,{description:g.description,isDefault:g.isDefault,tags:g.tags});c(Yi.load()),p("Sorgu baaryla kaydedildi"),x.closeModal(),v({name:"",description:"",isDefault:!1,tags:[]})}catch(T){m(T.message||"Sorgu kaydedilemedi")}},[g,s,p,m,x]),D=k.useCallback(T=>{try{Yi.use(T.id),n(T.filters),f(T),p(`"${T.name}" sorgusu yklendi`),c(Yi.load())}catch(j){m(j.message||"Sorgu yklenemedi")}},[p,m]),N=k.useCallback(T=>{try{Yi.delete(T),c(Yi.load()),p("Sorgu silindi")}catch(j){m(j.message||"Sorgu silinemedi")}},[p,m]),E=k.useCallback(()=>{t(b)},[b,t]),w=k.useCallback(()=>{n(K2),f(null),r()},[r]),_=k.useCallback((T,j)=>{n(F=>({...F,[T]:j})),f(null)},[]);k.useCallback(T=>{n(j=>({...j,tags:j.tags.includes(T)?j.tags.filter(F=>F!==T):[...j.tags,T]})),f(null)},[]);const C=k.useMemo(()=>{let T=0;return s.query.trim()&&T++,(s.ageRange.min!==null||s.ageRange.max!==null)&&T++,(s.dateRange.start||s.dateRange.end)&&T++,s.location.trim()&&T++,s.tags.length>0&&T++,s.segment&&T++,s.status&&T++,s.hasPhone!==null&&T++,s.hasEmail!==null&&T++,s.hasNotes!==null&&T++,T},[s]);return bt.useEffect(()=>{E()},[E]),a.jsx(Bt,{className:"mb-6",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ye,{value:s.query,onChange:T=>_("query",T.target.value),placeholder:"Hasta ara... (fuzzy search aktif)",className:"pl-10 pr-4"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(kn,{checked:s.fuzzySearch,onChange:T=>_("fuzzySearch",T)}),a.jsx("span",{className:"text-sm text-gray-600",children:"Fuzzy Search"})]}),a.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>u(!d),className:"relative",children:[a.jsx(fb,{className:"w-4 h-4 mr-1"}),"Kaytl Sorgular",o.length>0&&a.jsx(jt,{variant:"secondary",className:"ml-2",children:o.length})]}),a.jsxs(Z,{variant:"outline",size:"sm",onClick:x.openModal,disabled:!s.query.trim()&&Object.values(s).every(T=>T===""||T===null||T===!1||Array.isArray(T)&&T.length===0),children:[a.jsx(vp,{className:"w-4 h-4 mr-1"}),"Kaydet"]}),a.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>l(!i),children:[a.jsx(Ea,{className:"w-4 h-4 mr-1"}),i?"Gizle":"Filtreler",C>0&&a.jsx(jt,{variant:"primary",className:"ml-2",children:C})]}),C>0&&a.jsxs(Z,{variant:"ghost",size:"sm",onClick:w,className:"text-gray-500 hover:text-gray-700",children:[a.jsx(vr,{className:"w-4 h-4"}),"Temizle"]})]}),s.fuzzySearch&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"text-sm font-medium text-blue-900",children:["Fuzzy Search Hassasiyeti: ",Math.round(s.fuzzyThreshold*100),"%"]}),a.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:s.fuzzyThreshold,onChange:T=>_("fuzzyThreshold",parseFloat(T.target.value)),className:"w-32"})]}),a.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Dk deer: Daha esnek arama, Yksek deer: Daha kesin arama"})]}),d&&a.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Kaytl Sorgular"}),a.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:a.jsx(vr,{className:"w-4 h-4"})})]}),o.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Henz kaytl sorgu yok"}):a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.map(T=>a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${(h==null?void 0:h.id)===T.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white"}`,children:[a.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>D(T),children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-sm",children:T.name}),T.isDefault&&a.jsx(jt,{variant:"primary",size:"sm",children:"Varsaylan"}),a.jsxs(jt,{variant:"secondary",size:"sm",children:[T.usageCount," kullanm"]})]}),T.description&&a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:T.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[a.jsxs("span",{children:['"',T.query,'"']}),T.lastUsed&&a.jsxs("span",{className:"flex items-center",children:[a.jsx(Xt,{className:"w-3 h-3 mr-1"}),T.lastUsed.toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>N(T.id),className:"text-red-600 hover:text-red-700",children:a.jsx(Es,{className:"w-4 h-4"})})})]},T.id))})]}),a.jsx(cr,{isOpen:x.isOpen,onClose:x.closeModal,title:"Sorguyu Kaydet",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sorgu Ad *"}),a.jsx(ye,{value:g.name,onChange:T=>v(j=>({...j,name:T.target.value})),placeholder:"rn: VIP mteriler, Aktif hastalar..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aklama"}),a.jsx(wr,{value:g.description,onChange:T=>v(j=>({...j,description:T.target.value})),placeholder:"Bu sorgunun ne iin kullanldn aklayn...",rows:3})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(kn,{checked:g.isDefault,onChange:T=>v(j=>({...j,isDefault:T.target.checked}))}),a.jsx("span",{className:"text-sm text-gray-700",children:"Varsaylan sorgu olarak iaretle"})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Kaydedilecek Filtreler:"}),a.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[s.query&&a.jsxs("div",{children:[' Arama: "',s.query,'"']}),s.segment&&a.jsxs("div",{children:[" Segment: ",s.segment]}),s.status&&a.jsxs("div",{children:[" Durum: ",s.status]}),s.tags.length>0&&a.jsxs("div",{children:[" Etiketler: ",s.tags.join(", ")]}),s.location&&a.jsxs("div",{children:[" Konum: ",s.location]}),(s.ageRange.min||s.ageRange.max)&&a.jsxs("div",{children:[" Ya: ",s.ageRange.min||0,"-",s.ageRange.max||""]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Z,{variant:"outline",onClick:x.closeModal,children:"ptal"}),a.jsxs(Z,{onClick:S,children:[a.jsx(vp,{className:"w-4 h-4 mr-2"}),"Kaydet"]})]})]})}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-4",children:[a.jsxs("span",{children:[b.length," hasta bulundu",e.length!==b.length&&` (${e.length} toplam)`]}),h&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fb,{className:"w-4 h-4 text-yellow-500"}),a.jsxs("span",{className:"text-blue-600",children:['"',h.name,'" sorgusu aktif']})]})]})]})})},m_={weights:{tcNumber:.35,phone:.25,email:.15,name:.15,birthDate:.07,address:.03},thresholds:{high:.85,medium:.65,low:.45},fuzzyMatching:{enabled:!0,nameThreshold:.8,phoneThreshold:.9,addressThreshold:.7},exactMatching:{tcNumber:!0,phone:!0,email:!0}};class _K{constructor(t=m_){qe(this,"config");this.config=t}findAllMatches(t){const r=[],s=new Set;for(let n=0;n<t.length;n++)for(let i=n+1;i<t.length;i++){const l=t[n],o=t[i],c=`${Math.min(n,i)}-${Math.max(n,i)}`;if(s.has(c))continue;s.add(c);const d=this.comparePatients(l,o);d&&d.similarity>=this.config.thresholds.low&&r.push({...d,id:`match-${n}-${i}`,patients:[l,o]})}return r.sort((n,i)=>i.similarity-n.similarity)}comparePatients(t,r){var m,y;let s=0,n=0;const i=[];let l="partial",o=!1;if(t.tcNumber&&r.tcNumber&&(t.tcNumber===r.tcNumber&&(s+=this.config.weights.tcNumber,i.push("Ayn TC Kimlik Numaras"),o=!0,l="exact"),n+=this.config.weights.tcNumber),t.phone&&r.phone){const g=this.comparePhones(t.phone,r.phone);g.isExact?(i.push("Ayn telefon numaras"),o=!0,l!=="exact"&&(l="exact")):g.isFuzzy&&(i.push(`Benzer telefon numaras (${Math.round(g.similarity*100)}% benzerlik)`),l==="partial"&&(l="fuzzy")),s+=g.similarity*this.config.weights.phone,n+=this.config.weights.phone}if(t.email&&r.email){const g=this.compareEmails(t.email,r.email);g.isExact&&(i.push("Ayn e-posta adresi"),o=!0,l!=="exact"&&(l="exact")),s+=g.similarity*this.config.weights.email,n+=this.config.weights.email}const c=t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:"",d=r.firstName&&r.lastName?`${r.firstName} ${r.lastName}`:"";if(c&&d){const g=this.compareNames(c,d);g.isExact?(i.push("Ayn isim"),o=!0):g.isFuzzy&&(i.push(`Benzer isim (${Math.round(g.similarity*100)}% benzerlik)`),l==="partial"&&(l="fuzzy")),s+=g.similarity*this.config.weights.name,n+=this.config.weights.name}t.birthDate&&r.birthDate&&(t.birthDate===r.birthDate&&(s+=this.config.weights.birthDate,i.push("Ayn doum tarihi"),o=!0),n+=this.config.weights.birthDate);const u=typeof t.address=="string"?t.address:((m=t.address)==null?void 0:m.full)||"",h=typeof r.address=="string"?r.address:((y=r.address)==null?void 0:y.full)||"";if(u&&h){const g=this.compareAddresses(u,h);g.isFuzzy&&(i.push(`Benzer adres (${Math.round(g.similarity*100)}% benzerlik)`),l==="partial"&&(l="fuzzy")),s+=g.similarity*this.config.weights.address,n+=this.config.weights.address}if(n===0||i.length===0)return null;const f=s/n,x=this.getConfidenceLevel(f),p=this.getRiskLevel(f,i,o);return{similarity:f,matchReasons:i,confidence:x,status:"pending",matchType:l,riskLevel:p}}comparePhones(t,r){const s=this.cleanPhone(t),n=this.cleanPhone(r);if(s===n)return{similarity:1,isExact:!0,isFuzzy:!1};if(this.config.fuzzyMatching.enabled){const i=1-eg(s,n)/Math.max(s.length,n.length),l=i>=this.config.fuzzyMatching.phoneThreshold;return{similarity:l?i:0,isExact:!1,isFuzzy:l}}return{similarity:0,isExact:!1,isFuzzy:!1}}compareEmails(t,r){const s=t.toLowerCase().trim(),n=r.toLowerCase().trim();return{similarity:s===n?1:0,isExact:s===n}}compareNames(t,r){const s=this.cleanName(t),n=this.cleanName(r);if(s===n)return{similarity:1,isExact:!0,isFuzzy:!1};if(this.config.fuzzyMatching.enabled){const i=this.calculateNameSimilarity(s,n),l=i>=this.config.fuzzyMatching.nameThreshold;return{similarity:l?i:0,isExact:!1,isFuzzy:l}}return{similarity:0,isExact:!1,isFuzzy:!1}}compareAddresses(t,r){if(!this.config.fuzzyMatching.enabled)return{similarity:0,isFuzzy:!1};const s=this.cleanAddress(t),n=this.cleanAddress(r),i=this.calculateAddressSimilarity(s,n),l=i>=this.config.fuzzyMatching.addressThreshold;return{similarity:l?i:0,isFuzzy:l}}calculateNameSimilarity(t,r){const s=t.split(" ").filter(o=>o.length>1),n=r.split(" ").filter(o=>o.length>1);if(s.length===0||n.length===0)return 0;let i=0,l=0;for(const o of s){let c=0;for(const d of n){const u=1-eg(o,d)/Math.max(o.length,d.length);c=Math.max(c,u)}i+=c,l++}return l>0?i/l:0}calculateAddressSimilarity(t,r){const s=t.toLowerCase().split(/\s+/).filter(o=>o.length>2),n=r.toLowerCase().split(/\s+/).filter(o=>o.length>2);if(s.length===0||n.length===0)return 0;const i=s.filter(o=>n.includes(o)),l=new Set([...s,...n]).size;return l>0?i.length/l:0}getConfidenceLevel(t){return t>=this.config.thresholds.high?"high":t>=this.config.thresholds.medium?"medium":"low"}getRiskLevel(t,r,s){return s&&r.some(n=>n.includes("TC Kimlik")||n.includes("telefon"))||t>=.9?"critical":t>=.8?"high":t>=.6?"medium":"low"}cleanPhone(t){return t.replace(/\D/g,"")}cleanName(t){return t.toLowerCase().trim().replace(/[^\w\s]/g,"").replace(/\s+/g," ")}cleanAddress(t){return t.toLowerCase().trim().replace(/[^\w\s]/g," ").replace(/\s+/g," ")}updateConfig(t){this.config={...this.config,...t}}findMatchesForPatient(t,r){const s=[];for(let n=0;n<r.length;n++){const i=r[n];if(i.id===t.id)continue;const l=this.comparePatients(t,i);l&&l.similarity>=this.config.thresholds.low&&s.push({...l,id:`match-${t.id}-${i.id}`,patients:[t,i]})}return s.sort((n,i)=>i.similarity-n.similarity)}}const G2=e=>{switch(e){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},W2=e=>{switch(e){case"critical":return"text-red-700 bg-red-100 border-red-300";case"high":return"text-orange-700 bg-orange-100 border-orange-300";case"medium":return"text-yellow-700 bg-yellow-100 border-yellow-300";case"low":return"text-green-700 bg-green-100 border-green-300";default:return"text-gray-700 bg-gray-100 border-gray-300"}},EK=({patients:e,onMergePatients:t,onRefresh:r})=>{const[s,n]=k.useState([]),[i,l]=k.useState(null),[o,c]=k.useState(null),[d,u]=k.useState(!1),[h,f]=k.useState("all"),[x,p]=k.useState("all"),[m,y]=k.useState("all"),[g,v]=k.useState(""),[b,S]=k.useState(m_),[D,N]=k.useState(!1),E=Va(),w=Va(),_=Va(),{success:C,error:T}=Hl(),j=k.useMemo(()=>new _K(b),[b]),F=k.useCallback(async()=>{u(!0);try{const P=j.findAllMatches(e);n(P),C(`${P.length} potansiyel eleme bulundu`)}catch{T("Eleme analizi srasnda hata olutu")}finally{u(!1)}},[e,j,C,T]),O=k.useCallback(P=>{const[I,...R]=P.patients,U=[],M={...I};return["name","phone","email","birthDate","address"].forEach(se=>{const ae=P.patients.map(ie=>({patientId:ie.id||"",value:ie[se],patientName:`${ie.firstName||""} ${ie.lastName||""}`.trim()||"Unknown"})).filter(ie=>ie.value&&ie.patientId);ae.length>1&&[...new Set(ae.map(ce=>ce.value))].length>1&&U.push({field:se,values:ae})}),{primary:I,duplicates:R,mergedData:M,conflicts:U}},[]),z=k.useCallback(P=>{l(P),E.openModal()},[E]),G=k.useCallback(P=>{const I=O(P);c(I),l(P),w.openModal()},[O,w]),q=k.useCallback(async()=>{if(!(!i||!o))try{const P=o.primary.id,I=o.duplicates.map(R=>R.id).filter(Boolean);if(!P)throw new Error("Primary patient ID is required");await t(P,I),n(R=>R.map(U=>U.id===i.id?{...U,status:"merged"}:U)),C("Hastalar baaryla birletirildi"),w.closeModal(),r()}catch{T("Hasta birletirme srasnda hata olutu")}},[i,o,t,C,T,w,r]),H=k.useCallback(P=>{n(I=>I.map(R=>R.id===P?{...R,status:"ignored"}:R))},[]),A=k.useMemo(()=>s.filter(P=>{if(h!=="all"&&P.status!==h||x!=="all"&&P.confidence!==x||m!=="all"&&P.riskLevel!==m)return!1;if(g){const I=g.toLowerCase();if(!P.patients.some(U=>{var M,J,se,ae;return((M=U.firstName)==null?void 0:M.toLowerCase().includes(I))||((J=U.lastName)==null?void 0:J.toLowerCase().includes(I))||((se=U.phone)==null?void 0:se.includes(g))||((ae=U.email)==null?void 0:ae.toLowerCase().includes(I))}))return!1}return!0}),[s,h,x,m,g]),V=k.useMemo(()=>A.filter(P=>P.status==="pending"),[A]),L=P=>{switch(P){case"high":return"Yksek";case"medium":return"Orta";case"low":return"Dk";default:return"Bilinmeyen"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Hasta Eletirme"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Potansiyel duplikat hastalar tespit edin ve birletirin"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(kn,{checked:D,onChange:P=>N(P.target.checked)}),a.jsx("span",{className:"text-sm text-gray-700",children:"Otomatik birletirme"})]}),a.jsxs(Z,{variant:"outline",onClick:()=>_.openModal(),children:[a.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Ayarlar"]}),a.jsxs(Z,{onClick:F,loading:d,disabled:e.length<2,children:[a.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Analiz Et"]})]})]}),s.length>0&&a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arama"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(ye,{placeholder:"Hasta ara...",value:g,onChange:P=>v(P.target.value),className:"pl-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),a.jsx(Ue,{value:h,onChange:P=>f(P.target.value),options:[{value:"all",label:"Tm"},{value:"pending",label:"Beklemede"},{value:"reviewed",label:"ncelendi"},{value:"merged",label:"Birletirildi"},{value:"ignored",label:"Yoksayld"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gven Seviyesi"}),a.jsx(Ue,{value:x,onChange:P=>p(P.target.value),options:[{value:"all",label:"Tm"},{value:"high",label:"Yksek"},{value:"medium",label:"Orta"},{value:"low",label:"Dk"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk Seviyesi"}),a.jsx(Ue,{value:m,onChange:P=>y(P.target.value),options:[{value:"all",label:"Tm"},{value:"critical",label:"Kritik"},{value:"high",label:"Yksek"},{value:"medium",label:"Orta"},{value:"low",label:"Dk"}]})]})]})}),s.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Zs,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Eleme"}),a.jsx("p",{className:"text-xl font-semibold",children:s.length})]})]})}),a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:a.jsx(os,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Yksek Gven"}),a.jsx("p",{className:"text-xl font-semibold",children:s.filter(P=>P.confidence==="high").length})]})]})}),a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(St,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Birletirildi"}),a.jsx("p",{className:"text-xl font-semibold",children:s.filter(P=>P.status==="merged").length})]})]})}),a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(vr,{className:"w-5 h-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Beklemede"}),a.jsx("p",{className:"text-xl font-semibold",children:V.length})]})]})})]}),A.length>0?a.jsx("div",{className:"space-y-4",children:A.map(P=>a.jsx(Bt,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsxs(jt,{className:G2(P.confidence),children:[L(P.confidence)," Gven"]}),a.jsxs(jt,{className:W2(P.riskLevel),children:[P.riskLevel," Risk"]}),a.jsxs("span",{className:"text-sm text-gray-600",children:["%",Math.round(P.similarity*100)," benzerlik"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:P.patients.map((I,R)=>a.jsxs("div",{className:"border rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Mt,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"font-medium",children:[I.firstName," ",I.lastName]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[I.phone&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ii,{className:"w-3 h-3"}),a.jsx("span",{children:I.phone})]}),I.email&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ml,{className:"w-3 h-3"}),a.jsx("span",{children:I.email})]}),I.birthDate&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"w-3 h-3"}),a.jsx("span",{children:I.birthDate})]})]})]},I.id))}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Eleme Nedenleri:"})," ",P.matchReasons.join(", ")]})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>z(P),children:a.jsx(In,{className:"w-4 h-4"})}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>G(P),disabled:P.status!=="pending",children:a.jsx(k5,{className:"w-4 h-4"})}),a.jsx(Z,{variant:"outline",size:"sm",onClick:()=>H(P.id),disabled:P.status!=="pending",children:a.jsx(vr,{className:"w-4 h-4"})})]})]})},P.id))}):s.length>0?a.jsxs(Bt,{className:"p-8 text-center",children:[a.jsx(St,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Filtre kriterlerine uygun eleme bulunamad"}),a.jsx("p",{className:"text-gray-600",children:"Farkl filtre seeneklerini deneyin veya filtreleri temizleyin."})]}):a.jsxs(Bt,{className:"p-8 text-center",children:[a.jsx(Zs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henz analiz yaplmad"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Potansiyel duplikat hastalar bulmak iin analiz balatn."}),a.jsxs(Z,{onClick:F,disabled:e.length<2,children:[a.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Analiz Et"]})]}),a.jsx(cr,{isOpen:E.isOpen,onClose:E.closeModal,title:"Eleme Detaylar",size:"lg",children:i&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(jt,{className:G2(i.confidence),children:[L(i.confidence)," Gven"]}),a.jsxs(jt,{className:W2(i.riskLevel),children:[i.riskLevel," Risk"]}),a.jsxs("span",{className:"text-sm text-gray-600",children:["%",Math.round(i.similarity*100)," benzerlik"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Eleme Nedenleri:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:i.matchReasons.map((P,I)=>a.jsx("li",{children:P},I))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Hasta Bilgileri:"}),a.jsx("div",{className:"space-y-3",children:i.patients.map((P,I)=>a.jsxs("div",{className:"border rounded-lg p-3",children:[a.jsxs("h5",{className:"font-medium mb-2",children:["Hasta ",I+1,": ",P.firstName," ",P.lastName]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Telefon:"})," ",P.phone||"Yok"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"E-posta:"})," ",P.email||"Yok"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Doum Tarihi:"})," ",P.birthDate||"Yok"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Adres:"})," ",(()=>{const R=P.address;if(typeof R=="object"&&R!==null){const U=R;return U.fullAddress||`${U.district||""} ${U.city||""}`.trim()||"Yok"}return P.addressFull||R||"Yok"})()]})]})]},P.id))})]})]})}),a.jsx(cr,{isOpen:w.isOpen,onClose:w.closeModal,title:"Hastalar Birletir",size:"lg",children:o&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(os,{className:"w-5 h-5 text-yellow-600"}),a.jsx("span",{className:"font-medium text-yellow-800",children:"Dikkat"})]}),a.jsx("p",{className:"text-yellow-700 mt-1",children:"Bu ilem geri alnamaz. Seilen hastalar birletirilecek ve duplikat kaytlar silinecektir."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Ana Hasta (Korunacak):"}),a.jsxs("div",{className:"border rounded-lg p-3 bg-green-50",children:[a.jsx("div",{className:"font-medium",children:`${o.primary.firstName||""} ${o.primary.lastName||""}`.trim()||"Unknown"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[o.primary.phone,"  ",o.primary.email]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Silinecek Hastalar:"}),a.jsx("div",{className:"space-y-2",children:o.duplicates.map(P=>a.jsxs("div",{className:"border rounded-lg p-3 bg-red-50",children:[a.jsxs("div",{className:"font-medium",children:[P.firstName," ",P.lastName]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[P.phone,"  ",P.email]})]},P.id))})]}),o.conflicts.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2 text-orange-600",children:"akan Alanlar:"}),a.jsx("div",{className:"space-y-2",children:o.conflicts.map((P,I)=>a.jsxs("div",{className:"border rounded-lg p-3 bg-orange-50",children:[a.jsx("div",{className:"font-medium capitalize",children:P.field}),a.jsx("div",{className:"space-y-1 mt-1",children:P.values.map((R,U)=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("strong",{children:[R.patientName,":"]})," ",R.value]},U))})]},I))})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx(Z,{variant:"outline",onClick:w.closeModal,children:"ptal"}),a.jsx(Z,{onClick:q,className:"bg-red-600 hover:bg-red-700",children:"Birletir"})]})]})})]})};function CK(){var j,F;const[e,t]=k.useState(""),[r,s]=k.useState({}),[n,i]=k.useState([]),{data:l,isLoading:o,error:c}=t_({page:1,per_page:50,search:e||void 0,status:r.status||void 0}),d=(l==null?void 0:l.patients)||[],u=(l==null?void 0:l.total)||0;(j=d==null?void 0:d.filter(O=>O.status==="active"))!=null&&j.length,(F=d==null?void 0:d.filter(O=>O.status==="inactive"))!=null&&F.length;const h=async O=>{console.log("CSV upload:",O)},f=(O,z)=>{console.log("Save view:",O,z)},x=O=>{console.log("Select view:",O)},p=(O,z,G)=>{console.log("Update view:",O,z,G)},m=O=>{console.log("Delete view:",O)},y=()=>{s({})},g=()=>{i(d.map(O=>O.id))},v=()=>{i([])},b=async O=>{console.log("Bulk add tag:",O,n)},S=async O=>{console.log("Bulk remove tag:",O,n)},D=async(O,z)=>{console.log("Bulk send SMS:",O,z)},N=async(O,z,G)=>{console.log("Bulk send email:",O,z,G)},E=async O=>{console.log("Bulk export:",O,n)},w=async O=>{console.log("Bulk status change:",O,n)},_=async()=>{console.log("Bulk delete:",n)},C=async O=>{console.log("Bulk schedule appointment:",O,n)},T=async O=>{console.log("Bulk assign to segment:",O,n)};return a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Hastalar"}),a.jsx(pK,{onUpload:h})]}),a.jsxs(ts,{defaultValue:"list",className:"flex-1 flex flex-col",children:[a.jsxs(ts.List,{className:"px-6 pt-4",children:[a.jsx(ts.Trigger,{value:"list",children:"Hasta Listesi"}),a.jsx(ts.Trigger,{value:"bulk",children:"Toplu lemler"}),a.jsx(ts.Trigger,{value:"search",children:"Gelimi Arama"}),a.jsx(ts.Trigger,{value:"matching",children:"Hasta Eletirme"})]}),a.jsxs(ts.Content,{value:"list",className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx(yK,{savedViews:[],onSelectView:x,onSaveView:f,onUpdateView:p,onDeleteView:m,currentFilters:r}),a.jsx(fK,{value:e,onChange:t}),a.jsx(mK,{filters:r,onChange:s,onClearFilters:y}),a.jsx(xK,{selectedPatients:n,totalPatients:u,onSelectAll:g,onDeselectAll:v,onBulkAddTag:b,onBulkRemoveTag:S,onBulkSendSMS:D,onBulkSendEmail:N,onBulkExport:E,onBulkStatusChange:w,onBulkDelete:_,onBulkScheduleAppointment:C,onBulkAssignToSegment:T})]}),a.jsx("div",{className:"flex-1 p-6",children:a.jsx(hK,{patients:d||[],loading:o})})]}),a.jsx(ts.Content,{value:"bulk",className:"flex-1 p-6",children:a.jsx(wK,{selectedPatients:n,onClearSelection:()=>i([]),onRefresh:()=>{}})}),a.jsx(ts.Content,{value:"search",className:"flex-1 p-6",children:a.jsx(TK,{patients:d||[],onFilteredResults:O=>setPatients(O),onClearFilters:()=>s({})})}),a.jsx(ts.Content,{value:"matching",className:"flex-1 p-6",children:a.jsx(EK,{patients:d||[],onMergePatients:(O,z)=>console.log("Merge:",O,z),onRefresh:()=>{}})})]})]})}const DK=Or("/patients/")({component:CK});function x_(){return a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Invoices"}),a.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:[a.jsx("p",{children:" This page is temporarily disabled due to TypeScript refactoring."}),a.jsx("p",{children:"Please check back later or contact the development team."})]})]})}const AK=Or("/invoices/")({component:x_}),PK=()=>{const{success:e,error:t}=Hl(),[r,s]=k.useState([]),[n,i]=k.useState([]),[l,o]=k.useState(""),[c,d]=k.useState(new Set),[u,h]=k.useState(!0),[f,x]=k.useState(!1),[p,m]=k.useState(!1),[y,g]=k.useState({current:0,total:0}),[v,b]=k.useState([]),[S,D]=k.useState(null),[N,E]=k.useState({reports:!0,prescriptions:!0,processForms:!0}),w=k.useMemo(()=>{const A=new Set;return r.forEach(V=>{V.currentMonthReceipts.forEach(L=>{const P=new Date(L.date),I=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`;A.add(I)})}),Array.from(A).sort().reverse()},[r]);k.useEffect(()=>{_()},[]),k.useEffect(()=>{C()},[r,l]);const _=async()=>{h(!0);try{const A=await fetch("/api/sgk/e-receipts/delivered",{method:"GET",headers:{"Content-Type":"application/json"}});if(A.ok){const V=await A.json();s(V.patients||[])}else console.warn("API ars baarsz, mock data kullanlyor"),s([{id:"pat1",name:"Ahmet Ylmaz",tcNumber:"12345678901",phone:"0555 123 4567",email:"ahmet@example.com",currentMonthReceipts:[{id:"er1",number:"ER20241001",date:"2024-10-15",doctorName:"Dr. Zeynep Kaya",validUntil:"2026-10-15",patientName:"Ahmet Ylmaz",patientTcNumber:"12345678901",materials:[{code:"DMT001",name:"Dijital programlanabilir iitme cihaz - sa",applicationDate:"2024-10-15",deliveryStatus:"delivered"}],sgkDocumentAvailable:!0,patientFormAvailable:!0,sgkStatus:"success"}]},{id:"pat2",name:"Aye Demir",tcNumber:"23456789012",phone:"0555 234 5678",email:"ayse@example.com",currentMonthReceipts:[{id:"er2",number:"ER20241002",date:"2024-10-20",doctorName:"Dr. Mehmet z",validUntil:"2026-10-20",patientName:"Aye Demir",patientTcNumber:"23456789012",materials:[{code:"DMT002",name:"Dijital programlanabilir iitme cihaz - sol",applicationDate:"2024-10-20",deliveryStatus:"delivered"}],sgkDocumentAvailable:!0,patientFormAvailable:!0,sgkStatus:"success"}]}])}catch(A){console.error("Error loading patients:",A),t("Hata","Hastalar yklenirken bir hata olutu")}finally{h(!1)}},C=()=>{if(!l){i(r);return}const A=r.filter(V=>V.currentMonthReceipts.some(L=>{const P=new Date(L.date);return`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`===l}));i(A)},T=A=>{const[V,L]=A.split("-");return new Date(parseInt(V),parseInt(L)-1).toLocaleDateString("tr-TR",{year:"numeric",month:"long"})},j=A=>{const V=new Set(c);V.has(A)?V.delete(A):V.add(A),d(V)},F=()=>{c.size===n.length?d(new Set):d(new Set(n.map(A=>A.id)))},O=async(A,V)=>{const L=n.find(P=>P.id===A);if(L)try{await new Promise(I=>setTimeout(I,1e3));const P=V==="report"?"Rapor":V==="prescription"?"Reete":"lem Formu";e("Baarl",`${L.name} iin ${P} indirildi`)}catch{t("Hata","Belge indirilirken bir hata olutu")}},z=async A=>{const V=n.find(L=>L.id===A);if(V){m(!0),b([]);try{const L=[];N.reports&&L.push("Rapor"),N.prescriptions&&L.push("Reete"),N.processForms&&L.push("lem Formu"),g({current:0,total:L.length});for(let P=0;P<L.length;P++)b(I=>[...I,`${V.name} - ${L[P]} hazrlanyor...`]),g({current:P+1,total:L.length}),await new Promise(I=>setTimeout(I,800)),b(I=>[...I.slice(0,-1),` ${V.name} - ${L[P]} indirildi`]);e("Baarl",`${V.name} iin ${L.length} belge indirildi`)}catch{t("Hata","Belgeler indirilirken bir hata olutu")}finally{m(!1),g({current:0,total:0})}}},G=async()=>{const A=n.filter(V=>c.has(V.id));if(A.length===0){t("Hata","Ltfen en az bir hasta sein");return}m(!0),b([]),x(!1);try{const V=(N.reports?1:0)+(N.prescriptions?1:0)+(N.processForms?1:0),L=A.length*V;g({current:0,total:L});let P=0;for(const I of A){const R=[];N.reports&&R.push("Rapor"),N.prescriptions&&R.push("Reete"),N.processForms&&R.push("lem Formu");for(const U of R)b(M=>[...M,`${I.name} - ${U} hazrlanyor...`]),g({current:P+1,total:L}),await new Promise(M=>setTimeout(M,600)),P++,b(M=>[...M.slice(0,-1),` ${I.name} - ${U} indirildi`])}e("Baarl",`${A.length} hasta iin ${L} belge indirildi`),d(new Set)}catch{t("Hata","Toplu indirme srasnda bir hata olutu")}finally{m(!1),g({current:0,total:0})}},q=A=>{switch(A){case"success":return a.jsx(St,{className:"w-4 h-4 text-green-500"});case"processing":return a.jsx(Xt,{className:"w-4 h-4 text-yellow-500"});case"error":return a.jsx(mt,{className:"w-4 h-4 text-red-500"});default:return a.jsx(Xt,{className:"w-4 h-4 text-gray-500"})}},H=A=>{switch(A){case"success":return"SGK Onayland";case"processing":return"SGK leniyor";case"error":return"SGK Hatas";default:return"Bilinmiyor"}};return u?a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(ya,{className:"w-8 h-8 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-3 text-lg text-gray-600",children:"Ykleniyor..."})]}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SGK Belge ndir"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Bu ay kaydedilen e-reeteler iin belgelerinizi indirin"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ea,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:l,onChange:A=>o(A.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",children:[a.jsx("option",{value:"",children:"Tm Aylar"}),w.map(A=>a.jsx("option",{value:A,children:T(A)},A))]})]}),a.jsxs(Z,{onClick:()=>x(!f),disabled:c.size===0,className:"bg-primary hover:bg-primary-dark text-white",children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),"Toplu ndir (",c.size,")"]})]})]})})}),f&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg mx-4 sm:mx-6 lg:mx-8 mt-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Toplu ndirme"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:N.reports,onChange:A=>E(V=>({...V,reports:A.target.checked})),className:"mr-2"}),a.jsx("span",{className:"font-medium",children:"Rapor Belgeleri"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"SGK onayl rapor belgelerini indir"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:N.prescriptions,onChange:A=>E(V=>({...V,prescriptions:A.target.checked})),className:"mr-2"}),a.jsx("span",{className:"font-medium",children:"E-Reete Belgeleri"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"E-reete onay belgelerini indir"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:N.processForms,onChange:A=>E(V=>({...V,processForms:A.target.checked})),className:"mr-2"}),a.jsx("span",{className:"font-medium",children:"Hasta lem Formlar"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Hasta ilem ve teslim formlarn indir"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Toplam ",a.jsx("span",{className:"font-semibold",children:c.size})," hasta iin belgeler indirilecek"]}),a.jsxs("div",{className:"space-x-2",children:[a.jsx(Z,{onClick:()=>x(!1),variant:"outline",children:"ptal"}),a.jsx(Z,{onClick:G,className:"bg-green-600 hover:bg-green-700 text-white",children:"ndirmeyi Balat"})]})]})]}),p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Belgeler ndiriliyor"})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"lerleme"}),a.jsxs("span",{children:[y.current,"/",y.total]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${y.total>0?y.current/y.total*100:0}%`}})}),a.jsx("div",{className:"max-h-32 overflow-y-auto text-xs text-gray-600 bg-gray-50 p-2 rounded",children:v.map((A,V)=>a.jsx("div",{children:A},V))})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["E-Reete Belgeleri",a.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",n.length,")"]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:c.size===n.length&&n.length>0,onChange:F,className:"mr-2"}),"Tmn Se"]})})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:n.length>0?n.map(A=>a.jsxs("div",{className:"p-4 hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{className:"flex items-center",children:a.jsx("input",{type:"checkbox",checked:c.has(A.id),onChange:()=>j(A.id),className:"mr-3"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:A.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["TC: ",A.tcNumber]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[A.currentMonthReceipts.length," e-reete"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>O(A.id,"report"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:" Rapor"}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>O(A.id,"prescription"),className:"bg-green-600 hover:bg-green-700 text-white",children:" Reete"}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>O(A.id,"form"),className:"bg-purple-600 hover:bg-purple-700 text-white",children:" lem Formu"}),a.jsxs(Z,{size:"sm",onClick:()=>z(A.id),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[a.jsx(yr,{className:"w-3 h-3 mr-1"}),"Tm"]})]})]}),a.jsx("div",{className:"mt-3 pl-7",children:a.jsxs("details",{className:"text-sm",children:[a.jsxs("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-900",children:["E-reete detaylar (",A.currentMonthReceipts.length,")"]}),a.jsx("div",{className:"mt-2 space-y-2",children:A.currentMonthReceipts.map(V=>a.jsx("div",{className:"bg-gray-50 p-2 rounded border-l-4 border-blue-400",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:["E-Reete #",V.number]}),a.jsx("p",{className:"text-xs text-gray-600",children:V.doctorName}),a.jsx("p",{className:"text-xs text-gray-600",children:new Date(V.date).toLocaleDateString("tr-TR")}),a.jsxs("p",{className:"text-xs text-gray-600",children:[V.materials.length," malzeme"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[q(V.sgkStatus),a.jsx("span",{className:"text-xs text-gray-600",children:H(V.sgkStatus)})]}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>D(V),children:a.jsx(In,{className:"w-3 h-3"})})]})]})},V.id))})]})})]},A.id)):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(wt,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"Seilen ay iin e-reete bulunamad."})]})})]})}),S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold",children:["E-Reete Detaylar - ",S.number]}),a.jsx("button",{onClick:()=>D(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hasta"}),a.jsx("p",{className:"text-sm text-gray-900",children:S.patientName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TC Kimlik"}),a.jsx("p",{className:"text-sm text-gray-900",children:S.patientTcNumber})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Doktor"}),a.jsx("p",{className:"text-sm text-gray-900",children:S.doctorName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tarih"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(S.date).toLocaleDateString("tr-TR")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Geerlilik"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(S.validUntil).toLocaleDateString("tr-TR")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SGK Durumu"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[q(S.sgkStatus),a.jsx("span",{className:"text-sm text-gray-900",children:H(S.sgkStatus)})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Teslim Edilen Malzemeler"}),a.jsx("div",{className:"space-y-3",children:S.materials.map((A,V)=>a.jsx("div",{className:"border rounded-lg p-4 bg-green-50 border-green-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-green-800",children:A.name}),a.jsxs("p",{className:"text-sm text-green-600",children:["Kod: ",A.code]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Bavuru Tarihi: ",new Date(A.applicationDate).toLocaleDateString("tr-TR")]})]}),a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Teslim Edildi"})]})},`${A.code}-${V}`))})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[S.patientFormAvailable&&a.jsxs(Z,{onClick:()=>O(S.patientTcNumber,"form"),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),"Hasta lem Formunu ndir"]}),a.jsx(Z,{onClick:()=>D(null),variant:"outline",children:"Kapat"})]})]})]})})})]})},RK=Or("/sgk/downloads")({component:PK});class FK{constructor(){qe(this,"CACHE_KEY_PREFIX","patient_");this.init()}async init(){await xt.init()}async storePatients(t){await xt.savePatients(t)}async getAllPatients(){return await xt.getPatients()}async getPatientById(t){return(await this.getAllPatients()).find(s=>s.id===t)||null}async searchPatients(t){let s=await this.getAllPatients();if(t.search){const d=t.search.toLowerCase();s=s.filter(u=>{var h,f,x,p;return((h=u.firstName)==null?void 0:h.toLowerCase().includes(d))||((f=u.lastName)==null?void 0:f.toLowerCase().includes(d))||u.phone.includes(d)||((x=u.tcNumber)==null?void 0:x.includes(d))||((p=u.email)==null?void 0:p.toLowerCase().includes(d))})}t.status&&(s=s.filter(d=>d.status===t.status)),t.segment&&(s=s.filter(d=>d.segment===t.segment));const n=t.page||1,i=t.limit||50,l=(n-1)*i,o=l+i;return{patients:s.slice(l,o),total:s.length,page:n,pageSize:i,hasMore:o<s.length}}async updatePatient(t){const r=await this.getAllPatients(),s=r.findIndex(n=>n.id===t.id);s>=0?r[s]={...t,updatedAt:new Date().toISOString()}:r.push({...t,updatedAt:new Date().toISOString()}),await this.storePatients(r)}async deletePatient(t){const s=(await this.getAllPatients()).filter(n=>n.id!==t);await this.storePatients(s)}async clearAllPatients(){await this.storePatients([])}async getPatientCount(){return(await this.getAllPatients()).length}async patientExists(t){return await this.getPatientById(t)!==null}async cachePatientData(t,r,s){const n=`${this.CACHE_KEY_PREFIX}${t}`;await xt.setCache(n,r,s)}async getCachedPatientData(t){const r=`${this.CACHE_KEY_PREFIX}${t}`;return await xt.getCache(r)}async clearCachedPatientData(t){const r=`${this.CACHE_KEY_PREFIX}${t}`;await xt.deleteCache(r)}}function IK(e){const[t,r]=k.useState(null),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=k.useMemo(()=>new On,[]),c=k.useMemo(()=>new FK,[]),d=k.useCallback(async x=>{n(!0),l(null);try{const p=await o.fetchPatient(x);if(p)r(p);else{const m=await c.getPatientById(x);r(m)}}catch(p){l(p instanceof Error?p:new Error(String(p)));try{const m=await c.getPatientById(x);r(m)}catch(m){console.error("Failed to load from local storage:",m)}}finally{n(!1)}},[o,c]),u=k.useCallback(async x=>{if(!t)return null;n(!0),l(null);try{const p=await o.updatePatient(t.id,x);return p?(r(p),p):null}catch(p){return l(p instanceof Error?p:new Error(String(p))),null}finally{n(!1)}},[t,o]),h=k.useCallback(async()=>{if(!t)return!1;n(!0),l(null);try{return await o.deletePatient(t.id)?(r(null),!0):!1}catch(x){return l(x instanceof Error?x:new Error(String(x))),!1}finally{n(!1)}},[t,o]),f=k.useCallback(()=>{l(null)},[]);return k.useEffect(()=>{e?d(e):r(null)},[e,d]),{patient:t,data:t,loading:s,isLoading:s,error:i,loadPatient:d,updatePatient:u,deletePatient:h,clearError:f}}function p_(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=k.useCallback(async()=>{var d;if(!e){r([]);return}try{n(!0),l(null);const h=await lr().patientsGetPatientDevices(e);(d=h.data)!=null&&d.success&&Array.isArray(h.data.data)?r(h.data.data):(console.warn("Unexpected API response structure:",h.data),r([]))}catch(u){console.error("Failed to fetch patient devices:",u),l(u instanceof Error?u:new Error("Failed to fetch patient devices")),r([])}finally{n(!1)}},[e]);k.useEffect(()=>{o()},[e]),k.useEffect(()=>{const d=()=>{o()};return window.addEventListener("device:assigned",d),window.addEventListener("device:updated",d),window.addEventListener("device:removed",d),()=>{window.removeEventListener("device:assigned",d),window.removeEventListener("device:updated",d),window.removeEventListener("device:removed",d)}},[e]);const c=k.useCallback(()=>{l(null)},[]);return{devices:t,data:t,loading:s,isLoading:s,error:i,refetch:o,clearError:c}}function g_(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=k.useMemo(()=>new On,[]),c=k.useCallback(async u=>{n(!0),l(null);try{const h=await o.getSales(u);r((h==null?void 0:h.data)||[])}catch(h){l(h instanceof Error?h:new Error(String(h))),r([])}finally{n(!1)}},[o]);k.useEffect(()=>{e?c(e):r([])},[e,c]);const d=k.useCallback(()=>{l(null)},[]);return{sales:t,data:t,loading:s,isLoading:s,error:i,fetchSales:c,refresh:c,clearError:d}}function y_(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=k.useMemo(()=>new On,[]),c=k.useCallback(async u=>{n(!0),l(null);try{const h=await o.getTimeline(u);r((h==null?void 0:h.data)||[])}catch(h){l(h instanceof Error?h:new Error(String(h))),r([])}finally{n(!1)}},[o]);k.useEffect(()=>{e?c(e):r([])},[e,c]);const d=k.useCallback(()=>{l(null)},[]);return{timeline:t,data:t,loading:s,isLoading:s,error:i,fetchTimeline:c,clearError:d}}function v_(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=k.useMemo(()=>new On,[]),c=k.useCallback(async u=>{n(!0),l(null);try{const h=await o.getDocuments(u);r((h==null?void 0:h.data)||[])}catch(h){l(h instanceof Error?h:new Error(String(h))),r([])}finally{n(!1)}},[o]);k.useEffect(()=>{e?c(e):r([])},[e,c]);const d=k.useCallback(()=>{l(null)},[]);return{documents:t,data:t,loading:s,isLoading:s,error:i,fetchDocuments:c,clearError:d}}const Y2=({variant:e="secondary",size:t="md",children:r})=>{const s="inline-flex items-center font-medium rounded-full",n={success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",secondary:"bg-gray-100 text-gray-800"},i={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"};return a.jsx("span",{className:`${s} ${n[e]} ${i[t]}`,children:r})},MK=({patient:e,onEdit:t,onCall:r,onDelete:s,onPrint:n,onExport:i,onSendSMS:l,onCopyInfo:o,onGenerateReport:c})=>{const d=p=>p?{active:{label:"Aktif",variant:"success"},inactive:{label:"Pasif",variant:"secondary"},pending:{label:"Beklemede",variant:"warning"},archived:{label:"Arivlenmi",variant:"danger"}}[p]||{label:p,variant:"secondary"}:{label:"Belirtilmemi",variant:"secondary"},u=p=>p?p>=80?"Yksek":p>=50?"Orta":"Dk":"Dk",h=p=>p?new Date(p).toLocaleDateString("tr-TR"):"Belirtilmemi",f=p=>p?p.replace(/(\d{3})(\d{3})(\d{2})(\d{2})/,"($1) $2 $3 $4"):"Belirtilmemi",x=d(e.status);return a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(Mt,{className:"w-8 h-8 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[e.firstName||""," ",e.lastName||""]}),a.jsx(Y2,{variant:x.variant,children:x.label}),a.jsxs("span",{className:"text-sm text-gray-500",children:["ncelik: ",u(e.priorityScore)]})]}),a.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[a.jsx("span",{className:"font-medium",children:"Segment:"})," ",e.segment||"Belirtilmemi"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ii,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:f(e.phone)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{children:["TC: ",e.tcNumber||"Belirtilmemi"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{children:["Doum: ",h(e.birthDate)]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ml,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:e.email||"Belirtilmemi"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kf,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:(()=>{const p=e.address;if(typeof p=="object"&&p!==null){const m=p;return m.fullAddress||`${m.district||""} ${m.city||""}`.trim()||"Belirtilmemi"}return e.addressFull||p||"Belirtilmemi"})()})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{children:["Kazanm: ",e.acquisitionType||"Belirtilmemi"]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("span",{children:["Kayt: ",h(e.createdAt)]}),e.tags&&e.tags.length>0&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{children:"Etiketler:"}),e.tags.map((p,m)=>a.jsx(Y2,{variant:"secondary",size:"sm",children:p},m))]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[r&&a.jsx(Z,{variant:"outline",size:"sm",onClick:r,icon:a.jsx(Ii,{className:"w-4 h-4"}),iconPosition:"left",children:"Ara"}),l&&a.jsx(Z,{variant:"outline",size:"sm",onClick:l,icon:a.jsx(Za,{className:"w-4 h-4"}),iconPosition:"left",children:"SMS"}),t&&a.jsx(Z,{variant:"primary",size:"sm",onClick:t,icon:a.jsx(rn,{className:"w-4 h-4"}),iconPosition:"left",children:"Dzenle"}),a.jsxs("div",{className:"relative group",children:[a.jsx(Z,{variant:"outline",size:"sm",icon:a.jsx(hS,{className:"w-4 h-4"}),children:"Dier"}),a.jsx("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-md shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:a.jsxs("div",{className:"py-1",children:[n&&a.jsxs(Z,{variant:"ghost",onClick:n,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 justify-start",children:[a.jsx(_5,{className:"w-4 h-4 mr-3"}),"Yazdr"]}),i&&a.jsxs(Z,{variant:"ghost",onClick:i,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 justify-start",children:[a.jsx(yr,{className:"w-4 h-4 mr-3"}),"Da Aktar"]}),c&&a.jsxs(Z,{variant:"ghost",onClick:c,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 justify-start",children:[a.jsx(wt,{className:"w-4 h-4 mr-3"}),"Rapor Olutur"]}),o&&a.jsxs(Z,{variant:"ghost",onClick:o,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 justify-start",children:[a.jsx(c5,{className:"w-4 h-4 mr-3"}),"Bilgileri Kopyala"]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"border-t border-gray-100 my-1"}),a.jsxs(Z,{variant:"ghost",onClick:s,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 justify-start",children:[a.jsx(Es,{className:"w-4 h-4 mr-3"}),"Sil"]})]})]})})]})]})]})})},Id=({value:e,onValueChange:t,className:r,children:s})=>a.jsx("div",{className:r,children:bt.Children.map(s,n=>bt.isValidElement(n)?bt.cloneElement(n,{activeValue:e,onValueChange:t}):n)}),OK=({className:e,children:t,activeValue:r,onValueChange:s})=>a.jsx("div",{className:`border-b border-gray-200 ${e||""}`,children:a.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:bt.Children.map(t,n=>bt.isValidElement(n)?bt.cloneElement(n,{activeValue:r,onValueChange:s}):n)})}),LK=({value:e,disabled:t,className:r,children:s,activeValue:n,onValueChange:i})=>{const l=n===e;return a.jsx(Z,{onClick:()=>!t&&(i==null?void 0:i(e)),disabled:t,className:`
        group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
        ${l?"border-blue-500 text-blue-600":t?"border-transparent text-gray-400 cursor-not-allowed":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
        ${r||""}
      `,variant:"outline",children:s})};Id.List=OK;Id.Trigger=LK;const BK=({patient:e,activeTab:t,onTabChange:r})=>{var n,i,l;const s=[{id:"general",label:"Genel Bilgiler",icon:a.jsx(Mt,{className:"w-4 h-4"}),count:null,disabled:!1},{id:"devices",label:"Cihazlar",icon:a.jsx(xy,{className:"w-4 h-4"}),count:((n=e.devices)==null?void 0:n.length)||0,disabled:!1},{id:"sales",label:"Satlar",icon:a.jsx(_a,{className:"w-4 h-4"}),count:0,disabled:!1},{id:"sgk",label:"SGK lemleri",icon:a.jsx(Iu,{className:"w-4 h-4"}),count:null,disabled:!1},{id:"documents",label:"Belgeler",icon:a.jsx(wt,{className:"w-4 h-4"}),count:((i=e.reports)==null?void 0:i.length)||0,disabled:!1},{id:"timeline",label:"Zaman izelgesi",icon:a.jsx(Xt,{className:"w-4 h-4"}),count:null,disabled:!1},{id:"notes",label:"Notlar",icon:a.jsx(A5,{className:"w-4 h-4"}),count:((l=e.notes)==null?void 0:l.length)||0,disabled:!1},{id:"appointments",label:"Randevular",icon:a.jsx(pt,{className:"w-4 h-4"}),count:0,disabled:!1}];return a.jsx(Id,{value:t,onValueChange:o=>{["general","devices","sales","sgk","documents","timeline","notes","appointments"].includes(o)&&r(o)},className:"w-full",children:a.jsx(Id.List,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:s.map(o=>a.jsxs(Id.Trigger,{value:o.id,disabled:o.disabled,className:"flex items-center space-x-2 text-sm",children:[o.icon,a.jsx("span",{className:"hidden sm:inline",children:o.label}),o.count!==null&&o.count>0&&a.jsx("span",{className:"ml-1 bg-blue-100 text-blue-800 text-xs rounded-full px-2 py-0.5",children:o.count})]},o.id))})})},ut=({variant:e="primary",children:t,...r})=>{const s="px-3 py-1 rounded text-sm",n=e==="primary"?`${s} bg-blue-600 text-white hover:bg-blue-700`:e==="secondary"?`${s} bg-gray-100 text-gray-900`:`${s} bg-transparent`;return a.jsx(Z,{className:n,...r,variant:"default",children:t})},b_=({patientId:e,note:t,isOpen:r,onClose:s,onSave:n,isLoading:i=!1})=>{var v,b,S;const[l,o]=k.useState({patientId:e,title:"",content:"",priority:"medium",category:"general",isPrivate:!1,createdBy:"current_user",tags:[]}),[c,d]=k.useState(""),[u,h]=k.useState({});k.useEffect(()=>{r&&(t?(o({...t,tags:t.tags||[]}),d("")):(o({patientId:e,title:"",content:"",priority:"medium",category:"general",isPrivate:!1,createdBy:"current_user",tags:[]}),d("")),h({}))},[r,t,e]);const f=()=>{var N,E;const D={};return(N=l.title)!=null&&N.trim()||(D.title="Not bal zorunludur"),(E=l.content)!=null&&E.trim()||(D.content="Not ierii zorunludur"),l.title&&l.title.length>100&&(D.title="Balk 100 karakterden uzun olamaz"),l.content&&l.content.length>2e3&&(D.content="erik 2000 karakterden uzun olamaz"),h(D),Object.keys(D).length===0},x=async D=>{var N,E;if(D.preventDefault(),!!f())try{const w={...l,title:(N=l.title)==null?void 0:N.trim(),content:(E=l.content)==null?void 0:E.trim(),tags:l.tags||[]};await n(w),s()}catch(w){console.error("Not kaydedilirken hata:",w)}},p=()=>{var D;c.trim()&&!((D=l.tags)!=null&&D.includes(c.trim()))&&(o(N=>({...N,tags:[...N.tags||[],c.trim()]})),d(""))},m=D=>{o(N=>{var E;return{...N,tags:((E=N.tags)==null?void 0:E.filter(w=>w!==D))||[]}})},y=D=>{D.key==="Enter"&&(D.preventDefault(),p())},g=D=>{switch(D){case"low":return a.jsx(Mo,{className:"w-4 h-4 text-blue-500"});case"medium":return a.jsx(Mo,{className:"w-4 h-4 text-yellow-500"});case"high":return a.jsx(os,{className:"w-4 h-4 text-orange-500"});case"critical":return a.jsx(os,{className:"w-4 h-4 text-red-500"});default:return a.jsx(Mo,{className:"w-4 h-4 text-gray-400"})}};return a.jsx(on,{open:r,onClose:s,title:t?"Notu Dzenle":"Yeni Not Ekle",children:a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balk *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(wt,{className:"w-4 h-4 text-gray-400"})}),a.jsx("input",{type:"text",value:l.title||"",onChange:D=>o(N=>({...N,title:D.target.value})),placeholder:"Not bal...",maxLength:100,className:`w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.title?"border-red-300":""}`}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsxs("span",{className:"text-xs text-gray-400",children:[((v=l.title)==null?void 0:v.length)||0,"/100"]})})]}),u.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"erik *"}),a.jsx("textarea",{value:l.content||"",onChange:D=>o(N=>({...N,content:D.target.value})),placeholder:"Not ierii...",rows:6,maxLength:2e3,className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.content?"border-red-300":""}`}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[u.content&&a.jsx("p",{className:"text-sm text-red-600",children:u.content}),a.jsxs("span",{className:"text-xs text-gray-400 ml-auto",children:[((b=l.content)==null?void 0:b.length)||0,"/2000"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ncelik"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"low",label:"Dk"},{value:"medium",label:"Orta"},{value:"high",label:"Yksek"},{value:"critical",label:"Kritik"}].map(D=>a.jsxs("label",{className:"relative",children:[a.jsx("input",{type:"radio",name:"priority",value:D.value,checked:l.priority===D.value,onChange:N=>o(E=>({...E,priority:N.target.value})),className:"sr-only"}),a.jsxs("div",{className:`flex items-center justify-center p-2 border rounded-lg cursor-pointer transition-colors text-sm ${l.priority===D.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[g(D.value),a.jsx("span",{className:"ml-1",children:D.label})]})]},D.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),a.jsxs("select",{value:l.category||"general",onChange:D=>o(N=>({...N,category:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"medical",children:"Tbbi"}),a.jsx("option",{value:"administrative",children:"dari"}),a.jsx("option",{value:"technical",children:"Teknik"}),a.jsx("option",{value:"general",children:"Genel"})]})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.isPrivate||!1,onChange:D=>o(N=>({...N,isPrivate:D.target.checked})),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[a.jsx(Mt,{className:"w-4 h-4 inline mr-1"}),"zel not (sadece yetkili kiiler grebilir)"]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiketler"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(S=l.tags)==null?void 0:S.map((D,N)=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[D,a.jsx("button",{type:"button",onClick:()=>m(D),className:"ml-1 text-blue-600 hover:text-blue-800",children:""})]},N))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:c,onChange:D=>d(D.target.value),onKeyPress:y,placeholder:"Etiket ekleyin...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx(ut,{type:"button",onClick:p,disabled:!c.trim(),variant:"secondary",children:"Ekle"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Enter tuuna basarak veya "Ekle" butonuna tklayarak etiket ekleyin'})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:s,disabled:i,children:"ptal"}),a.jsx(ut,{type:"submit",disabled:i,className:"min-w-[120px]",children:i?"Kaydediliyor...":t?"Gncelle":"Not Ekle"})]})]})})},q2=({patient:e,onPatientUpdate:t})=>{const[r,s]=k.useState(!1),[n,i]=k.useState(!1),[l,o]=k.useState(!1);if(!e)return a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(mt,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Hasta Bulunamad"}),a.jsx("p",{className:"text-gray-500",children:"Hasta bilgileri yklenirken bir hata olutu."})]});const c=m=>new Date(m).toLocaleDateString("tr-TR"),d=m=>{switch(m){case"active":return a.jsx(St,{className:"w-4 h-4 text-green-500"});case"inactive":return a.jsx(mt,{className:"w-4 h-4 text-red-500"});default:return a.jsx(mt,{className:"w-4 h-4 text-gray-500"})}},u=m=>{switch(m){case"active":return"Aktif";case"inactive":return"Pasif";default:return"Bilinmiyor"}},h=()=>{s(!0)},f=()=>{i(!0)},x=async()=>{alert("SMS gnderme zellii ayarlar mensnden SMS paketi kontrol yaplacak ekilde gelitirilecek.")},p=async m=>{o(!0);try{console.log("Saving note:",m),s(!1)}catch(y){throw console.error("Note save failed:",y),y}finally{o(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white border rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Hzl lemler"})}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(ut,{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2",children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),"Not Ekle"]}),a.jsxs(ut,{onClick:f,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2",children:[a.jsx(rn,{className:"w-4 h-4 mr-2"}),"Etiket Gncelle"]}),a.jsxs(ut,{onClick:x,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2",children:[a.jsx(Za,{className:"w-4 h-4 mr-2"}),"SMS Gnder"]})]})})]}),a.jsxs("div",{className:"bg-white border rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Kiisel Bilgiler"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Mt,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ad Soyad"}),a.jsxs("p",{className:"text-sm text-gray-900",children:[e.firstName," ",e.lastName]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ii,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Telefon"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.phone||"Belirtilmemi"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ml,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"E-posta"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.email||"Belirtilmemi"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:d(e.status)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Durum"}),a.jsx("p",{className:"text-sm text-gray-900",children:u(e.status)})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Mi,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"TC Kimlik No"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.tcNumber||"Belirtilmemi"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Doum Tarihi"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.birthDate?c(e.birthDate):"Belirtilmemi"})]})]})]})})]}),a.jsxs("div",{className:"bg-white border rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Adres Bilgileri"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Kf,{className:"w-5 h-5 text-gray-400 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Adres"}),a.jsx("p",{className:"text-sm text-gray-900",children:(()=>e.addressFull?e.addressFull:"Adres bilgisi bulunmuyor")()})]})]})})]}),a.jsxs("div",{className:"bg-white border rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Ek Bilgiler"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[e.notes&&e.notes.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Son Notlar"}),a.jsx("div",{className:"space-y-2",children:e.notes.slice(0,3).map(m=>a.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[a.jsx("p",{className:"text-sm text-gray-900",children:m.text}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m.author," - ",c(m.date)]})]},m.id))})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Etiketler"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((m,y)=>a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:m},y))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kayt Tarihi"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.createdAt?c(e.createdAt):"Bilinmiyor"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Son Gncelleme"}),a.jsx("p",{className:"text-sm text-gray-900",children:e.updatedAt?c(e.updatedAt):"Bilinmiyor"})]})]})]})})]}),r&&a.jsx(b_,{patientId:e.id||"",isOpen:r,onClose:()=>s(!1),onSave:p,isLoading:l})]})},zK=({device:e,onDeviceClick:t})=>{const r=c=>c?new Date(c).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}):"Belirtilmemi",s=c=>c?`${c.toLocaleString("tr-TR")} `:"Belirtilmemi",n=c=>{switch(c){case"active":case"assigned":return"bg-green-100 text-green-800 border-green-200";case"trial":return"bg-blue-100 text-blue-800 border-blue-200";case"returned":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"defective":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=c=>{switch(c){case"active":case"assigned":return"Aktif";case"trial":return"Deneme";case"returned":return"ade";case"defective":return"Arzal";default:return c}},o=(c=>{switch(c==null?void 0:c.toLowerCase()){case"left":case"sol":return{border:"border-l-4 border-l-blue-500",bg:"bg-blue-50",text:"text-blue-700",label:"Sol Kulak"};case"right":case"sa":return{border:"border-l-4 border-l-red-500",bg:"bg-red-50",text:"text-red-700",label:"Sa Kulak"};case"both":case"bilateral":return{border:"border-l-4 border-l-purple-500",bg:"bg-purple-50",text:"text-purple-700",label:"Bilateral"};default:return{border:"border-l-4 border-l-gray-400",bg:"bg-gray-50",text:"text-gray-700",label:c||"Belirtilmemi"}}})(e.side||e.ear);return a.jsx("div",{className:`bg-white rounded-lg p-4 border hover:shadow-md transition-shadow cursor-pointer ${o.border} ${o.bg}`,onClick:()=>t==null?void 0:t(e),role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),t==null||t(e))},"aria-label":`${e.brand} ${e.model} cihaz`,children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Sl,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:[e.brand," ",e.model]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${o.text} ${o.bg}`,children:[a.jsx(Kf,{className:"w-3 h-3 mr-1"}),o.label]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${n(e.status)}`,children:i(e.status)})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-gray-500 flex items-center",children:[a.jsx(Ci,{className:"w-3 h-3 mr-1"}),"Seri No:"]}),a.jsx("p",{className:"font-medium text-gray-900",children:e.serialNumber||"Belirtilmemi"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Tip:"}),a.jsx("p",{className:"font-medium text-gray-900",children:e.type||"Standart"})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"text-gray-500 flex items-center",children:[a.jsx(rr,{className:"w-3 h-3 mr-1"}),"Liste Fiyat:"]}),a.jsx("p",{className:"font-medium text-gray-900",children:s(e.listPrice||e.price)})]}),a.jsxs("div",{children:[a.jsxs("span",{className:"text-gray-500 flex items-center",children:[a.jsx(_a,{className:"w-3 h-3 mr-1"}),"Sat Fiyat:"]}),a.jsx("p",{className:"font-medium text-gray-900",children:s(e.salePrice||e.price)})]})]}),(e.sgkReduction||e.patientPayment||e.paymentMethod)&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"deme Bilgileri"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.sgkReduction&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"SGK Katks:"}),a.jsx("p",{className:"font-medium text-green-600",children:s(e.sgkReduction)})]}),e.patientPayment&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Hasta demesi:"}),a.jsx("p",{className:"font-medium text-blue-600",children:s(e.patientPayment)})]}),e.paymentMethod&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"deme Yntemi:"}),a.jsx("p",{className:"font-medium text-gray-900 capitalize",children:e.paymentMethod})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600 mb-3",children:[(e.assignedDate||e.purchaseDate)&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),a.jsxs("span",{children:["Atama: ",r(e.assignedDate||e.purchaseDate)]})]}),e.warrantyExpiry&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Iu,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),a.jsxs("span",{children:["Garanti: ",r(e.warrantyExpiry)]})]}),e.batteryType&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(a5,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),a.jsxs("span",{children:["Pil: ",e.batteryType]})]})]}),e.status==="trial"&&e.trialEndDate&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:a.jsxs("div",{className:"flex items-center text-blue-700",children:[a.jsx(Xt,{className:"w-4 h-4 mr-2"}),a.jsxs("span",{className:"text-sm font-medium",children:["Deneme Sresi: ",r(e.trialEndDate)," tarihine kadar"]})]})}),(e.assignedBy||e.reason)&&a.jsx("div",{className:"border-t border-gray-200 pt-3",children:a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.assignedBy&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{children:["Atan: ",e.assignedBy]})]}),e.reason&&a.jsxs("div",{children:[a.jsx("span",{children:"Sebep: "}),a.jsx("span",{className:"capitalize",children:e.reason})]})]})}),e.notes&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-start text-gray-600",children:[a.jsx(wt,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Notlar:"}),a.jsx("p",{className:"text-sm mt-1",children:e.notes})]})]})}),e.settings&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center text-gray-600",children:[a.jsx(Ci,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),a.jsx("span",{className:"text-sm",children:"Cihaz ayarlar mevcut"})]})})]})})})},Ln=({className:e="",lines:t=3})=>a.jsx("div",{className:`animate-pulse space-y-3 ${e}`,role:"status","aria-label":"Ykleniyor",children:Array.from({length:t}).map((r,s)=>a.jsx("div",{className:`bg-gray-300 rounded ${s===0?"h-4 w-3/4":s===1?"h-4 w-1/2":"h-4 w-2/3"}`},s))}),$K=({searchTerm:e,onSearchChange:t,filteredDevices:r,selectedDevice:s,onDeviceSelect:n,errors:i={}})=>{const l=u=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(u),o=u=>{switch(u){case"hearing_aid":return a.jsx(xy,{className:"w-4 h-4"});case"cochlear_implant":return a.jsx(il,{className:"w-4 h-4"});case"bone_anchored":return a.jsx(il,{className:"w-4 h-4"});default:return a.jsx(il,{className:"w-4 h-4"})}},c=u=>{switch(u){case"hearing_aid":return"itme Cihaz";case"cochlear_implant":return"Koklear mplant";case"bone_anchored":return"Kemik letimli";default:return"Dier"}},d=u=>{switch(u){case"left":return"Sol";case"right":return"Sa";case"both":case"bilateral":return"Bilateral";default:return u}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cihaz Arama *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Lr,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"text",value:e,onChange:u=>t(u.target.value),placeholder:"Marka, model veya barkod ile arayn...",className:`pl-10 ${i.deviceId?"border-red-300":""}`})]}),i.deviceId&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.deviceId})]}),e&&a.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:r.length>0?a.jsx("div",{className:"divide-y divide-gray-200",children:r.map(u=>a.jsx("div",{onClick:()=>n(u),className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors ${(s==null?void 0:s.id)===u.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o(u.category),a.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:[u.brand," ",u.model]}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:c(u.category)})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsxs("span",{children:["Kulak: ",d(u.ear)]}),a.jsxs("span",{children:["Stok: ",u.availableInventory]}),u.barcode&&a.jsxs("span",{children:["Barkod: ",u.barcode]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:l(u.price)}),a.jsx("div",{className:`text-xs ${u.status==="available"?"text-green-600":"text-red-600"}`,children:u.status==="available"?"Mevcut":"Stokta Yok"})]})]})},u.id))}):a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(il,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"Arama kriterlerinize uygun cihaz bulunamad."})]})}),s&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[o(s.category),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:["Seilen Cihaz: ",s.brand," ",s.model]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-700",children:[a.jsxs("div",{children:["Kategori: ",c(s.category)]}),a.jsxs("div",{children:["Kulak: ",d(s.ear)]}),a.jsxs("div",{children:["Liste Fiyat: ",l(s.price)]}),a.jsxs("div",{children:["Mevcut Stok: ",s.availableInventory]})]})]})]})})]})},UK=({formData:e,onFormDataChange:t,errors:r={}})=>{const s=(i,l)=>{t({...e,[i]:l})},n=i=>{switch(i){case"assigned":return a.jsx(St,{className:"w-4 h-4 text-green-500"});case"trial":return a.jsx(Xt,{className:"w-4 h-4 text-blue-500"});case"returned":return a.jsx(py,{className:"w-4 h-4 text-orange-500"});case"defective":return a.jsx(mt,{className:"w-4 h-4 text-red-500"});default:return a.jsx(St,{className:"w-4 h-4 text-gray-500"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atama Tarihi *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(pt,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"date",value:e.assignedDate||"",onChange:i=>s("assignedDate",i.target.value),className:`pl-10 ${r.assignedDate?"border-red-300":""}`}),r.assignedDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.assignedDate})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atayan Kii"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Mt,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"text",value:e.assignedBy||"",onChange:i=>s("assignedBy",i.target.value),placeholder:"Atayan kii ad",className:"pl-10"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kulak Seimi *"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"left",label:"Sol Kulak"},{value:"right",label:"Sa Kulak"},{value:"both",label:"Her ki Kulak"}].map(i=>a.jsxs("label",{className:"relative",children:[a.jsx("input",{type:"radio",name:"ear",value:i.value,checked:e.ear===i.value,onChange:l=>s("ear",l.target.value),className:"sr-only"}),a.jsx("div",{className:`flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-colors ${e.ear===i.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:a.jsx("span",{className:"text-sm font-medium",children:i.label})})]},i.value))}),r.ear&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.ear})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atama Sebebi *"}),a.jsx(Ue,{value:e.reason||"",onChange:i=>s("reason",i.target.value),label:"",options:[{value:"",label:"Sebep seiniz"},{value:"sale",label:"Sat"},{value:"service",label:"Servis"},{value:"repair",label:"Tamir"},{value:"trial",label:"Deneme"},{value:"replacement",label:"Deiim"},{value:"proposal",label:"Teklif"},{value:"other",label:"Dier"}],className:r.reason?"border-red-300":""}),r.reason&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.reason})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum *"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"assigned",label:"Atand"},{value:"trial",label:"Deneme"},{value:"returned",label:"ade Edildi"},{value:"defective",label:"Arzal"}].map(i=>a.jsxs("label",{className:"relative",children:[a.jsx("input",{type:"radio",name:"status",value:i.value,checked:e.status===i.value,onChange:l=>s("status",l.target.value),className:"sr-only"}),a.jsxs("div",{className:`flex items-center justify-center p-3 border rounded-lg cursor-pointer transition-colors ${e.status===i.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[n(i.value),a.jsx("span",{className:"ml-2 text-sm font-medium",children:i.label})]})]},i.value))}),r.status&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.status})]}),e.status==="trial"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deneme Biti Tarihi *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(pt,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"date",value:e.trialEndDate||"",onChange:i=>s("trialEndDate",i.target.value),className:`pl-10 ${r.trialEndDate?"border-red-300":""}`}),r.trialEndDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.trialEndDate})]})]}),e.status==="returned"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ade Tarihi"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(pt,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"date",value:e.returnDate||"",onChange:i=>s("returnDate",i.target.value),className:"pl-10"})]})]}),(e.status==="returned"||e.status==="defective")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cihaz Durumu"}),a.jsx(Ue,{value:e.condition||"",onChange:i=>s("condition",i.target.value),label:"",options:[{value:"",label:"Durum sein..."},{value:"excellent",label:"Mkemmel"},{value:"good",label:"yi"},{value:"fair",label:"Orta"},{value:"poor",label:"Kt"},{value:"damaged",label:"Hasarl"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-3 left-3 flex items-start pointer-events-none",children:a.jsx(wt,{className:"w-4 h-4 text-gray-400"})}),a.jsx(wr,{value:e.notes||"",onChange:i=>s("notes",i.target.value),placeholder:"Cihaz atamas ile ilgili notlar...",rows:3,className:"pl-10"})]})]})]})},VK=({formData:e,onFormDataChange:t,errors:r={},showTrialPricing:s=!1})=>{var o;const n=(c,d)=>{t({...e,[c]:d})},i=c=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(c),l=[{value:"",label:"SGK destei seiniz"},{value:"no_coverage",label:"SGK Destei Yok"},{value:"under4_parent_working",label:"4 Ya Alt (Veli alan)"},{value:"under4_parent_retired",label:"4 Ya Alt (Veli Emekli)"},{value:"age5_12_parent_working",label:"5-12 Ya (Veli alan)"},{value:"age5_12_parent_retired",label:"5-12 Ya (Veli Emekli)"},{value:"age13_18_parent_working",label:"13-18 Ya (Veli alan)"},{value:"age13_18_parent_retired",label:"13-18 Ya (Veli Emekli)"},{value:"over18_working",label:"18+ Ya (alan)"},{value:"over18_retired",label:"18+ Ya (Emekli)"}];return a.jsxs("div",{className:"space-y-6",children:[s&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-3 flex items-center",children:[a.jsx(Hf,{className:"w-4 h-4 mr-2"}),"Deneme Fiyatlandrmas"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:"Deneme Liste Fiyat"}),a.jsx(ye,{type:"number",value:e.trialListPrice||"",onChange:c=>n("trialListPrice",parseFloat(c.target.value)||0),placeholder:"0.00",className:"text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-blue-700 mb-1",children:"Deneme Fiyat"}),a.jsx(ye,{type:"number",value:e.trialPrice||"",onChange:c=>n("trialPrice",parseFloat(c.target.value)||0),placeholder:"0.00",className:"text-sm"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-2"}),"Fiyatlandrma Bilgileri"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Liste Fiyat"}),a.jsx(ye,{type:"number",value:e.listPrice||"",onChange:c=>n("listPrice",parseFloat(c.target.value)||0),placeholder:"0.00",className:r.listPrice?"border-red-300":""}),r.listPrice&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.listPrice})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SGK Destek Tr"}),a.jsx(Ue,{value:e.sgkSupportType||"",onChange:c=>n("sgkSupportType",c.target.value),label:"",options:l,className:r.sgkSupportType?"border-red-300":""}),r.sgkSupportType&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.sgkSupportType})]}),e.sgkReduction&&e.sgkReduction>0&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-green-700",children:"SGK Destei:"}),a.jsxs("span",{className:"font-medium text-green-900",children:["-",i(e.sgkReduction)]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ndirim Tr"}),a.jsx(Ue,{value:e.discountType||"none",onChange:c=>n("discountType",c.target.value),label:"",options:[{value:"none",label:"ndirim Yok"},{value:"percentage",label:"Yzde (%)"},{value:"amount",label:"Tutar ()"}]})]}),e.discountType!=="none"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ndirim Deeri"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.discountType==="percentage"?a.jsx(fS,{className:"w-4 h-4 text-gray-400"}):a.jsx("span",{className:"text-gray-400 text-sm",children:""})}),a.jsx(ye,{type:"number",value:e.discountValue||"",onChange:c=>n("discountValue",parseFloat(c.target.value)||0),placeholder:"0",className:"pl-8"})]})]})]}),e.listPrice&&e.listPrice>0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Fiyat zeti"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Liste Fiyat:"}),a.jsx("span",{className:"font-medium",children:i(e.listPrice)})]}),e.sgkReduction&&e.sgkReduction>0&&a.jsxs("div",{className:"flex justify-between text-green-600",children:[a.jsx("span",{children:"SGK Destei:"}),a.jsxs("span",{children:["-",i(e.sgkReduction)]})]}),e.discountValue&&e.discountValue>0&&a.jsxs("div",{className:"flex justify-between text-blue-600",children:[a.jsxs("span",{children:["ndirim (",e.discountType==="percentage"?"%":"","):"]}),a.jsxs("span",{children:["-",e.discountType==="percentage"?`${e.discountValue}%`:i(e.discountValue)]})]}),a.jsxs("div",{className:"flex justify-between font-medium text-lg border-t pt-2",children:[a.jsx("span",{children:"Sat Fiyat:"}),a.jsx("span",{children:i(e.salePrice||e.listPrice)})]}),e.ear==="both"&&a.jsxs("div",{className:"flex justify-between text-purple-600 text-sm",children:[a.jsx("span",{children:"Bilateral (x2):"}),a.jsx("span",{children:i((e.salePrice||e.listPrice)*2)})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(_a,{className:"w-4 h-4 mr-2"}),"deme Bilgileri"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peinat"}),a.jsx(ye,{type:"number",value:e.downPayment||"",onChange:c=>n("downPayment",parseFloat(c.target.value)||0),placeholder:"0.00"})]}),e.remainingAmount!==void 0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-blue-700",children:"Kalan Tutar:"}),a.jsx("span",{className:"font-medium text-blue-900",children:i(e.remainingAmount)})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"deme Yntemi"}),a.jsx(Ue,{value:e.paymentMethod||"",onChange:c=>n("paymentMethod",c.target.value),label:"",options:[{value:"",label:"deme yntemini seiniz"},{value:"cash",label:"Nakit"},{value:"card",label:"Kredi Kart"},{value:"transfer",label:"Havale/EFT"},{value:"installment",label:"Taksit"}],className:r.paymentMethod?"border-red-300":""}),r.paymentMethod&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.paymentMethod})]}),e.paymentMethod==="installment"&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-medium text-yellow-900 mb-3",children:"Taksit Bilgileri"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-yellow-700 mb-1",children:"Taksit Says"}),a.jsx(Ue,{value:((o=e.installmentCount)==null?void 0:o.toString())||"",onChange:c=>{const d=parseInt(c.target.value),u=e.remainingAmount?e.remainingAmount/d:0;n("installmentCount",d),n("monthlyInstallment",u)},label:"",options:[{value:"",label:"Taksit sein"},{value:"3",label:"3 Taksit"},{value:"6",label:"6 Taksit"},{value:"9",label:"9 Taksit"},{value:"12",label:"12 Taksit"},{value:"18",label:"18 Taksit"},{value:"24",label:"24 Taksit"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-yellow-700 mb-1",children:"Aylk Taksit"}),a.jsx(ye,{type:"text",value:e.monthlyInstallment?i(e.monthlyInstallment):"0.00",readOnly:!0,className:"bg-yellow-100 text-sm"})]})]})]})]})]})},HK=({formData:e,onFormDataChange:t,selectedDevice:r,errors:s={}})=>{const n=(c,d)=>{t({...e,[c]:d})},i=()=>(r==null?void 0:r.availableSerials)||[],l=c=>i().includes(c),o=(c,d,u)=>{const h=e[d]||"",f=i(),x=!h||l(h);return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ah,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"text",value:h,onChange:p=>n(d,p.target.value),placeholder:u,className:`pl-10 ${s[d]?"border-red-300":h&&!x?"border-orange-300":""}`}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:h&&(x?a.jsx(St,{className:"w-4 h-4 text-green-500"}):a.jsx(os,{className:"w-4 h-4 text-orange-500"}))})]}),f.length>0&&a.jsx(Ue,{value:"",onChange:p=>{p.target.value&&n(d,p.target.value)},label:"",options:[{value:"",label:"Mevcut seri numaralarndan sein..."},...f.map(p=>({value:p,label:p}))],className:"text-sm"}),s[d]&&a.jsx("p",{className:"text-sm text-red-600",children:s[d]}),h&&!x&&a.jsxs("p",{className:"text-sm text-orange-600 flex items-center",children:[a.jsx(os,{className:"w-3 h-3 mr-1"}),"Bu seri numaras mevcut deil veya kullanmda"]})]})]})};return r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-2 flex items-center",children:[a.jsx(ah,{className:"w-4 h-4 mr-2"}),"Seri Numaras Ynetimi"]}),a.jsxs("p",{className:"text-xs text-blue-700",children:["Seilen cihaz: ",a.jsxs("strong",{children:[r.brand," ",r.model]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Mevcut seri numaralar: ",i().length," adet"]})]}),e.ear==="both"?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o("Sol Kulak Seri No","serialNumberLeft","Sol kulak seri numaras"),o("Sa Kulak Seri No","serialNumberRight","Sa kulak seri numaras")]}):o(`${e.ear==="left"?"Sol":"Sa"} Kulak Seri No`,"serialNumber",`${e.ear==="left"?"Sol":"Sa"} kulak seri numaras`),i().length>0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Mevcut Seri Numaralar"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:i().map(c=>{const d=c===e.serialNumber||c===e.serialNumberLeft||c===e.serialNumberRight;return a.jsxs("div",{className:`px-2 py-1 rounded text-xs font-mono ${d?"bg-blue-100 text-blue-800 border border-blue-300":"bg-white text-gray-700 border border-gray-300"}`,children:[c,d&&a.jsx("span",{className:"ml-1 text-blue-600",children:""})]},c)})})]}),(e.serialNumber||e.serialNumberLeft||e.serialNumberRight)&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsxs("h5",{className:"text-sm font-medium text-green-900 mb-2 flex items-center",children:[a.jsx(St,{className:"w-4 h-4 mr-2"}),"Atanan Seri Numaralar"]}),a.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[e.serialNumber&&a.jsxs("div",{children:[a.jsxs("strong",{children:[e.ear==="left"?"Sol":"Sa"," Kulak:"]})," ",e.serialNumber]}),e.serialNumberLeft&&a.jsxs("div",{children:[a.jsx("strong",{children:"Sol Kulak:"})," ",e.serialNumberLeft]}),e.serialNumberRight&&a.jsxs("div",{children:[a.jsx("strong",{children:"Sa Kulak:"})," ",e.serialNumberRight]})]})]}),i().length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(os,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-yellow-900",children:"Uyar"}),a.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Bu cihaz iin mevcut seri numaras bulunmuyor. Seri numarasn manuel olarak girmeniz gerekebilir."})]})]})})]}):a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(ah,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-600",children:"Seri numaras atamak iin nce bir cihaz sein."})]})},KK=({patientId:e,assignment:t,isOpen:r})=>{const[s,n]=k.useState({patientId:e,assignedDate:new Date().toISOString().split("T")[0],status:"assigned",assignedBy:"current_user",ear:"left",reason:"sale",discountType:"none",paymentMethod:"cash"}),[i,l]=k.useState([]),[o,c]=k.useState([]),[d,u]=k.useState(null),[h,f]=k.useState(""),[x,p]=k.useState({}),m={under4_parent_working:6104.44,under4_parent_retired:7630.56,age5_12_parent_working:5426.17,age5_12_parent_retired:6782.72,age13_18_parent_working:5087.04,age13_18_parent_retired:6358.88,over18_working:3391.36,over18_retired:4239.2},y=(D,N)=>{n(E=>({...E,[D]:N}))};k.useEffect(()=>{r&&(n(t?{...t,assignedDate:t.assignedDate.split("T")[0]}:{patientId:e,assignedDate:new Date().toISOString().split("T")[0],status:"assigned",assignedBy:"current_user",ear:"left",reason:"sale",discountType:"none",paymentMethod:"cash"}),p({}),f(""),u(null))},[r,t,e]),k.useEffect(()=>{r&&(async()=>{try{const N=[{id:"1",brand:"Phonak",model:"Audo Paradise P90",price:12e3,ear:"both",availableInventory:5,availableSerials:["PH001","PH002","PH003","PH004","PH005"],barcode:"PH-P90-001",category:"hearing_aid",status:"available"},{id:"2",brand:"Oticon",model:"More 1",price:11500,ear:"both",availableInventory:3,availableSerials:["OT001","OT002","OT003"],barcode:"OT-M1-001",category:"hearing_aid",status:"available"},{id:"3",brand:"Cochlear",model:"Nucleus 8",price:45e3,ear:"both",availableInventory:2,availableSerials:["CO001","CO002"],barcode:"CO-N8-001",category:"cochlear_implant",status:"available"},{id:"4",brand:"Baha",model:"Attract System",price:25e3,ear:"both",availableInventory:1,availableSerials:["BA001"],barcode:"BA-AS-001",category:"bone_anchored",status:"available"}];l(N),c(N)}catch(N){console.error("Envanter yklenirken hata:",N)}})()},[r]),k.useEffect(()=>{if(!h)c(i);else{const D=i.filter(N=>N.brand.toLowerCase().includes(h.toLowerCase())||N.model.toLowerCase().includes(h.toLowerCase())||N.barcode&&N.barcode.toLowerCase().includes(h.toLowerCase()));c(D)}},[h,i]);const g=()=>{if(s.listPrice&&s.listPrice>0){const D=s.listPrice;let N=D,E=0;if(s.sgkSupportType&&s.sgkSupportType!=="no_coverage"){const O=m[s.sgkSupportType]||0;E=Math.min(O,D),N=D-E}let w=0;s.discountType==="percentage"&&s.discountValue?w=N*s.discountValue/100:s.discountType==="amount"&&s.discountValue&&(w=s.discountValue);const _=Math.max(0,N-w),C=s.ear==="both"?2:1,T=Math.max(0,_*C),j=Math.max(0,T-(s.downPayment||0));let F=0;s.paymentMethod==="installment"&&s.installmentCount&&j>0&&(F=j/s.installmentCount),n(O=>({...O,salePrice:_,sgkReduction:E,patientPayment:T,remainingAmount:j,monthlyInstallment:F}))}};return k.useEffect(()=>{g()},[s.listPrice,s.sgkSupportType,s.discountType,s.discountValue,s.downPayment]),{formData:s,setFormData:n,updateFormData:y,availableDevices:i,filteredDevices:o,selectedDevice:d,searchTerm:h,setSearchTerm:f,handleDeviceSelect:D=>{u(D),n(N=>({...N,deviceId:D.id,listPrice:D.price,trialListPrice:D.price,trialPrice:D.price}))},errors:x,validateForm:()=>{const D={};return s.deviceId||(D.deviceId="Cihaz seimi zorunludur"),s.assignedDate||(D.assignedDate="Atama tarihi zorunludur"),s.status||(D.status="Durum seimi zorunludur"),s.reason||(D.reason="Atama sebebi zorunludur"),s.status==="trial"&&!s.trialEndDate&&(D.trialEndDate="Deneme biti tarihi zorunludur"),s.ear||(D.ear="Kulak seimi zorunludur"),s.ear==="both"?(s.serialNumberLeft||(D.serialNumberLeft="Sol kulak seri numaras zorunludur"),s.serialNumberRight||(D.serialNumberRight="Sa kulak seri numaras zorunludur")):s.serialNumber||(D.serialNumber="Seri numaras zorunludur"),s.reason==="sale"&&((!s.listPrice||s.listPrice<=0)&&(D.listPrice="Liste fiyat zorunludur"),s.paymentMethod||(D.paymentMethod="deme yntemi seimi zorunludur")),p(D),Object.keys(D).length===0},sgkAmounts:m,calculatePricing:g,resetForm:()=>{n({patientId:e,assignedDate:new Date().toISOString().split("T")[0],status:"assigned",assignedBy:"current_user",ear:"left",reason:"sale",discountType:"none",paymentMethod:"cash"}),p({}),f(""),u(null)}}},GK=({patientId:e,assignment:t,isOpen:r,onClose:s,onSave:n,onUpdate:i})=>{const{formData:l,updateFormData:o,availableDevices:c,filteredDevices:d,selectedDevice:u,searchTerm:h,setSearchTerm:f,handleDeviceSelect:x,errors:p,validateForm:m,sgkAmounts:y,resetForm:g}=KK({patientId:e,assignment:t,isOpen:r}),v=async S=>{if(S.preventDefault(),!!m())try{const D=l;t!=null&&t.id?i==null||i(D):n==null||n(D),s()}catch(D){console.error("Cihaz atamas kaydedilirken hata:",D)}},b=()=>{g(),s()};return r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b flex-shrink-0",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Cihaz Atamasn Dzenle":"Yeni Cihaz Atamas"}),a.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors","data-allow-raw":"true",children:a.jsx(vr,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:v,className:"flex flex-col flex-1 min-h-0",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cihaz Seimi"}),a.jsx($K,{searchTerm:h,onSearchChange:f,filteredDevices:d,selectedDevice:u,onDeviceSelect:x,errors:p})]}),u&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Atama Detaylar"}),a.jsx(UK,{formData:l,onFormDataChange:S=>{Object.entries(S).forEach(([D,N])=>{o(D,N)})},errors:p})]}),u&&l.reason==="sale"&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Fiyatlandrma"}),a.jsx(VK,{formData:l,onFormDataChange:S=>{Object.entries(S).forEach(([D,N])=>{o(D,N)})},errors:p})]}),u&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Seri Numaras"}),a.jsx(HK,{formData:l,selectedDevice:u,onFormDataChange:S=>{Object.entries(S).forEach(([D,N])=>{o(D,N)})},errors:p})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t bg-gray-50 flex-shrink-0",children:[a.jsx(Z,{type:"button",variant:"outline",onClick:b,children:"ptal"}),a.jsxs(Z,{type:"submit",disabled:!u,className:"flex items-center gap-2",children:[a.jsx(vp,{className:"w-4 h-4"}),t?"Gncelle":"Kaydet"]})]})]})]})}):null},WK=({open:e,device:t,onClose:r,onSave:s})=>{const[n,i]=k.useState({}),[l,o]=k.useState({}),[c,d]=k.useState([]),[u,h]=k.useState(""),[f,x]=k.useState(null),p={hearingAid:2500,cochlearImplant:15e3,boneAnchored:8e3};k.useEffect(()=>{d([{id:"1",brand:"Phonak",model:"Audo Paradise P90",type:"hearing_aid",listPrice:12e3,availableSerials:["PH001","PH002","PH003","PH004"]},{id:"2",brand:"Oticon",model:"More 1",type:"hearing_aid",listPrice:11500,availableSerials:["OT001","OT002","OT003"]},{id:"3",brand:"Cochlear",model:"Nucleus 8",type:"cochlear_implant",listPrice:45e3,availableSerials:["CO001","CO002"]},{id:"4",brand:"Baha",model:"Attract System",type:"bone_anchored",listPrice:25e3,availableSerials:["BA001","BA002"]}])},[]),k.useEffect(()=>{if(t){i({...t,ear:t.ear||t.side||"left",reason:t.reason||"new",status:t.status||"assigned",assignedDate:t.assignedDate||new Date().toISOString().split("T")[0],listPrice:t.listPrice||t.price||0,salePrice:t.salePrice||t.price||0,sgkReduction:t.sgkReduction||0,patientPayment:t.patientPayment||0,paymentMethod:t.paymentMethod||"cash",discountValue:0,discountType:"amount",downPayment:0});const N=c.find(E=>E.brand===t.brand&&E.model===t.model);N&&x(N)}else i({id:`device_${Date.now()}`,brand:"",model:"",serialNumber:"",ear:"left",type:"hearing_aid",status:"assigned",assignedDate:new Date().toISOString().split("T")[0],reason:"new",listPrice:0,salePrice:0,sgkReduction:0,patientPayment:0,paymentMethod:"cash",notes:"",discountValue:0,discountType:"amount",downPayment:0}),x(null);o({})},[t,e,c]);const m=c.filter(N=>`${N.brand} ${N.model}`.toLowerCase().includes(u.toLowerCase())),y=N=>{x(N),i(w=>({...w,brand:N.brand,model:N.model,type:N.type,listPrice:N.listPrice,salePrice:N.listPrice,serialNumber:""}));const E=p[N.type==="hearing_aid"?"hearingAid":N.type==="cochlear_implant"?"cochlearImplant":"boneAnchored"];i(w=>({...w,sgkReduction:Math.min(E,N.listPrice),patientPayment:Math.max(0,N.listPrice-Math.min(E,N.listPrice))}))},g=()=>{const N=n.listPrice||0,E=n.discountValue||0;return(n.discountType||"amount")==="percentage"?N*(1-E/100):N-E},v=(N,E)=>{if(i(w=>({...w,[N]:E})),l[N]&&o(w=>({...w,[N]:""})),N==="listPrice"||N==="discountValue"||N==="discountType"){const w=g();i(_=>({..._,salePrice:w,patientPayment:Math.max(0,w-(_.sgkReduction||0))}))}if(N==="sgkReduction"){const w=n.salePrice||g(),_=typeof E=="number"?E:parseFloat(E)||0;i(C=>({...C,patientPayment:Math.max(0,w-_)}))}},b=()=>{const N={};if(n.brand||(N.brand="Marka seimi zorunludur"),n.model||(N.model="Model seimi zorunludur"),n.serialNumber||(N.serialNumber="Seri numaras zorunludur"),n.ear||(N.ear="Kulak seimi zorunludur"),n.assignedDate||(N.assignedDate="Atama tarihi zorunludur"),n.reason||(N.reason="Atama sebebi zorunludur"),(n.listPrice||0)<=0&&(N.listPrice="Liste fiyat 0'dan byk olmaldr"),(n.salePrice||0)>(n.listPrice||0)&&(N.salePrice="Sat fiyat liste fiyatndan byk olamaz"),(n.sgkReduction||0)>(n.salePrice||0)&&(N.sgkReduction="SGK katks sat fiyatndan byk olamaz"),f&&n.serialNumber){const E=f.availableSerials.includes(n.serialNumber),w=(t==null?void 0:t.serialNumber)===n.serialNumber;!E&&!w&&(N.serialNumber="Bu seri numaras mevcut deil")}return o(N),Object.keys(N).length===0},S=N=>{if(N.preventDefault(),!b())return;const E={id:n.id||`device_${Date.now()}`,brand:n.brand,model:n.model,serialNumber:n.serialNumber,side:n.ear,ear:n.ear,type:n.type,status:n.status,assignedDate:n.assignedDate,reason:n.reason,listPrice:n.listPrice,salePrice:n.salePrice,sgkReduction:n.sgkReduction,patientPayment:n.patientPayment,paymentMethod:n.paymentMethod,trialEndDate:n.status==="trial"?n.trialEndDate:void 0,notes:n.notes,assignedBy:"Current User",purchaseDate:n.assignedDate,price:n.salePrice};s(E)},D=()=>{i({}),o({}),x(null),h(""),r()};return e?a.jsx(on,{open:e,title:t?"Cihaz Dzenle":"Yeni Cihaz Ekle",onClose:D,children:a.jsxs("form",{onSubmit:S,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cihaz Seimi"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ye,{type:"text",placeholder:"Cihaz ara (marka, model)...",value:u,onChange:N=>h(N.target.value)})]}),u&&a.jsxs("div",{className:"max-h-48 overflow-y-auto border border-gray-200 rounded-lg",children:[m.map(N=>a.jsx("div",{onClick:()=>y(N),className:`p-3 cursor-pointer hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${(f==null?void 0:f.id)===N.id?"bg-blue-50 border-blue-200":""}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[N.brand," ",N.model]}),a.jsx("p",{className:"text-sm text-gray-500 capitalize",children:N.type.replace("_"," ")})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[N.listPrice.toLocaleString("tr-TR")," "]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[N.availableSerials.length," adet mevcut"]})]})]})},N.id)),m.length===0&&a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Arama kriterinize uygun cihaz bulunamad"})]}),f&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(St,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-900",children:"Seili Cihaz"})]}),a.jsxs("p",{className:"text-blue-800",children:[f.brand," ",f.model]}),a.jsxs("p",{className:"text-sm text-blue-600",children:[f.listPrice.toLocaleString("tr-TR")," "]})]}),l.brand&&a.jsx("p",{className:"text-red-600 text-sm",children:l.brand})]}),f&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Seri Numaras *"}),a.jsx(Ue,{value:n.serialNumber||"",onChange:N=>v("serialNumber",N.target.value),options:[{value:"",label:"Seri numaras sein"},...f.availableSerials.map(N=>({value:N,label:N}))],className:l.serialNumber?"border-red-300":""}),l.serialNumber&&a.jsx("p",{className:"text-red-600 text-sm",children:l.serialNumber})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kulak Seimi *"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"left",label:"Sol Kulak",color:"blue"},{value:"right",label:"Sa Kulak",color:"red"},{value:"both",label:"Bilateral",color:"purple"}].map(N=>a.jsx("button",{"data-allow-raw":"true",type:"button",onClick:()=>v("ear",N.value),className:`p-3 rounded-lg border-2 text-sm font-medium transition-colors ${n.ear===N.value?`border-${N.color}-500 bg-${N.color}-50 text-${N.color}-700`:"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:N.label},N.value))}),l.ear&&a.jsx("p",{className:"text-red-600 text-sm",children:l.ear})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Atama Tarihi *"}),a.jsxs("div",{className:"relative",children:[a.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ye,{type:"date",value:n.assignedDate||"",onChange:N=>v("assignedDate",N.target.value),className:l.assignedDate?"border-red-300":""})]}),l.assignedDate&&a.jsx("p",{className:"text-red-600 text-sm",children:l.assignedDate})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Atama Sebebi *"}),a.jsx(Ue,{value:n.reason||"",onChange:N=>v("reason",N.target.value),options:[{value:"",label:"Sebep sein"},{value:"new",label:"Yeni Hasta"},{value:"replacement",label:"Deiim"},{value:"upgrade",label:"Ykseltme"},{value:"trial",label:"Deneme"},{value:"warranty",label:"Garanti"}],className:l.reason?"border-red-300":""}),l.reason&&a.jsx("p",{className:"text-red-600 text-sm",children:l.reason})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Durum"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"assigned",label:"Atand",color:"green"},{value:"trial",label:"Deneme",color:"blue"},{value:"returned",label:"ade",color:"yellow"},{value:"defective",label:"Arzal",color:"red"}].map(N=>a.jsx("button",{"data-allow-raw":"true",type:"button",onClick:()=>v("status",N.value),className:`p-2 rounded-lg border text-sm font-medium transition-colors ${n.status===N.value?`border-${N.color}-500 bg-${N.color}-50 text-${N.color}-700`:"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:N.label},N.value))})]}),n.status==="trial"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deneme Biti Tarihi"}),a.jsxs("div",{className:"relative",children:[a.jsx(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ye,{type:"date",value:n.trialEndDate||"",onChange:N=>v("trialEndDate",N.target.value)})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[a.jsx(rr,{className:"w-5 h-5 mr-2"}),"Fiyatlandrma"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Liste Fiyat *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ye,{type:"number",value:n.listPrice||"",onChange:N=>v("listPrice",parseFloat(N.target.value)||0),placeholder:"0",className:l.listPrice?"border-red-300":""}),a.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""})]}),l.listPrice&&a.jsx("p",{className:"text-red-600 text-sm",children:l.listPrice})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sat Fiyat"}),a.jsxs("div",{className:"relative",children:[a.jsx(ye,{type:"number",value:n.salePrice||"",onChange:N=>v("salePrice",parseFloat(N.target.value)||0),placeholder:"0",className:l.salePrice?"border-red-300":""}),a.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""})]}),l.salePrice&&a.jsx("p",{className:"text-red-600 text-sm",children:l.salePrice})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SGK Katks"}),a.jsxs("div",{className:"relative",children:[a.jsx(ye,{type:"number",value:n.sgkReduction||"",onChange:N=>v("sgkReduction",parseFloat(N.target.value)||0),placeholder:"0",className:l.sgkReduction?"border-red-300":""}),a.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""})]}),l.sgkReduction&&a.jsx("p",{className:"text-red-600 text-sm",children:l.sgkReduction})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hasta demesi"}),a.jsxs("div",{className:"relative",children:[a.jsx(ye,{type:"number",value:n.patientPayment||"",onChange:N=>v("patientPayment",parseFloat(N.target.value)||0),placeholder:"0",readOnly:!0,className:"bg-gray-50"}),a.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Otomatik hesaplanr (Sat Fiyat - SGK Katks)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"deme Yntemi"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"cash",label:"Nakit",icon:rr},{value:"card",label:"Kart",icon:_a},{value:"transfer",label:"Havale",icon:Hf},{value:"installment",label:"Taksit",icon:pt}].map(N=>{const E=N.icon;return a.jsxs("button",{"data-allow-raw":"true",type:"button",onClick:()=>v("paymentMethod",N.value),className:`p-3 rounded-lg border text-sm font-medium transition-colors flex items-center justify-center space-x-2 ${n.paymentMethod===N.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[a.jsx(E,{className:"w-4 h-4"}),a.jsx("span",{children:N.label})]},N.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notlar"}),a.jsxs("div",{className:"relative",children:[a.jsx(wt,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),a.jsx(wr,{value:n.notes||"",onChange:N=>v("notes",N.target.value),rows:3,placeholder:"Cihaz atamas ile ilgili notlar..."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[a.jsx(Z,{type:"button",onClick:D,variant:"ghost",children:"ptal"}),a.jsx(Z,{type:"submit",variant:"primary",children:t?"Gncelle":"Kaydet"})]})]})}):null};class YK{async addTimelineEvent(t,r){try{const s={type:r.type,title:r.title,description:r.description,details:r.details,timestamp:r.timestamp||new Date().toISOString(),date:r.date,time:r.time,user:r.user||"system",icon:r.icon||"fa-circle",color:r.color||"blue",category:r.category||"general"};try{return{success:!0,data:(await lr().timelineAddTimelineEvent(t,s)).data,timestamp:new Date().toISOString()}}catch(n){return console.warn("Timeline API unavailable, queuing for offline sync:",n),await _t.addOperation({method:"POST",endpoint:`/api/patients/${t}/timeline`,data:s,priority:"normal",headers:{"Idempotency-Key":`timeline-${t}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}),{success:!0,data:{id:`temp-${Date.now()}`,...s},timestamp:new Date().toISOString()}}}catch(s){return console.error("Failed to add timeline event:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred",timestamp:new Date().toISOString()}}}async addDeviceEvent(t,r,s){const i={type:r,title:{device_assigned:"Cihaz Atand",device_removed:"Cihaz Kaldrld",device_trial_started:"Cihaz Denemesi Balatld",device_trial_extended:"Cihaz Denemesi Uzatld",device_trial_completed:"Cihaz Denemesi Tamamland",device_trial_cancelled:"Cihaz Denemesi ptal Edildi",device_maintenance_scheduled:"Cihaz Bakm Planland",device_replacement:"Cihaz Deitirildi"}[r]||"Cihaz Olay",description:this.generateDeviceDescription(r,s),details:s,icon:"fa-headphones",color:"green",category:"device"};return this.addTimelineEvent(t,i)}async addAppointmentEvent(t,r,s){const i={type:r,title:{appointment_scheduled:"Randevu Planland",appointment_completed:"Randevu Tamamland",appointment_cancelled:"Randevu ptal Edildi",appointment_rescheduled:"Randevu Yeniden Planland"}[r]||"Randevu Olay",description:this.generateAppointmentDescription(r,s),details:s,icon:"fa-calendar",color:"blue",category:"appointment"};return this.addTimelineEvent(t,i)}async addPaymentEvent(t,r,s){const i={type:r,title:{payment_received:"deme Alnd",payment_refunded:"deme ade Edildi",invoice_created:"Fatura Oluturuldu"}[r]||"deme Olay",description:this.generatePaymentDescription(r,s),details:s,icon:"fa-credit-card",color:"yellow",category:"payment"};return this.addTimelineEvent(t,i)}generateDeviceDescription(t,r){const s=r.deviceName||r.brand||"Cihaz",n=r.ear||r.side,i=n==="left"?"Sol kulak":n==="right"?"Sa kulak":n==="both"?"ki kulak":"";switch(t){case"device_assigned":return`${s} ${i?`(${i})`:""} hastaya atand${r.serialNumber?` - Seri No: ${r.serialNumber}`:""}`;case"device_removed":return`${s} ${i?`(${i})`:""} hastadan kaldrld${r.reason?` - Sebep: ${r.reason}`:""}`;case"device_trial_started":return`${s} ${i?`(${i})`:""} iin deneme balatld${r.trialDuration?` - Sre: ${r.trialDuration} gn`:""}${r.netTrialPrice?` - cret: ${r.netTrialPrice}`:""}`;case"device_trial_extended":return`${s} ${i?`(${i})`:""} denemesi uzatld${r.newEndDate?` - Yeni biti: ${r.newEndDate}`:""}${r.reason?` - Sebep: ${r.reason}`:""}`;case"device_trial_completed":return`${s} ${i?`(${i})`:""} denemesi tamamland${r.result?` - Sonu: ${r.result}`:""}${r.netPayable?` - deme: ${r.netPayable}`:""}`;case"device_trial_cancelled":return`${s} ${i?`(${i})`:""} denemesi iptal edildi${r.reason?` - Sebep: ${r.reason}`:""}`;case"device_maintenance_scheduled":return`${s} ${i?`(${i})`:""} iin bakm planland${r.maintenanceType?` - Tr: ${r.maintenanceType}`:""}`;case"device_replacement":return`${s} ${i?`(${i})`:""} deitirildi${r.reason?` - Sebep: ${r.reason}`:""}`;default:return`${s} ${i?`(${i})`:""} ile ilgili olay`}}generateAppointmentDescription(t,r){const s=r.date?new Date(r.date).toLocaleDateString("tr-TR"):"",n=r.time||"",i=r.type||r.appointmentType||"";switch(t){case"appointment_scheduled":return`${i?`${i} randevusu`:"Randevu"} planland${s?` - ${s}`:""}${n?` ${n}`:""}`;case"appointment_completed":return`${i?`${i} randevusu`:"Randevu"} tamamland${r.notes?` - ${r.notes}`:""}`;case"appointment_cancelled":return`${i?`${i} randevusu`:"Randevu"} iptal edildi${r.reason?` - Sebep: ${r.reason}`:""}`;case"appointment_rescheduled":return`${i?`${i} randevusu`:"Randevu"} yeniden planland${s?` - Yeni tarih: ${s}`:""}`;default:return`Randevu ile ilgili olay${s?` - ${s}`:""}`}}generatePaymentDescription(t,r){const s=r.amount?`${r.amount}`:"",n=r.paymentMethod||r.method||"";switch(t){case"payment_received":return`${s?`${s} `:""}deme alnd${n?` - ${n}`:""}`;case"payment_refunded":return`${s?`${s} `:""}deme iade edildi${r.reason?` - Sebep: ${r.reason}`:""}`;case"invoice_created":return`${s?`${s} `:""}fatura oluturuldu${r.invoiceNumber?` - No: ${r.invoiceNumber}`:""}`;default:return`${s?`${s} `:""}deme ile ilgili olay`}}}const X2=new YK,qK=({open:e,onClose:t,onSave:r,trial:s,device:n,patientId:i,isLoading:l=!1})=>{var _,C,T;const[o,c]=k.useState({patientId:i,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],status:"active",trialPrice:0,discountType:"none",discountValue:0,extensions:[]}),[d,u]=k.useState({}),[h,f]=k.useState(!1),[x,p]=k.useState(!1),[m,y]=k.useState({extendedTo:"",reason:"",notes:""});k.useEffect(()=>{var j,F,O;if(s)c({...s,startDate:((j=s.startDate)==null?void 0:j.split("T")[0])||new Date().toISOString().split("T")[0],endDate:((F=s.endDate)==null?void 0:F.split("T")[0])||new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],extendedUntil:((O=s.extendedUntil)==null?void 0:O.split("T")[0])||"",discountType:s.discountType||"none",discountValue:s.discountValue||0,extensions:s.extensions||[]});else if(n){const z=n.price?parseFloat(n.price):0,G=z*.1;c({patientId:i,deviceId:n.id,deviceName:`${n.brand||""} ${n.model||""}`.trim(),brand:n.brand||"",model:n.model||"",serialNumber:n.serialNumber||"",startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"active",trialPrice:G,listPrice:z,discountType:"none",discountValue:0,netTrialPrice:G,extensions:[]})}else c({patientId:i,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0],status:"active",trialPrice:0,discountType:"none",discountValue:0,extensions:[]});u({}),p(!1),y({extendedTo:"",reason:"",notes:""})},[s,n,i,e]);const g=()=>{var F,O;const j={};return(F=o.brand)!=null&&F.trim()||(j.brand="Marka gereklidir"),(O=o.model)!=null&&O.trim()||(j.model="Model gereklidir"),o.startDate||(j.startDate="Balang tarihi gereklidir"),o.endDate||(j.endDate="Biti tarihi gereklidir"),o.startDate&&o.endDate&&new Date(o.startDate)>=new Date(o.endDate)&&(j.endDate="Biti tarihi balang tarihinden sonra olmaldr"),o.extendedUntil&&o.endDate&&new Date(o.extendedUntil)<=new Date(o.endDate)&&(j.extendedUntil="Uzatma tarihi biti tarihinden sonra olmaldr"),o.trialPrice&&o.trialPrice<0&&(j.trialPrice="Deneme creti negatif olamaz"),o.discountValue&&o.discountValue<0&&(j.discountValue="ndirim deeri negatif olamaz"),o.discountType==="percentage"&&o.discountValue&&o.discountValue>100&&(j.discountValue="Yzde indirimi 100'den fazla olamaz"),u(j),Object.keys(j).length===0},v=async j=>{if(j.preventDefault(),!!g()){f(!0);try{const F=S(),O={...o,netTrialPrice:F,startDate:o.startDate?new Date(o.startDate).toISOString():void 0,endDate:o.endDate?new Date(o.endDate).toISOString():void 0,extendedUntil:o.extendedUntil?new Date(o.extendedUntil).toISOString():void 0};if(await r(O),t(),O.status==="completed"||O.status==="cancelled")try{const z=O.status==="completed"?"device_trial_completed":"device_trial_cancelled";await X2.addDeviceEvent(i,z,{deviceName:`${O.brand} ${O.model}`,ear:"both",result:O.result,netPayable:O.netTrialPrice,reason:O.result==="cancelled"?"Trial cancelled by user/system":void 0,finalStatus:O.status})}catch(z){console.warn("Failed to log trial completion to timeline:",z)}}catch(F){console.error("Trial save error:",F),u({submit:"Deneme kaydedilirken bir hata olutu"})}finally{f(!1)}}},b=(j,F)=>{c(O=>{const z={...O,[j]:F};if(["trialPrice","discountType","discountValue","sgkScheme"].includes(j)){const G=j==="trialPrice"?F:z.trialPrice||0,q=j==="discountType"?F:z.discountType,H=j==="discountValue"?F:z.discountValue||0,A=j==="sgkScheme"?F:z.sgkScheme;let V=G;q==="percentage"?V=G*(1-H/100):q==="amount"&&(V=Math.max(0,G-H));const L=D(A);z.netTrialPrice=Math.max(0,V-L)}return z}),d[j]&&u(O=>({...O,[j]:""}))},S=()=>{const j=o.trialPrice||0,F=o.discountValue||0,O=o.sgkScheme;let z=j;o.discountType==="percentage"?z=j*(1-F/100):o.discountType==="amount"&&(z=Math.max(0,j-F));const G=D(O);return Math.max(0,z-G)},D=j=>({NoCoverage:0,Under4_ParentWorking:6104.44,Under4_ParentRetired:7630.56,Age5_12_ParentWorking:5426.17,Age5_12_ParentRetired:6782.72,Age13_18_ParentWorking:5087.04,Age13_18_ParentRetired:6358.88,Over18_Working:3391.36,Over18_Retired:4239.2})[j||""]||0,N=async()=>{var F;if(!m.extendedTo||!m.reason){u({extension:"Uzatma tarihi ve sebebi gereklidir"});return}const j={id:`ext_${Date.now()}`,extendedFrom:o.endDate||"",extendedTo:m.extendedTo,reason:m.reason,notes:m.notes,approvedAt:new Date().toISOString()};c(O=>({...O,extensions:[...O.extensions||[],j],endDate:m.extendedTo,status:"extended"})),p(!1),y({extendedTo:"",reason:"",notes:""}),u({});try{await X2.addDeviceEvent(i,"device_trial_extended",{deviceName:`${o.brand} ${o.model}`,ear:"both",newEndDate:m.extendedTo,reason:m.reason,notes:m.notes,extensionCount:(((F=o.extensions)==null?void 0:F.length)||0)+1})}catch(O){console.warn("Failed to log trial extension to timeline:",O)}},E=()=>{if(o.startDate&&o.endDate){const j=new Date(o.startDate),F=new Date(o.endDate),O=Math.abs(F.getTime()-j.getTime());return Math.ceil(O/(1e3*60*60*24))}return 0},w=()=>{if(o.endDate){const j=new Date(o.endDate),F=new Date,O=j.getTime()-F.getTime();return Math.ceil(O/(1e3*60*60*24))}return 0};return a.jsx(on,{open:e,onClose:t,title:s?"Deneme Dzenle":"Yeni Deneme Balat",children:a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(wt,{className:"w-4 h-4 mr-2"}),"Cihaz Bilgileri"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marka *"}),a.jsx(ye,{value:o.brand||"",onChange:j=>b("brand",j.target.value),placeholder:"Cihaz markas",error:d.brand,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model *"}),a.jsx(ye,{value:o.model||"",onChange:j=>b("model",j.target.value),placeholder:"Cihaz modeli",error:d.model,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seri Numaras"}),a.jsx(ye,{value:o.serialNumber||"",onChange:j=>b("serialNumber",j.target.value),placeholder:"Seri numaras",disabled:h})]})]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-2"}),"Deneme Sresi"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balang Tarihi *"}),a.jsx(ye,{type:"date",value:o.startDate||"",onChange:j=>b("startDate",j.target.value),error:d.startDate,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti Tarihi *"}),a.jsx(ye,{type:"date",value:o.endDate||"",onChange:j=>b("endDate",j.target.value),error:d.endDate,disabled:h})]}),o.status==="active"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uzatma Tarihi"}),a.jsx(ye,{type:"date",value:o.extendedUntil||"",onChange:j=>b("extendedUntil",j.target.value),error:d.extendedUntil,disabled:h})]})]}),E()>0&&a.jsxs("div",{className:"mt-3 p-2 bg-blue-100 rounded text-sm text-blue-800",children:[a.jsx(Xt,{className:"w-4 h-4 inline mr-1"}),"Deneme sresi: ",E()," gn"]})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-2"}),"Fiyatlandrma"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deneme creti ()"}),a.jsx(ye,{type:"number",step:"0.01",min:"0",value:o.trialPrice||"",onChange:j=>b("trialPrice",parseFloat(j.target.value)||0),placeholder:"0.00",error:d.trialPrice,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SGK emas"}),a.jsx(Ue,{value:o.sgkScheme||"",onChange:j=>b("sgkScheme",j.target.value),disabled:h,options:[{value:"",label:"SGK Yok"},{value:"NoCoverage",label:"Kapsam D"},{value:"Under4_ParentWorking",label:"0-4, alan Ebeveyn"},{value:"Under4_ParentRetired",label:"0-4, Emekli Ebeveyn"},{value:"Age5_12_ParentWorking",label:"5-12, alan Ebeveyn"},{value:"Age5_12_ParentRetired",label:"5-12, Emekli Ebeveyn"},{value:"Age13_18_ParentWorking",label:"13-18, alan Ebeveyn"},{value:"Age13_18_ParentRetired",label:"13-18, Emekli Ebeveyn"},{value:"Over18_Working",label:"18+, alan"},{value:"Over18_Retired",label:"18+, Emekli"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ndirim Tr"}),a.jsx(Ue,{value:o.discountType||"none",onChange:j=>b("discountType",j.target.value),disabled:h,options:[{value:"none",label:"ndirim Yok"},{value:"percentage",label:"Yzde (%)"},{value:"amount",label:"Tutar ()"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ndirim Deeri"}),a.jsx(ye,{type:"number",step:o.discountType==="percentage"?"1":"0.01",min:"0",max:o.discountType==="percentage"?"100":void 0,value:o.discountValue||"",onChange:j=>b("discountValue",parseFloat(j.target.value)||0),placeholder:o.discountType==="percentage"?"%":"",error:d.discountValue,disabled:h||o.discountType==="none"})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-white rounded border",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Deneme creti:"}),a.jsxs("span",{className:"text-sm",children:["",((_=o.trialPrice)==null?void 0:_.toFixed(2))||"0.00"]})]}),o.discountType!=="none"&&(o.discountValue||0)>0&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["ndirim (",o.discountType==="percentage"?`${o.discountValue}%`:`${(C=o.discountValue)==null?void 0:C.toFixed(2)}`,"):"]}),a.jsxs("span",{className:"text-sm text-red-600",children:["-",(o.trialPrice||0)-S()+D(o.sgkScheme).toFixed(2)]})]}),D(o.sgkScheme)>0&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"SGK Destei:"}),a.jsxs("span",{className:"text-sm text-green-600",children:["-",D(o.sgkScheme).toFixed(2)]})]}),a.jsx("hr",{className:"border-gray-200"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Net denecek:"}),a.jsxs("span",{className:"text-lg font-bold text-green-600",children:["",S().toFixed(2)]})]})]})})]}),o.extensions&&o.extensions.length>0&&a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(py,{className:"w-4 h-4 mr-2"}),"Deneme Uzatmalar"]}),a.jsx("div",{className:"space-y-2",children:o.extensions.map((j,F)=>a.jsx("div",{className:"bg-white p-3 rounded border",children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Uzatma ",F+1,": ",j.extendedFrom,"  ",j.extendedTo]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Sebep: ",j.reason]}),j.notes&&a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Not: ",j.notes]})]})})},j.id))})]}),o.status==="active"&&a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 flex items-center",children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),"Deneme Uzatma"]}),a.jsx(ut,{type:"button",variant:"secondary",onClick:()=>p(!x),disabled:h,children:x?"ptal":"Uzatma Ekle"})]}),x&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yeni Biti Tarihi *"}),a.jsx(ye,{type:"date",value:m.extendedTo,onChange:j=>y(F=>({...F,extendedTo:j.target.value})),min:o.endDate,disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uzatma Sebebi *"}),a.jsx(Ue,{value:m.reason,onChange:j=>y(F=>({...F,reason:j.target.value})),disabled:h,options:[{value:"",label:"Sebep sein"},{value:"patient_request",label:"Hasta Talebi"},{value:"medical_reason",label:"Tbbi Sebep"},{value:"technical_issue",label:"Teknik Sorun"},{value:"adaptation_period",label:"Uyum Sreci"},{value:"other",label:"Dier"}]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),a.jsx(wr,{value:m.notes,onChange:j=>y(F=>({...F,notes:j.target.value})),placeholder:"Uzatma ile ilgili notlar...",rows:2,disabled:h})]}),d.extension&&a.jsx("p",{className:"text-sm text-red-600",children:d.extension}),a.jsx("div",{className:"flex justify-end",children:a.jsx(ut,{type:"button",variant:"primary",onClick:N,disabled:h,children:"Uzatmay Ekle"})})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(Di,{className:"w-4 h-4 mr-2"}),"Deneme zeti"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[a.jsxs("div",{className:"bg-white p-3 rounded border",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E()}),a.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Gn"})]}),a.jsxs("div",{className:"bg-white p-3 rounded border",children:[a.jsx("div",{className:`text-2xl font-bold ${w()>0?"text-green-600":"text-red-600"}`,children:w()}),a.jsx("div",{className:"text-sm text-gray-600",children:"Kalan Gn"})]}),a.jsxs("div",{className:"bg-white p-3 rounded border",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((T=o.extensions)==null?void 0:T.length)||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Uzatma"})]}),a.jsxs("div",{className:"bg-white p-3 rounded border",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",D(o.sgkScheme).toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-600",children:"SGK Destei"})]}),a.jsxs("div",{className:"bg-white p-3 rounded border",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",S().toFixed(2)]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Net deme"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx(Ue,{label:"Durum",value:o.status||"active",onChange:j=>b("status",j.target.value),disabled:h,options:[{value:"active",label:"Aktif"},{value:"extended",label:"Uzatld"},{value:"completed",label:"Tamamland"},{value:"cancelled",label:"ptal Edildi"}]})}),o.status==="completed"&&a.jsx("div",{children:a.jsx(Ue,{label:"Sonu",value:o.result||"",onChange:j=>b("result",j.target.value),disabled:h,options:[{value:"",label:"Seiniz"},{value:"purchased",label:"Satn Alnd"},{value:"returned",label:"ade Edildi"},{value:"extended",label:"Uzatld"},{value:"cancelled",label:"ptal Edildi"},{value:"lost",label:"Kayp"},{value:"damaged",label:"Hasarl"}]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),a.jsx(wr,{value:o.notes||"",onChange:j=>b("notes",j.target.value),placeholder:"Deneme ile ilgili notlar...",rows:3,disabled:h})]}),d.submit&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsx("span",{className:"text-sm text-red-700",children:d.submit})]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:t,disabled:h,children:"ptal"}),a.jsx(ut,{type:"submit",variant:"primary",disabled:h||l,children:h?a.jsxs(a.Fragment,{children:[a.jsx(ya,{className:"w-4 h-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(St,{className:"w-4 h-4 mr-2"}),s?"Gncelle":"Deneme Balat"]})})]})]})})},XK=({open:e,onClose:t,device:r,onSubmit:s,isLoading:n=!1})=>{var D;const[i,l]=k.useState({deviceId:(r==null?void 0:r.id)||"",maintenanceType:"repair",description:"",scheduledDate:new Date().toISOString().split("T")[0],estimatedDuration:1,priority:"medium",status:"scheduled"}),[o,c]=k.useState({}),[d,u]=k.useState(!1);k.useEffect(()=>{r&&e&&l(N=>({...N,deviceId:r.id})),c({})},[r,e]);const h=(N,E)=>{l(w=>({...w,[N]:E})),o[N]&&c(w=>({...w,[N]:""}))},f=()=>{const N={};i.description.trim()||(N.description="Bakm aklamas gereklidir"),i.scheduledDate||(N.scheduledDate="Planlanan tarih gereklidir");const E=new Date(i.scheduledDate),w=new Date;return w.setHours(0,0,0,0),E<w&&(N.scheduledDate="Planlanan tarih bugnden nce olamaz"),i.estimatedDuration<=0&&(N.estimatedDuration="Tahmini sre pozitif bir deer olmaldr"),i.estimatedDuration>365&&(N.estimatedDuration="Tahmini sre 365 gnden fazla olamaz"),i.cost&&i.cost<0&&(N.cost="Maliyet negatif olamaz"),i.technician&&i.technician.trim().length<2&&(N.technician="Teknisyen ad en az 2 karakter olmaldr"),c(N),Object.keys(N).length===0},x=async N=>{if(N.preventDefault(),!!f()){u(!0);try{const E={...i,scheduledDate:new Date(i.scheduledDate).toISOString()};await s(E),t()}catch(E){console.error("Maintenance save error:",E),c({submit:"Bakm kaydedilirken bir hata olutu"})}finally{u(!1)}}},p=()=>{l({deviceId:(r==null?void 0:r.id)||"",maintenanceType:"repair",description:"",scheduledDate:new Date().toISOString().split("T")[0],estimatedDuration:1,priority:"medium",status:"scheduled"}),c({}),t()},m=r?`Cihaz Bakm - ${r.brand} ${r.model} (${r.serialNumber})`:"Cihaz Bakm",y=[{value:"repair",label:"Onarm"},{value:"cleaning",label:"Temizlik"},{value:"calibration",label:"Kalibrasyon"},{value:"replacement",label:"Para Deiimi"},{value:"other",label:"Dier"}],g=[{value:"low",label:"Dk"},{value:"medium",label:"Orta"},{value:"high",label:"Yksek"},{value:"urgent",label:"Acil"}],v=[{value:"scheduled",label:"Planland"},{value:"in_progress",label:"Devam Ediyor"},{value:"completed",label:"Tamamland"},{value:"cancelled",label:"ptal Edildi"}],b=N=>{switch(N){case"urgent":return"text-red-600 bg-red-50";case"high":return"text-orange-600 bg-orange-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},S=()=>{if(i.scheduledDate&&i.estimatedDuration){const N=new Date(i.scheduledDate),E=new Date(N);return E.setDate(N.getDate()+i.estimatedDuration),E.toLocaleDateString("tr-TR")}return null};return a.jsx(on,{open:e,onClose:p,title:m,children:a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r&&a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(O5,{className:"w-4 h-4 mr-2"}),"Cihaz Bilgileri"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Cihaz:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[r.brand," ",r.model]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Seri No:"}),a.jsx("span",{className:"ml-2 font-medium",children:r.serialNumber})]}),r.warrantyExpiry&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-600",children:"Garanti Biti:"}),a.jsx("span",{className:"ml-2 font-medium",children:new Date(r.warrantyExpiry).toLocaleDateString("tr-TR")})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx(Ue,{label:"Bakm Tr *",value:i.maintenanceType,onChange:N=>h("maintenanceType",N.target.value),options:y,disabled:d,error:o.maintenanceType})}),a.jsxs("div",{children:[a.jsx(Ue,{label:"ncelik *",value:i.priority,onChange:N=>h("priority",N.target.value),options:g,disabled:d}),i.priority&&a.jsxs("div",{className:`mt-2 px-2 py-1 rounded text-xs font-medium ${b(i.priority)}`,children:[(D=g.find(N=>N.value===i.priority))==null?void 0:D.label," ncelik"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bakm Aklamas *"}),a.jsx(wr,{value:i.description,onChange:N=>h("description",N.target.value),placeholder:"Yaplacak bakm ilemlerini detayl olarak aklayn",rows:3,disabled:d,error:o.description})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-2"}),"Planlama"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Planlanan Tarih *"}),a.jsx(ye,{type:"date",value:i.scheduledDate,onChange:N=>h("scheduledDate",N.target.value),error:o.scheduledDate,disabled:d})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tahmini Sre (Gn) *"}),a.jsx(ye,{type:"number",min:"1",max:"365",value:i.estimatedDuration,onChange:N=>h("estimatedDuration",parseInt(N.target.value)||1),error:o.estimatedDuration,disabled:d})]})]}),S()&&a.jsxs("div",{className:"mt-3 p-2 bg-blue-100 rounded text-sm text-blue-800",children:[a.jsx(Xt,{className:"w-4 h-4 inline mr-1"}),"Tahmini biti tarihi: ",S()]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-1"}),"Tahmini Maliyet ()"]}),a.jsx(ye,{type:"number",min:"0",step:"0.01",value:i.cost||"",onChange:N=>h("cost",N.target.value?parseFloat(N.target.value):void 0),placeholder:"0.00",error:o.cost,disabled:d})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[a.jsx(Mt,{className:"w-4 h-4 mr-1"}),"Teknisyen"]}),a.jsx(ye,{type:"text",value:i.technician||"",onChange:N=>h("technician",N.target.value),placeholder:"Teknisyen ad",error:o.technician,disabled:d})]})]}),a.jsx("div",{children:a.jsx(Ue,{label:"Durum *",value:i.status,onChange:N=>h("status",N.target.value),options:v,disabled:d})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),a.jsx(wr,{value:i.notes||"",onChange:N=>h("notes",N.target.value),placeholder:"Ek notlar ve zel talimatlar",rows:2,disabled:d})]}),o.submit&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(os,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsx("span",{className:"text-sm text-red-700",children:o.submit})]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:p,disabled:d,children:"ptal"}),a.jsx(ut,{type:"submit",variant:"primary",disabled:d||n,children:d?a.jsxs(a.Fragment,{children:[a.jsx(ya,{className:"w-4 h-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(St,{className:"w-4 h-4 mr-2"}),"Bakm Planla"]})})]})]})})},QK=({isOpen:e,onClose:t,onInventoryUpdate:r,isLoading:s=!1})=>{const[n,i]=k.useState([]),[l,o]=k.useState(""),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,x]=k.useState(!1),[p,m]=k.useState(null),[y,g]=k.useState(!1),[v,b]=k.useState(!1),[S,D]=k.useState(null),[N,E]=k.useState(null),[w,_]=k.useState({}),[C,T]=k.useState({name:"",brand:"",model:"",category:"",type:"",totalStock:0,availableStock:0,assignedStock:0,onTrialStock:0,defectiveStock:0,price:0,listPrice:0,sgkPrice:0,warrantyPeriod:12,notes:""});k.useEffect(()=>{if(N){const R=setTimeout(()=>E(null),3e3);return()=>clearTimeout(R)}},[N]),k.useEffect(()=>{if(S){const R=setTimeout(()=>D(null),5e3);return()=>clearTimeout(R)}},[S]),k.useEffect(()=>{e&&j()},[e]);const j=async()=>{g(!0),D(null);try{await new Promise(U=>setTimeout(U,1e3));const R=[{id:"1",name:"Hearing Aid Premium",brand:"AudioTech",model:"AT-2024",category:"hearing_aid",type:"behind_ear",serialNumbers:["AT001","AT002","AT003"],totalStock:15,availableStock:10,assignedStock:3,onTrialStock:2,defectiveStock:0,price:2500,listPrice:3e3,sgkPrice:2200,warrantyPeriod:24,isActive:!0,notes:"Premium model with advanced noise cancellation",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"2",name:"Cochlear Implant Basic",brand:"CochlearCorp",model:"CC-100",category:"cochlear_implant",type:"internal",serialNumbers:["CC001","CC002"],totalStock:8,availableStock:4,assignedStock:2,onTrialStock:2,defectiveStock:0,price:15e3,listPrice:18e3,sgkPrice:14e3,warrantyPeriod:60,isActive:!0,notes:"Basic cochlear implant for severe hearing loss",createdAt:"2024-01-10T09:00:00Z",updatedAt:"2024-01-18T16:45:00Z"}];i(R),r==null||r(R)}catch(R){D("Failed to load inventory. Please try again."),console.error("Error loading inventory:",R)}finally{g(!1)}},F=()=>{const R={};return C.name.trim()?C.name.length<2&&(R.name="Name must be at least 2 characters"):R.name="Name is required",C.brand.trim()||(R.brand="Brand is required"),C.model.trim()||(R.model="Model is required"),C.category||(R.category="Category is required"),C.type||(R.type="Type is required"),C.totalStock<0&&(R.totalStock="Stock cannot be negative"),C.price<0&&(R.price="Price cannot be negative"),C.listPrice<C.price&&(R.listPrice="List price should be greater than or equal to price"),C.sgkPrice<0&&(R.sgkPrice="SGK price cannot be negative"),(C.warrantyPeriod<1||C.warrantyPeriod>120)&&(R.warrantyPeriod="Warranty period must be between 1 and 120 months"),_(R),Object.keys(R).length===0},O=async()=>{if(F()){b(!0),D(null);try{await new Promise(M=>setTimeout(M,1500));const R={id:Date.now().toString(),...C,serialNumbers:[],isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},U=[...n,R];i(U),r==null||r(U),x(!1),q(),E("Item added successfully!")}catch(R){D("Failed to add item. Please try again."),console.error("Error adding item:",R)}finally{b(!1)}}},z=async()=>{if(!(!p||!F())){b(!0),D(null);try{await new Promise(M=>setTimeout(M,1500));const R={...p,...C,updatedAt:new Date().toISOString()},U=n.map(M=>M.id===p.id?R:M);i(U),r==null||r(U),m(null),q(),E("Item updated successfully!")}catch(R){D("Failed to update item. Please try again."),console.error("Error updating item:",R)}finally{b(!1)}}},G=async R=>{if(confirm("Are you sure you want to delete this item?")){b(!0),D(null);try{await new Promise(M=>setTimeout(M,1e3));const U=n.filter(M=>M.id!==R);i(U),r==null||r(U),E("Item deleted successfully!")}catch(U){D("Failed to delete item. Please try again."),console.error("Error deleting item:",U)}finally{b(!1)}}},q=()=>{T({name:"",brand:"",model:"",category:"",type:"",totalStock:0,availableStock:0,assignedStock:0,onTrialStock:0,defectiveStock:0,price:0,listPrice:0,sgkPrice:0,warrantyPeriod:12,notes:""}),_({})},H=R=>{m(R),T({name:R.name,brand:R.brand,model:R.model,category:R.category,type:R.type,totalStock:R.totalStock,availableStock:R.availableStock,assignedStock:R.assignedStock,onTrialStock:R.onTrialStock||0,defectiveStock:R.defectiveStock||0,price:R.price,listPrice:R.listPrice,sgkPrice:R.sgkPrice,warrantyPeriod:R.warrantyPeriod,notes:R.notes||""}),_({})},A=()=>{m(null),x(!1),q()},V=n.filter(R=>{const U=R.name.toLowerCase().includes(l.toLowerCase())||R.brand.toLowerCase().includes(l.toLowerCase())||R.model.toLowerCase().includes(l.toLowerCase()),M=!c||R.category===c,J=!u||R.type===u;return U&&M&&J}),L=[{value:"",label:"All Categories"},{value:"hearing_aid",label:"Hearing Aid"},{value:"cochlear_implant",label:"Cochlear Implant"},{value:"bone_anchored",label:"Bone Anchored"},{value:"accessories",label:"Accessories"}],P=[{value:"",label:"All Types"},{value:"behind_ear",label:"Behind the Ear (BTE)"},{value:"in_ear",label:"In the Ear (ITE)"},{value:"in_canal",label:"In the Canal (ITC)"},{value:"completely_in_canal",label:"Completely in Canal (CIC)"},{value:"internal",label:"Internal"},{value:"external",label:"External"}],I=R=>{const M=(R.availableStock-(R.onTrialStock||0))/R.totalStock*100;return R.onTrialStock>0&&R.onTrialStock>=R.availableStock?{color:"text-blue-600",label:"All on Trial"}:M<=10?{color:"text-red-600",label:"Critical"}:M<=25?{color:"text-yellow-600",label:"Low"}:R.onTrialStock>0?{color:"text-blue-600",label:"Some on Trial"}:{color:"text-green-600",label:"Good"}};return e?a.jsx(cr,{isOpen:e,onClose:t,title:"Inventory Management",size:"xl",className:"max-w-7xl",children:a.jsxs("div",{className:"space-y-6",children:[S&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[a.jsx(mt,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("span",{children:S})]}),N&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[a.jsx(St,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("span",{children:N})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(il,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Inventory Items"}),y&&a.jsx(ya,{className:"w-5 h-5 animate-spin text-blue-600"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Z,{onClick:j,disabled:y,variant:"outline",size:"sm",children:[a.jsx(ds,{className:`w-4 h-4 mr-2 ${y?"animate-spin":""}`}),"Refresh"]}),a.jsxs(Z,{onClick:()=>x(!0),disabled:y||v,size:"sm",children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(ye,{placeholder:"Search items...",value:l,onChange:R=>o(R.target.value),className:"pl-10",disabled:y})]}),a.jsx(Ue,{label:"",options:L,value:c,onChange:R=>d(R.target.value),disabled:y}),a.jsx(Ue,{label:"",options:P,value:u,onChange:R=>h(R.target.value),disabled:y}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Ea,{className:"w-4 h-4"}),a.jsxs("span",{children:[V.length," of ",n.length," items"]})]})]}),y?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ya,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-600",children:"Loading inventory..."})]})}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"text-left p-3 font-medium border-b",children:"Item Details"}),a.jsx("th",{className:"text-left p-3 font-medium border-b",children:"Stock Status"}),a.jsx("th",{className:"text-left p-3 font-medium border-b",children:"Pricing"}),a.jsx("th",{className:"text-left p-3 font-medium border-b",children:"Warranty"}),a.jsx("th",{className:"text-center p-3 font-medium border-b",children:"Actions"})]})}),a.jsx("tbody",{children:V.map(R=>{var M,J;const U=I(R);return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 border-b",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:R.name}),a.jsxs("div",{className:"text-sm text-gray-600",children:[R.brand," - ",R.model]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[(M=L.find(se=>se.value===R.category))==null?void 0:M.label," ",(J=P.find(se=>se.value===R.type))==null?void 0:J.label]})]})}),a.jsx("td",{className:"p-3 border-b",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Available:"})," ",R.availableStock]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Assigned:"})," ",R.assignedStock]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"On Trial:"})," ",R.onTrialStock||0]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Defective:"})," ",R.defectiveStock||0]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Total:"})," ",R.totalStock]}),a.jsx("div",{className:`text-xs font-medium ${U.color}`,children:U.label})]})}),a.jsx("td",{className:"p-3 border-b",children:a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Price:"})," ",R.price.toLocaleString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"List:"})," ",R.listPrice.toLocaleString()]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"SGK:"})," ",R.sgkPrice.toLocaleString()]})]})}),a.jsx("td",{className:"p-3 border-b",children:a.jsxs("div",{className:"text-sm",children:[R.warrantyPeriod," months"]})}),a.jsx("td",{className:"p-3 border-b",children:a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx(Z,{onClick:()=>H(R),variant:"outline",size:"sm",disabled:v,children:a.jsx(rn,{className:"w-4 h-4"})}),a.jsx(Z,{onClick:()=>G(R.id),variant:"outline",size:"sm",disabled:v,className:"text-red-600 hover:text-red-700 hover:border-red-300",children:v?a.jsx(ya,{className:"w-4 h-4 animate-spin"}):a.jsx(Es,{className:"w-4 h-4"})})]})})]},R.id)})})]}),V.length===0&&!y&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:n.length===0?"No inventory items found.":"No items match your search criteria."})]}),(f||p)&&a.jsx(cr,{isOpen:!0,onClose:A,title:p?"Edit Item":"Add New Item",size:"lg",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ye,{label:"Item Name",value:C.name,onChange:R=>T({...C,name:R.target.value}),error:w.name,disabled:v,required:!0}),a.jsx(ye,{label:"Brand",value:C.brand,onChange:R=>T({...C,brand:R.target.value}),error:w.brand,disabled:v,required:!0}),a.jsx(ye,{label:"Model",value:C.model,onChange:R=>T({...C,model:R.target.value}),error:w.model,disabled:v,required:!0}),a.jsx(Ue,{label:"Category",options:L.filter(R=>R.value!==""),value:C.category,onChange:R=>T({...C,category:R.target.value}),error:w.category,disabled:v,required:!0}),a.jsx(Ue,{label:"Type",options:P.filter(R=>R.value!==""),value:C.type,onChange:R=>T({...C,type:R.target.value}),error:w.type,disabled:v,required:!0}),a.jsx(ye,{label:"Total Stock",type:"number",value:C.totalStock,onChange:R=>T({...C,totalStock:parseInt(R.target.value)||0}),error:w.totalStock,disabled:v,min:"0",required:!0}),a.jsx(ye,{label:"Price ()",type:"number",value:C.price,onChange:R=>T({...C,price:parseFloat(R.target.value)||0}),error:w.price,disabled:v,min:"0",step:"0.01",required:!0}),a.jsx(ye,{label:"List Price ()",type:"number",value:C.listPrice,onChange:R=>T({...C,listPrice:parseFloat(R.target.value)||0}),error:w.listPrice,disabled:v,min:"0",step:"0.01",required:!0}),a.jsx(ye,{label:"SGK Price ()",type:"number",value:C.sgkPrice,onChange:R=>T({...C,sgkPrice:parseFloat(R.target.value)||0}),error:w.sgkPrice,disabled:v,min:"0",step:"0.01",required:!0}),a.jsx(ye,{label:"Warranty Period (months)",type:"number",value:C.warrantyPeriod,onChange:R=>T({...C,warrantyPeriod:parseInt(R.target.value)||12}),error:w.warrantyPeriod,disabled:v,min:"1",max:"120",required:!0})]}),a.jsx(wr,{label:"Notes",value:C.notes,onChange:R=>T({...C,notes:R.target.value}),disabled:v,rows:3}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(Z,{onClick:A,variant:"outline",disabled:v,children:"Cancel"}),a.jsx(Z,{onClick:p?z:O,disabled:v,children:v?a.jsxs(a.Fragment,{children:[a.jsx(ya,{className:"w-4 h-4 mr-2 animate-spin"}),p?"Updating...":"Adding..."]}):p?"Update Item":"Add Item"})]})]})})]})}):null},ZK=({patientId:e,devices:t,tabCount:r})=>{const[s,n]=k.useState(!1),[i,l]=k.useState(null),[o,c]=k.useState(!1),[d,u]=k.useState(!1),[h,f]=k.useState(!1),[x,p]=k.useState(!1),[m,y]=k.useState(null),[g,v]=k.useState(!1),[b,S]=k.useState(null),[D,N]=k.useState(null),{data:E=[],isLoading:w,error:_}=p_(e),C=t||E,T=ae=>ae?{id:ae.id,deviceId:ae.id,patientId:e,assignedDate:ae.assignedDate||new Date().toISOString(),assignedBy:ae.assignedBy||"Current User",status:ae.status,ear:ae.ear==="bilateral"?"both":ae.ear||"both",reason:ae.reason==="new"?"sale":ae.reason==="warranty"?"service":ae.reason==="upgrade"?"replacement":ae.reason||"sale",notes:ae.notes,trialEndDate:ae.trialEndDate,listPrice:ae.listPrice,salePrice:ae.salePrice,sgkReduction:ae.sgkReduction,patientPayment:ae.patientPayment,paymentMethod:ae.paymentMethod,serialNumber:ae.serialNumber}:null;k.useEffect(()=>{if(D||b){const ae=setTimeout(()=>{N(null),S(null)},5e3);return()=>clearTimeout(ae)}},[D,b]);const j=ae=>{console.log("Device clicked:",ae)},F=()=>{l(null),n(!0),S(null)},O=ae=>{l(ae),c(!0)},z=()=>{c(!1),l(null)},G=async ae=>{try{S(null),console.log("Updating device:",ae),await new Promise(ie=>setTimeout(ie,1e3)),N("Cihaz baaryla gncellendi"),c(!1),l(null)}catch(ie){console.error("Error updating device:",ie),S("Cihaz gncellenirken bir hata olutu")}},q=async ae=>{try{S(null),console.log("Removing device:",ae),await new Promise(ie=>setTimeout(ie,1e3)),N("Cihaz baaryla kaldrld")}catch(ie){console.error("Error removing device:",ie),S("Cihaz kaldrlrken bir hata olutu")}},H=async ae=>{try{S(null),console.log("Replacing device:",ae),N("Cihaz deitirme ilemi balatld")}catch(ie){console.error("Error replacing device:",ie),S("Cihaz deitirilirken bir hata olutu")}},A=ae=>{y(ae),u(!0)},V=ae=>{y(ae),f(!0)},L=()=>{p(!0)},P=()=>{u(!1),y(null)},I=()=>{f(!1),y(null)},R=()=>{p(!1)},U=async ae=>{try{S(null),console.log("Starting device trial:",ae),N("Cihaz deneme sreci balatld"),u(!1),y(null)}catch(ie){console.error("Error starting trial:",ie),S("Deneme sreci balatlrken hata olutu")}},M=async ae=>{try{S(null),console.log("Scheduling device maintenance:",ae),N("Cihaz bakm kayd oluturuldu"),f(!1),y(null)}catch(ie){console.error("Error scheduling maintenance:",ie),S("Bakm kayd oluturulurken hata olutu")}},J=()=>{n(!1),l(null),S(null)},se=async ae=>{try{v(!0),S(null),i?(console.log("Updating device assignment:",ae),N("Cihaz atamas baaryla gncellendi")):(console.log("Creating new device assignment:",ae),N("Cihaz baaryla atand")),n(!1),l(null)}catch(ie){console.error("Error in device assignment:",ie),S(i?"Cihaz gncellenirken bir hata olutu":"Cihaz atanrken bir hata olutu")}finally{v(!1)}};return w?a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(Sl,{className:"w-5 h-5 mr-2"}),"Hasta Cihazlar"]})}),a.jsx(Ln,{lines:3,className:"mb-4"})]}):_?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Cihazlar yklenirken hata olutu"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:"Ltfen sayfay yenileyin veya daha sonra tekrar deneyin."})]})]})})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(Sl,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Hasta Cihazlar ",r!==void 0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:r})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ut,{onClick:L,"aria-label":"Envanter Ynetimi",className:"flex items-center justify-center px-3 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600",children:[a.jsx(Ci,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Envanter"]}),a.jsx(ut,{onClick:()=>window.location.reload(),"aria-label":"Yenile",className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-500 text-white hover:bg-gray-600",children:a.jsx(ds,{className:"w-5 h-5","aria-hidden":"true"})}),a.jsx(ut,{onClick:F,"aria-label":"Cihaz ata",className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-500 text-white hover:bg-blue-600",children:a.jsx(_s,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),D&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-green-800",children:D})})]})}),b&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:b})})]})}),C.length===0?a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(Sl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henz cihaz atanmam"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Bu hastaya henz cihaz atanmam. Sat ilemi sonrasnda cihazlar burada grnecek."}),a.jsxs(ut,{onClick:F,className:"bg-blue-500 text-white hover:bg-blue-600",children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),"lk Cihaz Ata"]})]}):a.jsx("div",{className:"grid gap-4",role:"list","aria-label":"Hasta cihazlar listesi",children:C.map(ae=>a.jsxs("div",{role:"listitem",className:"relative group",children:[a.jsx(zK,{device:ae,onDeviceClick:j}),a.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsxs("div",{className:"flex items-center space-x-1 bg-white rounded-lg shadow-lg border p-1",children:[a.jsx(ut,{onClick:()=>O(ae),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Dzenle",disabled:g,children:a.jsx(rn,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:()=>A(ae),className:"p-2 text-green-600 hover:bg-green-50 rounded",title:"Deneme Balat",disabled:g,children:a.jsx(Ci,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:()=>V(ae),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded",title:"Bakm",disabled:g,children:a.jsx(Ci,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:()=>H(ae.id),className:"p-2 text-orange-600 hover:bg-orange-50 rounded",title:"Deitir",disabled:g,children:a.jsx(ds,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:()=>q(ae.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Kaldr",disabled:g,children:a.jsx(Es,{className:"w-4 h-4"})})]})})]},ae.id))}),s&&a.jsx(GK,{patientId:e,assignment:T(i),isOpen:s,onClose:J,onSave:se}),o&&a.jsx(WK,{device:i,open:o,onClose:z,onSave:G}),d&&m&&a.jsx(qK,{device:m,patientId:e,open:d,onClose:P,onSave:U}),h&&m&&a.jsx(XK,{device:m,open:h,onClose:I,onSubmit:M}),x&&a.jsx(QK,{isOpen:x,onClose:R})]})},JK=e=>{const[t,r]=k.useState(""),[s,n]=k.useState("all"),[i,l]=k.useState("all"),[o,c]=k.useState(""),[d,u]=k.useState(""),[h,f]=k.useState(!1),x=k.useMemo(()=>!e||!Array.isArray(e)?[]:e.filter(y=>{var g,v,b,S;if(t){const D=t.toLowerCase();if(!(((g=y.productId)==null?void 0:g.toLowerCase().includes(D))||((v=y.paymentMethod)==null?void 0:v.toLowerCase().includes(D))||((b=y.seller)==null?void 0:b.toLowerCase().includes(D))||((S=y.notes)==null?void 0:S.toLowerCase().includes(D))))return!1}if(s!=="all"&&y.status!==s||i!=="all"&&y.paymentMethod!==i)return!1;if(o||d){const D=new Date(y.createdAt||y.date);if(o){const N=new Date(o);if(D<N)return!1}if(d){const N=new Date(d);if(N.setHours(23,59,59,999),D>N)return!1}}return!0}),[e,t,s,i,o,d]),p=()=>{r(""),n("all"),l("all"),c(""),u("")},m=k.useMemo(()=>t!==""||s!=="all"||i!=="all"||o!==""||d!=="",[t,s,i,o,d]);return{searchTerm:t,setSearchTerm:r,statusFilter:s,setStatusFilter:n,paymentMethodFilter:i,setPaymentMethodFilter:l,dateFrom:o,setDateFrom:c,dateTo:d,setDateTo:u,showFilters:h,setShowFilters:f,filteredSales:x,clearFilters:p,hasActiveFilters:m}},eG=(e,t)=>ge.get("/api/inventory",{...t,params:{...e,...t==null?void 0:t.params}}),tG=e=>({id:e.id||"",name:e.name,category:e.category,brand:e.brand,price:e.price,stock:e.availableInventory||e.inventory||0}),rG=({selectedProduct:e,onProductSelect:t,placeholder:r="rn sein veya arayn..."})=>{const[s,n]=k.useState(!1),[i,l]=k.useState(""),[o,c]=k.useState([]),[d,u]=k.useState([]),[h,f]=k.useState(!1),x=k.useRef(null),p=k.useRef(null);k.useEffect(()=>{(async()=>{f(!0);try{const D=(await eG()).data;if(D.data){const N=D.data.map(tG);c(N),u(N)}}catch(S){console.error("Failed to load products:",S),c([]),u([])}finally{f(!1)}})()},[]),k.useEffect(()=>{if(!i.trim())u(o);else{const b=o.filter(S=>{var N,E;const D=i.toLowerCase();return S.name.toLowerCase().includes(D)||((N=S.category)==null?void 0:N.toLowerCase().includes(D))||((E=S.brand)==null?void 0:E.toLowerCase().includes(D))});u(b)}},[i,o]),k.useEffect(()=>{const b=S=>{x.current&&!x.current.contains(S.target)&&n(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const m=b=>{t(b),l(b.name),n(!1)},y=b=>{l(b.target.value),n(!0),b.target.value||t(null)},g=()=>{n(!0)},v=()=>{l(""),t(null),n(!1)};return a.jsxs("div",{className:"relative",ref:x,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:p,type:"text",value:i,onChange:y,onFocus:g,placeholder:r,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),i&&a.jsx("button",{type:"button",onClick:v,className:"absolute inset-y-0 right-8 flex items-center pr-1 text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:d.length>0?d.map(b=>a.jsx("div",{onClick:()=>m(b),className:"px-4 py-3 cursor-pointer hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:b.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[b.category,"  ",b.brand]})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsxs("div",{className:"font-medium text-gray-900",children:["",b.price.toLocaleString()]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Stok: ",b.stock]})]})]})},b.id)):a.jsxs("div",{className:"px-4 py-3 text-gray-500 text-center",children:[a.jsx("div",{className:"text-sm",children:"rn bulunamad"}),a.jsx("div",{className:"text-xs mt-1",children:"Farkl anahtar kelimeler deneyin"})]})})]})},sG=({patientId:e,onSaleComplete:t})=>{const r=k.useMemo(()=>new On,[]),{success:s,error:n}=Hl(),[i,l]=k.useState(null),[o,c]=k.useState(1),[d,u]=k.useState(0),[h,f]=k.useState(0),[x,p]=k.useState(!1),[m,y]=k.useState(0),[g,v]=k.useState("cash"),[b,S]=k.useState(new Date().toISOString().split("T")[0]),[D,N]=k.useState("");k.useEffect(()=>{u(i?i.price:0)},[i]);const E=j=>{if(!j)return 20;const F=j.toLowerCase();return F.includes("iitme")||F.includes("hearing")||F.includes("cihaz")||F.includes("aid")?0:20},w=k.useMemo(()=>{const j=o*d,F=Math.max(0,j-h),O=i?E(i.category):20,z=F*O/100,G=F+z,q=x?m:0,H=G-q;return{basePrice:j,netAmount:F,kdvRate:O,kdvAmount:z,totalWithKdv:G,sgkCoverage:q,finalAmount:H}},[o,d,h,i,x,m]),_=k.useMemo(()=>w.finalAmount,[w]),C=async j=>{if(j.preventDefault(),!i){alert("Ltfen bir rn sein");return}if(o<=0){alert("Miktar 0'dan byk olmaldr");return}if(d<=0){alert("Birim fiyat 0'dan byk olmaldr");return}try{const F={devices:[{inventoryId:i.id,id:i.id,name:i.name,category:i.category||"",brand:i.brand||"",quantity:o,unitPrice:d,totalPrice:w.basePrice,listPrice:d,ear:"both",discountType:h>0?"amount":"none",discountValue:h,notes:D}],paymentMethod:g,saleDate:b,notes:D,totalAmount:w.finalAmount,paidAmount:w.finalAmount,sgkScheme:x?"standard":"none",sgkAmount:x?m:0,discount:h};await r.createSale(e||"",F),T(),s("Sat baaryla kaydedildi!"),t&&t()}catch(F){console.error("Sat kaydedilirken hata:",F),n("Sat kaydedilirken bir hata olutu")}},T=()=>{l(null),c(1),u(0),f(0),p(!1),y(0),v("cash"),S(new Date().toISOString().split("T")[0]),N("")};return a.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"rn Sat"}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"rn Seimi *"}),a.jsx(rG,{selectedProduct:i,onProductSelect:l,placeholder:"rn ad, kategori veya marka ile arayn..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Miktar *"}),a.jsx("input",{type:"number",min:"1",value:o,onChange:j=>c(parseInt(j.target.value)||1),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Birim Fiyat () *"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:d,onChange:j=>u(parseFloat(j.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ndirim Tutar ()"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:h,onChange:j=>f(parseFloat(j.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ndirim tutarn girin..."})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"sgk-status",checked:x,onChange:j=>p(j.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"sgk-status",className:"ml-2 block text-sm font-medium text-gray-700",children:"SGK Kapsamnda"})]}),x&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SGK Karlama Tutar ()"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:m,onChange:j=>y(parseFloat(j.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"SGK karlama tutarn girin..."})]})]}),i&&a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"rn Detaylar"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Marka:"}),a.jsx("span",{className:"ml-2 text-blue-600",children:i.brand||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Model:"}),a.jsx("span",{className:"ml-2 text-blue-600",children:i.name||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Kategori:"}),a.jsx("span",{className:"ml-2 text-blue-600",children:i.category||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Liste Fiyat:"}),a.jsxs("span",{className:"ml-2 text-blue-600",children:["",i.price.toLocaleString("tr-TR")]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Stok:"}),a.jsxs("span",{className:`ml-2 font-medium ${(i.stock||0)===0?"text-red-600":(i.stock||0)<=5?"text-yellow-600":"text-green-600"}`,children:[i.stock||0," adet"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"KDV Oran:"}),a.jsxs("span",{className:"ml-2 text-blue-600",children:["%",E(i.category)]})]})]})]}),i&&a.jsxs("div",{className:"space-y-4",children:[h>0&&a.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-red-700 font-medium",children:"ndirim Uyguland"}),a.jsxs("span",{className:"text-red-700 font-bold",children:["-",h.toLocaleString("tr-TR")]})]})}),x&&m>0&&a.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-green-700 font-medium",children:"SGK Karlamas"}),a.jsxs("span",{className:"text-green-700 font-bold",children:["-",m.toLocaleString("tr-TR")]})]})}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("span",{className:"font-bold text-blue-900 text-lg",children:"Toplam Tutar"}),a.jsxs("span",{className:"font-bold text-blue-600 text-xl",children:["",w.finalAmount.toLocaleString("tr-TR")]})]}),a.jsxs("div",{className:"border-t border-blue-200 pt-3 space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[a.jsxs("span",{children:["Liste Fiyat (",o," x ",d.toLocaleString("tr-TR"),"):"]}),a.jsxs("span",{children:["",w.basePrice.toLocaleString("tr-TR")]})]}),h>0&&a.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[a.jsx("span",{children:"ndirim:"}),a.jsxs("span",{children:["-",h.toLocaleString("tr-TR")]})]}),a.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[a.jsxs("span",{children:["KDV (%",w.kdvRate,"):"]}),a.jsxs("span",{children:["",w.kdvAmount.toLocaleString("tr-TR")]})]}),a.jsxs("div",{className:"flex justify-between text-sm text-blue-700 font-medium border-t border-blue-200 pt-1",children:[a.jsx("span",{children:"KDV Dahil Toplam:"}),a.jsxs("span",{children:["",w.totalWithKdv.toLocaleString("tr-TR")]})]}),x&&m>0&&a.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[a.jsx("span",{children:"SGK Karlamas:"}),a.jsxs("span",{children:["-",m.toLocaleString("tr-TR")]})]})]})]})]}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-lg font-medium text-gray-700",children:"Toplam Tutar:"}),a.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["",_.toLocaleString()]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"deme Yntemi *"}),a.jsxs("select",{value:g,onChange:j=>v(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"cash",children:"Nakit"}),a.jsx("option",{value:"credit_card",children:"Kredi Kart"}),a.jsx("option",{value:"bank_transfer",children:"Banka Transferi"}),a.jsx("option",{value:"installment",children:"Taksit"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sat Tarihi *"}),a.jsx("input",{type:"date",value:b,onChange:j=>S(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar"}),a.jsx("textarea",{value:D,onChange:j=>N(j.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Satla ilgili notlar..."})]}),a.jsxs("div",{className:"flex space-x-4 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Sat Kaydet"}),a.jsx("button",{type:"button",onClick:T,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Temizle"})]})]})]})};class dn{static validateTurkishTaxNumber(t){if(!t||t.length!==10)return!1;const r=t.split("").map(Number);if(r.some(isNaN))return!1;let s=0;for(let l=0;l<9;l++)s+=r[l]*(10-l);const n=s%11;return(n<2?n:11-n)===r[9]}static validateTCKN(t){if(!t||t.length!==11)return!1;const r=t.split("").map(Number);if(r.some(isNaN)||r[0]===0)return!1;const s=r[0]+r[2]+r[4]+r[6]+r[8],n=r[1]+r[3]+r[5]+r[7],i=(s*7-n)%10,l=(s+n+i)%10;return i===r[9]&&l===r[10]}static validateEmail(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!1}static validateTurkishPhone(t){if(!t)return!1;const r=t.replace(/\D/g,"");return r.length===10?/^[2-5]\d{9}$/.test(r):r.length===13?/^905\d{9}$/.test(r):!1}static validateTurkishPostalCode(t){return t?/^\d{5}$/.test(t):!1}static validateAmount(t){if(t===""||t===null||t===void 0)return!1;const r=typeof t=="string"?parseFloat(t):t;return isNaN(r)||r<0?!1:(r.toString().split(".")[1]||"").length<=2}static validatePercentage(t){if(t===""||t===null||t===void 0)return!1;const r=typeof t=="string"?parseFloat(t):t;return!isNaN(r)&&r>=0&&r<=100}static validateInvoiceDate(t){if(!t)return!1;const r=new Date(t),s=new Date;return s.setHours(23,59,59,999),r<=s&&r>=new Date("2000-01-01")}static validateDueDate(t,r){if(!t||!r)return!1;const s=new Date(t),n=new Date(r);return s>=n}static generateIdempotencyKey(){return`invoice_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static formatTurkishCurrency(t){return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}static formatTurkishPhone(t){if(!t)return"";const r=t.replace(/\D/g,"");return r.length===10?`(0${r.substr(0,3)}) ${r.substr(3,3)} ${r.substr(6,2)} ${r.substr(8,2)}`:r.length===13&&r.startsWith("905")?`+90 (${r.substr(2,3)}) ${r.substr(5,3)} ${r.substr(8,2)} ${r.substr(10,2)}`:t}static formatTaxNumber(t){if(!t)return"";const r=t.replace(/\D/g,"");return r.length===10?`${r.substr(0,3)} ${r.substr(3,3)} ${r.substr(6,2)} ${r.substr(8,2)}`:r.length===11?`${r.substr(0,3)} ${r.substr(3,3)} ${r.substr(6,3)} ${r.substr(9,2)}`:t}}const nx={version:"1.0.0",invoiceTypes:{individual:{name:"Bireysel Fatura",description:"Bireysel mteriler iin fatura",requiredFields:["customer_info","invoice_details","items"],conditionalFields:["device_info","sgk_info"]},corporate:{name:"Kurumsal Fatura",description:"Kurumsal mteriler iin fatura",requiredFields:["company_info","invoice_details","items"],conditionalFields:["device_info","sgk_info"]},export:{name:"hracat Faturas",description:"Yurt d satlar iin fatura",requiredFields:["export_info","invoice_details","items"],conditionalFields:["device_info"]}},scenarios:{device_sale:{name:"Cihaz Sat",description:"itme cihaz sat faturas",applicableTypes:["individual","corporate"]},service:{name:"Hizmet Faturas",description:"Bakm, onarm ve dier hizmetler",applicableTypes:["individual","corporate"]},export_device:{name:"Cihaz hracat",description:"Yurt d cihaz sat",applicableTypes:["export"]}},fieldDefinitions:{customer_info:{name:"customer_info",title:"Mteri Bilgileri",description:"Bireysel mteri bilgileri",fields:{first_name:{id:"first_name",label:"Ad",type:"text",required:!0,validation:{minLength:2,maxLength:50}},last_name:{id:"last_name",label:"Soyad",type:"text",required:!0,validation:{minLength:2,maxLength:50}},tc_number:{id:"tc_number",label:"T.C. Kimlik No",type:"text",required:!0,placeholder:"12345678901",validation:{pattern:"^[0-9]{11}$",minLength:11,maxLength:11},helpText:"11 haneli T.C. Kimlik Numaras"},email:{id:"email",label:"E-posta",type:"email",required:!1,placeholder:"ornek@email.com"},phone:{id:"phone",label:"Telefon",type:"tel",required:!0,placeholder:"0532 123 45 67"},address:{id:"address",label:"Adres",type:"textarea",required:!0,validation:{minLength:10,maxLength:200}},city:{id:"city",label:"l",type:"select",required:!0,options:[{value:"istanbul",text:"stanbul"},{value:"ankara",text:"Ankara"},{value:"izmir",text:"zmir"},{value:"bursa",text:"Bursa"},{value:"antalya",text:"Antalya"}]},postal_code:{id:"postal_code",label:"Posta Kodu",type:"text",required:!0,placeholder:"34000",validation:{pattern:"^[0-9]{5}$"}}}},company_info:{name:"company_info",title:"irket Bilgileri",description:"Kurumsal mteri bilgileri",fields:{company_name:{id:"company_name",label:"irket Ad",type:"text",required:!0,validation:{minLength:2,maxLength:100}},tax_number:{id:"tax_number",label:"Vergi Numaras",type:"text",required:!0,placeholder:"1234567890",validation:{pattern:"^[0-9]{10}$",minLength:10,maxLength:10},helpText:"10 haneli Vergi Kimlik Numaras"},tax_office:{id:"tax_office",label:"Vergi Dairesi",type:"text",required:!0,validation:{minLength:2,maxLength:50}},contact_person:{id:"contact_person",label:"Yetkili Kii",type:"text",required:!1,validation:{maxLength:100}},email:{id:"email",label:"E-posta",type:"email",required:!1,placeholder:"info@sirket.com"},phone:{id:"phone",label:"Telefon",type:"tel",required:!0,placeholder:"0212 123 45 67"},address:{id:"address",label:"Adres",type:"textarea",required:!0,validation:{minLength:10,maxLength:200}},city:{id:"city",label:"l",type:"select",required:!0,options:[{value:"istanbul",text:"stanbul"},{value:"ankara",text:"Ankara"},{value:"izmir",text:"zmir"},{value:"bursa",text:"Bursa"},{value:"antalya",text:"Antalya"}]},postal_code:{id:"postal_code",label:"Posta Kodu",type:"text",required:!0,placeholder:"34000",validation:{pattern:"^[0-9]{5}$"}}}},export_info:{name:"export_info",title:"hracat Bilgileri",description:"Yurt d sat bilgileri",fields:{company_name:{id:"company_name",label:"irket Ad",type:"text",required:!0,validation:{minLength:2,maxLength:100}},country:{id:"country",label:"lke",type:"select",required:!0,options:[{value:"DE",text:"Almanya"},{value:"FR",text:"Fransa"},{value:"UK",text:"ngiltere"},{value:"US",text:"Amerika"},{value:"NL",text:"Hollanda"}]},currency:{id:"currency",label:"Para Birimi",type:"select",required:!0,defaultValue:"EUR",options:[{value:"EUR",text:"Euro (EUR)"},{value:"USD",text:"Dolar (USD)"},{value:"GBP",text:"Sterlin (GBP)"}]},exchange_rate:{id:"exchange_rate",label:"Dviz Kuru",type:"number",required:!0,validation:{min:.01,max:1e3},helpText:"1 TRY = ? Yabanc Para"},address:{id:"address",label:"Adres",type:"textarea",required:!0,validation:{minLength:10,maxLength:200}}}},invoice_details:{name:"invoice_details",title:"Fatura Detaylar",description:"Fatura tarih ve deme bilgileri",fields:{invoice_date:{id:"invoice_date",label:"Fatura Tarihi",type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0]},due_date:{id:"due_date",label:"Vade Tarihi",type:"date",required:!0},payment_method:{id:"payment_method",label:"deme Yntemi",type:"select",required:!0,defaultValue:"cash",options:[{value:"cash",text:"Nakit"},{value:"credit_card",text:"Kredi Kart"},{value:"bank_transfer",text:"Havale/EFT"},{value:"check",text:"ek"},{value:"installment",text:"Taksit"}]},notes:{id:"notes",label:"Notlar",type:"textarea",required:!1,validation:{maxLength:500},placeholder:"Fatura ile ilgili ek notlar..."}}},items:{name:"items",title:"Fatura Kalemleri",description:"Satlan rn ve hizmetler",fields:{items_list:{id:"items_list",label:"Kalemler",type:"text",required:!0,helpText:"En az bir kalem eklemelisiniz"}}},device_info:{name:"device_info",title:"Cihaz Bilgileri",description:"itme cihaz detaylar",conditional:{dependsOn:"scenario",condition:"equals",value:"device_sale"},fields:{device_brand:{id:"device_brand",label:"Cihaz Markas",type:"select",required:!0,options:[{value:"phonak",text:"Phonak"},{value:"oticon",text:"Oticon"},{value:"widex",text:"Widex"},{value:"resound",text:"ReSound"},{value:"signia",text:"Signia"}]},device_model:{id:"device_model",label:"Cihaz Modeli",type:"text",required:!0,validation:{minLength:2,maxLength:50}},device_serial:{id:"device_serial",label:"Seri Numaras",type:"text",required:!0,validation:{minLength:5,maxLength:20}},device_side:{id:"device_side",label:"Kulak",type:"select",required:!0,options:[{value:"left",text:"Sol"},{value:"right",text:"Sa"},{value:"both",text:"ift"}]},warranty_period:{id:"warranty_period",label:"Garanti Sresi (Ay)",type:"number",required:!0,defaultValue:24,validation:{min:1,max:60}}}},sgk_info:{name:"sgk_info",title:"SGK Bilgileri",description:"Sosyal Gvenlik Kurumu bilgileri",conditional:{dependsOn:"has_sgk_coverage",condition:"equals",value:!0},fields:{has_sgk_coverage:{id:"has_sgk_coverage",label:"SGK Kapsamnda",type:"checkbox",required:!1,defaultValue:!1},sgk_number:{id:"sgk_number",label:"SGK Sicil No",type:"text",required:!1,conditional:{dependsOn:"has_sgk_coverage",condition:"equals",value:!0},validation:{minLength:10,maxLength:15}},sgk_institution:{id:"sgk_institution",label:"SGK Kurumu",type:"text",required:!1,conditional:{dependsOn:"has_sgk_coverage",condition:"equals",value:!0},validation:{maxLength:100}},sgk_coverage_rate:{id:"sgk_coverage_rate",label:"Karlama Oran (%)",type:"number",required:!1,conditional:{dependsOn:"has_sgk_coverage",condition:"equals",value:!0},defaultValue:80,validation:{min:0,max:100}}}}}},aG=({onSubmit:e,onValidationChange:t,onFormDataChange:r,initialData:s={},disabled:n=!1,className:i=""})=>{const[l,o]=k.useState({invoiceType:s.invoiceType||"individual",scenario:s.scenario||"device_sale",...s}),[c,d]=k.useState([{id:"1",description:"",quantity:1,unitPrice:0,taxRate:18,total:0}]),[u,h]=k.useState({}),[f,x]=k.useState({}),p=(T,j)=>{if(!T.conditional)return!0;const{dependsOn:F,condition:O,value:z}=T.conditional,G=j[F];switch(O){case"equals":return G===z;case"not_equals":return G!==z;case"contains":return String(G).includes(String(z));default:return!0}},m=k.useMemo(()=>{const T=nx,j=T.invoiceTypes[l.invoiceType];if(!j)return[];const F=[];return j.requiredFields.forEach(O=>{const z=T.fieldDefinitions[O];z&&F.push(z)}),j.conditionalFields.forEach(O=>{const z=T.fieldDefinitions[O];z&&p(z,l)&&F.push(z)}),F},[l.invoiceType,l.scenario,l]),y=(T,j)=>{if(!T.conditional)return!0;const{dependsOn:F,condition:O,value:z}=T.conditional,G=j[F];switch(O){case"equals":return G===z;case"not_equals":return G!==z;case"contains":return String(G).includes(String(z));case"greater_than":return Number(G)>Number(z);case"less_than":return Number(G)<Number(z);default:return!0}},g=(T,j)=>{if(T.required&&(!j||j===""))return`${T.label} alan zorunludur`;if(!j)return null;const F=T.validation;return F?F.pattern&&!new RegExp(F.pattern).test(String(j))?T.id==="tc_number"?dn.validateTCKN(String(j))?null:"Geersiz T.C. Kimlik Numaras":T.id==="tax_number"?dn.validateTurkishTaxNumber(String(j))?null:"Geersiz Vergi Kimlik Numaras":T.id==="postal_code"?dn.validateTurkishPostalCode(String(j))?null:"Geersiz posta kodu":`${T.label} format geersiz`:T.type==="email"&&!dn.validateEmail(String(j))?"Geersiz e-posta adresi":T.type==="tel"&&!dn.validateTurkishPhone(String(j))?"Geersiz telefon numaras":F.minLength&&String(j).length<F.minLength?`${T.label} en az ${F.minLength} karakter olmaldr`:F.maxLength&&String(j).length>F.maxLength?`${T.label} en fazla ${F.maxLength} karakter olmaldr`:F.min!==void 0&&Number(j)<F.min?`${T.label} en az ${F.min} olmaldr`:F.max!==void 0&&Number(j)>F.max?`${T.label} en fazla ${F.max} olmaldr`:null:null},v=()=>{const T=[],j={};m.forEach(O=>{const z=l[O.name]||{};Object.values(O.fields).forEach(G=>{if(y(G,z)){const q=z[G.id],H=g(G,q);if(H){const A=`${O.name}.${G.id}`;j[A]=H,T.push({field:G.id,section:O.name,message:H,type:G.required&&(!q||q==="")?"required":"pattern"})}}})}),(c.length===0||c.every(O=>!O.description))&&(j.items="En az bir fatura kalemi eklemelisiniz",T.push({field:"items_list",section:"items",message:"En az bir fatura kalemi eklemelisiniz",type:"required"})),h(j);const F={isValid:T.length===0,errors:T,warnings:[]};return t&&t(F),F},b=(T,j,F)=>{o(z=>({...z,[T]:{...z[T]||{},[j]:F}}));const O=`${T}.${j}`;x(z=>({...z,[O]:!0})),u[O]&&h(z=>{const G={...z};return delete G[O],G})},S=T=>{o(j=>({invoiceType:T,scenario:j.scenario}))},D=(T,j,F)=>{d(O=>{const z=[...O];if(z[T]={...z[T],[j]:F},j==="quantity"||j==="unitPrice"||j==="taxRate"){const G=z[T],q=G.quantity*G.unitPrice,H=q*(G.taxRate/100);z[T].total=q+H}return z})},N=()=>{d(T=>[...T,{id:Date.now().toString(),description:"",quantity:1,unitPrice:0,taxRate:18,total:0}])},E=T=>{c.length>1&&d(j=>j.filter((F,O)=>O!==T))},w=T=>{if(T.preventDefault(),v().isValid){const F={...l,items:c.filter(O=>O.description.trim()!=="")};e(F)}};k.useEffect(()=>{v()},[l,c,m]),k.useEffect(()=>{if(r){const T={...l,items:c.filter(j=>j.description.trim()!=="")};r(T)}},[l,c,r]);const _=(T,j)=>{var V;const F=l[T.name]||{},O=F[j.id]||j.defaultValue||"",z=`${T.name}.${j.id}`,G=u[z]&&f[z];if(!y(j,F))return null;const q={id:j.id,name:j.id,value:O,disabled:n,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${G?"border-red-500":"border-gray-300"}`,placeholder:j.placeholder,onChange:L=>{const P=j.type==="checkbox"?L.target.checked:j.type==="number"?parseFloat(L.target.value)||0:L.target.value;b(T.name,j.id,P)}},H={value:O,disabled:n,onChange:L=>{b(T.name,j.id,L.target.value)},options:((V=j.options)==null?void 0:V.map(L=>({value:L.value,label:L.text,disabled:L.disabled})))||[],error:G?u[z]:void 0,fullWidth:!0};let A;switch(j.type){case"select":A=a.jsx(Ue,{...H});break;case"textarea":A=a.jsx(wr,{...q,rows:3});break;case"checkbox":A=a.jsx(ye,{type:"checkbox",id:j.id,name:j.id,checked:!!O,disabled:n,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500",onChange:L=>b(T.name,j.id,L.target.checked)});break;default:A=a.jsx(ye,{type:j.type,...q})}return a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:j.id,className:"block text-sm font-medium text-gray-700 mb-1",children:[j.label,j.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),j.type==="checkbox"?a.jsxs("div",{className:"flex items-center",children:[A,a.jsx("label",{htmlFor:j.id,className:"ml-2 text-sm text-gray-700",children:j.label})]}):A,j.helpText&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:j.helpText}),G&&a.jsx("p",{className:"mt-1 text-xs text-red-500",children:u[z]})]},j.id)},C=k.useMemo(()=>{const T=c.reduce((O,z)=>O+z.quantity*z.unitPrice,0),j=c.reduce((O,z)=>{const G=z.quantity*z.unitPrice;return O+G*(z.taxRate/100)},0),F=T+j;return{subtotal:T,totalTax:j,total:F}},[c]);return a.jsxs("form",{onSubmit:w,className:`space-y-6 ${i}`,children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Fatura Tipi"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(nx.invoiceTypes).map(([T,j])=>a.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[a.jsx(ye,{type:"radio",name:"invoiceType",value:T,checked:l.invoiceType===T,onChange:F=>S(F.target.value),disabled:n,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),j.description&&a.jsx("div",{className:"text-xs text-gray-500",children:j.description})]})]},T))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Senaryo"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(nx.scenarios).filter(([T,j])=>j.applicableTypes.includes(l.invoiceType)).map(([T,j])=>a.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[a.jsx(ye,{type:"radio",name:"scenario",value:T,checked:l.scenario===T,onChange:F=>b("","scenario",F.target.value),disabled:n,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),j.description&&a.jsx("div",{className:"text-xs text-gray-500",children:j.description})]})]},T))})]}),m.map(T=>a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:T.title}),T.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:T.description}),T.name==="items"?a.jsxs("div",{className:"space-y-4",children:[c.map((j,F)=>a.jsx("div",{className:"p-4 border rounded-lg bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Aklama ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(ye,{type:"text",value:j.description,onChange:O=>D(F,"description",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"rn/hizmet aklamas",disabled:n})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Miktar ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(ye,{type:"number",min:"1",value:j.quantity,onChange:O=>D(F,"quantity",parseFloat(O.target.value)||1),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Birim Fiyat ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(ye,{type:"number",min:"0",step:"0.01",value:j.unitPrice,onChange:O=>D(F,"unitPrice",parseFloat(O.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n})]}),a.jsx("div",{children:a.jsx(Ue,{label:"KDV (%)",value:j.taxRate.toString(),onChange:O=>D(F,"taxRate",parseFloat(O.target.value)),options:[{value:"0",label:"0%"},{value:"1",label:"1%"},{value:"8",label:"8%"},{value:"18",label:"18%"}],disabled:n,fullWidth:!0})}),a.jsxs("div",{className:"flex items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Toplam"}),a.jsx("div",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-md text-right",children:dn.formatTurkishCurrency(j.total)})]}),c.length>1&&a.jsx(Z,{type:"button",onClick:()=>E(F),className:"ml-2 p-2 text-red-600 hover:text-red-800 focus:outline-none",disabled:n,variant:"default",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},j.id)),a.jsx(Z,{type:"button",onClick:N,className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n,variant:"default",children:"+ Yeni Kalem Ekle"}),u.items&&a.jsx("p",{className:"text-sm text-red-500",children:u.items}),a.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Ara Toplam:"}),a.jsx("span",{children:dn.formatTurkishCurrency(C.subtotal)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"KDV:"}),a.jsx("span",{children:dn.formatTurkishCurrency(C.totalTax)})]}),a.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t pt-2",children:[a.jsx("span",{children:"Genel Toplam:"}),a.jsx("span",{children:dn.formatTurkishCurrency(C.total)})]})]})})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.values(T.fields).map(j=>_(T,j))})]},T.name)),a.jsx("div",{className:"flex justify-end space-x-4",children:a.jsx(Z,{type:"submit",disabled:n||Object.keys(u).length>0,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",variant:"default",children:"Fatura Olutur"})})]})};class od{async loadInvoices(){try{const t=localStorage.getItem(T2);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading invoices:",t),[]}}async saveInvoices(t){try{localStorage.setItem(T2,JSON.stringify(t))}catch(r){throw console.error("Error saving invoices:",r),new Error("Faturalar kaydedilemedi")}}generateSampleInvoices(){const t=[],r=["draft","sent","paid","overdue","cancelled"],s=["standard","proforma","credit_note","debit_note"];for(let n=1;n<=20;n++){const i=new Date(Date.now()-Math.random()*90*24*60*60*1e3),l=new Date(i.getTime()+30*24*60*60*1e3),o=this.generateInvoiceItems(Math.floor(Math.random()*5)+1),c=o.reduce((h,f)=>h+f.unitPrice*f.quantity,0),d=o.reduce((h,f)=>h+f.taxAmount,0),u=c+d;t.push({id:`inv-${n.toString().padStart(3,"0")}`,invoiceNumber:`2024-${n.toString().padStart(4,"0")}`,customerId:`cust-${Math.floor(Math.random()*100)+1}`,customerName:`Mteri ${n}`,patientName:`Hasta ${n}`,customerTaxNumber:`${Math.floor(Math.random()*9e9)+1e9}`,customerAddress:{street:`Test Sokak No: ${n}`,city:"stanbul",postalCode:"34000",country:"Trkiye"},billingAddress:{name:`Mteri ${n}`,address:`Fatura Sokak No: ${n}`,city:"stanbul",postalCode:"34000",country:"Trkiye",taxNumber:`${Math.floor(Math.random()*9e9)+1e9}`},items:o,subtotal:c,taxes:[{type:"vat",rate:.18,amount:d}],totalAmount:u,status:r[Math.floor(Math.random()*r.length)],type:s[Math.floor(Math.random()*s.length)],paymentMethod:"cash",dueDate:l.toISOString(),createdAt:i.toISOString(),updatedAt:i.toISOString(),notes:`rnek fatura ${n} notlar`,currency:"TRY"})}return t}generateInvoiceItems(t=3){const r=[],s=[{name:"itme Cihaz Bakm",price:150},{name:"Kulak Kalb",price:200},{name:"itme Testi",price:100},{name:"Cihaz Ayar",price:75},{name:"Pil Deiimi",price:25}];for(let n=0;n<t;n++){const i=s[n%s.length],l=Math.floor(Math.random()*3)+1,o=i.price,c=.18,d=o*l*c,u=o*l+d;r.push({id:`item-${Date.now()}-${n}`,name:i.name,description:i.name,quantity:l,unitPrice:o,taxRate:c,taxAmount:d,totalPrice:u,sgkCode:`SGK${1e3+n}`,category:"service"})}return r}async initializeData(){if((await this.loadInvoices()).length===0){const r=this.generateSampleInvoices();await this.saveInvoices(r)}}async createInvoice(t){const r=await this.loadInvoices(),s=t.items?this.calculateInvoice(t.items).items:[],n={id:`inv-${Date.now()}`,invoiceNumber:t.invoiceNumber||`2024-${(r.length+1).toString().padStart(4,"0")}`,customerId:t.customerId,customerName:t.customerName,patientName:t.patientName||t.customerName||"",customerTaxNumber:t.customerTaxNumber,customerAddress:t.customerAddress,items:s,subtotal:t.subtotal,taxes:t.taxes,totalAmount:t.totalAmount,status:t.status||"draft",type:t.type||"standard",paymentMethod:t.paymentMethod||"cash",dueDate:t.dueDate,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:t.notes,attachments:t.attachments||[],currency:"TRY"};return r.push(n),await this.saveInvoices(r),await _t.addOperation({method:"POST",endpoint:"/api/invoices",data:t,priority:"high"}),n}async updateInvoice(t,r){const s=await this.loadInvoices(),n=s.findIndex(h=>h.id===t);if(n===-1)throw new Error("Fatura bulunamad");const i=s[n];let l=i.items,o=i.subtotal,c=i.taxes,d=i.totalAmount;if(r.items){const h=this.calculateInvoice(r.items);l=h.items,o=h.subtotal,c=h.taxes&&h.taxes.length?h.taxes:[{type:"vat",rate:.18,amount:h.totalTax}],d=h.grandTotal}const u={...i,...r,items:l,subtotal:o,taxes:c,totalAmount:d,updatedAt:new Date().toISOString()};return s[n]=u,await this.saveInvoices(s),await _t.addOperation({method:"PUT",endpoint:`/api/invoices/${t}`,data:{id:t,...r},priority:"normal"}),u}async deleteInvoice(t){const r=await this.loadInvoices(),s=r.filter(n=>n.id!==t);if(s.length===r.length)throw new Error("Fatura bulunamad");await this.saveInvoices(s),await _t.addOperation({method:"DELETE",endpoint:`/api/invoices/${t}`,priority:"normal"})}async getInvoice(t){return(await this.loadInvoices()).find(s=>s.id===t)||null}async getInvoices(t){let r=await this.loadInvoices();if(t){if(t.status&&t.status.length>0&&(r=r.filter(c=>t.status.includes(c.status))),t.type&&t.type.length>0&&(r=r.filter(c=>t.type.includes(c.type))),t.customerId&&(r=r.filter(c=>c.customerId===t.customerId)),t.issueDateFrom){const c=new Date(t.issueDateFrom);r=r.filter(d=>d.createdAt?new Date(d.createdAt)>=c:!1)}if(t.issueDateTo){const c=new Date(t.issueDateTo);r=r.filter(d=>d.createdAt?new Date(d.createdAt)<=c:!1)}if(t.search){const c=t.search.toLowerCase();r=r.filter(d=>d.invoiceNumber.toLowerCase().includes(c)||d.customerName&&d.customerName.toLowerCase().includes(c)||d.customerTaxNumber&&d.customerTaxNumber.includes(c))}}const s=(t==null?void 0:t.page)||1,n=(t==null?void 0:t.limit)||10,i=(s-1)*n,l=i+n;return{invoices:r.slice(i,l),total:r.length,page:s,limit:n,totalPages:Math.ceil(r.length/n),hasMore:s*n<r.length,filters:t||{}}}async getInvoiceStats(){const t=await this.loadInvoices();return{total:t.length,draft:t.filter(s=>s.status==="draft").length,sent:t.filter(s=>s.status==="sent").length,paid:t.filter(s=>s.status==="paid").length,overdue:t.filter(s=>s.status==="overdue").length,cancelled:t.filter(s=>s.status==="cancelled").length,totalAmount:t.reduce((s,n)=>s+(n.totalAmount||0),0),paidAmount:t.filter(s=>s.status==="paid").reduce((s,n)=>s+(n.totalAmount||0),0),pendingAmount:t.filter(s=>["sent","overdue"].includes(s.status)).reduce((s,n)=>s+(n.totalAmount||0),0)}}async sendInvoice(t){const r=await this.getInvoice(t);if(!r)throw new Error("Fatura bulunamad");if(r.status==="sent")throw new Error("Fatura zaten gnderilmi");return this.updateInvoice(t,{id:t,status:"sent",gibSentDate:new Date().toISOString()})}async cancelInvoice(t,r){const s=await this.getInvoice(t);if(!s)throw new Error("Fatura bulunamad");if(s.status==="cancelled")throw new Error("Fatura zaten iptal edilmi");return this.updateInvoice(t,{id:t,status:"cancelled",notes:r?`${s.notes||""}
ptal nedeni: ${r}`:s.notes})}async markAsPaid(t,r){return this.updateInvoice(t,{id:t,status:"paid",paymentDate:new Date().toISOString(),paymentMethod:r})}async submitEFatura(t){try{return await this.updateInvoice(t.invoiceId,{id:t.invoiceId,status:"sent",ettn:t.ettn,gibSentDate:new Date().toISOString()}),await _t.addOperation({method:"POST",endpoint:"/api/invoices/efatura/submit",data:t,priority:"high"}),{success:!0,ettn:t.ettn}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Bilinmeyen hata"}}}async submitBulkEFatura(t){try{const r=[];for(const s of t.invoiceIds){const n=await this.submitEFatura({invoiceId:s,ettn:`ETTN-${Date.now()}-${s}`,submissionDate:t.submissionDate,status:"pending"});r.push({invoiceId:s,...n})}return{success:!0,results:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Toplu gnderim hatas"}}}async getTemplates(){return[{id:"template-1",name:"Standart Fatura",type:"sale",description:"Genel kullanm iin standart fatura ablonu",category:"general",isDefault:!0,fields:["customerName","items","totalAmount"],templateData:{},items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"},{id:"template-2",name:"Proforma Fatura",type:"proforma",description:"Proforma fatura ablonu",category:"proforma",isDefault:!1,fields:["customerName","items","totalAmount","validUntil"],templateData:{},items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"}]}calculateInvoice(t){let r=0,s=0;return{items:t.map(i=>{const l=i.quantity*i.unitPrice,o=l*(i.taxRate||0),c=l+o;return r+=l,s+=o,{...i,id:`temp-${Date.now()}-${Math.random()}`,taxAmount:o,totalPrice:c}}),subtotal:r,totalTax:s,totalDiscount:0,grandTotal:r+s,taxes:[]}}validateInvoice(t){var l;const r={},s={};let n=0,i=0;return(l=t.customerName)!=null&&l.trim()||(r[`error_${n++}`]="Mteri ad gereklidir"),(!t.items||t.items.length===0)&&(r[`error_${n++}`]="En az bir kalem gereklidir"),t.items&&t.items.forEach((o,c)=>{var d;(d=o.description)!=null&&d.trim()||(r[`error_${n++}`]=`${c+1}. kalem aklamas gereklidir`),(!o.quantity||o.quantity<=0)&&(r[`error_${n++}`]=`${c+1}. kalem miktar geerli olmaldr`),(!o.unitPrice||o.unitPrice<=0)&&(r[`error_${n++}`]=`${c+1}. kalem birim fiyat geerli olmaldr`)}),t.dueDate?new Date(t.dueDate)<new Date&&(s[`warning_${i++}`]="Vade tarihi gemite"):s[`warning_${i++}`]="Vade tarihi belirtilmemi",{isValid:Object.keys(r).length===0,errors:r,warnings:s}}async addPayment(t,r){return{...r,id:`payment-${Date.now()}`,createdAt:new Date().toISOString()}}async createPaymentPlan(t,r){return{...r,id:`plan-${Date.now()}`,createdAt:new Date().toISOString()}}async exportInvoices(t){try{const r=await this.getInvoices(t.filters);return{success:!0,data:{invoices:r.invoices,format:t.format,exportedAt:new Date().toISOString(),total:r.total}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Da aktarm hatas"}}}async generateInvoicePdf(t){try{return{success:!0,data:(await lr().invoicesGenerateInvoicePdf(t)).data}}catch(r){return console.error("Error generating invoice PDF:",r),{success:!1,error:r instanceof Error?r.message:"PDF oluturulurken bir hata olutu"}}}async generateSaleInvoicePdf(t){try{return{success:!0,data:(await lr().salesGenerateSaleInvoicePdf(t)).data}}catch(r){return console.error("Error generating sale invoice PDF:",r),{success:!1,error:r instanceof Error?r.message:"Sat faturas PDF'i oluturulurken bir hata olutu"}}}downloadPdfBlob(t,r){const s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s)}previewPdfBlob(t){const r=window.URL.createObjectURL(t);window.open(r,"_blank")}}const ix=new od,nG=({isOpen:e,onClose:t,invoice:r,onPrint:s,onDownload:n,onError:i})=>{const[l,o]=k.useState(!1),[c,d]=k.useState(null),[u,h]=k.useState(null);k.useEffect(()=>()=>{u&&window.URL.revokeObjectURL(u)},[u]),k.useEffect(()=>{e&&r&&f()},[e,r]);const f=async()=>{if(r){o(!0);try{const g=await ix.generateInvoicePdf(r.id);if(g.success&&g.data){d(g.data);const v=window.URL.createObjectURL(g.data);h(v)}else{const v=g.error||"PDF oluturulamad";i&&i(v)}}catch(g){const v=g instanceof Error?g.message:"PDF oluturulurken bir hata olutu";i&&i(v)}finally{o(!1)}}},x=()=>{if(u){const g=window.open(u,"_blank");g&&(g.onload=()=>{g.print()})}s&&s()},p=()=>{if(c&&r){const g=`fatura-${r.invoiceNumber}.pdf`;ix.downloadPdfBlob(c,g)}n&&n()},m=()=>{c&&ix.previewPdfBlob(c)},y=g=>{g.target===g.currentTarget&&t()};return!e||!r?null:a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:y,children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:g=>g.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Fatura nizleme"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.invoiceNumber," - ",r.customerName]})]}),a.jsx(Z,{onClick:t,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1",variant:"default",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:l?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"PDF oluturuluyor..."})]})}):u?a.jsx("div",{className:"flex-1 p-4",children:a.jsx("iframe",{src:u,className:"w-full h-full border border-gray-300 rounded-lg",title:"Fatura nizleme"})}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-gray-600 mb-4",children:"PDF nizleme yklenemedi"}),a.jsx(Z,{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",variant:"default",children:"Tekrar Dene"})]})})}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{children:["Fatura: ",r.invoiceNumber]}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Tutar: ",(r.totalAmount??0).toLocaleString("tr-TR")," ",r.currency]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Z,{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",variant:"default",children:"Kapat"}),c&&a.jsxs(a.Fragment,{children:[a.jsx(Z,{type:"button",onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",variant:"default",children:"Yeni Sekmede A"}),a.jsxs(Z,{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"ndir"]}),a.jsxs(Z,{type:"button",onClick:x,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Yazdr"]})]})]})]})]})})},iG=({isOpen:e,onClose:t,onSuccess:r,onError:s,initialData:n,patientId:i,deviceId:l,mode:o="create",title:c})=>{const[d,u]=k.useState(!1),[h,f]=k.useState(null),[x,p]=k.useState(null),[m,y]=k.useState(null),[g,v]=k.useState(!1),[b,S]=k.useState(!1),[D,N]=k.useState(null);k.useEffect(()=>{e&&(u(!1),f(null),p(null),y(null),v(!1),S(!1),N(null))},[e]);const E=async G=>{if(!(h!=null&&h.isValid)){p("Ltfen form hatalarn dzeltin");return}u(!0),p(null);try{const q=j(G);i&&(q.patientId=i),l&&(q.deviceId=l);const A=await new od().createInvoice(q);y(A),r&&r(A),t()}catch(q){const H=q instanceof Error?q.message:"Fatura oluturulurken bir hata olutu";p(H),s&&s(H)}finally{u(!1)}},w=async()=>{if(!(h!=null&&h.isValid)||!D){p("Ltfen form hatalarn dzeltin");return}u(!0),p(null);try{const G=j(D);i&&(G.patientId=i),l&&(G.deviceId=l);const H=await new od().createInvoice(G);y(H),v(!0)}catch(G){const q=G instanceof Error?G.message:"Fatura oluturulurken bir hata olutu";p(q),s&&s(q)}finally{u(!1)}},_=async()=>{if(!m){p("nce fatura oluturulmal");return}S(!0);try{const G=new od,q=await G.generateInvoicePdf(m.id);if(q.success&&q.data){const H=`fatura-${m.invoiceNumber}.pdf`;G.downloadPdfBlob(q.data,H)}else{const H=q.error||"PDF oluturulamad";p(H),s&&s(H)}}catch(G){const q=G instanceof Error?G.message:"PDF oluturulurken bir hata olutu";p(q),s&&s(q)}finally{S(!1)}},C=async()=>{if(!m){p("nce fatura oluturulmal");return}try{const q=await new od().generateInvoicePdf(m.id);if(q.success&&q.data){const H=window.URL.createObjectURL(q.data),A=window.open(H,"_blank");A&&(A.onload=()=>{A.print(),window.URL.revokeObjectURL(H)})}else{const H=q.error||"PDF oluturulamad";p(H),s&&s(H)}}catch(G){const q=G instanceof Error?G.message:"Yazdrma srasnda bir hata olutu";p(q),s&&s(q)}},T=()=>{v(!1),r&&m&&r(m),t()},j=G=>{const{invoiceType:q,scenario:H,items:A,...V}=G;let L={};if(q==="individual"&&V.customer_info){const R=V.customer_info;L={type:"individual",firstName:R.first_name||"",lastName:R.last_name||"",tcNumber:R.tc_number||"",email:R.email||"",phone:R.phone||"",address:{street:R.address||"",city:R.city||"",postalCode:R.postal_code||""}}}else if(q==="corporate"&&V.company_info){const R=V.company_info;L={type:"corporate",companyName:R.company_name||"",taxNumber:R.tax_number||"",taxOffice:R.tax_office||"",contactPerson:R.contact_person||"",email:R.email||"",phone:R.phone||"",address:{street:R.address||"",city:R.city||"",postalCode:R.postal_code||""}}}else if(q==="export"&&V.export_info){const R=V.export_info;L={type:"export",companyName:R.company_name||"",country:R.country||"",currency:R.currency||"USD",exchangeRate:R.exchange_rate||1,address:{street:R.address||""}}}const P=V.invoice_details||{};if(V.device_info){const R=V.device_info;R.device_brand,R.device_model,R.device_serial,R.device_side,R.warranty_period}if(V.sgk_info){const R=V.sgk_info;R.has_sgk_coverage,R.approval_number,R.report_date,R.doctor_name,R.hospital_name}const I=(A==null?void 0:A.map(R=>({name:R.description||"",description:R.description,quantity:R.quantity,unitPrice:R.unitPrice,taxRate:R.taxRate,total:R.total})))||[];return{type:q,status:"draft",issueDate:P.invoice_date||new Date().toISOString().split("T")[0],dueDate:P.due_date,paymentMethod:P.payment_method,notes:P.notes,customerName:L.firstName?`${L.firstName} ${L.lastName||""}`.trim():L.companyName,customerTaxNumber:L.taxNumber,customerAddress:L.address,items:I}},F=G=>{f(G)},O=G=>{N(G)},z=()=>{if(c)return c;switch(o){case"quick":return"Hzl Fatura Olutur";case"template":return"ablondan Fatura Olutur";default:return"Yeni Fatura Olutur"}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:z()}),a.jsx(Z,{onClick:t,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1",variant:"default",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[x&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Hata"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:x})]})]})}),a.jsx(aG,{onSubmit:E,onValidationChange:F,onFormDataChange:O,initialData:n,disabled:d})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[h&&!h.isValid&&a.jsxs("div",{className:"text-sm text-red-600",children:[h.errors.length," hata bulundu"]}),(h==null?void 0:h.isValid)&&a.jsxs("div",{className:"text-sm text-green-600 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Form geerli"]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Z,{type:"button",onClick:t,disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",variant:"default",children:"ptal"}),a.jsx(Z,{type:"button",onClick:w,disabled:d||!(h!=null&&h.isValid),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",variant:"default",children:d?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Hazrlanyor..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"nizle"]})}),m&&a.jsx(Z,{type:"button",onClick:_,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",variant:"default",children:b?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"PDF Oluturuluyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF ndir"]})}),m&&a.jsxs(Z,{type:"button",onClick:C,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 flex items-center",variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Yazdr"]}),a.jsx(Z,{type:"submit",form:"invoice-form",disabled:d||!(h!=null&&h.isValid),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",variant:"default",children:d?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Oluturuluyor..."]}):"Fatura Olutur"})]})]})]}),a.jsx(nG,{isOpen:g,onClose:T,invoice:m,onError:s})]})},lG=({isOpen:e,onClose:t,onSuccess:r,onError:s,initialData:n,patientId:i,deviceId:l,mode:o="create",title:c})=>{const d=u=>{u.target===u.currentTarget&&t()};return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:d,children:a.jsx(iG,{isOpen:e,onClose:t,onSuccess:r,onError:s,initialData:n,patientId:i,deviceId:l,mode:o,title:c})}):null},oG=({isOpen:e,onClose:t,sale:r,onCollectPayment:s})=>{const[n,i]=k.useState(!1),[l,o]=k.useState(null),[c,d]=k.useState({amount:0,paymentMethod:"cash",paymentDate:new Date().toISOString().split("T")[0],referenceNumber:"",notes:""});k.useEffect(()=>{if(e&&r){const x=(r.totalAmount||0)-(r.patientPayment||0);d(p=>({...p,amount:x})),o(null)}},[e,r]);const u=x=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(x),h=async x=>{var m,y;if(x.preventDefault(),c.amount<=0){o("Geerli bir tutar giriniz");return}const p=(r.totalAmount||0)-(r.patientPayment||0);if(c.amount>p){o("deme tutar kalan tutardan fazla olamaz");return}i(!0),o(null);try{const g=lr(),v={amount:c.amount,paymentMethod:c.paymentMethod,paymentDate:c.paymentDate,referenceNumber:c.referenceNumber,notes:c.notes,status:"COMPLETED",paymentType:"COLLECTION"},b=await fetch("http://localhost:8084/api/payment-records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:r.patientId,sale_id:r.id,amount:c.amount,payment_method:c.paymentMethod,payment_date:c.paymentDate,reference_number:c.referenceNumber,notes:c.notes,payment_type:"COLLECTION"})});if(!b.ok){const D=await b.text();throw new Error(`HTTP error! status: ${b.status}, message: ${D}`)}const S=await b.json();s&&await s(S),t()}catch(g){console.error("Payment collection error:",g),o(((y=(m=g==null?void 0:g.response)==null?void 0:m.data)==null?void 0:y.error)||(g==null?void 0:g.message)||"deme kaydedilemedi")}finally{i(!1)}},f=((r==null?void 0:r.totalAmount)||0)-((r==null?void 0:r.patientPayment)||0);return a.jsx(on,{open:e,onClose:t,title:"deme Tahsilat",children:a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-800",children:l})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-medium text-blue-900 mb-3 flex items-center",children:[a.jsx(E5,{className:"w-4 h-4 mr-2"}),"Sat Bilgileri"]}),a.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Toplam Tutar:"}),a.jsx("span",{className:"font-medium",children:u((r==null?void 0:r.totalAmount)||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"denen Tutar:"}),a.jsx("span",{className:"font-medium",children:u((r==null?void 0:r.patientPayment)||0)})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{className:"font-medium",children:"Kalan Tutar:"}),a.jsx("span",{className:"font-bold text-red-600",children:u(f)})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tahsilat Tutar"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(rr,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"number",step:"0.01",min:"0",max:f,value:c.amount,onChange:x=>d(p=>({...p,amount:parseFloat(x.target.value)||0})),className:"w-full pl-10 pr-4 py-2",placeholder:"0.00",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"deme Yntemi"}),a.jsx(Ue,{value:c.paymentMethod,onChange:x=>d(p=>({...p,paymentMethod:x.target.value})),options:[{value:"cash",label:"Nakit"},{value:"card",label:"Kredi Kart"},{value:"transfer",label:"Havale/EFT"},{value:"check",label:"ek"}],className:"w-full",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"deme Tarihi"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(pt,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"date",value:c.paymentDate,onChange:x=>d(p=>({...p,paymentDate:x.target.value})),className:"w-full pl-10 pr-4 py-2",required:!0})]})]}),(c.paymentMethod==="card"||c.paymentMethod==="transfer"||c.paymentMethod==="check")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referans Numaras"}),a.jsx(ye,{type:"text",value:c.referenceNumber,onChange:x=>d(p=>({...p,referenceNumber:x.target.value})),className:"w-full",placeholder:c.paymentMethod==="card"?"lem numaras":c.paymentMethod==="transfer"?"Dekont numaras":"ek numaras"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar"}),a.jsx(wr,{value:c.notes,onChange:x=>d(p=>({...p,notes:x.target.value})),rows:3,className:"w-full",placeholder:"deme ile ilgili notlar..."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:t,disabled:n,children:"ptal"}),a.jsx(ut,{type:"submit",disabled:n||c.amount<=0,children:n?"Kaydediliyor...":`${u(c.amount)} Tahsil Et`})]})]})})},cG=({isOpen:e,onClose:t,sale:r,onCollectNote:s,onCreateNote:n})=>{const[i,l]=k.useState(!1),[o,c]=k.useState([]),[d,u]=k.useState(null),[h,f]=k.useState(!1),[x,p]=k.useState(null),[m,y]=k.useState({amount:0,paymentMethod:"cash"});k.useEffect(()=>{e&&(r!=null&&r.id)&&g()},[e,r==null?void 0:r.id]);const g=async()=>{l(!0),u(null);try{const T=await lr().paymentsGetSalePromissoryNotes(r.id)??{};let j=[];Array.isArray(T)?j=T:Array.isArray(T.data)?j=T.data:T.success&&Array.isArray(T.result)?j=T.result:r!=null&&r.paymentRecords&&Array.isArray(r.paymentRecords)?j=r.paymentRecords:j=[],c(j)}catch(_){u(_ instanceof Error?_.message:"Bir hata olutu")}finally{l(!1)}},v=_=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(_),b=_=>new Date(_).toLocaleDateString("tr-TR"),S=_=>{switch(_){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}},D=_=>{switch(_){case"paid":return"dendi";case"partial":return"Ksmi";case"overdue":return"Gecikmi";default:return"Bekliyor"}},N=_=>{switch(_){case"paid":return a.jsx(St,{className:"w-4 h-4"});case"overdue":return a.jsx(mt,{className:"w-4 h-4"});default:return a.jsx(Xt,{className:"w-4 h-4"})}},E=async _=>{if(m.amount<=0){u("Geerli bir tutar giriniz");return}l(!0),u(null);try{await(s==null?void 0:s(_,m.amount,m.paymentMethod)),p(null),y({amount:0,paymentMethod:"cash"}),await g()}catch(C){u(C instanceof Error?C.message:"deme kaydedilemedi")}finally{l(!1)}},w=_=>{p(_.id),y({amount:_.amount-_.paidAmount,paymentMethod:"cash"}),u(null)};return a.jsx(on,{open:e,onClose:t,title:"Senet Ynetimi",children:a.jsxs("div",{className:"space-y-6",children:[d&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-800",children:d})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Sat Bilgileri"}),a.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Sat ID:"})," ",r==null?void 0:r.id]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Toplam Tutar:"})," ",v((r==null?void 0:r.totalAmount)||0)]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Kalan Tutar:"})," ",v((r==null?void 0:r.remainingAmount)||0)]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Senetler"}),a.jsxs(ut,{variant:"secondary",onClick:()=>f(!0),className:"text-sm",children:[a.jsx(_s,{className:"w-4 h-4 mr-1"}),"Yeni Senet"]})]}),i?a.jsx(Ln,{lines:3}):!o||!Array.isArray(o)||o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(s5,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Henz senet bulunmuyor"})]}):a.jsx("div",{className:"space-y-3",children:o.map(_=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[N(_.status),a.jsxs("span",{className:"ml-2 font-medium",children:["Senet #",_.referenceNumber||_.id.slice(-6)]})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S(_.status)}`,children:D(_.status)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Tutar:"}),a.jsx("span",{className:"ml-2 font-medium",children:v(_.amount)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Vade:"}),a.jsx("span",{className:"ml-2",children:b(_.dueDate)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"denen:"}),a.jsx("span",{className:"ml-2 text-green-600",children:v(_.paidAmount)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Kalan:"}),a.jsx("span",{className:"ml-2 text-red-600",children:v(_.amount-_.paidAmount)})]})]}),_.status!=="paid"&&a.jsx("div",{className:"border-t pt-3",children:x===_.id?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tahsilat Tutar"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:_.amount-_.paidAmount,value:m.amount,onChange:C=>y(T=>({...T,amount:parseFloat(C.target.value)||0})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"deme Yntemi"}),a.jsxs("select",{value:m.paymentMethod,onChange:C=>y(T=>({...T,paymentMethod:C.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"cash",children:"Nakit"}),a.jsx("option",{value:"card",children:"Kart"}),a.jsx("option",{value:"transfer",children:"Havale"})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(ut,{onClick:()=>E(_.id),disabled:i||m.amount<=0,className:"text-sm px-3 py-1",children:i?"Kaydediliyor...":"Tahsil Et"}),a.jsx(ut,{variant:"secondary",onClick:()=>p(null),className:"text-sm px-3 py-1",children:"ptal"})]})]}):a.jsxs(ut,{variant:"secondary",onClick:()=>w(_),className:"text-sm",children:[a.jsx(rr,{className:"w-3 h-3 mr-1"}),"Tahsil Et"]})})]},_.id))})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsx(ut,{variant:"secondary",onClick:t,children:"Kapat"})})]})})},dG=({isOpen:e,onClose:t,sale:r,onPayInstallment:s})=>{const[n,i]=k.useState(!1),[l,o]=k.useState([]),[c,d]=k.useState(null),[u,h]=k.useState(null),[f,x]=k.useState({amount:0,paymentMethod:"cash"});k.useEffect(()=>{e&&(r!=null&&r.id)&&p()},[e,r==null?void 0:r.id]);const p=async()=>{i(!0),d(null);try{let T=[];r!=null&&r.paymentRecords&&Array.isArray(r.paymentRecords)?T=r.paymentRecords.map((j,F)=>({id:j.id||`installment-${F+1}`,installmentNumber:F+1,amount:j.amount||0,paidAmount:j.status==="paid"?j.amount:0,dueDate:j.dueDate||j.paymentDate||new Date().toISOString(),status:j.status||"pending",paymentDate:j.paymentDate,paymentMethod:j.paymentMethod})):T=[],o(T)}catch(T){d(T instanceof Error?T.message:"Taksitler yklenemedi")}finally{i(!1)}},m=T=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(T),y=T=>new Date(T).toLocaleDateString("tr-TR"),g=T=>{switch(T){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}},v=T=>{switch(T){case"paid":return"dendi";case"partial":return"Ksmi";case"overdue":return"Gecikmi";default:return"Bekliyor"}},b=T=>{switch(T){case"paid":return a.jsx(St,{className:"w-4 h-4"});case"overdue":return a.jsx(mt,{className:"w-4 h-4"});default:return a.jsx(Xt,{className:"w-4 h-4"})}},S=(T,j)=>j==="paid"?!1:new Date(T)<new Date,D=async T=>{if(f.amount<=0){d("Geerli bir tutar giriniz");return}i(!0),d(null);try{await(s==null?void 0:s(T,f.amount,f.paymentMethod)),h(null),x({amount:0,paymentMethod:"cash"}),await p()}catch(j){d(j instanceof Error?j.message:"deme kaydedilemedi")}finally{i(!1)}},N=T=>{h(T.id),x({amount:T.amount-T.paidAmount,paymentMethod:"cash"}),d(null)},E=l.length,w=l.filter(T=>T.status==="paid").length,_=l.filter(T=>S(T.dueDate,T.status)).length;l.reduce((T,j)=>T+j.paidAmount,0);const C=l.reduce((T,j)=>T+(j.amount-j.paidAmount),0);return a.jsx(on,{open:e,onClose:t,title:"Taksit Ynetimi",children:a.jsxs("div",{className:"space-y-6",children:[c&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-800",children:c})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ds,{className:"w-4 h-4 text-blue-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-blue-600",children:"Toplam Taksit"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:E})]})]})}),a.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-4 h-4 text-green-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-green-600",children:"denen"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:w})]})]})}),a.jsx("div",{className:"bg-red-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-red-600",children:"Gecikmi"}),a.jsx("p",{className:"text-lg font-semibold text-red-900",children:_})]})]})}),a.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 text-purple-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-purple-600",children:"Kalan"}),a.jsx("p",{className:"text-sm font-semibold text-purple-900",children:m(C)})]})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Taksit Detaylar"}),n?a.jsx(Ln,{lines:4}):l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Taksit plan bulunamad"})]}):a.jsx("div",{className:"space-y-3",children:l.map(T=>a.jsxs("div",{className:`border rounded-lg p-4 ${S(T.dueDate,T.status)?"border-red-200 bg-red-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[b(T.status),a.jsxs("span",{className:"ml-2 font-medium",children:[T.installmentNumber,". Taksit"]}),S(T.dueDate,T.status)&&a.jsx("span",{className:"ml-2 text-xs text-red-600 font-medium",children:"(Gecikmi)"})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${g(T.status)}`,children:v(T.status)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Tutar:"}),a.jsx("span",{className:"ml-2 font-medium",children:m(T.amount)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Vade:"}),a.jsx("span",{className:"ml-2",children:y(T.dueDate)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"denen:"}),a.jsx("span",{className:"ml-2 text-green-600",children:m(T.paidAmount)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Kalan:"}),a.jsx("span",{className:"ml-2 text-red-600",children:m(T.amount-T.paidAmount)})]})]}),T.paymentDate&&a.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[a.jsxs("span",{children:["deme Tarihi: ",y(T.paymentDate)]}),T.paymentMethod&&a.jsxs("span",{className:"ml-4",children:["Yntem: ",T.paymentMethod]})]}),T.status!=="paid"&&a.jsx("div",{className:"border-t pt-3",children:u===T.id?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"deme Tutar"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:T.amount-T.paidAmount,value:f.amount,onChange:j=>x(F=>({...F,amount:parseFloat(j.target.value)||0})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"deme Yntemi"}),a.jsxs("select",{value:f.paymentMethod,onChange:j=>x(F=>({...F,paymentMethod:j.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"cash",children:"Nakit"}),a.jsx("option",{value:"card",children:"Kart"}),a.jsx("option",{value:"transfer",children:"Havale"})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(ut,{onClick:()=>D(T.id),disabled:n||f.amount<=0,className:"text-sm px-3 py-1",children:n?"Kaydediliyor...":"de"}),a.jsx(ut,{variant:"secondary",onClick:()=>h(null),className:"text-sm px-3 py-1",children:"ptal"})]})]}):a.jsxs(ut,{variant:"secondary",onClick:()=>N(T),className:"text-sm",children:[a.jsx(_a,{className:"w-3 h-3 mr-1"}),"de"]})})]},T.id))})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsx(ut,{variant:"secondary",onClick:t,children:"Kapat"})})]})})},uG=({sales:e,isVisible:t})=>{const r=e.reduce((l,o)=>l+(o.totalAmount||0),0),s=e.reduce((l,o)=>l+(o.paidAmount||0),0),n=r-s,i=e.reduce((l,o)=>l+(o.sgkSupport||0),0);return e.filter(l=>l.status==="completed").length,e.filter(l=>l.status==="pending").length,e.filter(l=>l.status==="cancelled").length,t?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"w-5 h-5 text-green-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Toplam Gelir"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(r)})]})]})}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-5 h-5 text-blue-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Tahsil Edilen"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(s)})]})]})}),a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xt,{className:"w-5 h-5 text-yellow-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-600",children:"Bekleyen Tahsilat"}),a.jsx("p",{className:"text-lg font-semibold text-yellow-900",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(n)})]})]})}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Di,{className:"w-5 h-5 text-purple-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600",children:"SGK Destei"}),a.jsx("p",{className:"text-lg font-semibold text-purple-900",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(i)})]})]})})]}):null},hG=({searchTerm:e,onSearchChange:t,statusFilter:r,onStatusFilterChange:s,paymentMethodFilter:n,onPaymentMethodFilterChange:i,dateFrom:l,onDateFromChange:o,dateTo:c,onDateToChange:d,showFilters:u,onToggleFilters:h,filteredCount:f,totalCount:x,onClearFilters:p})=>{const m=e||r!=="all"||n!=="all"||l||c;return a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Lr,{className:"w-4 h-4 text-gray-400"})}),a.jsx(ye,{type:"text",placeholder:"Satlarda ara... (rn, deme yntemi, satc, notlar)",value:e,onChange:y=>t(y.target.value),className:"pl-10"})]}),a.jsxs(Z,{onClick:h,variant:u?"primary":"secondary",children:[a.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Filtreler"]})]}),u&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),a.jsx(Ue,{value:r,onChange:y=>s(y.target.value),options:[{value:"all",label:"Tm"},{value:"completed",label:"Tamamland"},{value:"pending",label:"Bekliyor"},{value:"cancelled",label:"ptal Edildi"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"deme Yntemi"}),a.jsx(Ue,{value:n,onChange:y=>i(y.target.value),options:[{value:"all",label:"Tm"},{value:"cash",label:"Nakit"},{value:"card",label:"Kredi Kart"},{value:"installment",label:"Taksit"},{value:"insurance",label:"Sigorta"}]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balang Tarihi"}),a.jsx(ye,{type:"date",value:l,onChange:y=>o(y.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti Tarihi"}),a.jsx(ye,{type:"date",value:c,onChange:y=>d(y.target.value)})]})]}),m&&a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:[f," / ",x," sat gsteriliyor"]}),a.jsx(Z,{onClick:p,variant:"ghost",className:"text-blue-600 hover:text-blue-800 font-medium",children:"Filtreleri Temizle"})]})]})},fG=({sales:e,filteredSales:t,hasActiveFilters:r=!1,onSaleClick:s,onCreateInvoice:n,onViewInvoice:i,onManagePromissoryNotes:l,onCollectPayment:o,onManageInstallments:c})=>{console.log("SalesList - sales:",e),console.log("SalesList - filteredSales:",t),console.log("SalesList - hasActiveFilters:",r);const[d,u]=k.useState(null),h=k.useRef(null);if(k.useEffect(()=>{function N(E){h.current&&E.target instanceof Node&&(h.current.contains(E.target)||u(null))}return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[]),t.length===0)return a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(rr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.length===0?"Henz sat yaplmam":r?"Filtreye uygun sat bulunamad":"Henz sat kayd bulunmuyor"}),a.jsx("p",{className:"text-gray-500",children:e.length===0?"Bu hastaya henz sat ilemi gerekletirilmemi.":r?"Ltfen filtre kriterlerinizi kontrol edin.":'Yeni sat eklemek iin "Yeni Sat" butonunu kullann.'})]});const f=N=>N?`${N.toLocaleString("tr-TR")}`:"0",x=N=>N.devices&&N.devices.length>0?N.devices.map((E,w)=>a.jsxs("div",{className:"mb-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:E.name||E.model||"Cihaz"}),a.jsxs("div",{className:"text-xs text-gray-600",children:["Marka: ",E.brand||"-"," | Model: ",E.model||"-"]})]},w)):N.productId?a.jsxs("div",{className:"mb-1",children:[a.jsxs("div",{className:"font-medium text-gray-900",children:["rn ID: ",N.productId]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Envanter rn"})]}):a.jsx("div",{className:"text-gray-500 text-sm",children:"rn bilgisi yok"}),p=N=>{if(N.devices&&N.devices.length>0){const E=N.devices[0],w=E.barcode||E.serialNumber||"-",_=E.serialNumber||"-";return a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:w}),a.jsx("div",{className:"text-xs text-gray-600",children:_})]})}return N.productId?a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:N.productId}),a.jsx("div",{className:"text-xs text-gray-600",children:"rn Kodu"})]}):"-"},m=N=>{if(N.paymentRecords&&N.paymentRecords.length>0)return N.paymentRecords.filter(C=>(C.status||"paid")==="paid").map((C,T)=>{var O;const F={cash:"Nakit",card:"Kart",transfer:"Havale",installment:"Taksit",promissory_note:"Senet"}[C.paymentMethod]||C.paymentMethod;return a.jsxs("div",{className:"text-xs",children:[F,":",(O=C.amount)==null?void 0:O.toLocaleString("tr-TR")]},T)});const E=N.paymentMethod||"cash";return{cash:"Nakit",card:"Kart",transfer:"Havale",installment:"Taksit",promissory_note:"Senet"}[E]||E},y=(N,E=0,w=0)=>{if(E>0&&w>0)return a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:"Ksmi dendi"});if(E>0&&w===0)return a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"dendi"});const _={paid:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"dendi"}),pending:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"Beklemede"}),partial:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:"Ksmi dendi"}),cancelled:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"ptal edildi"}),completed:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Tamamland"})};return _[N]||_.pending},g=N=>N.paidAmount!==void 0&&N.paidAmount!==null?parseFloat(N.paidAmount)||0:N.paid_amount!==void 0&&N.paid_amount!==null?parseFloat(N.paid_amount)||0:N.paymentRecords&&N.paymentRecords.length>0?N.paymentRecords.filter(w=>(w.status||"paid")==="paid").reduce((w,_)=>w+(_.amount||0),0):0,v=N=>{const E=N.patient_payment||N.patientPayment||N.totalPatientPayment||N.finalAmount||N.final_amount;if(typeof E=="number")return E;const w=N.totalAmount||0,_=N.discountAmount||N.discount_amount||0,C=N.sgkCoverage||0;return w-_-C},b=N=>{const E=v(N),w=N.vatRate||20;return E*w/100},S=N=>{const E=v(N),w=b(N);return E+w},D=N=>{const E=S(N),w=g(N);return E-w};return a.jsx("div",{className:"relative",children:a.jsx("div",{className:"overflow-x-auto",role:"table","aria-label":"Hasta satlar tablosu",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sat ID/Tarih"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"rn/Hizmet"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barkod/Seri No"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Liste Fiyat"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ndirim"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"KDV Dahil Toplam"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alnan deme"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kalan Tutar"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(N=>{const E=g(N),w=D(N),_=N.status==="cancelled"?"opacity-50 line-through pointer-events-none":"";return a.jsxs("tr",{className:`hover:bg-gray-50 ${E>0&&w>0?"bg-yellow-50":""} ${_} cursor-pointer transition-colors`,onClick:()=>s(N),role:"row",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[a.jsx("div",{className:"font-medium",children:N.id}),a.jsx("div",{className:"text-xs text-gray-600",children:new Date(N.saleDate||N.date||N.createdAt).toLocaleDateString("tr-TR")})]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x(N)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(N)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:f(N.totalAmount||N.total_amount||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-red-600",children:N.discountAmount||N.discount_amount?`-${f(N.discountAmount||N.discount_amount)}`:f(0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:f(S(N))}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-green-700",children:[a.jsx("div",{children:f(E)}),a.jsx("div",{className:"text-xs text-gray-600",children:m(N)})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-orange-700",children:f(w)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:y(N.status,E,w)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center relative",onClick:C=>C.stopPropagation(),children:[a.jsx("button",{onClick:C=>{C.stopPropagation(),u(T=>T===N.id?null:N.id)},"aria-haspopup":"true","aria-expanded":d===N.id,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white border border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-300",children:a.jsx(S5,{className:"w-4 h-4 text-gray-600"})}),d===N.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:a.jsxs("ul",{className:"py-1",children:[a.jsx("li",{children:a.jsxs("button",{onClick:C=>{C.stopPropagation(),i(N),u(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(In,{className:"inline mr-2 w-4 h-4 align-middle"})," Grntle Fatura"]})}),a.jsx("li",{children:a.jsxs("button",{onClick:C=>{C.stopPropagation(),n(N),u(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(wt,{className:"inline mr-2 w-4 h-4 align-middle"})," Fatura Olutur"]})}),a.jsx("li",{children:a.jsxs("button",{onClick:C=>{C.stopPropagation(),o(N),u(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(rr,{className:"inline mr-2 w-4 h-4 align-middle"})," Tahsilat Yap"]})}),a.jsx("li",{children:a.jsxs("button",{onClick:C=>{C.stopPropagation(),l(N),u(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(Io,{className:"inline mr-2 w-4 h-4 align-middle"})," Senet lemleri"]})}),a.jsx("li",{children:a.jsxs("button",{onClick:C=>{C.stopPropagation(),c(N),u(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx(rn,{className:"inline mr-2 w-4 h-4 align-middle"})," Taksit lemleri"]})})]})})]})]},N.id)})})]})})})},mG=({patientId:e,tabCount:t,sales:r})=>{const{sales:s,isLoading:n,error:i,refresh:l}=g_(r?void 0:e),o=r||s,{searchTerm:c,setSearchTerm:d,statusFilter:u,setStatusFilter:h,paymentMethodFilter:f,setPaymentMethodFilter:x,dateFrom:p,setDateFrom:m,dateTo:y,setDateTo:g,showFilters:v,setShowFilters:b,filteredSales:S,clearFilters:D,hasActiveFilters:N}=JK(o);console.log("PatientSalesTab - sales:",o),console.log("PatientSalesTab - filteredSales:",S),console.log("PatientSalesTab - salesLoading:",n),console.log("PatientSalesTab - salesError:",i);const[E,w]=k.useState(!1),[_,C]=k.useState(null);k.useState(!1);const[T,j]=k.useState(!1),[F,O]=k.useState(!1),[z,G]=k.useState(!1),[q,H]=k.useState(!1),[A,V]=k.useState(null);if(n)return a.jsxs("div",{className:"p-6",role:"status","aria-label":"Satlar ykleniyor",children:[a.jsx(Ln,{lines:4,className:"mb-4"}),a.jsxs("div",{className:"grid gap-4",children:[a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"})]})]});if(i)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Satlar yklenirken hata olutu"}),a.jsx("p",{className:"mt-2 text-sm text-red-700",children:"Ltfen sayfay yenileyin veya daha sonra tekrar deneyin."})]})]})})});const L=ce=>{C(ce),w(!0)},P=()=>{C(null),w(!0)},I=()=>{w(!1),C(null)},R=ce=>{V(ce),j(!0)},U=ce=>{V(ce),O(!0)},M=ce=>{V(ce),G(!0)},J=ce=>{V(ce),H(!0)},se=async ce=>{try{console.log("Collecting payment:",ce),O(!1),V(null),l&&l(e)}catch(K){throw console.error("Failed to collect payment:",K),K}},ae=async(ce,K,He)=>{try{console.log("Collecting promissory note:",{noteId:ce,amount:K,paymentMethod:He}),G(!1),V(null),l&&l(e)}catch(Pe){throw console.error("Failed to collect promissory note:",Pe),Pe}},ie=async(ce,K,He)=>{try{console.log("Paying installment:",{installmentId:ce,amount:K,paymentMethod:He}),H(!1),V(null),l&&l(e)}catch(Pe){throw console.error("Failed to pay installment:",Pe),Pe}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(rr,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Hasta Satlar ",t!==void 0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:t})]}),a.jsxs(Z,{onClick:P,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),"Yeni Sat"]})]}),a.jsx(hG,{searchTerm:c,onSearchChange:d,statusFilter:u,onStatusFilterChange:h,paymentMethodFilter:f,onPaymentMethodFilterChange:x,dateFrom:p,onDateFromChange:m,dateTo:y,onDateToChange:g,showFilters:v,onToggleFilters:()=>b(!v),filteredCount:S.length,totalCount:o.length,onClearFilters:D}),a.jsx(uG,{sales:S,isVisible:S.length>0}),a.jsx(fG,{sales:o,filteredSales:S,hasActiveFilters:N,onSaleClick:L,onCreateInvoice:R,onViewInvoice:R,onManagePromissoryNotes:M,onCollectPayment:U,onManageInstallments:J}),E&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:_?"Sat Dzenle":"Yeni Sat"}),a.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6",children:a.jsx(sG,{patientId:e,onSaleComplete:()=>{I(),l&&l(e)}})})]})}),a.jsx(lG,{isOpen:T,onClose:()=>{j(!1),V(null)},patientId:A==null?void 0:A.patientId,onSuccess:ce=>{console.log("Invoice created:",ce)},onError:ce=>{console.error("Invoice creation error:",ce)}}),a.jsx(oG,{isOpen:F,onClose:()=>{O(!1),V(null)},sale:A,onCollectPayment:se}),a.jsx(cG,{isOpen:z,onClose:()=>{G(!1),V(null)},sale:A,onCollectNote:ae}),a.jsx(dG,{isOpen:q,onClose:()=>{H(!1),V(null)},sale:A,onPayInstallment:ie})]})},xG=({event:e,onEventClick:t})=>{const r=o=>new Date(o).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),s=o=>{switch(o){case"appointment":return a.jsx(pt,{className:"w-4 h-4"});case"sale":return a.jsx(rr,{className:"w-4 h-4"});case"device_assignment":return a.jsx(Sl,{className:"w-4 h-4"});case"note":return a.jsx(Za,{className:"w-4 h-4"});case"test":case"hearing_test":return a.jsx(D5,{className:"w-4 h-4"});case"payment":return a.jsx(_a,{className:"w-4 h-4"});case"document":return a.jsx(wt,{className:"w-4 h-4"});case"activity":return a.jsx(ea,{className:"w-4 h-4"});default:return a.jsx(ea,{className:"w-4 h-4"})}},n=o=>{switch(o){case"appointment":return"bg-blue-100 text-blue-800";case"sale":return"bg-green-100 text-green-800";case"device_assignment":return"bg-purple-100 text-purple-800";case"note":return"bg-yellow-100 text-yellow-800";case"test":case"hearing_test":return"bg-red-100 text-red-800";case"payment":return"bg-indigo-100 text-indigo-800";case"document":return"bg-cyan-100 text-cyan-800";case"activity":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},i=o=>{switch(o){case"appointment":return"Randevu";case"sale":return"Sat";case"device_assignment":return"Cihaz Atama";case"note":return"Not";case"test":case"hearing_test":return"itme Testi";case"payment":return"deme";case"document":return"Belge";case"activity":return"Aktivite";default:return o}},l=o=>o?a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-gray-100 text-gray-600 ml-2",children:o==="activity_log"?"Log":"Manuel"}):null;return a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t==null?void 0:t(e),role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),t==null||t(e))},"aria-label":`Olay: ${e.title} - ${i(e.eventType)}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`p-2 rounded-full ${n(e.eventType)}`,children:s(e.eventType)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),a.jsxs("div",{className:"flex items-center",children:[l(e.source),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ml-2 ${n(e.eventType)}`,children:i(e.eventType)})]})]}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:e.description}),e.details&&Object.keys(e.details).length>0&&a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:Object.entries(e.details).slice(0,2).map(([o,c])=>a.jsxs("div",{className:"inline-block mr-3",children:[a.jsxs("span",{className:"font-medium",children:[o,":"]})," ",c?String(c):"N/A"]},o))}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),r(e.eventDate)]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[e.category&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:e.category}),e.user&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),e.user]})]})]})]})]})})},pG=({patientId:e,tabCount:t})=>{const{timeline:r,isLoading:s,error:n}=y_(e),[i,l]=k.useState(""),[o,c]=k.useState("all"),[d,u]=k.useState({start:"",end:""}),h=k.useMemo(()=>{let y=r;if(i&&(y=y.filter(g=>{var v,b;return((v=g.description)==null?void 0:v.toLowerCase().includes(i.toLowerCase()))||((b=g.eventType)==null?void 0:b.toLowerCase().includes(i.toLowerCase()))||g.details&&JSON.stringify(g.details).toLowerCase().includes(i.toLowerCase())})),o!=="all"&&(y=y.filter(g=>g.eventType===o)),d.start){const g=new Date(d.start);y=y.filter(v=>v.timestamp&&new Date(v.timestamp)>=g)}if(d.end){const g=new Date(d.end);g.setHours(23,59,59,999),y=y.filter(v=>v.timestamp&&new Date(v.timestamp)<=g)}return y},[r,i,o,d]);if(s)return a.jsxs("div",{className:"p-6",role:"status","aria-label":"Zaman izelgesi ykleniyor",children:[a.jsx(Ln,{lines:4,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-24 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-24 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-24 bg-gray-100 rounded animate-pulse"})]})]});if(n)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Zaman izelgesi yklenirken hata olutu"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:typeof n=="string"?n:n.message})]})]})})});const f=y=>{console.log("Event clicked:",y)},x=[...h].sort((y,g)=>new Date(g.eventDate).getTime()-new Date(y.eventDate).getTime()),p=r.reduce((y,g)=>(y[g.eventType]=(y[g.eventType]||0)+1,y),{}),m=r.filter(y=>new Date(y.eventDate)>new Date(Date.now()-30*24*60*60*1e3)).length;return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(ea,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Zaman izelgesi ",t!==void 0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:t})]}),r.length>0&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Son 30 Gn"}),a.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:[m," olay"]})]})]}),r.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ea,{className:"w-5 h-5 text-blue-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Toplam Olay"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:r.length})]})]})}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-5 h-5 text-green-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Son 30 Gn"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:m})]})]})}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"w-5 h-5 text-purple-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600",children:"Randevu"}),a.jsx("p",{className:"text-lg font-semibold text-purple-900",children:p.appointment||0})]})]})}),a.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"w-5 h-5 text-orange-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-orange-600",children:"Sat"}),a.jsx("p",{className:"text-lg font-semibold text-orange-900",children:p.sale||0})]})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Lr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400","aria-hidden":"true"}),a.jsx(ye,{type:"text",placeholder:"Olay ara...",className:"block w-full pl-10 pr-4 py-2 text-sm",value:i,onChange:y=>l(y.target.value)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:o,onChange:y=>c(y.target.value),options:[{value:"all",label:"Tm Olay Trleri"},{value:"appointment",label:"Randevu"},{value:"sale",label:"Sat"},{value:"device_assignment",label:"Cihaz Atama"},{value:"note",label:"Not"},{value:"document",label:"Dokman"}],className:"px-3 py-2 text-sm"}),a.jsx(ye,{type:"date",placeholder:"Balang tarihi",className:"px-3 py-2 text-sm",value:d.start,onChange:y=>u(g=>({...g,start:y.target.value}))}),a.jsx(ye,{type:"date",placeholder:"Biti tarihi",className:"px-3 py-2 text-sm",value:d.end,onChange:y=>u(g=>({...g,end:y.target.value}))})]})]}),h.length===0?a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(ea,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r.length===0?"Henz olay yok":"Filtreye uygun olay bulunamad"}),a.jsx("p",{className:"text-gray-500",children:r.length===0?"Bu hastayla ilgili henz hibir olay kaydedilmemi.":"Arama kriterlerinizi deitirerek daha fazla sonu grebilirsiniz."})]}):a.jsx("div",{className:"space-y-4",role:"list","aria-label":"Hasta zaman izelgesi",children:x.map(y=>a.jsx("div",{role:"listitem",children:a.jsx(xG,{event:y,onEventClick:f})},y.id))})]})},gG=({document:e,onDocumentClick:t,onDownloadClick:r})=>{const s=u=>new Date(u).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}),n=u=>{if(!u)return"";const h=["B","KB","MB","GB"],f=Math.floor(Math.log(u)/Math.log(1024));return Math.round(u/Math.pow(1024,f)*100)/100+" "+h[f]},i=u=>u?u.startsWith("image/")?a.jsx(cS,{className:"w-5 h-5"}):u.startsWith("video/")?a.jsx(x5,{className:"w-5 h-5"}):u.startsWith("audio/")?a.jsx(h5,{className:"w-5 h-5"}):u.includes("pdf")||u.includes("document")?a.jsx(wt,{className:"w-5 h-5"}):u.includes("zip")||u.includes("rar")?a.jsx(nS,{className:"w-5 h-5"}):a.jsx(Io,{className:"w-5 h-5"}):a.jsx(Io,{className:"w-5 h-5"}),l=u=>{switch(u){case"medical_record":return"bg-red-100 text-red-800";case"prescription":return"bg-blue-100 text-blue-800";case"test_result":return"bg-green-100 text-green-800";case"invoice":return"bg-yellow-100 text-yellow-800";case"consent":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=u=>{switch(u){case"medical_record":return"Tbbi Kayt";case"prescription":return"Reete";case"test_result":return"Test Sonucu";case"invoice":return"Fatura";case"consent":return"Onam Formu";default:return"Dier"}},c=u=>{switch(u){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=u=>{switch(u){case"completed":return"Tamamland";case"processing":return"leniyor";case"failed":return"Baarsz";default:return"Bilinmiyor"}};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",role:"article","aria-label":`Belge: ${e.title}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-blue-500 mr-3",children:i(e.mimeType)}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer hover:text-blue-600",onClick:()=>t==null?void 0:t(e),role:"button",tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),t==null||t(e))},children:e.title}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.originalName||e.fileName})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(Z,{onClick:()=>r==null?void 0:r(e),variant:"ghost",className:"p-1 text-gray-400 hover:text-blue-500 transition-colors","aria-label":`${e.title} dosyasn indir`,children:a.jsx(yr,{className:"w-4 h-4"})})})]}),a.jsxs("div",{className:"space-y-2",children:[e.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${l(e.documentType)}`,children:o(e.documentType)}),e.status&&a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c(e.status)}`,children:d(e.status)})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),s(e.uploadDate)]}),e.fileSize&&a.jsx("span",{children:n(e.fileSize)})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.createdBy&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),e.createdBy]}),e.mimeType&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:e.mimeType})]}),e.tags&&e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((u,h)=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-700",children:[a.jsx(Mi,{className:"w-3 h-3 mr-1"}),u]},h)),e.tags.length>3&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-3," daha"]})]}),e.metadata&&Object.keys(e.metadata).length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Ek bilgiler:"}),a.jsx("div",{className:"text-xs text-gray-600",children:Object.entries(e.metadata).slice(0,2).map(([u,h])=>a.jsxs("div",{className:"inline-block mr-3",children:[a.jsxs("span",{className:"font-medium",children:[u,":"]})," ",String(h)]},u))})]})]})]})},yG=({patientId:e,isOpen:t,onClose:r,onUpload:s,isLoading:n=!1})=>{const[i,l]=k.useState(null),[o,c]=k.useState(""),[d,u]=k.useState(""),[h,f]=k.useState(""),[x,p]=k.useState({}),[m,y]=k.useState(!1),g=k.useRef(null),v=()=>{l(null),c(""),u(""),f(""),p({}),y(!1)},b=()=>{v(),r()},S=()=>{const T={};return i||(T.file="Dosya seimi zorunludur"),o||(T.documentType="Dokman tr seimi zorunludur"),i&&i.size>10*1024*1024&&(T.file="Dosya boyutu 10MB'dan byk olamaz"),i&&(["application/pdf","image/jpeg","image/png","image/gif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(i.type)||(T.file="Desteklenmeyen dosya tr. PDF, resim veya dokman dosyalar kabul edilir.")),p(T),Object.keys(T).length===0},D=T=>{l(T),p(j=>({...j,file:""}))},N=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?y(!0):T.type==="dragleave"&&y(!1)},E=T=>{T.preventDefault(),T.stopPropagation(),y(!1),T.dataTransfer.files&&T.dataTransfer.files[0]&&D(T.dataTransfer.files[0])},w=T=>{T.target.files&&T.target.files[0]&&D(T.target.files[0])},_=async T=>{if(T.preventDefault(),!!S())try{const j=new FormData;j.append("file",i),j.append("patientId",e),j.append("documentType",o),j.append("description",d),j.append("tags",h),j.append("uploadedBy","current_user"),await s(j),b()}catch(j){console.error("Dokman yklenirken hata:",j)}},C=T=>{if(T===0)return"0 Bytes";const j=1024,F=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(T)/Math.log(j));return parseFloat((T/Math.pow(j,O)).toFixed(2))+" "+F[O]};return a.jsx(on,{open:t,onClose:b,title:"Dokman Ykle",children:a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dosya Seimi *"}),a.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${m?"border-blue-400 bg-blue-50":i?"border-green-400 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:E,children:[a.jsx("input",{ref:g,type:"file",onChange:w,accept:".pdf,.jpg,.jpeg,.png,.gif,.doc,.docx,.txt",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","data-allow-raw":!0}),i?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(St,{className:"w-12 h-12 text-green-500 mb-4"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:i.name}),a.jsx("p",{className:"text-xs text-gray-500",children:C(i.size)}),a.jsxs(Z,{type:"button",variant:"secondary",onClick:()=>l(null),className:"mt-3",children:[a.jsx(vr,{className:"w-4 h-4 mr-1"}),"Kaldr"]})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(ka,{className:"w-12 h-12 text-gray-400 mb-4"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Dosyay srkleyin veya tklayn"}),a.jsx("p",{className:"text-xs text-gray-500",children:"PDF, resim veya dokman dosyalar (max 10MB)"}),a.jsx(Z,{type:"button",variant:"secondary",onClick:()=>{var T;return(T=g.current)==null?void 0:T.click()},className:"mt-3",children:"Dosya Se"})]})]}),x.file&&a.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[a.jsx(mt,{className:"w-4 h-4 mr-1"}),x.file]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dokman Tr *"}),a.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.documentType?"border-red-300":""}`,"data-allow-raw":!0,children:[a.jsx("option",{value:"",children:"Dokman tr sein..."}),a.jsx("option",{value:"sgk_report",children:"SGK Raporu"}),a.jsx("option",{value:"prescription",children:"Reete"}),a.jsx("option",{value:"medical_report",children:"Tbbi Rapor"}),a.jsx("option",{value:"invoice",children:"Fatura"}),a.jsx("option",{value:"receipt",children:"Makbuz"}),a.jsx("option",{value:"other",children:"Dier"})]}),x.documentType&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.documentType})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aklama"}),a.jsx(wr,{value:d,onChange:T=>u(T.target.value),placeholder:"Dokman hakknda aklama...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiketler"}),a.jsx(ye,{type:"text",value:h,onChange:T=>f(T.target.value),placeholder:"Virglle ayrlm etiketler (rn: nemli, acil, kontrol)",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Etiketler dokmann aranmasn kolaylatrr"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[a.jsx(Z,{type:"button",variant:"secondary",onClick:b,disabled:n,children:"ptal"}),a.jsx(Z,{type:"submit",disabled:n||!i,className:"min-w-[120px]",children:n?"Ykleniyor...":"Ykle"})]})]})})},vG=({patientId:e,tabCount:t})=>{const{documents:r,isLoading:s,error:n}=v_(e),[i,l]=k.useState(!1),[o,c]=k.useState(!1),[d,u]=k.useState(""),[h,f]=k.useState("all"),[x,p]=k.useState({start:"",end:""}),m=k.useMemo(()=>{let N=r;if(d&&(N=N.filter(E=>{var w,_,C,T;return((w=E.fileName)==null?void 0:w.toLowerCase().includes(d.toLowerCase()))||((_=E.documentType)==null?void 0:_.toLowerCase().includes(d.toLowerCase()))||((C=E.description)==null?void 0:C.toLowerCase().includes(d.toLowerCase()))||((T=E.tags)==null?void 0:T.some(j=>j.toLowerCase().includes(d.toLowerCase())))})),h!=="all"&&(N=N.filter(E=>E.documentType===h)),x.start){const E=new Date(x.start);N=N.filter(w=>w.uploadDate&&new Date(w.uploadDate)>=E)}if(x.end){const E=new Date(x.end);E.setHours(23,59,59,999),N=N.filter(w=>w.uploadDate&&new Date(w.uploadDate)<=E)}return N},[r,d,h,x]),y=k.useMemo(()=>{const N=m.reduce((_,C)=>(_[C.documentType]=(_[C.documentType]||0)+1,_),{}),E=m.reduce((_,C)=>_+(C.fileSize||0),0),w=m.filter(_=>_.uploadDate&&new Date(_.uploadDate)>new Date(Date.now()-30*24*60*60*1e3)).length;return{documentTypeCounts:N,totalSize:E,recentDocuments:w}},[m]),g=N=>{if(N===0)return"0 B";const E=1024,w=["B","KB","MB","GB"],_=Math.floor(Math.log(N)/Math.log(E));return parseFloat((N/Math.pow(E,_)).toFixed(2))+" "+w[_]};if(s)return a.jsxs("div",{className:"p-6",role:"status","aria-label":"Belgeler ykleniyor",children:[a.jsx(Ln,{lines:4,className:"mb-4"}),a.jsxs("div",{className:"grid gap-4",children:[a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"})]})]});if(n)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Belgeler yklenirken hata olutu"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:typeof n=="string"?n:n.message})]})]})})});const v=N=>{console.log("Document clicked:",N)},b=()=>{l(!1)},S=async N=>{c(!0);try{console.log("Document upload:",N),l(!1)}catch(E){console.error("Document upload failed:",E)}finally{c(!1)}},D=N=>{console.log("Download document:",N)};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(Io,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Hasta Belgeleri ",t!==void 0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:t})]}),m.length>0&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Boyut"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:g(y.totalSize)})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Belge Ara"}),a.jsx("div",{className:"mt-1",children:a.jsx(ye,{type:"text",id:"search",value:d,onChange:N=>u(N.target.value),placeholder:"Belge adn yazn..."})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"documentType",className:"block text-sm font-medium text-gray-700",children:"Belge Tipi"}),a.jsx("div",{className:"mt-1",children:a.jsx(Ue,{id:"documentType",value:h,onChange:N=>f(N.target.value),options:[{value:"all",label:"Tm"},{value:"report",label:"Raporlar"},{value:"test_result",label:"Test Sonular"}]})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dateRange",className:"block text-sm font-medium text-gray-700",children:"Tarih Aral"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[a.jsx(ye,{type:"date",id:"startDate",value:x.start,onChange:N=>p({...x,start:N.target.value})}),a.jsx(ye,{type:"date",id:"endDate",value:x.end,onChange:N=>p({...x,end:N.target.value})})]})]})]})}),m.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Io,{className:"w-5 h-5 text-blue-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Toplam Belge"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:m.length})]})]})}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xt,{className:"w-5 h-5 text-green-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Son 30 Gn"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:y.recentDocuments})]})]})}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-5 h-5 text-purple-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600",children:"Raporlar"}),a.jsx("p",{className:"text-lg font-semibold text-purple-900",children:y.documentTypeCounts.report||0})]})]})}),a.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Sl,{className:"w-5 h-5 text-orange-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-orange-600",children:"Test Sonular"}),a.jsx("p",{className:"text-lg font-semibold text-orange-900",children:y.documentTypeCounts.test_result||0})]})]})})]}),m.length===0?a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(Io,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r.length===0?"Henz belge yok":"Filtreye uygun belge bulunamad"}),a.jsx("p",{className:"text-gray-500",children:r.length===0?"Bu hastaya ait henz hibir belge yklenmemi.":"Arama kriterlerinizi deitirerek daha fazla sonu grebilirsiniz."})]}):a.jsx("div",{className:"grid gap-4",role:"list","aria-label":"Hasta belgeleri listesi",children:m.map(N=>a.jsx("div",{role:"listitem",children:a.jsx(gG,{document:N,onDocumentClick:v,onDownloadClick:D})},N.id))}),a.jsx("div",{className:"mt-6",children:a.jsxs(Z,{onClick:()=>l(!0),className:"w-full sm:w-auto",variant:"primary",children:[a.jsx(_s,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),"Yeni Belge Ykle"]})}),i&&a.jsx(yG,{patientId:e,isOpen:i,onClose:b,onUpload:S,isLoading:o})]})};function bG(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=new On,c=k.useCallback(async u=>{n(!0),l(null);try{const h=await o.getAppointments(u);r((h==null?void 0:h.data)||[])}catch(h){l(h instanceof Error?h:new Error(String(h))),r([])}finally{n(!1)}},[o]);k.useEffect(()=>{e?c(e):r([])},[e,c]);const d=k.useCallback(()=>{l(null)},[]);return{appointments:t,data:t,loading:s,isLoading:s,error:i,fetchAppointments:c,clearError:d}}const wG=({patientId:e,appointment:t,isOpen:r,onClose:s,onSave:n,isLoading:i=!1})=>{const[l,o]=k.useState({patientId:e,appointmentDate:"",appointmentTime:"",duration:30,status:"scheduled",createdBy:"current_user"}),[c,d]=k.useState([]),[u,h]=k.useState({});k.useEffect(()=>{r&&(o(t?{...t,appointmentDate:t.appointmentDate.split("T")[0],appointmentTime:t.appointmentTime.substring(0,5)}:{patientId:e,appointmentDate:"",appointmentTime:"",duration:30,status:"scheduled",createdBy:"current_user"}),h({}))},[r,t,e]),k.useEffect(()=>{r&&d([{id:"1",name:"Dr. Ahmet Ylmaz",specialty:"Kulak Burun Boaz",title:"Uzman Dr."},{id:"2",name:"Dr. Aye Kaya",specialty:"Audioloji",title:"Uzman Dr."},{id:"3",name:"Dr. Mehmet Demir",specialty:"Kulak Burun Boaz",title:"Prof. Dr."}])},[r]);const f=()=>{const m={};return l.appointmentDate||(m.appointmentDate="Randevu tarihi zorunludur"),l.appointmentTime||(m.appointmentTime="Randevu saati zorunludur"),l.doctorId||(m.doctorId="Doktor seimi zorunludur"),l.appointmentType||(m.appointmentType="Randevu tr zorunludur"),(!l.duration||l.duration<15)&&(m.duration="Geerli bir sre giriniz (minimum 15 dakika)"),l.appointmentDate&&new Date(`${l.appointmentDate}T${l.appointmentTime||"00:00"}`)<new Date&&(m.appointmentDate="Gemi tarihli randevu oluturamazsnz"),h(m),Object.keys(m).length===0},x=async m=>{if(m.preventDefault(),!!f())try{const y=`${l.appointmentDate}T${l.appointmentTime}:00`,g={...l,appointmentDate:y,appointmentTime:l.appointmentTime};await n(g),s()}catch(y){console.error("Randevu kaydedilirken hata:",y)}},p=()=>{const m=[];for(let y=8;y<=17;y++)for(let g=0;g<60;g+=30){const v=`${y.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`;m.push(v)}return m};return a.jsx(on,{open:r,onClose:s,title:t?"Randevuyu Dzenle":"Yeni Randevu Olutur",children:a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Randevu Tarihi *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(pt,{className:"w-4 h-4 text-gray-400"})}),a.jsx("input",{type:"date",value:l.appointmentDate||"",onChange:m=>o(y=>({...y,appointmentDate:m.target.value})),min:new Date().toISOString().split("T")[0],className:`w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.appointmentDate?"border-red-300":""}`}),u.appointmentDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.appointmentDate})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Randevu Saati *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Xt,{className:"w-4 h-4 text-gray-400"})}),a.jsxs("select",{value:l.appointmentTime||"",onChange:m=>o(y=>({...y,appointmentTime:m.target.value})),className:`w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.appointmentTime?"border-red-300":""}`,children:[a.jsx("option",{value:"",children:"Saat sein..."}),p().map(m=>a.jsx("option",{value:m,children:m},m))]}),u.appointmentTime&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.appointmentTime})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doktor *"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Mt,{className:"w-4 h-4 text-gray-400"})}),a.jsxs("select",{value:l.doctorId||"",onChange:m=>{const y=c.find(g=>g.id===m.target.value);o(g=>({...g,doctorId:m.target.value,doctorName:y?y.name:""}))},className:`w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.doctorId?"border-red-300":""}`,children:[a.jsx("option",{value:"",children:"Doktor sein..."}),c.map(m=>a.jsxs("option",{value:m.id,children:[m.title," ",m.name," - ",m.specialty]},m.id))]}),u.doctorId&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.doctorId})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Randevu Tr *"}),a.jsxs("select",{value:l.appointmentType||"",onChange:m=>o(y=>({...y,appointmentType:m.target.value})),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.appointmentType?"border-red-300":""}`,children:[a.jsx("option",{value:"",children:"Tr sein..."}),a.jsx("option",{value:"consultation",children:"Konsultasyon"}),a.jsx("option",{value:"fitting",children:"Cihaz Uygulamas"}),a.jsx("option",{value:"follow_up",children:"Kontrol"}),a.jsx("option",{value:"repair",children:"Tamirat"}),a.jsx("option",{value:"other",children:"Dier"})]}),u.appointmentType&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.appointmentType})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sre (dakika) *"}),a.jsx("input",{type:"number",min:"15",max:"240",step:"15",value:l.duration||30,onChange:m=>o(y=>({...y,duration:parseInt(m.target.value)})),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.duration?"border-red-300":""}`}),u.duration&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.duration})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konum"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Kf,{className:"w-4 h-4 text-gray-400"})}),a.jsx("input",{type:"text",value:l.location||"",onChange:m=>o(y=>({...y,location:m.target.value})),placeholder:"Randevu yeri (rn: Klinik, Hastane)",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 pt-3 flex items-start pointer-events-none",children:a.jsx(wt,{className:"w-4 h-4 text-gray-400"})}),a.jsx("textarea",{value:l.notes||"",onChange:m=>o(y=>({...y,notes:m.target.value})),placeholder:"Randevu ile ilgili notlar...",rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),t&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum"}),a.jsxs("select",{value:l.status||"scheduled",onChange:m=>o(y=>({...y,status:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"scheduled",children:"Planland"}),a.jsx("option",{value:"confirmed",children:"Onayland"}),a.jsx("option",{value:"completed",children:"Tamamland"}),a.jsx("option",{value:"cancelled",children:"ptal Edildi"}),a.jsx("option",{value:"no_show",children:"Gelmedi"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:s,disabled:i,children:"ptal"}),a.jsx(ut,{type:"submit",disabled:i,className:"min-w-[120px]",children:i?"Kaydediliyor...":t?"Gncelle":"Randevu Olutur"})]})]})})},NG=({patientId:e})=>{const{appointments:t,isLoading:r,error:s}=bG(e),[n,i]=k.useState(!1),[l,o]=k.useState(!1),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,x]=k.useState({start:"",end:""}),{filteredAppointments:p,filteredStats:m}=k.useMemo(()=>{let S=t;c&&(S=S.filter(E=>{var w;return E.appointmentType.toLowerCase().includes(c.toLowerCase())||((w=E.notes)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))||E.status.toLowerCase().includes(c.toLowerCase())})),u&&(S=S.filter(E=>E.appointmentType===u)),(f.start||f.end)&&(S=S.filter(E=>{const w=new Date(E.date),_=f.start?new Date(f.start):null,C=f.end?new Date(f.end):null;return!(_&&w<_||C&&w>C)}));const D=S.reduce((E,w)=>(E[w.appointmentType]=(E[w.appointmentType]||0)+1,E),{}),N=S.filter(E=>new Date(`${E.date} ${E.time}`)>new Date&&E.status==="scheduled").length;return{filteredAppointments:S,filteredStats:{totalAppointments:S.length,appointmentTypeCounts:D,upcomingAppointments:N}}},[t,c,u,f]),y=k.useMemo(()=>{const S=new Set(t.map(D=>D.appointmentType));return Array.from(S).sort()},[t]);if(r)return a.jsxs("div",{className:"p-6",role:"status","aria-label":"Randevular ykleniyor",children:[a.jsx(Ln,{lines:4,className:"mb-4"}),a.jsxs("div",{className:"grid gap-4",children:[a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"})]})]});if(s)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Randevular yklenirken hata olutu"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:typeof s=="string"?s:s.message})]})]})})});const g=()=>{i(!0)},v=()=>{i(!1)},b=async S=>{o(!0);try{console.log("Appointment save:",S),i(!1)}catch(D){console.error("Appointment save failed:",D)}finally{o(!1)}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(pt,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Hasta Randevular (",p.length,")"]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Ea,{className:"w-5 h-5 text-gray-400 mr-2","aria-hidden":"true"}),a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Arama ve Filtreleme"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Arama"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400","aria-hidden":"true"}),a.jsx(ye,{type:"text",id:"search",value:c,onChange:S=>d(S.target.value),placeholder:"Randevu tr, notlar veya durum ara...",className:"pl-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"appointmentType",className:"block text-sm font-medium text-gray-700",children:"Randevu Tr"}),a.jsx(Ue,{label:"Randevu Tr",value:u,onChange:S=>h(S.target.value),options:[{value:"",label:"Tm"},...y.map(S=>({value:S,label:S}))],className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dateRange",className:"block text-sm font-medium text-gray-700",children:"Tarih Aral"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[a.jsx(ye,{type:"date",id:"startDate",value:f.start,onChange:S=>x({...f,start:S.target.value})}),a.jsx(ye,{type:"date",id:"endDate",value:f.end,onChange:S=>x({...f,end:S.target.value})})]})]})]})]}),p.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-5 h-5 text-blue-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Toplam Randevu"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:m.totalAppointments})]})]})}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-5 h-5 text-green-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Yaklaan Randevular"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:m.upcomingAppointments})]})]})}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-5 h-5 text-purple-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600",children:"En ok Randevu Tr"}),a.jsx("p",{className:"text-lg font-semibold text-purple-900",children:Object.keys(m.appointmentTypeCounts).length>0?Object.entries(m.appointmentTypeCounts).reduce((S,D)=>S[1]>D[1]?S:D)[0]:"Yok"})]})]})})]}),p.length===0?a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(pt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henz randevu yok"}),a.jsx("p",{className:"text-gray-500",children:"Bu hastaya henz randevu oluturulmam."})]}):a.jsx("div",{className:"grid gap-4",role:"list","aria-label":"Hasta randevular listesi",children:t.map(S=>a.jsxs("div",{role:"listitem",className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pt,{className:"w-5 h-5 text-blue-500"}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:[S.appointmentType," - ",S.date," ",S.time]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Sre: ",S.duration," dakika"]})]})]}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.status==="completed"?"bg-green-100 text-green-800":S.status==="scheduled"?"bg-blue-100 text-blue-800":S.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.status==="completed"?"Tamamland":S.status==="scheduled"?"Planland":S.status==="cancelled"?"ptal Edildi":S.status})]}),S.notes&&a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:S.notes})]},S.id))}),a.jsxs(Z,{onClick:g,"aria-label":"Yeni randevu olutur",children:[a.jsx(_s,{className:"w-5 h-5","aria-hidden":"true"}),"Yeni Randevu Olutur"]}),n&&a.jsx(wG,{patientId:e,isOpen:n,onClose:v,onSave:b,isLoading:l})]})};function kG(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=new On,c=k.useCallback(async u=>{n(!0),l(null);try{const h=await o.getHearingTests(u);r((h==null?void 0:h.data)||[])}catch(h){l(h instanceof Error?h:new Error(String(h))),r([])}finally{n(!1)}},[o]);k.useEffect(()=>{e?c(e):r([])},[e,c]);const d=k.useCallback(()=>{l(null)},[]);return{hearingTests:t,data:t,loading:s,isLoading:s,error:i,fetchHearingTests:c,clearError:d}}const jG=({patientId:e})=>{const{hearingTests:t,isLoading:r,error:s}=kG(e);if(r)return a.jsxs("div",{className:"p-6",role:"status","aria-label":"itme testleri ykleniyor",children:[a.jsx(Ln,{lines:4,className:"mb-4"}),a.jsxs("div",{className:"grid gap-4",children:[a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"})]})]});if(s)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"itme testleri yklenirken hata olutu"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:typeof s=="string"?s:s.message})]})]})})});const n=i=>i?new Date(i).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"Belirtilmemi";return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(ea,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"itme Testleri (",t.length,")"]})}),t.length===0?a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(ea,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henz test yok"}),a.jsx("p",{className:"text-gray-500",children:"Bu hastaya henz iitme testi uygulanmam."})]}):a.jsx("div",{className:"grid gap-4",role:"list","aria-label":"Hasta iitme testleri listesi",children:t.map(i=>a.jsxs("div",{role:"listitem",className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ea,{className:"w-5 h-5 text-purple-500"}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:[i.testType," - ",n(i.testDate)]}),i.conductedBy&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Test eden: ",i.conductedBy]})]})]})}),i.notes&&a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:i.notes}),i.results&&a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Test sonular mevcut"})})]},i.id))})]})};function SG(e){const[t,r]=k.useState([]),[s,n]=k.useState(!1),[i,l]=k.useState(null),o=new On,c=k.useCallback(async u=>{n(!0),l(null);try{const h=await o.getNotes(u);r((h==null?void 0:h.data)||[])}catch(h){l(h instanceof Error?h:new Error(String(h))),r([])}finally{n(!1)}},[o]);k.useEffect(()=>{e?c(e):r([])},[e,c]);const d=k.useCallback(()=>{l(null)},[]);return{notes:t,data:t,loading:s,isLoading:s,error:i,fetchNotes:c,clearError:d}}const TG=({patientId:e})=>{const{notes:t,isLoading:r,error:s}=SG(e),[n,i]=k.useState(!1),[l,o]=k.useState(!1),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,x]=k.useState(""),[p,m]=k.useState({start:"",end:""}),{filteredNotes:y,filteredStats:g}=k.useMemo(()=>{let w=t;c&&(w=w.filter(j=>{var F;return j.title.toLowerCase().includes(c.toLowerCase())||j.content.toLowerCase().includes(c.toLowerCase())||((F=j.tags)==null?void 0:F.some(O=>O.toLowerCase().includes(c.toLowerCase())))})),u&&(w=w.filter(j=>j.noteType===u)),f&&(w=w.filter(j=>j.category===f)),(p.start||p.end)&&(w=w.filter(j=>{const F=new Date(j.createdAt),O=p.start?new Date(p.start):null,z=p.end?new Date(p.end):null;return!(O&&F<O||z&&F>z)}));const _=w.reduce((j,F)=>(j[F.noteType]=(j[F.noteType]||0)+1,j),{}),C=w.reduce((j,F)=>(j[F.category]=(j[F.category]||0)+1,j),{}),T=w.filter(j=>{const F=new Date(j.createdAt),O=new Date;return O.setDate(O.getDate()-30),F>O}).length;return{filteredNotes:w,filteredStats:{totalNotes:w.length,noteTypeCounts:_,categoryCounts:C,recentNotes:T}}},[t,c,u,f,p]),v=k.useMemo(()=>{const w=new Set(t.map(_=>_.noteType));return Array.from(w).sort()},[t]),b=k.useMemo(()=>{const w=new Set(t.map(_=>_.category));return Array.from(w).sort()},[t]),S=w=>w?new Date(w).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";if(r)return a.jsxs("div",{className:"p-6",role:"status","aria-label":"Notlar ykleniyor",children:[a.jsx(Ln,{lines:4,className:"mb-4"}),a.jsxs("div",{className:"grid gap-4",children:[a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"}),a.jsx("div",{className:"h-32 bg-gray-100 rounded animate-pulse"})]})]});if(s)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400","aria-hidden":"true"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Notlar yklenirken hata olutu"}),a.jsx("p",{className:"mt-1 text-sm text-red-700",children:typeof s=="string"?s:s.message})]})]})})});const D=()=>{i(!0)},N=()=>{i(!1)},E=async w=>{o(!0);try{await e_.createNote(e,w),i(!1),console.log("Note saved successfully")}catch(_){throw console.error("Note save failed:",_),_}finally{o(!1)}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(wt,{className:"w-5 h-5 mr-2","aria-hidden":"true"}),"Hasta Notlar (",y.length,")"]}),a.jsx(Z,{onClick:D,"aria-label":"Not ekle",children:a.jsx(_s,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Ea,{className:"w-5 h-5 text-gray-400 mr-2","aria-hidden":"true"}),a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Arama ve Filtreleme"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Arama"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400","aria-hidden":"true"}),a.jsx(ye,{type:"text",id:"search",value:c,onChange:w=>d(w.target.value),placeholder:"Balk, ierik veya etiket ara...",className:"pl-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"noteType",className:"block text-sm font-medium text-gray-700",children:"Not Tr"}),a.jsx(Ue,{id:"noteType",value:u,onChange:w=>h(w.target.value),options:[{value:"",label:"Tm"},...v.map(w=>({value:w,label:w}))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Kategori"}),a.jsx(Ue,{id:"category",value:f,onChange:w=>x(w.target.value),options:[{value:"",label:"Tm"},...b.map(w=>({value:w,label:w}))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dateRange",className:"block text-sm font-medium text-gray-700",children:"Tarih Aral"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[a.jsx(ye,{type:"date",id:"startDate",value:p.start,onChange:w=>m({...p,start:w.target.value})}),a.jsx(ye,{type:"date",id:"endDate",value:p.end,onChange:w=>m({...p,end:w.target.value})})]})]})]})]}),y.length>0&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-5 h-5 text-blue-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600",children:"Toplam Not"}),a.jsx("p",{className:"text-lg font-semibold text-blue-900",children:g.totalNotes})]})]})}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-5 h-5 text-green-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600",children:"Son 30 Gn"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:g.recentNotes})]})]})}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-5 h-5 text-purple-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600",children:"En ok Not Tr"}),a.jsx("p",{className:"text-lg font-semibold text-purple-900",children:Object.keys(g.noteTypeCounts).length>0?Object.entries(g.noteTypeCounts).reduce((w,_)=>w[1]>_[1]?w:_)[0]:"Yok"})]})]})}),a.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-5 h-5 text-orange-500 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-orange-600",children:"En ok Kategori"}),a.jsx("p",{className:"text-lg font-semibold text-orange-900",children:Object.keys(g.categoryCounts).length>0?Object.entries(g.categoryCounts).reduce((w,_)=>w[1]>_[1]?w:_)[0]:"Yok"})]})]})})]}),y.length===0?a.jsxs("div",{className:"text-center py-12",role:"status",children:[a.jsx(wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t.length===0?"Henz not yok":"Filtreye uygun not bulunamad"}),a.jsx("p",{className:"text-gray-500",children:t.length===0?"Bu hasta iin henz not girilmemi.":"Arama kriterlerinizi deitirerek daha fazla sonu grebilirsiniz."})]}):a.jsx("div",{className:"grid gap-4",role:"list","aria-label":"Hasta notlar listesi",children:y.map(w=>a.jsxs("div",{role:"listitem",className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(wt,{className:"w-5 h-5 text-green-500"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:w.title}),a.jsxs("p",{className:"text-sm text-gray-500",children:[w.noteType,"  ",w.category,"  ",S(w.createdAt)]})]})]}),w.isPrivate&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"zel"})]}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:w.content}),w.tags&&w.tags.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:w.tags.map((_,C)=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:_},C))})]},w.id))}),n&&a.jsx(b_,{patientId:e,isOpen:n,onClose:N,onSave:E,isLoading:l})]})},_G=({eReceiptNo:e,setEReceiptNo:t,eReceiptResult:r,eReceiptLoading:s,onQueryEReceipt:n,onSaveEReceipt:i,onError:l})=>{const[o,c]=k.useState(()=>new Date().toISOString().split("T")[0]),[d,u]=k.useState({}),h=g=>{c(g),u(v=>{const b={...v};return Object.keys(b).forEach(S=>{b[S].selected&&(b[S]={...b[S],date:g})}),b})},f=(g,v)=>{u(b=>{var S,D;return{...b,[g]:{selected:v,date:v?((S=b[g])==null?void 0:S.date)||o:((D=b[g])==null?void 0:D.date)||o}}})},x=(g,v)=>{u(b=>({...b,[g]:{...b[g],date:v}}))},p=()=>{if(!r)return;const g={...d};r.materials.forEach(v=>{g[v.code]={selected:!0,date:o}}),u(g)},m=()=>{u({})},y=()=>{if(!r){l?l("nce e-reete sorgulayn"):alert("nce e-reete sorgulayn");return}const g=Object.entries(d).filter(([b,S])=>S.selected).map(([b,S])=>({code:b,date:S.date}));if(g.length===0){l?l("Ltfen en az bir malzeme sein"):alert("Ltfen en az bir malzeme sein");return}const v={id:`er_${Date.now()}`,number:r.receiptNo,date:r.receiptDate,doctorName:r.doctorName,validUntil:r.validUntil,materials:g.map(b=>{var S;return{code:b.code,name:((S=r.materials.find(D=>D.code===b.code))==null?void 0:S.name)||"",applicationDate:b.date,deliveryStatus:"saved"}}),status:"saved"};i(v)};return a.jsxs("div",{className:"bg-white rounded-lg border p-6","data-section":"e-receipt-query",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"E-Reete Sorgulama"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(ye,{type:"text",placeholder:"E-reete numarasn giriniz",value:e,onChange:g=>t(g.target.value),className:"flex-1"}),a.jsxs(Z,{onClick:n,disabled:s||!e.trim(),children:[s?a.jsx(ya,{className:"w-4 h-4 animate-spin mr-2"}):null,a.jsx("span",{children:"Sorgula"})]})]}),r&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(St,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"E-reete Bulundu"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-green-800 mb-4",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"E-reete No:"})," ",r.receiptNo]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Tarih:"})," ",r.receiptDate]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Doktor:"})," ",r.doctorName]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Geerlilik:"})," ",r.validUntil]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("label",{htmlFor:"globalDate",className:"text-sm font-medium text-blue-800",children:"Tm malzemeler iin bavuru tarihi:"}),a.jsx("input",{type:"date",id:"globalDate",value:o,max:new Date().toISOString().split("T")[0],onChange:g=>h(g.target.value),className:"text-sm border border-blue-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsx(Z,{onClick:()=>h(o),variant:"outline",size:"sm",children:"Tarihi Uygula"})]})}),a.jsx("h5",{className:"font-medium text-green-900 mb-3",children:"Malzemeler (Seiniz):"}),a.jsx("div",{className:"space-y-3 mb-4",children:r.materials.map((g,v)=>{const b=d[g.code]||{selected:!1,date:o};return a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:`material_${v}`,checked:b.selected,onChange:S=>f(g.code,S.target.checked),className:"mr-3 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:`material_${v}`,className:"font-medium text-gray-900 cursor-pointer",children:g.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Kod: ",g.code,"  ",g.kdv]})]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("label",{htmlFor:`date_${v}`,className:"block text-gray-600 mb-1",children:"Bavuru Tarihi:"}),a.jsx("input",{type:"date",id:`date_${v}`,value:b.date,max:new Date().toISOString().split("T")[0],onChange:S=>x(g.code,S.target.value),disabled:!b.selected,className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]})})]},g.code)})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(Z,{onClick:p,variant:"outline",size:"sm",children:"Hepsini Se"}),a.jsx(Z,{onClick:m,variant:"outline",size:"sm",children:"Seimi Temizle"})]}),a.jsx(Z,{onClick:y,children:"E-reete Kaydet"})]})]})]})})]})]})},EG=({patient:e,onQueryStatus:t,onUpdateInfo:r,onDownloadReport:s})=>{const n=(e==null?void 0:e.sgkInfo)||{},i=(e==null?void 0:e.status)||"pending",l=n.reportDate?new Date(n.reportDate).toLocaleDateString("tr-TR"):"Belirtilmemi",o=n.reportNo||"Belirtilmemi",c=n.validityPeriod||"Belirtilmemi",d=n.contributionAmount||1500,u=n.sgkCoverage||Math.round((n.coveragePercentage||.85)*d),h=d+u;return a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SGK Durum Bilgileri"}),a.jsxs(Z,{onClick:t,variant:"outline",size:"sm",children:[a.jsx(ds,{className:"w-4 h-4 mr-2"}),"Durumu Sorgula"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:"SGK Durum Bilgileri"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"SGK Durumu:"}),a.jsx("span",{className:`px-2 py-1 text-xs rounded ${i==="approved"?"bg-green-100 text-green-800":i==="pending"?"bg-yellow-100 text-yellow-800":i==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:i==="approved"?"Onayland":i==="pending"?"Beklemede":i==="rejected"?"Reddedildi":"Bilinmiyor"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Rapor Tarihi:"}),a.jsx("span",{className:"font-medium",children:l})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Rapor No:"}),a.jsx("span",{className:"font-medium",children:o})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Geerlilik:"}),a.jsx("span",{className:"font-medium",children:c})]}),n.validityDate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Geerlilik Tarihi:"}),a.jsx("span",{className:"font-medium",children:new Date(n.validityDate).toLocaleDateString("tr-TR")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"SGK No:"}),a.jsx("span",{className:"font-medium",children:n.number||"Belirtilmemi"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Kurum:"}),a.jsx("span",{className:"font-medium",children:n.institution||"SGK"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:"Mali Bilgiler"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Katk Pay:"}),a.jsxs("span",{className:"font-medium",children:["",d.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"SGK Karlama:"}),a.jsxs("span",{className:"font-medium",children:["",u.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Toplam Tutar:"}),a.jsxs("span",{className:"font-bold text-lg",children:["",h.toLocaleString()]})]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("h6",{className:"font-medium text-gray-900",children:"Cihaz Haklar"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Cihaz Hakk:"}),a.jsx("span",{className:`px-2 py-1 text-xs rounded ${i==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i==="approved"?"Var":"Yok"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Pil Hakk:"}),a.jsx("span",{className:`px-2 py-1 text-xs rounded ${i==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i==="approved"?"Var":"Yok"})]})]})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 flex flex-wrap gap-3",children:[a.jsx(Z,{onClick:r,variant:"outline",children:"SGK Bilgilerini Gncelle"}),a.jsxs(Z,{onClick:s,variant:"outline",children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),"Rapor ndir"]}),i==="pending"&&a.jsxs(Z,{onClick:t,variant:"outline",children:[a.jsx(ds,{className:"w-4 h-4 mr-2"}),"Durum Sorgula"]})]})]})},bc=({status:e,className:t=""})=>{const s=(i=>{switch(i){case"Kaydedildi":case"saved":return{color:"bg-blue-100 text-blue-800",icon:St,text:"Kaydedildi"};case"Teslim Edildi":case"delivered":return{color:"bg-green-100 text-green-800",icon:St,text:"Teslim Edildi"};case"Beklemede":case"pending":return{color:"bg-yellow-100 text-yellow-800",icon:Xt,text:"Beklemede"};case"rejected":return{color:"bg-red-100 text-red-800",icon:mt,text:"Reddedildi"};case"processing":return{color:"bg-blue-100 text-blue-800",icon:ds,text:"leniyor"};case"expired":return{color:"bg-red-100 text-red-800",icon:mt,text:"Sresi Dolmu"};default:return{color:"bg-gray-100 text-gray-800",icon:mt,text:"Bilinmiyor"}}})(e),n=s.icon;return a.jsxs(jt,{className:`${s.color} ${t} inline-flex items-center gap-1`,children:[a.jsx(n,{className:"w-3 h-3"}),s.text]})},CG=({patientReports:e,reportsLoading:t,onQueryPatientReport:r})=>a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Hasta Raporlar"}),a.jsxs(Z,{onClick:r,disabled:t,children:[t?a.jsx(ds,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(ds,{className:"w-4 h-4 mr-2"}),"Rapor Sorgula"]})]}),e.length>0?a.jsx("div",{className:"space-y-3",children:e.map((s,n)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:s.type}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Rapor Tarihi:"})," ",new Date(s.date).toLocaleDateString("tr-TR")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Geerlilik:"})," ",new Date(s.validUntil).toLocaleDateString("tr-TR")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Yenileme Tarihi:"})," ",new Date(s.renewalDate).toLocaleDateString("tr-TR")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Doktor:"})," ",s.doctor]})]})]}),a.jsx("div",{className:"text-right",children:a.jsx(bc,{status:s.status==="Geerli"?"approved":s.status==="Yaknda Dolacak"?"pending":"rejected"})})]})},n))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(wt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"Henz hasta raporu bulunmuyor."})]})]}),DG=({deviceRights:e,deviceRightsLoading:t})=>a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cihaz Haklar"}),t?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):e?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Cihaz Hakk:"}),a.jsx(bc,{status:e.deviceRight?"approved":"rejected"})]})}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Pil Hakk:"}),a.jsx(bc,{status:e.batteryRight?"approved":"rejected"})]})})]}),e.validUntil&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Geerlilik Tarihi: ",new Date(e.validUntil).toLocaleDateString("tr-TR")]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Iu,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"Cihaz haklar bilgisi bulunmuyor."})]})]}),AG=({savedEReceipts:e,savedEReceiptsLoading:t,onDeliverMaterial:r,onDeliverAllMaterials:s,onEditEReceipt:n,onDownloadPatientForm:i,onError:l})=>{const[o,c]=k.useState(null),[d,u]=k.useState(null),[h,f]=k.useState(null),x=w=>{switch(w){case"saved":return"Kaydedildi";case"delivered":return"Teslim Edildi";default:return"Beklemede"}},p=w=>{switch(w){case"saved":return"Beklemede";case"delivered":return"Teslim Edildi";default:return"Beklemede"}},m=(w,_)=>{r&&r(w,_)},y=w=>{s&&s(w)},g=w=>{u(w),f({...w,materials:w.materials.map(_=>({..._}))})},v=()=>{if(!h||!n)return;if(!h.doctorName.trim()){l?l("Doktor ad zorunludur"):alert("Doktor ad zorunludur");return}if(!h.validUntil){l?l("Geerlilik tarihi zorunludur"):alert("Geerlilik tarihi zorunludur");return}if(h.materials.filter(_=>!_.applicationDate||new Date(_.applicationDate)>new Date).length>0){l?l("Geerli bavuru tarihleri giriniz"):alert("Geerli bavuru tarihleri giriniz");return}n(h),u(null),f(null)},b=()=>{u(null),f(null)},S=(w,_)=>{f(C=>({...C,[w]:_}))},D=(w,_)=>{f(C=>({...C,materials:C.materials.map((T,j)=>j===w?{...T,applicationDate:_}:T)}))},N=(w,_)=>{f(C=>({...C,materials:C.materials.map((T,j)=>j===w?{...T,deliveryStatus:_}:T)}))},E=w=>{c(w)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Kaytl E-Reeteler"}),t?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):e.length>0?a.jsx("div",{className:"space-y-4",children:e.map(w=>{const _=w.materials.some(C=>C.deliveryStatus==="saved");return a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("div",{children:[a.jsxs("h5",{className:"font-medium",children:["E-Reete #",w.number]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Tarih: ",new Date(w.date).toLocaleDateString("tr-TR")]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Doktor: ",w.doctorName]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Geerlilik: ",new Date(w.validUntil).toLocaleDateString("tr-TR")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bc,{status:x(w.status)}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>E(w),children:a.jsx(In,{className:"w-4 h-4"})}),a.jsx(Z,{size:"sm",variant:"outline",onClick:()=>g(w),children:a.jsx(rn,{className:"w-4 h-4"})}),_&&s&&a.jsxs(Z,{size:"sm",onClick:()=>y(w.id),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(mb,{className:"w-4 h-4 mr-1"}),"Tmn Teslim Et"]}),w.status==="delivered"&&w.sgkDocumentAvailable&&w.patientFormAvailable&&i&&a.jsxs(Z,{size:"sm",onClick:()=>i(w.id),className:"bg-purple-600 hover:bg-purple-700 text-white",children:[a.jsx(yr,{className:"w-4 h-4 mr-1"}),"Hasta lem Formu"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h6",{className:"font-medium text-sm text-gray-700",children:"Malzemeler:"}),w.materials.map((C,T)=>a.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:C.name}),a.jsxs("p",{className:"text-xs text-gray-600",children:["Kod: ",C.code,"  Bavuru: ",new Date(C.applicationDate).toLocaleDateString("tr-TR")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`text-xs px-2 py-1 rounded ${C.deliveryStatus==="delivered"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p(C.deliveryStatus)}),C.deliveryStatus==="saved"&&r&&a.jsxs(Z,{size:"sm",onClick:()=>m(w.id,C.code),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[a.jsx(mb,{className:"w-3 h-3 mr-1"}),"Teslim Et"]})]})]},`${C.code}-${T}`))]})]},w.id)})}):a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(wt,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"Henz e-reete oluturulmam"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"E-Reete Detaylar"}),a.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"E-Reete No"}),a.jsx("p",{className:"text-sm text-gray-900",children:o.number})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tarih"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.date).toLocaleDateString("tr-TR")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Doktor"}),a.jsx("p",{className:"text-sm text-gray-900",children:o.doctorName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Geerlilik"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.validUntil).toLocaleDateString("tr-TR")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Malzemeler"}),a.jsx("div",{className:"space-y-2",children:o.materials.map((w,_)=>a.jsx("div",{className:"border rounded p-3",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:w.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Kod: ",w.code]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Bavuru Tarihi: ",new Date(w.applicationDate).toLocaleDateString("tr-TR")]})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded ${w.deliveryStatus==="delivered"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p(w.deliveryStatus)})]})},`${w.code}-${_}`))})]})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx(Z,{onClick:()=>c(null),children:"Kapat"})})]})})}),d&&h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"E-Reete Dzenle"}),a.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",children:""})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-Reete No"}),a.jsx("input",{type:"text",value:h.number,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doktor Ad *"}),a.jsx("input",{type:"text",value:h.doctorName,onChange:w=>S("doctorName",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Geerlilik Tarihi *"}),a.jsx("input",{type:"date",value:h.validUntil,onChange:w=>S("validUntil",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Malzemeler"}),a.jsx("div",{className:"space-y-3",children:h.materials.map((w,_)=>a.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Malzeme Kodu"}),a.jsx("input",{type:"text",value:w.code,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Malzeme Ad"}),a.jsx("input",{type:"text",value:w.name,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bavuru Tarihi *"}),a.jsx("input",{type:"date",value:w.applicationDate,max:new Date().toISOString().split("T")[0],onChange:C=>D(_,C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teslim Durumu"}),a.jsxs("select",{value:w.deliveryStatus,onChange:C=>N(_,C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"saved",children:"Beklemede"}),a.jsx("option",{value:"delivered",children:"Teslim Edildi"})]})]})]})},`${w.code}-${_}`))})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t",children:[a.jsx(Z,{onClick:b,variant:"outline",children:"ptal"}),a.jsx(Z,{onClick:v,children:"Kaydet"})]})]})})})]})},PG=({deviceAssignments:e,deviceAssignmentsLoading:t})=>a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cihaz Atama"}),t?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):e.length>0?a.jsx("div",{className:"space-y-3",children:e.map(r=>a.jsx("div",{className:"border rounded-lg p-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium",children:r.deviceName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Kulak: ",r.earSide==="LEFT"?"Sol":"Sa"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Seri No: ",r.serialNumber]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Atama Tarihi: ",new Date(r.assignedDate).toLocaleDateString("tr-TR")]})]}),a.jsx(bc,{status:r.status})]})},r.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Iu,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"Henz cihaz atamas yaplmam."})]})]}),RG=({sgkDocuments:e,documentsLoading:t,onUploadClick:r})=>a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"SGK Belgeleri"}),a.jsxs(Z,{onClick:r,variant:"outline",children:[a.jsx(ka,{className:"w-4 h-4 mr-2"}),"Belge Ykle"]})]}),t?a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):e.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(wt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"Henz SGK belgesi yklenmemi"})]}):a.jsx("div",{className:"space-y-3",children:e.map(s=>a.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h5",{className:"font-medium text-gray-900",children:s.filename}),a.jsx(bc,{status:"approved",className:"text-xs"})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["Yklenme: ",new Date(s.uploadedAt).toLocaleDateString("tr-TR")]}),a.jsx("p",{children:"Durum: lendi"})]})]}),a.jsxs("div",{className:"flex space-x-2 ml-4",children:[a.jsx(Z,{size:"sm",variant:"outline",children:a.jsx(In,{className:"w-4 h-4"})}),a.jsx(Z,{size:"sm",variant:"outline",children:a.jsx(yr,{className:"w-4 h-4"})}),a.jsx(Z,{size:"sm",variant:"outline",children:a.jsx(Es,{className:"w-4 h-4"})})]})]})},s.id))})]}),FG=({onGenerateSGKReport:e,onSendToSGK:t,onCheckSGKDeadlines:r,onExportSGKData:s})=>a.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SGK lemleri"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs(Z,{onClick:e,variant:"outline",className:"flex items-center justify-center",children:[a.jsx(f5,{className:"w-4 h-4 mr-2"}),"Rapor Olutur"]}),a.jsxs(Z,{onClick:t,variant:"outline",className:"flex items-center justify-center",children:[a.jsx(wd,{className:"w-4 h-4 mr-2"}),"SGK'ya Gnder"]}),a.jsxs(Z,{onClick:r,variant:"outline",className:"flex items-center justify-center",children:[a.jsx(R5,{className:"w-4 h-4 mr-2"}),"Sre Kontrol"]}),a.jsxs(Z,{onClick:s,variant:"outline",className:"flex items-center justify-center",children:[a.jsx(d5,{className:"w-4 h-4 mr-2"}),"Veri Da Aktar"]})]})]}),IG=({message:e,onRetry:t})=>a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(mt,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-red-800",children:e}),t&&a.jsx("button",{onClick:t,className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Tekrar Dene"})]})]})}),MG=({message:e})=>a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-5 h-5 text-green-600 mr-3"}),a.jsx("p",{className:"text-sm text-green-800",children:e})]})}),OG=({patient:e,onPatientUpdate:t})=>{const{success:r,error:s}=Hl();k.useState(null),k.useState("rapor"),k.useState(""),k.useState(!1);const[n,i]=k.useState(!1),[l,o]=k.useState([]),[c,d]=k.useState(null),[u,h]=k.useState(null);k.useState(null),k.useState(!1);const[f,x]=k.useState(""),[p,m]=k.useState(null),[y,g]=k.useState(!1),[v,b]=k.useState([]),[S,D]=k.useState(!1),[N,E]=k.useState(null),[w,_]=k.useState(!1),[C,T]=k.useState([]),[j,F]=k.useState(!1),[O,z]=k.useState([]),[G,q]=k.useState(!1);e!=null&&e.sgkInfo;const H=(e==null?void 0:e.id)||"",A=(e==null?void 0:e.status)||"pending";k.useEffect(()=>{if(c||u){const de=setTimeout(()=>{d(null),h(null)},5e3);return()=>clearTimeout(de)}},[c,u]),k.useEffect(()=>{H&&(V(),I(),R(),U())},[H]);const V=async()=>{if(H){i(!0);try{o([])}catch(de){console.error("Error loading SGK documents:",de),d("SGK belgeleri yklenirken hata olutu")}finally{i(!1)}}},L=async()=>{if(!f.trim()){s("Hata","E-reete numaras giriniz");return}g(!0),m(null);try{await new Promise(Ae=>setTimeout(Ae,2e3));const de={success:!0,receiptNo:f,receiptDate:new Date().toLocaleDateString("tr-TR"),doctorName:"Dr. Zeynep Kaya",validUntil:new Date(Date.now()+30*24*60*60*1e3).toLocaleDateString("tr-TR"),materials:[{code:"DMT001",name:"Dijital programlanabilir iitme cihaz - sa",kdv:"0 KDV",direction:"Sa",available:!0},{code:"DMT002",name:"Dijital programlanabilir iitme cihaz - sol",kdv:"0 KDV",direction:"Sol",available:!0}]};m(de),r("Baarl","E-reete bulundu")}catch(de){console.error("E-receipt query error:",de),s("Hata","E-reete sorgulanrken bir hata olutu")}finally{g(!1)}},P=async()=>{D(!0);try{await new Promise(Ae=>setTimeout(Ae,1500)),b([{type:"itme Cihaz Raporu",date:"2024-01-15",validUntil:"2026-01-15",status:"Geerli",renewalDate:"2025-12-15",doctor:"Dr. Ahmet Ylmaz"}]),r("Baarl","Hasta raporlar yklendi")}catch(de){console.error("Patient report query error:",de),s("Hata","Hasta raporlar sorgulanrken bir hata olutu")}finally{D(!1)}},I=async()=>{_(!0);try{const de={deviceRight:A==="approved",batteryRight:A==="approved",lastUpdate:new Date().toISOString(),validUntil:A==="approved"?new Date(Date.now()+31536e6).toISOString():null};E(de)}catch(de){console.error("Device rights load error:",de)}finally{_(!1)}},R=async()=>{F(!0);try{T([{id:"er1",number:"ER2024001",date:"2024-01-15",doctorName:"Dr. Ahmet Ylmaz",validUntil:"2026-01-15",status:"saved",materials:[{code:"DMT001",name:"Dijital programlanabilir iitme cihaz - sa",applicationDate:"2024-01-15",deliveryStatus:"saved"},{code:"DMT002",name:"Dijital programlanabilir iitme cihaz - sol",applicationDate:"2024-01-15",deliveryStatus:"delivered"}]},{id:"er2",number:"ER2024002",date:"2024-01-20",doctorName:"Dr. Aye Kaya",validUntil:"2026-01-20",status:"delivered",sgkDocumentAvailable:!0,patientFormAvailable:!0,materials:[{code:"DMT003",name:"Dijital programlanabilir iitme cihaz - sa",applicationDate:"2024-01-20",deliveryStatus:"delivered"}]}])}catch(de){console.error("Saved e-receipts load error:",de)}finally{F(!1)}},U=async()=>{q(!0);try{z([{id:"da1",deviceId:"dev001",deviceName:"Oticon Xceed",earSide:"LEFT",assignedDate:"2024-01-15",status:"active",serialNumber:"OCX2024001"}])}catch(de){console.error("Device assignments load error:",de)}finally{q(!1)}},M=async()=>{try{r("Bilgi","SGK durumu sorgulanyor..."),await new Promise(de=>setTimeout(de,2e3)),r("Baarl","SGK durumu gncellendi")}catch(de){console.error("SGK status query failed:",de),s("Hata","SGK durumu sorgulanrken hata olutu")}},J=async()=>{try{r("Bilgi","SGK raporu oluturuluyor..."),await new Promise(de=>setTimeout(de,3e3)),r("Baarl","SGK raporu baaryla oluturuldu")}catch(de){console.error("SGK report generation failed:",de),s("Hata","SGK raporu oluturulurken hata olutu")}},se=async()=>{try{r("Bilgi","SGK'ya gnderiliyor..."),await new Promise(de=>setTimeout(de,2500)),r("Baarl","SGK'ya baaryla gnderildi")}catch(de){console.error("SGK submission failed:",de),s("Hata","SGK'ya gnderilirken hata olutu")}},ae=async()=>{try{r("Bilgi","SGK sreleri kontrol ediliyor..."),await new Promise(de=>setTimeout(de,1e3)),r("Baarl","SGK sreleri kontrol edildi")}catch(de){console.error("SGK deadline check failed:",de),s("Hata","SGK sreleri kontrol edilirken hata olutu")}},ie=async()=>{try{r("Bilgi","SGK verileri da aktarlyor..."),await new Promise(de=>setTimeout(de,2e3)),r("Baarl","SGK verileri baaryla da aktarld")}catch(de){console.error("SGK data export failed:",de),s("Hata","SGK verileri da aktarlrken hata olutu")}},ce=async()=>{try{r("Bilgi","SGK bilgileri gncelleniyor..."),await new Promise(de=>setTimeout(de,1500)),r("Baarl","SGK bilgileri gncellendi")}catch(de){console.error("SGK info update failed:",de),s("Hata","SGK bilgileri gncellenirken hata olutu")}},K=async()=>{try{r("Bilgi","SGK raporu indiriliyor..."),await new Promise(de=>setTimeout(de,1e3)),r("Baarl","SGK raporu indirildi")}catch(de){console.error("SGK report download failed:",de),s("Hata","SGK raporu indirilirken hata olutu")}},He=de=>{T(Ae=>Ae.map(Ke=>Ke.id===de.id?de:Ke)),r("Baarl","E-reete gncellendi")},Pe=de=>{r("Baarl","Hasta ilem formu indirildi")},Le=(de,Ae)=>{T(Ke=>Ke.map(re=>{if(re.id===de){const oe=re.materials.map(we=>we.code===Ae?{...we,deliveryStatus:"delivered"}:we),me=oe.every(we=>we.deliveryStatus==="delivered");return{...re,materials:oe,status:me?"delivered":re.status}}return re})),r("Baarl","Malzeme teslim edildi")},Ce=de=>{T(Ae=>Ae.map(Ke=>Ke.id===de?{...Ke,materials:Ke.materials.map(re=>({...re,deliveryStatus:"delivered"})),status:"delivered"}:Ke)),r("Baarl","Tm malzemeler teslim edildi")};return a.jsxs("div",{className:"space-y-6",children:[c&&a.jsx(IG,{message:c,onRetry:()=>d(null)}),u&&a.jsx(MG,{message:u}),a.jsx(EG,{patient:e,onQueryStatus:M,onUpdateInfo:ce,onDownloadReport:K}),a.jsx(_G,{eReceiptNo:f,setEReceiptNo:x,eReceiptResult:p,eReceiptLoading:y,onQueryEReceipt:L,onSaveEReceipt:de=>{T(Ae=>[...Ae,de]),r("Baarl","E-reete kaydedildi"),m(null)},onError:de=>s("Hata",de)}),a.jsx(CG,{patientReports:v,reportsLoading:S,onQueryPatientReport:P}),a.jsx(DG,{deviceRights:N,deviceRightsLoading:w}),a.jsx(AG,{savedEReceipts:C,savedEReceiptsLoading:j,onDeliverMaterial:Le,onDeliverAllMaterials:Ce,onEditEReceipt:He,onDownloadPatientForm:Pe,onError:de=>s("Hata",de)}),a.jsx(PG,{deviceAssignments:O,deviceAssignmentsLoading:G}),a.jsx(RG,{sgkDocuments:l,documentsLoading:n,onUploadClick:()=>{}}),a.jsx(FG,{onGenerateSGKReport:J,onSendToSGK:se,onCheckSGKDeadlines:ae,onExportSGKData:ie})]})},LG=({patient:e,activeTab:t,onPatientUpdate:r,sales:s,isLoading:n,tabCounts:i})=>{const l=o=>a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"max-w-sm mx-auto",children:[a.jsx(Xt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:[o," Yaknda Gelecek"]}),a.jsx("p",{className:"text-gray-500",children:"Bu zellik u anda gelitirme aamasnda. Yaknda kullanma sunulacak."})]})});switch(t){case"overview":return a.jsx(ca,{children:a.jsx(q2,{patient:e})});case"devices":return a.jsx(ca,{children:a.jsx(ZK,{patientId:(e==null?void 0:e.id)||""})});case"sales":return a.jsx(ca,{children:a.jsx(mG,{patientId:(e==null?void 0:e.id)||"",sales:s})});case"timeline":return a.jsx(ca,{children:a.jsx(pG,{patientId:(e==null?void 0:e.id)||""})});case"documents":return a.jsx(ca,{children:a.jsx(vG,{patientId:(e==null?void 0:e.id)||""})});case"appointments":return a.jsx(ca,{children:a.jsx(NG,{patientId:(e==null?void 0:e.id)||""})});case"hearing-tests":return a.jsx(ca,{children:a.jsx(jG,{patientId:(e==null?void 0:e.id)||""})});case"sgk":return a.jsx(ca,{children:a.jsx(OG,{patient:e,onPatientUpdate:r})});case"notes":return a.jsx(ca,{children:a.jsx(TG,{patientId:(e==null?void 0:e.id)||""})});case"settings":return l("Ayarlar");default:return a.jsx(ca,{children:a.jsx(q2,{patient:e})})}},BG={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},zG={sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},$G=({size:e="md",text:t,className:r="",fullScreen:s=!1})=>{const n=a.jsxs("div",{className:`flex flex-col items-center justify-center ${r}`,children:[a.jsx(ya,{className:`${BG[e]} animate-spin text-blue-600`}),t&&a.jsx("p",{className:`mt-2 text-gray-600 ${zG[e]}`,children:t})]});return s?a.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50",children:n}):n};class Q2 extends k.Component{constructor(r){super(r);qe(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});qe(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){this.setState({error:r,errorInfo:s}),this.props.onError&&this.props.onError(r,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(os,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Bir Hata Olutu"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Sayfa yklenirken beklenmeyen bir hata olutu. Ltfen sayfay yenilemeyi deneyin."})]}),!1,a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs(Z,{onClick:this.handleRetry,variant:"primary",className:"inline-flex items-center",children:[a.jsx(ds,{className:"w-4 h-4 mr-2"}),"Tekrar Dene"]}),a.jsxs(Z,{onClick:this.handleGoHome,variant:"secondary",className:"inline-flex items-center",children:[a.jsx(dS,{className:"w-4 h-4 mr-2"}),"Ana Sayfa"]})]})]})}):this.props.children}}const UG=()=>{const{patientId:e}=Fu({strict:!1}),t=Sc(),{showError:r}=rR(),[s,n]=k.useState(()=>localStorage.getItem(b2)||"general"),{patient:i,isLoading:l,error:o}=IK(e),{devices:c}=p_(e,i==null?void 0:i.devices),{sales:d}=g_(e),{timeline:u}=y_(e),{documents:h}=v_(e),f={devices:c.length,sales:d.length,timeline:u.length,documents:h.length},x=v=>v?new Date(v).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"Belirtilmemi",p=v=>{const S={active:{label:"Aktif",className:"bg-green-100 text-green-800"},inactive:{label:"Pasif",className:"bg-yellow-100 text-yellow-800"},archived:{label:"Ariv",className:"bg-gray-100 text-gray-800"}}[v]||{label:v,className:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S.className}`,children:S.label})};k.useEffect(()=>{if(o){const v=typeof o=="string"?o:(o==null?void 0:o.message)||"Hasta bilgileri yklenirken bir hata olutu";r(v)}},[o,r]);const m=v=>{n(v),localStorage.setItem(b2,v)},y=()=>{t({to:"/patients"})},g=()=>{if(!e)return a.jsx(vP,{resource:"hasta ID"});if(l)return a.jsx($G,{size:"lg",text:"Hasta bilgileri ykleniyor...",fullScreen:!0});if(o){const v=typeof o=="string"?o:o.message||"Hasta bilgileri yklenirken bir hata olutu";return v.includes("network")||v.includes("fetch")?a.jsx(yP,{onRetry:()=>window.location.reload()}):a.jsx(au,{type:"error",title:"Hasta Bulunamad",message:"Hasta bilgileri yklenirken bir hata olutu veya hasta bulunamad.",onRetry:()=>window.location.reload(),onDismiss:y,retryText:"Tekrar Dene"})}return i?a.jsxs(a.Fragment,{children:[a.jsx(MK,{patient:i,isLoading:l}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 px-6",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pt,{className:"h-5 w-5 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Kayt Tarihi"}),a.jsx("p",{className:"font-medium",children:x(i.createdAt)})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ea,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Cihaz Says"}),a.jsx("p",{className:"font-medium",children:f.devices})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Iu,{className:"h-5 w-5 text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"SGK Durumu"}),a.jsx("p",{className:"font-medium",children:i.sgkInfo?"Var":"Yok"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_a,{className:"h-5 w-5 text-red-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Durum"}),a.jsx("div",{className:"mt-1",children:p(i.status)})]})]})})]}),a.jsx(Q2,{children:a.jsx(BK,{patient:i,activeTab:s,onTabChange:m})}),a.jsx("div",{className:"bg-white",children:a.jsx(Q2,{children:a.jsx(LG,{patient:i,activeTab:s,isLoading:l,tabCounts:f,sales:d})})})]}):a.jsx(au,{type:"error",title:"Hasta Bulunamad",message:"Belirtilen hasta bulunamad.",onDismiss:y})};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:a.jsxs(Z,{onClick:y,variant:"ghost",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[a.jsx(t5,{className:"w-4 h-4 mr-2"}),"Hasta Listesine Dn"]})}),g()]})},VG=Or("/patients/$patientId")({component:UG,loader:async({params:e})=>{if(!e.patientId)throw new Error("Patient ID is required");return{patientId:e.patientId}},errorComponent:({error:e})=>a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-md w-full text-center",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Hasta Bulunamad"}),a.jsx("p",{className:"text-gray-600 mb-4",children:(e==null?void 0:e.message)||"Belirtilen hasta bulunamad veya eriim izniniz yok."}),a.jsx("a",{href:"/patients",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Hasta Listesine Dn"})]})})});class HG{async loadPurchases(){try{const t=localStorage.getItem(_2);if(!t){const r=this.createSamplePurchases();return await this.savePurchases(r),r}return JSON.parse(t)}catch(t){return console.error("Error loading purchases:",t),[]}}async savePurchases(t){try{localStorage.setItem(_2,JSON.stringify(t))}catch(r){throw console.error("Error saving purchases:",r),r}}createSamplePurchases(){return[{id:"purchase-1",purchaseNumber:"AL202401001",type:"standard",status:"approved",supplierName:"ABC Medikal Ltd.",supplierTaxNumber:"1234567890",supplierAddress:"stanbul, Trkiye",supplierPhone:"+90 212 123 45 67",supplierEmail:"info@abcmedikal.com",issueDate:"2024-01-15",dueDate:"2024-02-15",paymentMethod:"Kredi Kart",items:this.createSamplePurchaseItems(),subtotal:8500,taxTotal:1530,grandTotal:10030,notes:"Acil sipari",xmlData:"<xml>sample xml data</xml>",xmlFileName:"AL202401001.xml",xmlImportDate:"2024-01-15T10:30:00Z",createdAt:"2024-01-15T10:30:00Z"}]}createSamplePurchaseItems(){return[{id:"item-1",name:"Dijital Termometre",description:"Infrared dijital termometre",quantity:10,unitPrice:850,taxRate:18,taxAmount:153,totalPrice:1003,unit:"adet",productCode:"TERM001",barcode:"1234567890123"}]}async createPurchase(t){try{const r=t.items.map(l=>({...l,id:this.generateId(),taxAmount:l.quantity*l.unitPrice*(l.taxRate/100),totalPrice:l.quantity*l.unitPrice*(1+l.taxRate/100)})),s=this.calculatePurchase(r),n={id:this.generateId(),purchaseNumber:this.generatePurchaseNumber(),status:"draft",type:t.type,supplierName:t.supplierName,supplierTaxNumber:t.supplierTaxNumber,supplierAddress:t.supplierAddress,supplierPhone:t.supplierPhone,supplierEmail:t.supplierEmail,issueDate:t.issueDate,dueDate:t.dueDate,paymentMethod:t.paymentMethod,items:r,subtotal:s.subtotal,taxTotal:s.totalTax,grandTotal:s.totalAmount,notes:t.notes,internalNotes:t.internalNotes,referenceNumber:t.referenceNumber,orderNumber:t.orderNumber,xmlData:t.xmlData,xmlFileName:t.xmlFileName,xmlImportDate:t.xmlData?new Date().toISOString():void 0,createdAt:new Date().toISOString()},i=await this.loadPurchases();return i.push(n),await this.savePurchases(i),await _t.addOperation({method:"POST",endpoint:"/api/purchases",data:n}),n}catch(r){throw console.error("Error creating purchase:",r),r}}async updatePurchase(t,r){try{const s=await this.loadPurchases(),n=s.findIndex(o=>o.id===t);if(n===-1)throw new Error("Purchase not found");let i=s[n].items;r.items&&(i=r.items.map(o=>({...o,id:this.generateId(),taxAmount:o.quantity*o.unitPrice*(o.taxRate/100),totalPrice:o.quantity*o.unitPrice*(1+o.taxRate/100)})));const l={...s[n],...r,items:i,updatedAt:new Date().toISOString(),updatedBy:"current-user"};return s[n]=l,await this.savePurchases(s),await _t.addOperation({method:"PUT",endpoint:`/api/purchases/${t}`,data:l}),l}catch(s){throw console.error("Error updating purchase:",s),s}}async deletePurchase(t){try{const s=(await this.loadPurchases()).filter(n=>n.id!==t);await this.savePurchases(s),await _t.addOperation({method:"DELETE",endpoint:`/api/purchases/${t}`,data:{id:t}})}catch(r){throw console.error("Error deleting purchase:",r),r}}async searchPurchases(t={}){try{let s=[...await this.loadPurchases()];if(t.search){const d=t.search.toLowerCase();s=s.filter(u=>{var h;return u.purchaseNumber.toLowerCase().includes(d)||u.supplierName.toLowerCase().includes(d)||((h=u.notes)==null?void 0:h.toLowerCase().includes(d))})}t.status&&(s=s.filter(d=>d.status===t.status)),t.type&&(s=s.filter(d=>d.type===t.type)),t.supplierName&&(s=s.filter(d=>d.supplierName.toLowerCase().includes(t.supplierName.toLowerCase()))),t.hasXmlData!==void 0&&(s=s.filter(d=>t.hasXmlData?!!d.xmlData:!d.xmlData));const n=t.page||1,i=t.limit||10,l=(n-1)*i,o=l+i;return{purchases:s.slice(l,o),total:s.length,totalPages:Math.ceil(s.length/i),page:n,pageSize:i,limit:i,hasMore:o<s.length,filters:t}}catch(r){throw console.error("Error searching purchases:",r),r}}async getPurchaseById(t){try{return(await this.loadPurchases()).find(s=>s.id===t)||null}catch(r){return console.error("Error getting purchase by ID:",r),null}}async getPurchaseStats(){try{const t=await this.loadPurchases();return{total:t.length,draft:t.filter(s=>s.status==="draft").length,sent:t.filter(s=>s.status==="sent").length,approved:t.filter(s=>s.status==="approved").length,rejected:t.filter(s=>s.status==="rejected").length,paid:t.filter(s=>s.status==="paid").length,cancelled:t.filter(s=>s.status==="cancelled").length,totalAmount:t.reduce((s,n)=>s+n.grandTotal,0),xmlImported:t.filter(s=>!!s.xmlData).length}}catch(t){throw console.error("Error getting purchase stats:",t),t}}async importFromXML(t,r){try{const s=this.parseXMLToPurchaseData(t,r);return await this.createPurchase({...s,xmlData:t,xmlFileName:r,xmlImportDate:new Date().toISOString()})}catch(s){throw console.error("Error importing from XML:",s),s}}parseXMLToPurchaseData(t,r){return{type:"standard",supplierName:"XML e Aktarlan Tedariki",issueDate:new Date().toISOString().split("T")[0],items:[{name:"XML e Aktarlan rn",quantity:1,unitPrice:100,taxRate:18}]}}calculatePurchase(t){const r=t.reduce((i,l)=>i+l.quantity*l.unitPrice,0),s=t.reduce((i,l)=>i+l.taxAmount,0),n=r+s;return{items:t,subtotal:r,totalTax:s,totalAmount:n}}validatePurchase(t){var n,i;const r=[],s=[];return(n=t.supplierName)!=null&&n.trim()||r.push("Tedariki ad gereklidir"),t.issueDate||r.push("Fatura tarihi gereklidir"),(!t.items||t.items.length===0)&&r.push("En az bir kalem gereklidir"),(i=t.items)==null||i.forEach((l,o)=>{var c;(c=l.name)!=null&&c.trim()||r.push(`${o+1}. kalem ad gereklidir`),l.quantity<=0&&r.push(`${o+1}. kalem miktar 0'dan byk olmaldr`),l.unitPrice<=0&&r.push(`${o+1}. kalem birim fiyat 0'dan byk olmaldr`)}),{isValid:r.length===0,errors:r,warnings:s}}generateId(){return`purchase-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}generatePurchaseNumber(){const t=new Date,r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`AL${r}${s}${n}${i}`}}const KG=new HG;function GG({onPurchaseSelect:e,filters:t={},showActions:r=!1,compact:s=!1}){const[n,i]=k.useState([]),[l,o]=k.useState(!0),[c,d]=k.useState(null),[u,h]=k.useState(null);k.useEffect(()=>{(async()=>{try{o(!0),d(null);const v=await KG.searchPurchases(t);i(v.purchases)}catch(v){d(v instanceof Error?v.message:"Al faturalar yklenirken hata olutu")}finally{o(!1)}})()},[t]);const f=g=>{h(g),e==null||e(g)},x=g=>new Date(g).toLocaleDateString("tr-TR"),p=g=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(g),m=g=>{switch(g){case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"paid":return"bg-purple-100 text-purple-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},y=g=>{switch(g){case"draft":return"Taslak";case"sent":return"Gnderildi";case"approved":return"Onayland";case"rejected":return"Reddedildi";case"paid":return"dendi";case"cancelled":return"ptal";default:return g}};return l?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Al faturalar ykleniyor..."})]}):c?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Hata"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{children:c})})]})]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{className:"flex-1",children:a.jsx(ye,{type:"text",placeholder:"Al faturas ara...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:n.length===0?a.jsx("li",{className:"px-6 py-8 text-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Al faturas bulunamad"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Henz XML formatnda al faturas import edilmemi."})]})}):n.map(g=>a.jsx("li",{className:`px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors ${(u==null?void 0:u.id)===g.id?"bg-blue-50":""}`,onClick:()=>f(g),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.purchaseNumber}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(g.status)}`,children:y(g.status)}),g.xmlFileName&&a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"XML"})]}),a.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx("span",{children:g.supplierName}),g.supplierTaxNumber&&a.jsxs("span",{children:["VN: ",g.supplierTaxNumber]}),a.jsx("span",{children:x(g.issueDate)}),g.dueDate&&a.jsxs("span",{children:["Vade: ",x(g.dueDate)]})]})]})})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:p(g.grandTotal)}),a.jsxs("p",{className:"text-xs text-gray-500",children:[g.items.length," kalem"]})]}),r&&a.jsxs("div",{className:"flex items-center space-x-2",children:[g.status==="draft"&&a.jsx(Z,{className:"text-blue-600 hover:text-blue-900 text-sm font-medium",onClick:v=>{v.stopPropagation()},variant:"default",children:"Onayla"}),g.status==="approved"&&a.jsx(Z,{className:"text-green-600 hover:text-green-900 text-sm font-medium",onClick:v=>{v.stopPropagation()},variant:"default",children:"de"}),a.jsx(Z,{className:"text-gray-400 hover:text-gray-600",onClick:v=>{v.stopPropagation()},variant:"default",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})]})]})]})},g.id))})}),n.length>0&&a.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[a.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[a.jsx(Z,{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",variant:"default",children:"nceki"}),a.jsx(Z,{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",variant:"default",children:"Sonraki"})]}),a.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Toplam ",a.jsx("span",{className:"font-medium",children:n.length})," al faturas"]})}),a.jsx("div",{children:a.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[a.jsx(Z,{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",variant:"default",children:"nceki"}),a.jsx(Z,{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",variant:"default",children:"Sonraki"})]})})]})]})]})}function WG(){const[e,t]=k.useState(null),[r,s]=k.useState({}),[n,i]=k.useState("list"),[l,o]=k.useState(!1),c=h=>{t(h),i("details")},d=h=>{t(h),i("form")},u=()=>{i("list"),t(null)};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n!=="list"&&a.jsx("div",{className:"bg-white shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between h-16",children:a.jsxs(Z,{onClick:u,className:"flex items-center text-gray-600 hover:text-gray-900",variant:"default",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Allar Listesine Dn"]})})})}),n==="list"&&a.jsx("div",{className:"bg-white shadow",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"md:flex md:items-center md:justify-between",children:a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Allar"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"XML formatnda gelen al faturalarn ynetin ve takip edin"})]})})}),a.jsx("div",{className:"mt-4 flex items-center justify-between",children:a.jsxs(Z,{onClick:()=>o(!l),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",variant:"default",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})}),"Filtreler",l?a.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):a.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l&&a.jsx("div",{className:"mt-4 bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),a.jsx(Ue,{value:r.status||"",onChange:h=>s({...r,status:h.target.value||void 0}),options:[{value:"",label:"Tm"},{value:"draft",label:"Taslak"},{value:"sent",label:"Gnderildi"},{value:"approved",label:"Onayland"},{value:"rejected",label:"Reddedildi"},{value:"paid",label:"dendi"},{value:"cancelled",label:"ptal"}],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tedariki"}),a.jsx(ye,{type:"text",value:r.supplierName||"",onChange:h=>s({...r,supplierName:h.target.value||void 0}),placeholder:"Tedariki ad...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balang Tarihi"}),a.jsx(ye,{type:"date",value:r.dateFrom||"",onChange:h=>s({...r,dateFrom:h.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti Tarihi"}),a.jsx(ye,{type:"date",value:r.dateTo||"",onChange:h=>s({...r,dateTo:h.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n==="list"&&a.jsx(GG,{onPurchaseSelect:c,filters:r,showActions:!0}),n==="form"&&a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Al Faturas Formu"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Al faturas formu henz hazr deil. XML import zellii yaknda eklenecek."})]})}),n==="details"&&e&&a.jsx(YG,{purchase:e,onEdit:()=>d(e)})]})]})}function YG({purchase:e,onEdit:t}){const r=l=>new Date(l).toLocaleDateString("tr-TR"),s=l=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(l),n=l=>{switch(l){case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"paid":return"bg-purple-100 text-purple-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},i=l=>{switch(l){case"draft":return"Taslak";case"sent":return"Gnderildi";case"approved":return"Onayland";case"rejected":return"Reddedildi";case"paid":return"dendi";case"cancelled":return"ptal";default:return l}};return a.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[a.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Al Faturas #",e.purchaseNumber]}),a.jsxs("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:[r(e.createdAt)," tarihinde oluturuldu"]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n(e.status)}`,children:i(e.status)}),a.jsx(Z,{onClick:t,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",variant:"default",children:"Dzenle"})]})]})}),a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Tedariki Bilgileri"}),a.jsxs("dl",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tedariki Ad"}),a.jsx("dd",{className:"text-sm text-gray-900",children:e.supplierName})]}),e.supplierTaxNumber&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Vergi No"}),a.jsx("dd",{className:"text-sm text-gray-900",children:e.supplierTaxNumber})]}),e.supplierAddress&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Adres"}),a.jsx("dd",{className:"text-sm text-gray-900",children:e.supplierAddress})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Fatura Bilgileri"}),a.jsxs("dl",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Fatura Tarihi"}),a.jsx("dd",{className:"text-sm text-gray-900",children:r(e.issueDate)})]}),e.dueDate&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Vade Tarihi"}),a.jsx("dd",{className:"text-sm text-gray-900",children:r(e.dueDate)})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Toplam Tutar"}),a.jsx("dd",{className:"text-sm text-gray-900 font-medium",children:s(e.grandTotal)})]})]})]})]}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Fatura Kalemleri"}),a.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"rn/Hizmet"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Miktar"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Birim Fiyat"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"KDV"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Toplam"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.items.map(l=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.name}),l.description&&a.jsx("div",{className:"text-sm text-gray-500",children:l.description})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.quantity}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s(l.unitPrice)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["%",l.taxRate]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s(l.totalPrice)})]},l.id))})]})})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("div",{className:"w-full max-w-sm",children:a.jsxs("dl",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{className:"text-sm text-gray-600",children:"Ara Toplam:"}),a.jsx("dd",{className:"text-sm text-gray-900",children:s(e.subtotal)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("dt",{className:"text-sm text-gray-600",children:"KDV:"}),a.jsx("dd",{className:"text-sm text-gray-900",children:s(e.taxTotal)})]}),a.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[a.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Genel Toplam:"}),a.jsx("dd",{className:"text-base font-medium text-gray-900",children:s(e.grandTotal)})]})]})})}),e.notes&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Notlar"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.notes})]})]})]})}const qG=Or("/invoices/purchases")({component:WG}),XG=Or("/invoices/new")({component:QG});function QG(){return a.jsx(x_,{initialViewMode:"form"})}const ZG=yF.update({id:"/uts",path:"/uts",getParentRoute:()=>Da}),JG=f$.update({id:"/test",path:"/test",getParentRoute:()=>Da}),eW=p$.update({id:"/reports",path:"/reports",getParentRoute:()=>Da}),hv=tU.update({id:"/patients",path:"/patients",getParentRoute:()=>Da}),am=rU.update({id:"/invoices",path:"/invoices",getParentRoute:()=>Da}),tW=aU.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Da}),rW=FH.update({id:"/appointments",path:"/appointments",getParentRoute:()=>Da}),sW=UH.update({id:"/",path:"/",getParentRoute:()=>Da}),aW=oK.update({id:"/sgk/",path:"/sgk/",getParentRoute:()=>Da}),nW=DK.update({id:"/",path:"/",getParentRoute:()=>hv}),iW=AK.update({id:"/",path:"/",getParentRoute:()=>am}),lW=RK.update({id:"/sgk/downloads",path:"/sgk/downloads",getParentRoute:()=>Da}),oW=VG.update({id:"/$patientId",path:"/$patientId",getParentRoute:()=>hv}),cW=qG.update({id:"/purchases",path:"/purchases",getParentRoute:()=>am}),dW=XG.update({id:"/new",path:"/new",getParentRoute:()=>am}),uW={InvoicesNewRoute:dW,InvoicesPurchasesRoute:cW,InvoicesIndexRoute:iW},hW=am._addFileChildren(uW),fW={PatientsPatientIdRoute:oW,PatientsIndexRoute:nW},mW=hv._addFileChildren(fW),xW={IndexRoute:sW,AppointmentsRoute:rW,InventoryRoute:tW,InvoicesRoute:hW,PatientsRoute:mW,ReportsRoute:eW,TestRoute:JG,UtsRoute:ZG,SgkDownloadsRoute:lW,SgkIndexRoute:aW},pW=Da._addFileChildren(xW)._addFileTypes(),w_="",Md={timeout:15e3,maxRedirects:3,maxContentLength:50*1024*1024,maxSockets:10,maxFreeSockets:5,keepAlive:!0,keepAliveMsecs:3e4},N_=ge.create({baseURL:w_,timeout:Md.timeout,headers:{"Content-Type":"application/json"},maxRedirects:Md.maxRedirects,maxContentLength:Md.maxContentLength});async function k_(e){var t;try{const r={method:((t=e.method)==null?void 0:t.toUpperCase())||"GET",endpoint:`${e.url}`,data:e.data,headers:e.headers,priority:"normal"};await _t.addOperation(r),window.dispatchEvent(new CustomEvent("api:queued",{detail:{config:e}}))}catch(r){console.error("Failed to queue offline request:",r)}}function j_(e,t){const r=new Error("Resource limit exceeded. Please try again in a moment.");return r.name="ResourceError",r.retryAfter=5e3,r.originalError=e,console.warn("Resource constraint detected:",{url:t.url,method:t.method,error:e.code||e.message}),r}N_.interceptors.request.use(e=>{const t=localStorage.getItem(ov);if(t&&(e.headers.Authorization=`Bearer ${t}`),e.method&&!["get","head","options"].includes(e.method.toLowerCase())){const s=e.headers["Idempotency-Key"]||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e.headers["Idempotency-Key"]=s}const r=`req-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return e.headers["X-Request-ID"]=r,e},e=>Promise.reject(e));N_.interceptors.response.use(e=>e,async e=>{var r,s;const t=e.config;if(e.code==="ERR_INSUFFICIENT_RESOURCES"||e.code==="ECONNRESET"||e.code==="ENOTFOUND"||((r=e.response)==null?void 0:r.status)===429||((s=e.response)==null?void 0:s.status)===503)return Promise.reject(j_(e,t));if(!e.response&&e.code==="ERR_NETWORK"){console.warn("Network error detected, queuing request for offline processing"),await k_(t);const n=new Error("Request queued for offline processing");return n.name="OfflineError",Promise.reject(n)}return Promise.reject(e)});ge.defaults.baseURL=w_;ge.defaults.timeout=Md.timeout;ge.defaults.headers.common["Content-Type"]="application/json";ge.defaults.maxRedirects=Md.maxRedirects;ge.interceptors.request.use(e=>{const t=localStorage.getItem(ov);if(t&&(e.headers.Authorization=`Bearer ${t}`),e.method&&!["get","head","options"].includes(e.method.toLowerCase())){const s=e.headers["Idempotency-Key"]||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e.headers["Idempotency-Key"]=s}const r=`req-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return e.headers["X-Request-ID"]=r,e},e=>Promise.reject(e));ge.interceptors.response.use(e=>e,async e=>{var r,s;const t=e.config;if(e.code==="ERR_INSUFFICIENT_RESOURCES"||e.code==="ECONNRESET"||e.code==="ENOTFOUND"||((r=e.response)==null?void 0:r.status)===429||((s=e.response)==null?void 0:s.status)===503)return Promise.reject(j_(e,t));if(!e.response&&e.code==="ERR_NETWORK"){console.warn("Network error detected, queuing request for offline processing"),await k_(t);const n=new Error("Request queued for offline processing");return n.name="OfflineError",Promise.reject(n)}return Promise.reject(e)});const gW=MA({routeTree:pW});function Z2(){const e=new w3({defaultOptions:{queries:{staleTime:6e5,gcTime:36e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:(t,r)=>{var s;if(r&&typeof r=="object"&&"response"in r){const n=r;if((s=n.response)!=null&&s.status&&n.response.status>=400&&n.response.status<500)return!1}return t<2},retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:(t,r)=>{var s;if(r&&typeof r=="object"&&"response"in r){const n=r;if((s=n.response)!=null&&s.status&&n.response.status>=400&&n.response.status<500)return!1}return t<1}}}});return a.jsx(ca,{children:a.jsx(N3,{client:e,children:a.jsx(Z5,{children:a.jsx(sR,{children:a.jsxs(pP,{children:[a.jsx(BA,{router:gW}),a.jsx(M3,{initialIsOpen:!1})]})})})})})}const yW=[{from:"auth_token",to:ov,version:"v1"},{from:"token",to:C2,version:"v1"},{from:"jwt",to:C2,version:"v1"},{from:"xear_access_token",to:U$,version:"v1"},{from:"refresh_token",to:g$,version:"v1"},{from:"user_session",to:y$,version:"v1"},{from:"currentUser",to:E2,version:"v1"},{from:"currentUserId",to:E2,transform:e=>({id:e,timestamp:Date.now()}),version:"v1"},{from:"sidebar_collapsed",to:v2,transform:e=>({collapsed:e,timestamp:Date.now()}),version:"v1"},{from:"sidebarCollapsed",to:v2,transform:e=>({collapsed:e==="true",timestamp:Date.now()}),version:"v1"},{from:"sgkSubmenuExpanded",to:B$,transform:e=>e==="true",version:"v1"},{from:"faturaSubmenuExpanded",to:z$,transform:e=>e==="true",version:"v1"},{from:"reportsSubmenuExpanded",to:$$,transform:e=>e==="true",version:"v1"},{from:"theme_preference",to:v$,version:"v1"},{from:"systemSettings",to:O$,version:"v1"},{from:"xear_patients_data",to:ld,version:"v1"},{from:"xear_patients",to:N2,version:"v1"},{from:"patients",to:N2,version:"v1"},{from:"xear_crm_patients",to:N$,version:"v1"},{from:"patient_documents",to:k2,version:"v1"},{from:"xear_patients_documents",to:k2,version:"v1"},{from:"xear_saved_views",to:I$,version:"v1"},{from:"appointments",to:dh,version:"v1"},{from:"appointmentFilterPresets",to:T$,version:"v1"},{from:"sgkData",to:ch,version:"v1"},{from:"sgk_documents",to:Rd,version:"v1"},{from:"xear_sgk_documents",to:Rd,version:"v1"},{from:"sgk_reports",to:_$,version:"v1"},{from:"unmatched_documents",to:j$,version:"v1"},{from:"background_processing_status",to:L$,version:"v1"},{from:"inventoryData",to:S2,version:"v1"},{from:"xear_crm_inventory",to:S2,version:"v1"},{from:"inventoryFilterPreset",to:S$,version:"v1"},{from:"cashRecords",to:j2,version:"v1"},{from:"dashboardCashRecords",to:j2,version:"v1"},{from:"incomeRecordTypes",to:E$,version:"v1"},{from:"expenseRecordTypes",to:C$,version:"v1"},{from:"sms_messages",to:k$,version:"v1"},{from:"smsLogs",to:R$,version:"v1"},{from:"notifications",to:A$,version:"v1"},{from:"automationRules",to:P$,version:"v1"},{from:"automationLogs",to:F$,version:"v1"},{from:"xear_deviceMaintenance",to:D$,version:"v1"},{from:"ocrDynamicNames",to:M$,version:"v1"},{from:"patient_form_draft",to:b$,version:"v1"},{from:"appointment_form_draft",to:w$,version:"v1"},{from:"patients_cache",to:w2+".patients",version:"v1"},{from:"appointments_cache",to:w2+".appointments",version:"v1"}],tl=class tl{constructor(){qe(this,"migrationVersion","storage_migration_v1")}static getInstance(){return tl.instance||(tl.instance=new tl),tl.instance}async migrate(){if(localStorage.getItem(this.migrationVersion))return;console.log(" Starting storage migration...");let r=0;for(const s of yW)this.migrateKey(s)&&r++;localStorage.setItem(this.migrationVersion,JSON.stringify({completed:!0,timestamp:Date.now(),migratedKeys:r})),console.log(` Storage migration completed. Migrated ${r} keys.`)}migrateKey(t){const r=localStorage.getItem(t.from);if(r===null)return!1;try{let s=r;if(t.transform){const n=JSON.parse(r);s=JSON.stringify(t.transform(n))}return localStorage.setItem(t.to,s),localStorage.removeItem(t.from),console.log(` Migrated: ${t.from}  ${t.to}`),!0}catch(s){return console.error(` Failed to migrate ${t.from}:`,s),!1}}getMigrationStatus(){const t=localStorage.getItem(this.migrationVersion);if(!t)return{completed:!1};try{return JSON.parse(t)}catch{return{completed:!1}}}resetMigration(){localStorage.removeItem(this.migrationVersion),console.log(" Migration status reset")}};qe(tl,"instance");let tg=tl;const vW=tg.getInstance();vW.migrate().then(()=>{uh.createRoot(document.getElementById("root")).render(a.jsx(bt.StrictMode,{children:a.jsx(Z2,{})}))}).catch(e=>{console.error("Storage migration failed:",e),uh.createRoot(document.getElementById("root")).render(a.jsx(bt.StrictMode,{children:a.jsx(Z2,{})}))});export{pf as _,Ij as a,__ as c,sg as g};
//# sourceMappingURL=index-28d0ec24.js.map
