openapi: 3.0.3
info:
  title: X-Ear CRM API (auto-generated)
  version: 0.0.0-auto
servers:
- url: http://localhost:5003
paths:
  /api/EFatura/sendBasicInvoice:
    post:
      summary: POST /api/EFatura/sendBasicInvoice
      operationId: birfatura_bp_send_basic_invoice
      tags:
      - Efatura
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/EFatura/sendDocument:
    post:
      summary: POST /api/EFatura/sendDocument
      operationId: birfatura_bp_send_document
      tags:
      - Efatura
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/DocumentDownloadByUUID:
    post:
      summary: Proxy for Birfatura DocumentDownloadByUUID.
      description: In mock mode, returns document from local inbox by UUID.
      operationId: birfatura_bp_out_document_download_by_uuid
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/GetInBoxDocuments:
    post:
      summary: Proxy for Birfatura GetInBoxDocuments.
      description: In mock mode, reads from local inbox directory and returns parsed
        invoice list.
      operationId: birfatura_bp_out_get_inbox_documents
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/GetInBoxDocumentsWithDetail:
    post:
      summary: Proxy for Birfatura GetInBoxDocumentsWithDetail.
      description: In mock mode, returns invoice list with jsonData (XML content).
      operationId: birfatura_bp_out_get_inbox_documents_with_detail
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/PreviewDocumentReturnPDF:
    post:
      summary: Proxy for Birfatura PreviewDocumentReturnPDF.
      description: In mock mode, generates PDF from provided XML.
      operationId: birfatura_bp_out_preview_document_return_pdf
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/ReceiveDocument:
    post:
      summary: 'Simple inbox simulator endpoint: accepts JSON with `xml` or `documentBase64`
        (or raw body)'
      description: and writes the XML to `instance/birfatura_inbox/` with a provided
        `filename` or timestamped name.
      operationId: birfatura_bp_out_receive_document
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/SendBasicInvoiceFromModel:
    post:
      summary: POST /api/OutEBelgeV2/SendBasicInvoiceFromModel
      operationId: birfatura_bp_out_send_basic_invoice_from_model
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/SendDocument:
    post:
      summary: POST /api/OutEBelgeV2/SendDocument
      operationId: birfatura_bp_out_send_document
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/activity-logs:
    get:
      summary: Get Activity Logs
      tags:
      - Admin
      parameters:
      - name: entity_type
        in: query
        schema:
          type: string
      - name: entity_id
        in: query
        schema:
          type: string
      - name: user_id
        in: query
        schema:
          type: string
      - name: limit
        in: query
        schema:
          type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ActivityLog'
                  count:
                    type: integer
  /api/activity-logs/{log_id}:
    get:
      summary: Get a single activity log entry with full details
      operationId: activity_logs_get_activity_log_detail
      tags:
      - Activity-logs
      parameters:
      - name: log_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/activity-logs/filter-options:
    get:
      summary: Get available filter options for activity logs
      operationId: activity_logs_get_filter_options
      tags:
      - Activity-logs
      responses:
        '200':
          description: Success
  /api/addons:
    get:
      summary: Get all active addons (Public)
      operationId: addons_get_addons
      tags:
      - Addons
      responses:
        '200':
          description: Success
  /api/admin/activity-logs:
    get:
      summary: Get all activity logs for platform admin.
      description: 'Query params:

        page: int - Page number (default 1)

        page_size: int - Items per page (default 20, max 100)

        tenant_id: str - Filter by tenant

        branch_id: str - Filter by branch

        user_id: str - Filter by user

        role: str - Filter by role

        action: str - Filter by exact action

        action_type: str - Filter by action prefix (e.g., "patient", "invoice")

        date_from: str - ISO date string

        date_to: str - ISO date string

        critical_only: bool - Only show critical actions

        search: str - Search in message, action, entity_id

        Returns:

        {

        success: true,

        data: {

        logs: [...],

        meta: { total, page, pageSize, totalPages }

        }

        }'
      operationId: activity_logs_admin_get_activity_logs
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/activity-logs/filter-options:
    get:
      summary: Get filter options for admin panel activity logs
      operationId: activity_logs_admin_get_filter_options
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/activity-logs/stats:
    get:
      summary: Get activity statistics for platform admin.
      description: Returns action counts, top users, etc.
      operationId: activity_logs_admin_get_activity_stats
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/addons:
    post:
      summary: Create a new add-on
      operationId: admin_addons_create_addon
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/addons/{addon_id}:
    delete:
      summary: Delete add-on (soft delete by setting is_active=False)
      operationId: admin_addons_delete_addon
      tags:
      - Admin
      parameters:
      - name: addon_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/admin-users:
    get:
      summary: "Admin kullan\u0131c\u0131lar\u0131 rolleriyle birlikte listele"
      operationId: admin_roles_get_admin_users_with_roles
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/admin-users/{user_id}:
    get:
      summary: "Admin kullan\u0131c\u0131 detay\u0131"
      operationId: admin_roles_get_admin_user_detail
      tags:
      - Admin
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/admin-users/{user_id}/roles:
    put:
      summary: "Kullan\u0131c\u0131ya rol ata"
      description: "Body:\nrole_ids: list[str] - Rol ID'leri\nNot: admin@x-ear.com\
        \ kullan\u0131c\u0131s\u0131ndan SuperAdmin rol\xFC kald\u0131r\u0131lamaz"
      operationId: admin_roles_update_admin_user_roles
      tags:
      - Admin
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/analytics:
    get:
      summary: Get admin analytics data
      operationId: admin_analytics_get_admin_analytics
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/api-keys:
    post:
      summary: Create a new API key
      operationId: admin_api_keys_create_api_key
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/api-keys/{key_id}:
    delete:
      summary: Revoke (delete) an API key
      operationId: admin_api_keys_revoke_api_key
      tags:
      - Admin
      parameters:
      - name: key_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/api-keys/init-db:
    post:
      summary: Initialize API Key table
      operationId: admin_api_keys_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/appointments:
    get:
      summary: Get list of ALL appointments from ALL tenants
      operationId: admin_appointments_get_all_appointments
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/auth/login:
    post:
      summary: Admin login endpoint
      operationId: admin_admin_login
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/birfatura/invoices:
    get:
      summary: Get invoices with BirFatura status
      operationId: admin_birfatura_get_invoices
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/birfatura/logs:
    get:
      summary: Get BirFatura related logs
      operationId: admin_birfatura_get_logs
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/birfatura/stats:
    get:
      summary: Get BirFatura statistics
      operationId: admin_birfatura_get_stats
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/dashboard/metrics:
    get:
      summary: Get dashboard metrics
      operationId: admin_dashboard_get_dashboard_metrics
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/debug/available-roles:
    get:
      summary: Get all available roles for debugging.
      description: Only available to admin@x-ear.com user.
      operationId: admin_debug_available_roles
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/debug/page-permissions/{page_key}:
    get:
      summary: Get permissions for a specific page based on the effective role.
      description: Only available to admin@x-ear.com user.
      operationId: admin_debug_page_permissions
      tags:
      - Admin
      parameters:
      - name: page_key
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/debug/switch-role:
    post:
      summary: Switch to a different role for debugging purposes.
      description: 'Only available to admin@x-ear.com user.

        Returns a new JWT with the selected role''s permissions.'
      operationId: admin_debug_switch_role
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/features:
    patch:
      summary: 'Patch feature flags. Body: { features: { ''integrations_ui'': true
        } }'
      description: 'Authorization: user must have `settings.update` or `features.toggle`.'
      operationId: admin_patch_features
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/integrations/birfatura/config:
    put:
      summary: Update BirFatura integration configuration
      operationId: admin_integrations_update_birfatura_config
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/integrations/init-db:
    post:
      summary: Initialize integration config tables
      operationId: admin_integrations_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/integrations/vatan-sms/config:
    put:
      summary: Update VatanSMS integration configuration
      operationId: admin_integrations_update_vatan_sms_config
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/inventory:
    get:
      summary: Get list of ALL devices/inventory from ALL tenants
      operationId: admin_inventory_get_all_inventory
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/invoices:
    post:
      summary: POST /api/admin/invoices
      operationId: admin_invoices_create_admin_invoice
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/invoices/{id}:
    get:
      summary: GET /api/admin/invoices/{id}
      operationId: admin_invoices_get_admin_invoice
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/invoices/{id}/payment:
    post:
      summary: POST /api/admin/invoices/{id}/payment
      operationId: admin_invoices_record_payment
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/invoices/{id}/pdf:
    get:
      summary: GET /api/admin/invoices/{id}/pdf
      operationId: admin_invoices_get_invoice_pdf
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/marketplaces/init-db:
    post:
      summary: Initialize Marketplace tables
      operationId: admin_marketplaces_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/marketplaces/integrations:
    post:
      summary: Create a new marketplace integration
      operationId: admin_marketplaces_create_integration
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/marketplaces/integrations/{id}/sync:
    post:
      summary: Trigger sync for an integration (Mock)
      operationId: admin_marketplaces_sync_integration
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/my-permissions:
    get:
      summary: "Mevcut admin kullan\u0131c\u0131s\u0131n\u0131n izinlerini d\xF6nd\xFC\
        r\xFCr."
      description: "Frontend i\xE7in - sidebar, buton gizleme vb."
      operationId: admin_roles_get_my_admin_permissions
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/notifications:
    get:
      summary: Get list of notifications
      operationId: admin_notifications_get_notifications
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/notifications/init-db:
    post:
      summary: Initialize notification tables
      operationId: admin_notifications_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/notifications/send:
    post:
      summary: Send a notification to tenants
      operationId: admin_notifications_send_notification
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/notifications/templates:
    post:
      summary: Create a new notification template
      operationId: admin_notifications_create_template
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/notifications/templates/{template_id}:
    delete:
      summary: Delete a notification template
      operationId: admin_notifications_delete_template
      tags:
      - Admin
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/patients:
    get:
      summary: Get list of ALL patients from ALL tenants
      operationId: admin_patients_get_all_patients
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/permissions:
    get:
      summary: "T\xFCm izinleri listele"
      description: "Query params:\ncategory: str - Kategoriye g\xF6re filtrele"
      operationId: admin_roles_get_admin_permissions
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/permissions/check/{endpoint_path}:
    get:
      summary: "Belirli bir endpoint i\xE7in gerekli permission'\u0131 d\xF6nd\xFC\
        r\xFCr."
      operationId: permission_admin_check_endpoint_permission
      tags:
      - Admin
      parameters:
      - name: endpoint_path
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/permissions/coverage:
    get:
      summary: "Permission coverage raporunu d\xF6nd\xFCr\xFCr."
      operationId: permission_admin_get_permission_coverage
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/permissions/map:
    get:
      summary: "T\xFCm endpoint-permission mapping'ini d\xF6nd\xFCr\xFCr."
      operationId: permission_admin_get_permission_map
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/plans:
    post:
      summary: Create a new plan
      operationId: admin_plans_create_plan
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/plans/{plan_id}:
    delete:
      summary: Delete plan (soft delete by setting is_active=False)
      operationId: admin_plans_delete_plan
      tags:
      - Admin
      parameters:
      - name: plan_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/production/init-db:
    post:
      summary: Initialize Production Orders table
      operationId: admin_production_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/production/orders:
    get:
      summary: Get production orders
      operationId: admin_production_get_orders
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/production/orders/{id}/status:
    put:
      summary: Update order status
      operationId: admin_production_update_order_status
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/roles:
    post:
      summary: "Yeni rol olu\u015Ftur"
      description: "Body:\nname: str - Rol ad\u0131 (unique)\ndescription: str - A\xE7\
        \u0131klama\npermissions: list[str] - \u0130zin kodlar\u0131"
      operationId: admin_roles_create_admin_role
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/roles/{role_id}:
    delete:
      summary: Rol sil
      description: 'Not: System role''ler silinemez'
      operationId: admin_roles_delete_admin_role
      tags:
      - Admin
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/roles/{role_id}/permissions:
    put:
      summary: "Rol izinlerini g\xFCncelle"
      description: "Body:\npermissions: list[str] - \u0130zin kodlar\u0131\nNot: SuperAdmin\
        \ rol\xFCn\xFCn izinleri de\u011Fi\u015Ftirilemez"
      operationId: admin_roles_update_admin_role_permissions
      tags:
      - Admin
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/scan-queue:
    get:
      summary: Get scan queue items
      operationId: admin_scan_queue_get_scan_queue
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/scan-queue/{id}/retry:
    post:
      summary: Retry a failed scan
      operationId: admin_scan_queue_retry_scan
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/scan-queue/init-db:
    post:
      summary: Initialize Scan Queue table
      operationId: admin_scan_queue_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings:
    post:
      summary: Update system settings
      operationId: admin_settings_update_settings
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings/backup:
    post:
      summary: Trigger database backup (Mock)
      operationId: admin_settings_trigger_backup
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings/cache/clear:
    post:
      summary: Clear system cache (Mock)
      operationId: admin_settings_clear_cache
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings/init-db:
    post:
      summary: Initialize System Settings table
      operationId: admin_settings_init_db
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/sms/headers:
    get:
      summary: Admin List SMS Headers
      tags:
      - Sms
      parameters:
      - name: status
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/SMSHeaderRequest'
  /api/admin/sms/headers/{header_id}/status:
    put:
      summary: Admin Update SMS Header Status
      tags:
      - Sms
      parameters:
      - name: header_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - status
              properties:
                status:
                  type: string
                  enum:
                  - pending
                  - approved
                  - rejected
                rejectionReason:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SMSHeaderRequest'
  /api/admin/sms/packages:
    get:
      summary: Admin List SMS Packages
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/SMSPackage'
    post:
      summary: Admin Create SMS Package
      tags:
      - Sms
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              - smsCount
              - price
              properties:
                name:
                  type: string
                description:
                  type: string
                smsCount:
                  type: integer
                price:
                  type: number
                currency:
                  type: string
                isActive:
                  type: boolean
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SMSPackage'
  /api/admin/sms/packages/{pkg_id}:
    put:
      summary: Admin Update SMS Package
      tags:
      - Sms
      parameters:
      - name: pkg_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                smsCount:
                  type: integer
                price:
                  type: number
                isActive:
                  type: boolean
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SMSPackage'
  /api/admin/tenants:
    post:
      summary: Create tenant
      operationId: admin_tenants_create_tenant
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}:
    delete:
      summary: Delete tenant (soft delete)
      operationId: admin_tenants_delete_tenant
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/tenants/{tenant_id}/addons:
    post:
      summary: Add addon to tenant (Admin override)
      operationId: admin_tenants_add_tenant_addon
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/status:
    put:
      summary: Update tenant status
      operationId: admin_tenants_update_tenant_status
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tenants/{tenant_id}/subscribe:
    post:
      summary: Subscribe tenant to a plan (Admin override)
      operationId: admin_tenants_subscribe_tenant
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/users:
    post:
      summary: Create a user for a specific tenant
      operationId: admin_tenants_create_tenant_user
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/users/{user_id}:
    put:
      summary: Update a tenant user
      operationId: admin_tenants_update_tenant_user
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tickets:
    post:
      summary: POST /api/admin/tickets
      operationId: admin_tickets_create_admin_ticket
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tickets/{id}:
    put:
      summary: PUT /api/admin/tickets/{id}
      operationId: admin_tickets_update_admin_ticket
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tickets/{ticket_id}:
    put:
      summary: Update support ticket (placeholder)
      operationId: admin_update_admin_ticket
      tags:
      - Admin
      parameters:
      - name: ticket_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tickets/{ticket_id}/responses:
    post:
      summary: Create response for support ticket (placeholder)
      operationId: admin_create_ticket_response
      tags:
      - Admin
      parameters:
      - name: ticket_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/users:
    get:
      summary: Get list of admin users
      operationId: admin_get_admin_users
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/users/all:
    get:
      summary: Get list of ALL users from ALL tenants
      operationId: admin_get_all_tenant_users
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/users/all/{user_id}:
    put:
      summary: Update any tenant user (Admin Panel)
      operationId: admin_update_any_tenant_user
      tags:
      - Admin
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/appointments:
    post:
      summary: POST /api/appointments
      operationId: appointments_create_appointment
      tags:
      - Appointments
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/appointments/{appointment_id}:
    delete:
      summary: DELETE /api/appointments/{appointment_id}
      operationId: appointments_delete_appointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/appointments/{appointment_id}/cancel:
    post:
      summary: POST /api/appointments/{appointment_id}/cancel
      operationId: appointments_cancel_appointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/appointments/{appointment_id}/complete:
    post:
      summary: POST /api/appointments/{appointment_id}/complete
      operationId: appointments_complete_appointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/appointments/{appointment_id}/reschedule:
    post:
      summary: POST /api/appointments/{appointment_id}/reschedule
      operationId: appointments_reschedule_appointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/appointments/availability:
    get:
      summary: GET /api/appointments/availability
      operationId: appointments_get_availability
      tags:
      - Appointments
      responses:
        '200':
          description: Success
  /api/appointments/list:
    get:
      summary: GET /api/appointments/list
      operationId: appointments_list_appointments
      tags:
      - Appointments
      responses:
        '200':
          description: Success
  /api/auth/forgot-password:
    post:
      summary: POST /api/auth/forgot-password
      operationId: auth_forgot_password
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/auth/login:
    post:
      summary: POST /api/auth/login
      operationId: auth_login
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/auth/refresh:
    post:
      summary: Refresh access token using refresh token
      operationId: auth_refresh
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/auth/send-verification-otp:
    post:
      summary: Send OTP to the user's phone number (requires pre-auth token)
      operationId: auth_send_verification_otp
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/auth/verify-otp:
    post:
      summary: POST /api/auth/verify-otp
      operationId: auth_verify_otp
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/automation/backup:
    post:
      summary: Trigger system backup
      operationId: automation_trigger_backup
      tags:
      - Automation
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/automation/logs:
    get:
      summary: Get automation logs
      operationId: automation_get_automation_logs
      tags:
      - Automation
      responses:
        '200':
          description: Success
  /api/automation/sgk/process:
    post:
      summary: Trigger SGK document processing
      operationId: automation_trigger_sgk_processing
      tags:
      - Automation
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/automation/status:
    get:
      summary: Get automation system status
      operationId: automation_get_automation_status
      tags:
      - Automation
      responses:
        '200':
          description: Success
  /api/birfatura/inbox/file:
    get:
      summary: Return raw XML or rendered PDF for a given inbox filename.
      description: 'Query params:

        - name: filename in the inbox directory (required)

        - format: ''xml'' (default) or ''pdf'''
      operationId: birfatura_bp_birfatura_inbox_file
      tags:
      - Birfatura
      responses:
        '200':
          description: Success
  /api/birfatura/inbox/list:
    get:
      summary: List files saved in the birfatura_inbox directory.
      operationId: birfatura_bp_birfatura_inbox_list
      tags:
      - Birfatura
      responses:
        '200':
          description: Success
  /api/birfatura/sync-invoices:
    post:
      summary: Sync invoices from BirFatura
      operationId: birfatura_sync_invoices
      tags:
      - BirFatura
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                start_date:
                  type: string
                  format: date-time
                end_date:
                  type: string
                  format: date-time
      responses:
        '200':
          description: Success
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/branches:
    post:
      summary: POST /api/branches
      operationId: branches_create_branch
      tags:
      - Branches
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/branches/{branch_id}:
    delete:
      summary: DELETE /api/branches/{branch_id}
      operationId: branches_delete_branch
      tags:
      - Branches
      parameters:
      - name: branch_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/campaigns:
    get:
      summary: Get Campaigns
      tags:
      - Campaigns
      parameters:
      - name: page
        in: query
        schema:
          type: integer
      - name: per_page
        in: query
        schema:
          type: integer
      - name: status
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Campaign'
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      perPage:
                        type: integer
                      totalPages:
                        type: integer
    post:
      summary: Create Campaign
      tags:
      - Campaigns
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              - messageTemplate
              properties:
                name:
                  type: string
                description:
                  type: string
                targetSegment:
                  type: string
                  enum:
                  - all
                  - filter
                  - excel
                targetCriteria:
                  type: object
                messageTemplate:
                  type: string
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
  /api/campaigns/{campaign_id}/send:
    post:
      summary: Send Campaign
      tags:
      - Campaigns
      parameters:
      - name: campaign_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                senderId:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
  /api/cash-records:
    post:
      summary: Create a new cash record from cashflow.html form submission.
      operationId: cash_records_create_cash_record
      tags:
      - Cash-records
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/cash-records/{record_id}:
    delete:
      summary: Delete a cash record by ID.
      operationId: cash_records_delete_cash_record
      tags:
      - Cash-records
      parameters:
      - name: record_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/checkout/confirm:
    post:
      summary: Mock endpoint to confirm a payment (simulating a webhook or successful
        callback).
      operationId: checkout_confirm_payment
      tags:
      - Checkout
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/checkout/session:
    post:
      summary: Initiates a checkout session for a plan purchase.
      description: 'In a real scenario, this would create a Stripe Checkout Session.

        For now, it simulates the process and returns a success URL or mock payment
        data.'
      operationId: checkout_create_checkout_session
      tags:
      - Checkout
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/communications/history:
    post:
      summary: Create a manual communication history entry
      operationId: communications_create_communication_history
      tags:
      - Communications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/communications/messages:
    get:
      summary: List all communication messages (SMS and Email) with filtering
      operationId: communications_list_messages
      tags:
      - Communications
      responses:
        '200':
          description: Success
  /api/communications/messages/send-email:
    post:
      summary: Send Email message
      operationId: communications_send_email
      tags:
      - Communications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/communications/messages/send-sms:
    post:
      summary: Send SMS message
      operationId: communications_send_sms
      tags:
      - Communications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/communications/stats:
    get:
      summary: Get communication statistics
      operationId: communications_communication_stats
      tags:
      - Communications
      responses:
        '200':
          description: Success
  /api/communications/templates:
    get:
      summary: List Communication Templates
      operationId: communications_list_templates
      tags:
      - Communications
      parameters:
      - name: page
        in: query
        schema:
          type: integer
      - name: per_page
        in: query
        schema:
          type: integer
      - name: type
        in: query
        schema:
          type: string
      - name: category
        in: query
        schema:
          type: string
      - name: is_active
        in: query
        schema:
          type: string
      - name: search
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CommunicationTemplate'
                  meta:
                    type: object
    post:
      summary: Create Communication Template
      operationId: communications_create_template
      tags:
      - Communications
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommunicationTemplateCreateBody'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunicationTemplate'
  /api/communications/templates/{template_id}:
    get:
      summary: Get Communication Template
      operationId: communications_get_template
      tags:
      - Communications
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunicationTemplate'
    put:
      summary: Update Communication Template
      operationId: communications_update_template
      tags:
      - Communications
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommunicationTemplateCreateBody'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommunicationTemplate'
    delete:
      summary: Delete Communication Template
      operationId: communications_delete_template
      tags:
      - Communications
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
  /api/config:
    get:
      summary: GET /api/config
      operationId: config_get_config
      tags:
      - Config
      responses:
        '200':
          description: Success
  /api/config/turnstile:
    get:
      summary: GET /api/config/turnstile
      operationId: registration_get_turnstile_config
      tags:
      - Config
      responses:
        '200':
          description: Success
  /api/dashboard:
    get:
      summary: Main dashboard endpoint that returns all dashboard data
      operationId: dashboard_get_dashboard
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/dashboard/charts/patient-distribution:
    get:
      summary: GET /api/dashboard/charts/patient-distribution
      operationId: dashboard_patient_distribution
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/dashboard/charts/patient-trends:
    get:
      summary: GET /api/dashboard/charts/patient-trends
      operationId: dashboard_patient_trends
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/dashboard/charts/revenue-trends:
    get:
      summary: GET /api/dashboard/charts/revenue-trends
      operationId: dashboard_revenue_trends
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/dashboard/kpis:
    get:
      summary: GET /api/dashboard/kpis
      operationId: dashboard_get_kpis
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/dashboard/recent-activity:
    get:
      summary: GET /api/dashboard/recent-activity
      operationId: dashboard_recent_activity
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/device-assignments/{assignment_id}:
    patch:
      summary: Update a device assignment (e.g., cancel, update serial numbers, pricing)
      operationId: sales_update_device_assignment
      tags:
      - Device-assignments
      parameters:
      - name: assignment_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/devices:
    post:
      summary: Create a new device
      operationId: devices_create_device
      tags:
      - Devices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/devices/{device_id}:
    delete:
      summary: Delete a device
      operationId: devices_delete_device
      tags:
      - Devices
      parameters:
      - name: device_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/devices/{device_id}/stock-update:
    post:
      summary: Update device stock levels (simplified).
      description: "This endpoint is intentionally permissive for tests \u2014 real\
        \ inventory logic\nshould live in a dedicated inventory table/service."
      operationId: devices_update_device_stock
      tags:
      - Devices
      parameters:
      - name: device_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/devices/brands:
    post:
      summary: Create a new device brand by creating a placeholder device
      operationId: devices_create_device_brand
      tags:
      - Devices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/devices/categories:
    get:
      summary: Get available device categories
      operationId: devices_get_device_categories
      tags:
      - Devices
      responses:
        '200':
          description: Success
  /api/devices/low-stock:
    get:
      summary: Get devices with low stock levels
      operationId: devices_get_low_stock_devices
      tags:
      - Devices
      responses:
        '200':
          description: Success
  /api/health:
    get:
      summary: Health endpoint exposing overall status and DB read/write check results.
      description: Returns 200 when read+write ok, 503 when write fails, and 500 when
        other errors occur.
      operationId: health_check
      tags:
      - Health
      responses:
        '200':
          description: Success
  /api/inventory:
    get:
      summary: Get all inventory items with optional filtering
      operationId: inventory_get_all_inventory
      tags:
      - Inventory
      parameters:
      - name: category
        in: query
        schema:
          type: string
      - name: search
        in: query
        schema:
          type: string
      - name: lowStock
        in: query
        schema:
          type: boolean
      - name: page
        in: query
        schema:
          type: integer
      - name: per_page
        in: query
        schema:
          type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/InventoryItem'
                      total:
                        type: integer
                      page:
                        type: integer
                      perPage:
                        type: integer
                      totalPages:
                        type: integer
  /api/inventory/{item_id}:
    delete:
      summary: Delete an inventory item
      operationId: inventory_delete_inventory_item
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/inventory/{item_id}/activity:
    get:
      summary: Get activity log for an inventory item
      operationId: inventory_get_inventory_activities
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/inventory/{item_id}/assign:
    post:
      summary: Assign inventory item to a patient (reduces stock)
      operationId: inventory_assign_to_patient
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/{item_id}/serials:
    post:
      summary: Add serial numbers to an inventory item
      operationId: inventory_add_serial_numbers
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/brands:
    post:
      summary: Create a new brand
      operationId: inventory_create_brand
      tags:
      - Inventory
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/brands_old:
    get:
      summary: Get all available product brands with counts and categories
      operationId: inventory_get_brands_old
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/inventory/bulk_upload:
    post:
      summary: Bulk upload inventory items from CSV/XLSX. Returns {created, updated,
        errors}.
      operationId: inventory_bulk_upload_inventory
      tags:
      - Inventory
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/categories:
    post:
      summary: Create a new inventory category
      operationId: inventory_create_category
      tags:
      - Inventory
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/categories_old:
    get:
      summary: Get all available product categories with counts
      operationId: inventory_get_categories_old
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/inventory/features:
    get:
      summary: Get all available product features with counts
      operationId: inventory_get_features
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/inventory/low-stock:
    get:
      summary: Get all items with low stock levels
      operationId: inventory_get_low_stock_items
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/inventory/search:
    get:
      summary: Advanced product search with comprehensive filtering
      operationId: inventory_advanced_search
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/inventory/stats:
    get:
      summary: Get inventory statistics
      operationId: inventory_get_inventory_stats
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/inventory/units:
    get:
      summary: Get all available unit types for inventory items
      operationId: inventory_get_units
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/invoices:
    post:
      summary: Create a new invoice
      operationId: invoices_create_invoice
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}:
    delete:
      summary: Delete an invoice
      operationId: invoices_delete_invoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/invoices/{invoice_id}/copy:
    post:
      summary: POST /api/invoices/{invoice_id}/copy
      operationId: invoices_actions_copy_invoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/copy-cancel:
    post:
      summary: POST /api/invoices/{invoice_id}/copy-cancel
      operationId: invoices_actions_copy_invoice_cancel
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/issue:
    post:
      summary: POST /api/invoices/{invoice_id}/issue
      operationId: invoices_actions_issue_invoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/pdf:
    get:
      summary: GET /api/invoices/{invoice_id}/pdf
      operationId: invoices_actions_serve_invoice_pdf
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/invoices/{invoice_id}/send-to-gib:
    post:
      summary: "Send invoice to G\u0130B via Birfatura."
      description: 'Flow:

        1. Generate UBL XML from invoice data

        2. Send to Birfatura API

        3. Update invoice with ETTN and status

        4. If Birfatura returns PDF, store it'
      operationId: invoices_send_invoice_to_gib
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/shipping-pdf:
    get:
      summary: GET /api/invoices/{invoice_id}/shipping-pdf
      operationId: invoices_actions_serve_shipping_pdf
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/invoices/{invoice_id}/update-gib-status:
    post:
      summary: Update invoice status from Birfatura.
      description: "Called to check if G\u0130B has approved/rejected the invoice\
        \ and fetch PDF if available."
      operationId: invoices_update_invoice_gib_status
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/xml:
    post:
      summary: Upload an XML (e.g., from birfatura) and save it for this invoice.
      operationId: invoices_upload_invoice_xml
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/batch-generate:
    post:
      summary: Generate multiple invoices at once
      operationId: invoices_batch_generate_invoices
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/bulk_upload:
    post:
      summary: Bulk upload invoices from CSV/XLSX. Returns {created, updated, errors}.
      operationId: invoices_bulk_upload_invoices
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/print-queue:
    post:
      summary: Add invoices to print queue
      operationId: invoices_add_to_print_queue
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/templates:
    post:
      summary: Create a custom invoice template
      operationId: invoices_create_invoice_template
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/notifications:
    get:
      summary: Get Notifications
      tags:
      - Notifications
      parameters:
      - name: user_id
        in: query
        required: true
        schema:
          type: string
      - name: page
        in: query
        schema:
          type: integer
      - name: per_page
        in: query
        schema:
          type: integer
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
                  meta:
                    type: object
  /api/notifications/{notification_id}:
    delete:
      summary: DELETE /api/notifications/{notification_id}
      operationId: notifications_delete_notification
      tags:
      - Notifications
      parameters:
      - name: notification_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/notifications/{notification_id}/read:
    put:
      summary: Mark Notification Read
      tags:
      - Notifications
      parameters:
      - name: notification_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
  /api/notifications/settings:
    put:
      summary: PUT /api/notifications/settings
      operationId: notifications_set_user_notification_settings
      tags:
      - Notifications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/notifications/stats:
    get:
      summary: Get Notification Stats
      tags:
      - Notifications
      parameters:
      - name: user_id
        in: query
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                      unread:
                        type: integer
  /api/ocr/debug_ner:
    post:
      summary: Debug endpoint to run HF NER and spaCy on provided text and return
        detailed outputs.
      description: 'Request JSON: { "text": "..." }

        Returns: { hf_ner: [...], spacy_entities: [...], tokens: [...] }'
      operationId: ocr_debug_ner
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/entities:
    post:
      summary: Extract entities from image using OCR
      operationId: ocr_extract_entities
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/extract_patient:
    post:
      summary: Extract patient name from image using OCR
      operationId: ocr_extract_patient_name
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/health:
    get:
      summary: Health check endpoint (moved from app.py)
      operationId: ocr_health_check
      tags:
      - Ocr
      responses:
        '200':
          description: Success
  /api/ocr/init-db:
    post:
      summary: Initialize database and create tables
      operationId: ocr_init_database
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/initialize:
    post:
      summary: Initialize NLP/OCR service (non-blocking).
      description: 'Starts model initialization in a background thread so the HTTP
        request

        can return quickly and heavy imports/downloads happen asynchronously.'
      operationId: ocr_initialize_nlp_endpoint
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/jobs:
    post:
      summary: Create a new OCR job
      operationId: ocr_create_job
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/process:
    post:
      summary: POST /api/ocr/process
      operationId: sgk_process_ocr
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/ocr/similarity:
    post:
      summary: Calculate similarity between two images or between two pieces of text
      description: Accepts either {'image_path1':..., 'image_path2':...} or {'text1':...,
        'text2':...}
      operationId: ocr_calculate_similarity
      tags:
      - Ocr
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/openapi.yaml:
    get:
      summary: Serve the canonical OpenAPI contract for frontend/back-end sync and
        respond to CORS preflight.
      description: 'Returns CORS headers so the static Swagger UI served from a different
        origin (e.g. localhost:8080)

        can fetch the YAML without browser CORS errors.'
      operationId: serve_openapi_yaml
      tags:
      - Openapi.yaml
      responses:
        '200':
          description: Success
  /api/patients:
    post:
      summary: POST /api/patients
      operationId: patients_create_patient
      tags:
      - Patients
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/{patient_id}:
    delete:
      summary: DELETE /api/patients/{patient_id}
      operationId: patients_delete_patient
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/patients/{patient_id}/assign-devices-extended:
    post:
      summary: Assign devices to patient with extended sale record creation.
      operationId: sales_assign_devices_extended
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/{patient_id}/devices:
    get:
      summary: Get all devices assigned to a specific patient
      operationId: patients_get_patient_devices
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/invoices:
    get:
      summary: Get all invoices for a patient
      operationId: invoices_get_patient_invoices
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/payment-records:
    get:
      summary: Get all payment records for a patient
      operationId: payments_get_patient_payment_records
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/product-sales:
    post:
      summary: Create a new product sale from inventory
      operationId: sales_create_product_sale
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/{patient_id}/proformas:
    get:
      summary: Get all proformas for a patient
      operationId: proformas_get_patient_proformas
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/promissory-notes:
    get:
      summary: Get all promissory notes for a patient
      operationId: payments_get_patient_promissory_notes
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/replacements:
    post:
      summary: Create a replacement for a patient. Request body mirrors legacy fields.
      operationId: replacements_create_patient_replacement
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/{patient_id}/sales:
    get:
      summary: GET /api/patients/{patient_id}/sales
      operationId: sales_get_patient_sales
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/sales/{sale_id}:
    patch:
      summary: Partially update a Sale resource. Supports updating status, notes,
        total_amount, and paid_amount.
      description: 'Expected payload: { "status": "cancelled", "total_amount": 1000.0,
        "paid_amount": 500.0, "notes": "Updated notes" }'
      operationId: sales_update_sale_partial
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/sgk-documents:
    get:
      summary: GET /api/patients/{patient_id}/sgk-documents
      operationId: sgk_get_patient_sgk_documents
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/bulk_upload:
    post:
      summary: Accept a multipart/form-data CSV file containing patients and upsert
        them into the DB.
      description: 'This endpoint is intentionally forgiving: it returns a summary
        of created/updated rows

        and reports per-row errors without aborting the entire batch.'
      operationId: patients_bulk_upload_patients
      tags:
      - Patients
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/count:
    get:
      summary: Count patients with optional filters for SMS campaigns.
      description: 'Query params:

        - status: Patient status filter (active, passive)

        - segment: Patient segment filter (lead, potential, etc.)

        - acquisitionType: How the patient was acquired (advertisement, referral,
        etc.)

        - branchId: Filter by specific branch

        - dateStart: Filter by acquisition date start (ISO format)

        - dateEnd: Filter by acquisition date end (ISO format)

        Returns count of matching patients with valid phone numbers.'
      operationId: patients_count_patients
      tags:
      - Patients
      responses:
        '200':
          description: Success
  /api/patients/export:
    get:
      summary: Export patients as CSV.
      description: 'Supports optional query params: status, segment, q (search term).'
      operationId: patients_export_patients_csv
      tags:
      - Patients
      responses:
        '200':
          description: Success
  /api/patients/search:
    get:
      summary: GET /api/patients/search
      operationId: patients_search_patients
      tags:
      - Patients
      responses:
        '200':
          description: Success
  /api/payment-records:
    post:
      summary: Create a new payment record
      operationId: payments_create_payment_record
      tags:
      - Payment-records
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/payment-records/{record_id}:
    patch:
      summary: Update a payment record
      operationId: payments_update_payment_record
      tags:
      - Payment-records
      parameters:
      - name: record_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/permissions:
    post:
      summary: POST /api/permissions
      operationId: permissions_create_permission
      tags:
      - Permissions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/permissions/my:
    get:
      summary: Get current user's permissions based on their role
      operationId: permissions_get_my_permissions
      tags:
      - Permissions
      responses:
        '200':
          description: Success
  /api/permissions/role/{role_name}:
    put:
      summary: Update permissions for a role (bulk update)
      operationId: permissions_update_role_permissions
      tags:
      - Permissions
      parameters:
      - name: role_name
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/plans:
    post:
      summary: Create a new plan (Super Admin only)
      operationId: plans_create_plan
      tags:
      - Plans
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/plans/{plan_id}:
    put:
      summary: Update a plan (Super Admin only)
      operationId: plans_update_plan
      tags:
      - Plans
      parameters:
      - name: plan_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/plans/admin:
    get:
      summary: Get all plans for admin (including inactive/private)
      operationId: plans_get_admin_plans
      tags:
      - Plans
      responses:
        '200':
          description: Success
  /api/pricing-preview:
    post:
      summary: POST /api/pricing-preview
      operationId: sales_pricing_preview
      tags:
      - Pricing-preview
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/product-suppliers/{ps_id}:
    delete:
      summary: Delete a product-supplier relationship
      operationId: suppliers_delete_product_supplier
      tags:
      - Product-suppliers
      parameters:
      - name: ps_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/products/{product_id}/suppliers:
    post:
      summary: Add a supplier to a product
      operationId: suppliers_add_product_supplier
      tags:
      - Products
      parameters:
      - name: product_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/proformas:
    post:
      summary: Create a new proforma
      operationId: proformas_create_proforma
      tags:
      - Proformas
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/proformas/{proforma_id}:
    get:
      summary: Get a specific proforma
      operationId: proformas_get_proforma
      tags:
      - Proformas
      parameters:
      - name: proforma_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/proformas/{proforma_id}/convert:
    post:
      summary: 'Convert a proforma into a sale: create Sale and DeviceAssignment records
        and mark proforma converted.'
      operationId: proformas_convert_proforma_to_sale
      tags:
      - Proformas
      parameters:
      - name: proforma_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/promissory-notes:
    post:
      summary: Create multiple promissory notes
      operationId: payments_create_promissory_notes
      tags:
      - Promissory-notes
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/promissory-notes/{note_id}:
    patch:
      summary: Update a promissory note
      operationId: payments_update_promissory_note
      tags:
      - Promissory-notes
      parameters:
      - name: note_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/promissory-notes/{note_id}/collect:
    post:
      summary: Collect payment for a promissory note (full or partial)
      operationId: payments_collect_promissory_note
      tags:
      - Promissory-notes
      parameters:
      - name: note_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/register-phone:
    post:
      summary: POST /api/register-phone
      operationId: registration_register_phone
      tags:
      - Register-phone
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/replacements/{replacement_id}:
    get:
      summary: GET /api/replacements/{replacement_id}
      operationId: replacements_get_replacement
      tags:
      - Replacements
      parameters:
      - name: replacement_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/replacements/{replacement_id}/invoice:
    post:
      summary: Create a supplier return invoice record linked to a replacement.
      description: This implementation stores invoice metadata on the Replacement
        row (legacy-compatible).
      operationId: replacements_create_return_invoice
      tags:
      - Replacements
      parameters:
      - name: replacement_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/replacements/{replacement_id}/status:
    patch:
      summary: PATCH /api/replacements/{replacement_id}/status
      operationId: replacements_patch_replacement_status
      tags:
      - Replacements
      parameters:
      - name: replacement_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/reports/appointments:
    get:
      summary: GET /api/reports/appointments
      operationId: reports_report_appointments
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/campaigns:
    get:
      summary: Kampanya raporu
      operationId: reports_report_campaigns
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/cashflow-summary:
    get:
      summary: "Kasa \xF6zeti raporu - tahsilatlar (Sales tabanl\u0131)"
      operationId: reports_report_cashflow_summary
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/financial:
    get:
      summary: Mali rapor
      operationId: reports_report_financial
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/overview:
    get:
      summary: "Genel rapor \xF6zeti"
      operationId: reports_report_overview
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/patients:
    get:
      summary: Hasta analizi raporu
      operationId: reports_report_patients
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/promissory-notes:
    get:
      summary: "Senet raporlar\u0131 - ayl\u0131k say\u0131, gelir ve \xF6zet"
      operationId: reports_report_promissory_notes
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/promissory-notes/by-patient:
    get:
      summary: "Hasta bazl\u0131 senet \xF6zeti - hangi hastan\u0131n ka\xE7 senedi\
        \ kalm\u0131\u015F"
      operationId: reports_report_promissory_notes_by_patient
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/promissory-notes/list:
    get:
      summary: "Toplu senet listesi - modal i\xE7in"
      operationId: reports_report_promissory_notes_list
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/remaining-payments:
    get:
      summary: "Kalan \xF6demeler raporu - hangi hastan\u0131n ne kadar \xF6demesi\
        \ kalm\u0131\u015F"
      operationId: reports_report_remaining_payments
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/reports/revenue:
    get:
      summary: GET /api/reports/revenue
      operationId: reports_report_revenue
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/return-invoices/{invoice_id}/send-to-gib:
    post:
      summary: "Mark return invoice as sent to GIB. In legacy flow G\u0130B send triggers\
        \ replacement completion and stock effects."
      description: "Here we mark gib_sent and update replacement status. Actual EFatura/G\u0130\
        B integration should be added server-side."
      operationId: replacements_send_invoice_to_gib
      tags:
      - Return-invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles:
    post:
      summary: POST /api/roles
      operationId: roles_create_role
      tags:
      - Roles
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles/{role_id}:
    delete:
      summary: DELETE /api/roles/{role_id}
      operationId: roles_delete_role
      tags:
      - Roles
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/roles/{role_id}/permissions:
    post:
      summary: POST /api/roles/{role_id}/permissions
      operationId: roles_add_permission_to_role
      tags:
      - Roles
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles/{role_id}/permissions/{permission_id}:
    delete:
      summary: DELETE /api/roles/{role_id}/permissions/{permission_id}
      operationId: roles_remove_permission_from_role
      tags:
      - Roles
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      - name: permission_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/sales:
    get:
      summary: Get all sales with pagination and filtering
      operationId: sales_get_sales
      tags:
      - Sales
      responses:
        '200':
          description: Success
  /api/sales/{sale_id}/installments/{installment_id}/pay:
    post:
      summary: Pay a specific installment
      operationId: sales_pay_installment
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      - name: installment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sales/{sale_id}/invoice:
    get:
      summary: Get invoice for a sale
      operationId: invoices_get_sale_invoice
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sales/{sale_id}/invoice/pdf:
    get:
      summary: Generate PDF for sale invoice
      operationId: invoices_generate_sale_invoice_pdf
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sales/{sale_id}/payment-plan:
    post:
      summary: POST /api/sales/{sale_id}/payment-plan
      operationId: sales_create_sale_payment_plan
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sales/{sale_id}/payments:
    post:
      summary: Record a new payment for a sale
      operationId: sales_record_sale_payment
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sales/{sale_id}/promissory-notes:
    get:
      summary: Get all promissory notes for a specific sale
      operationId: payments_get_sale_promissory_notes
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sales/logs:
    post:
      summary: Create a sales log entry for cashflow.html page
      operationId: sales_create_sales_log
      tags:
      - Sales
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sales/recalc:
    post:
      summary: "Sat\u0131\u015F kay\u0131tlar\u0131n\u0131n SGK ve hasta \xF6deme\
        \ tutarlar\u0131n\u0131 yeniden hesaplarken kal\u0131c\u0131 olarak g\xFC\
        nceller."
      description: "\u0130ste\u011Fe ba\u011Fl\u0131 filtreler: body veya query i\xE7\
        inde `patientId`, `saleId`, `limit`."
      operationId: sales_recalc_sales
      tags:
      - Sales
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/settings:
    patch:
      summary: Apply partial updates to system settings using dot-path notation.
      description: 'Request body: { "updates": { "company.name": "New", "system.timezone":
        "Europe/London" } }'
      operationId: patch_settings
      tags:
      - Settings
      responses:
        '200':
          description: Success
  /api/settings/pricing:
    get:
      summary: Get pricing settings specifically
      operationId: get_pricing_settings
      tags:
      - Settings
      responses:
        '200':
          description: Success
  /api/sgk/documents:
    post:
      summary: POST /api/sgk/documents
      operationId: sgk_upload_sgk_document
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/documents/{document_id}:
    delete:
      summary: DELETE /api/sgk/documents/{document_id}
      operationId: sgk_delete_sgk_document
      tags:
      - Sgk
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/sgk/e-receipt/query:
    post:
      summary: "E-re\xE7ete sorgulama endpoint'i"
      operationId: sgk_query_e_receipt
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/patient-rights/query:
    post:
      summary: "SGK hasta haklar\u0131 sorgulama endpoint'i"
      operationId: sgk_query_patient_rights
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/seed-test-patients:
    post:
      summary: 'Development helper: for each image in the repo images/ folder, run
        OCR, extract name and tc_partial,'
      description: 'then insert a Patient record with a generated valid TC that contains
        the partial substring.

        This endpoint is intended for local/dev only and makes a best-effort to avoid
        duplicate inserts.'
      operationId: sgk_seed_test_patients
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/upload:
    post:
      summary: Accept multipart/form-data uploads under the 'files' field (multiple
        allowed).
      description: 'Saves files to a secure temporary path, runs OCR (worker-first)
        with auto_crop=True

        and returns per-file OCR results including patient_info.'
      operationId: sgk_upload_and_process_files
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/workflow/{workflow_id}:
    get:
      summary: "SGK workflow detaylar\u0131 endpoint'i"
      operationId: sgk_get_sgk_workflow
      tags:
      - Sgk
      parameters:
      - name: workflow_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sgk/workflow/{workflow_id}/update:
    put:
      summary: "SGK workflow g\xFCncelleme endpoint'i"
      operationId: sgk_update_sgk_workflow
      tags:
      - Sgk
      parameters:
      - name: workflow_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/sgk/workflow/create:
    post:
      summary: "SGK workflow olu\u015Fturma endpoint'i"
      operationId: sgk_create_sgk_workflow
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sms/audiences:
    get:
      summary: List Target Audiences
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TargetAudience'
    post:
      summary: Create Target Audience
      tags:
      - Sms
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              - sourceType
              properties:
                name:
                  type: string
                sourceType:
                  type: string
                  enum:
                  - excel
                  - filter
                filePath:
                  type: string
                totalRecords:
                  type: integer
                filterCriteria:
                  type: object
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TargetAudience'
  /api/sms/audiences/upload:
    post:
      summary: Upload Audience Excel
      tags:
      - Sms
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/TargetAudience'
  /api/sms/config:
    get:
      summary: Get SMS Provider Configuration
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/SMSProviderConfig'
    put:
      summary: Update SMS Provider Configuration
      tags:
      - Sms
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                apiUsername:
                  type: string
                apiPassword:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SMSProviderConfig'
  /api/sms/credit:
    get:
      summary: Get Tenant SMS Credit
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantSMSCredit'
  /api/sms/documents/{document_type}:
    delete:
      summary: Delete an uploaded document
      operationId: sms_integration_delete_sms_document
      tags:
      - Sms
      parameters:
      - name: document_type
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/sms/documents/{document_type}/download:
    get:
      summary: Generate presigned URL for document download
      operationId: sms_integration_download_sms_document
      tags:
      - Sms
      parameters:
      - name: document_type
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sms/documents/upload:
    post:
      summary: Upload SMS Document to S3
      operationId: sms_upload_document
      tags:
      - Sms
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
              - file
              - documentType
              properties:
                file:
                  type: string
                  format: binary
                documentType:
                  type: string
                  enum:
                  - contract
                  - id_card
                  - residence
                  - tax_plate
                  - activity_cert
                  - signature_circular
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      type:
                        type: string
                      filename:
                        type: string
                      size:
                        type: integer
  /api/sms/headers:
    get:
      summary: List SMS Headers
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SMSHeaderRequest'
    post:
      summary: Request SMS Header
      tags:
      - Sms
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - headerText
              - headerType
              properties:
                headerText:
                  type: string
                headerType:
                  type: string
                documents:
                  type: array
                  items:
                    type: string
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SMSHeaderRequest'
  /api/sms/monitoring:
    get:
      summary: GET /api/sms/monitoring
      operationId: sms_monitoring
      tags:
      - Sms
      responses:
        '200':
          description: Success
  /api/sms/packages:
    get:
      summary: List SMS Packages
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SMSPackage'
  /api/subscriptions/current:
    get:
      summary: Get current subscription details
      operationId: subscriptions_get_subscription
      tags:
      - Subscriptions
      responses:
        '200':
          description: Success
  /api/subscriptions/register-and-subscribe:
    post:
      summary: Register new tenant and subscribe (Public)
      operationId: subscriptions_register_and_subscribe
      tags:
      - Subscriptions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/subscriptions/subscribe:
    post:
      summary: Subscribe to a plan (Mock Payment)
      operationId: subscriptions_subscribe
      tags:
      - Subscriptions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/suppliers:
    post:
      summary: Create a new supplier
      operationId: suppliers_create_supplier
      tags:
      - Suppliers
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/suppliers/{supplier_id}:
    delete:
      summary: Delete a supplier (soft delete by setting is_active=False)
      operationId: suppliers_delete_supplier
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/suppliers/{supplier_id}/invoices:
    get:
      summary: GET /api/suppliers/{supplier_id}/invoices
      operationId: suppliers_get_supplier_invoices
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/suppliers/{supplier_id}/products:
    get:
      summary: Get all products for a specific supplier
      operationId: suppliers_get_supplier_products
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/suppliers/bulk_upload:
    post:
      summary: Bulk upload suppliers via CSV/XLSX file. Returns summary {created,
        updated, errors}.
      operationId: suppliers_bulk_upload_suppliers
      tags:
      - Suppliers
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/suppliers/search:
    get:
      summary: Fast supplier search for autocomplete
      operationId: suppliers_search_suppliers
      tags:
      - Suppliers
      responses:
        '200':
          description: Success
  /api/suppliers/stats:
    get:
      summary: Get supplier statistics
      operationId: suppliers_get_supplier_stats
      tags:
      - Suppliers
      responses:
        '200':
          description: Success
  /api/suppliers/suggested:
    get:
      summary: GET /api/suppliers/suggested
      operationId: suppliers_get_suggested_suppliers
      tags:
      - Suppliers
      responses:
        '200':
          description: Success
  /api/suppliers/suggested/{suggested_id}:
    delete:
      summary: DELETE /api/suppliers/suggested/{suggested_id}
      operationId: suppliers_reject_suggested_supplier
      tags:
      - Suppliers
      parameters:
      - name: suggested_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/suppliers/suggested/{suggested_id}/accept:
    post:
      summary: POST /api/suppliers/suggested/{suggested_id}/accept
      operationId: suppliers_accept_suggested_supplier
      tags:
      - Suppliers
      parameters:
      - name: suggested_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/tenant/assets/{tenant_id}/{filename}:
    get:
      summary: Serve tenant assets (logo, stamp, signature) publicly.
      description: These are needed for PDF generation and preview.
      operationId: tenant_users_serve_tenant_asset
      tags:
      - Tenant
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      - name: filename
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/tenant/company:
    put:
      summary: Update the current tenant's company information.
      description: Only tenant_admin can update company info.
      operationId: tenant_users_update_tenant_company
      tags:
      - Tenant
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/tenant/company/upload/{asset_type}:
    delete:
      summary: Delete a company asset (logo, stamp, or signature).
      operationId: tenant_users_delete_tenant_asset
      tags:
      - Tenant
      parameters:
      - name: asset_type
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/tenant/users:
    post:
      summary: Create a new user for the tenant with username and password.
      description: Admin creates the user directly with credentials.
      operationId: tenant_users_invite_tenant_user
      tags:
      - Tenant
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/tenant/users/{user_id}:
    put:
      summary: Update a user in the tenant.
      operationId: tenant_users_update_tenant_user
      tags:
      - Tenant
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/unified-cash-records:
    get:
      summary: "Birle\u015Fik cash records endpoint'i - t\xFCm finansal kay\u0131\
        tlar\u0131 tek yerden d\xF6nd\xFCr\xFCr."
      description: "\u015Eu kaynak t\xFCrlerini birle\u015Ftirir:\n- Sales (sat\u0131\
        \u015Flar)\n- PaymentRecords (\xF6deme kay\u0131tlar\u0131)\n- Cash Records\
        \ (nakit kay\u0131tlar\u0131)\nQuery parametreleri:\n- limit: maksimum kay\u0131\
        t say\u0131s\u0131 (varsay\u0131lan: 200)\n- start_date, end_date: tarih filtreleri\
        \ (ISO format)\n- record_type: kay\u0131t t\xFCr\xFC filtresi (sale, payment,\
        \ cash)\n- patient_id: hasta ID filtresi\n- status: durum filtresi (paid,\
        \ pending, partial)"
      operationId: unified_cash_get_unified_cash_records
      tags:
      - Unified-cash-records
      responses:
        '200':
          description: Success
  /api/unified-cash-records/summary:
    get:
      summary: "Finansal \xF6zet bilgileri d\xF6nd\xFCr\xFCr."
      description: "Query parametreleri:\n- period: \xF6zet d\xF6nemi (today, week,\
        \ month, year)\n- start_date, end_date: \xF6zel tarih aral\u0131\u011F\u0131"
      operationId: unified_cash_get_cash_summary
      tags:
      - Unified-cash-records
      responses:
        '200':
          description: Success
  /api/upload/files:
    delete:
      summary: Delete a file
      description: 'Query Params:

        key (str): S3 key of the file to delete'
      operationId: upload_delete_file
      tags:
      - Upload
      responses:
        '204':
          description: Success
  /api/upload/presigned:
    post:
      summary: Get a presigned URL for direct S3 upload
      description: 'Request Body:

        filename (str): Original filename

        folder (str): Target folder (e.g., ''sms_documents'', ''invoices'')

        content_type (str): File content type (optional)

        Returns:

        JSON: {

        ''url'': str,

        ''fields'': dict,

        ''key'': str

        }'
      operationId: upload_get_presigned_upload_url
      tags:
      - Upload
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/users:
    post:
      summary: POST /api/users
      operationId: users_create_user
      tags:
      - Users
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/users/{user_id}:
    delete:
      summary: DELETE /api/users/{user_id}
      operationId: users_delete_user
      tags:
      - Users
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/users/me:
    put:
      summary: Update My Profile
      operationId: users_update_me
      tags:
      - Users
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                firstName:
                  type: string
                lastName:
                  type: string
                username:
                  type: string
                email:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/User'
  /api/users/me/password:
    post:
      summary: Change Password
      operationId: users_change_password
      tags:
      - Users
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - currentPassword
              - newPassword
              properties:
                currentPassword:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
  /api/verify-registration-otp:
    post:
      summary: POST /api/verify-registration-otp
      operationId: registration_verify_registration_otp
      tags:
      - Verify-registration-otp
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /metrics:
    get:
      summary: GET /metrics
      operationId: metrics
      tags:
      - Metrics
      responses:
        '200':
          description: Success
  /swagger.html:
    get:
      summary: Serve the static Swagger UI page from the repository `public/` folder.
      description: 'This helps local development: visit http://<backend-host>:<port>/swagger.html
        so the

        Swagger UI and `/api/openapi.yaml` are on the same origin and no CORS overrides
        are needed.'
      operationId: serve_swagger_ui
      tags:
      - Swagger.html
      responses:
        '200':
          description: Success
  /api/sms/documents/{documentType}/download:
    get:
      summary: Get presigned URL for document download
      operationId: sms_download_document
      tags:
      - Sms
      parameters:
      - name: documentType
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  url:
                    type: string
  /api/sms/documents/{documentType}:
    delete:
      summary: Delete SMS Document
      operationId: sms_delete_document
      tags:
      - Sms
      parameters:
      - name: documentType
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
components:
  schemas:
    SMSProviderConfig:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        apiUsername:
          type: string
        documentsEmail:
          type: string
        isActive:
          type: boolean
        documents:
          type: array
          items:
            type: object
    SMSHeaderRequest:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        headerText:
          type: string
        headerType:
          type: string
          enum:
          - company_title
          - trademark
          - domain
          - other
        status:
          type: string
          enum:
          - pending
          - approved
          - rejected
        rejectionReason:
          type: string
        documents:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
    SMSPackage:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        smsCount:
          type: integer
        price:
          type: number
        currency:
          type: string
        isActive:
          type: boolean
    TenantSMSCredit:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        balance:
          type: integer
        totalPurchased:
          type: integer
        totalUsed:
          type: integer
    Campaign:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        name:
          type: string
        description:
          type: string
        campaignType:
          type: string
        targetSegment:
          type: string
        targetCriteria:
          type: object
        messageTemplate:
          type: string
        status:
          type: string
        totalRecipients:
          type: integer
        successfulSends:
          type: integer
        failedSends:
          type: integer
        createdAt:
          type: string
          format: date-time
        sentAt:
          type: string
          format: date-time
    TargetAudience:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        name:
          type: string
        sourceType:
          type: string
        totalRecords:
          type: integer
        filterCriteria:
          type: object
        createdAt:
          type: string
          format: date-time
    ActivityLog:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        action:
          type: string
        entityType:
          type: string
        entityId:
          type: string
        details:
          type: string
        ipAddress:
          type: string
        userAgent:
          type: string
        createdAt:
          type: string
          format: date-time
    Notification:
      type: object
      properties:
        id:
          type: string
        userId:
          type: string
        title:
          type: string
        message:
          type: string
        type:
          type: string
        read:
          type: boolean
        createdAt:
          type: string
          format: date-time
    User:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        role:
          type: string
        phone:
          type: string
        isPhoneVerified:
          type: boolean
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
    CommunicationTemplate:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        templateType:
          type: string
          enum:
          - sms
          - email
        category:
          type: string
        subject:
          type: string
        bodyText:
          type: string
        bodyHtml:
          type: string
        variables:
          type: array
          items:
            type: string
        isActive:
          type: boolean
        isSystem:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    CommunicationTemplateCreateBody:
      type: object
      required:
      - name
      - templateType
      - bodyText
      properties:
        name:
          type: string
        description:
          type: string
        templateType:
          type: string
          enum:
          - sms
          - email
        category:
          type: string
        subject:
          type: string
        bodyText:
          type: string
        bodyHtml:
          type: string
        variables:
          type: array
          items:
            type: string
        isActive:
          type: boolean
    InventoryItem:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        brand:
          type: string
        model:
          type: string
        category:
          type: string
        barcode:
          type: string
        stock:
          type: integer
        price:
          type: number
        currency:
          type: string
        minStockLevel:
          type: integer
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
