WARNING:services.otp_store:Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
WARNING:backend.app:Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
DEBUG:backend.app:REDIS_URL present; skipping local Redis auto-start.
WARNING:backend.app:Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
WARNING:services.otp_store:Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
INFO:backend.app:Tenant security (global query filter) initialized
WARNING:services.s3_service:S3Service running in mock mode - no actual S3 operations will be performed
INFO:backend.app:Scheduling OCR/NLP service pre-warm in background
INFO:backend.app:Ensuring database tables exist (create_all)
INFO:backend.app:Permission middleware initialized successfully
WARNING:middleware.permission_middleware:Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.system.view', 'admin.tenants.view', 'admin.settings.edit', 'admin.activity_logs.view', 'admin.users.edit', 'admin.tickets.edit', 'admin.settings.view', 'admin.tickets.view', 'activity_logs.export', 'admin.users.create', 'admin.system.logs', 'admin.users.delete', 'admin.users.view', 'admin.tenants.manage', 'admin.tenants.create', 'admin.tickets.respond', 'admin.tickets.create', 'activity_logs.view', 'admin.tenants.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
INFO:backend.app:Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.system.view', 'admin.tenants.view', 'admin.settings.edit', 'admin.activity_logs.view', 'admin.users.edit', 'admin.tickets.edit', 'admin.settings.view', 'admin.tickets.view', 'activity_logs.export', 'admin.users.create', 'admin.system.logs', 'admin.users.delete', 'admin.users.view', 'admin.tenants.manage', 'admin.tenants.create', 'admin.tickets.respond', 'admin.tickets.create', 'activity_logs.view', 'admin.tenants.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
INFO:werkzeug:[33mPress CTRL+C to quit[0m
[2025/12/03 23:19:37] ppocr DEBUG: Namespace(help='==SUPPRESS==', use_gpu=False, use_xpu=False, use_npu=False, ir_optim=True, use_tensorrt=False, min_subgraph_size=15, precision='fp32', gpu_mem=500, gpu_id=0, image_dir=None, page_num=0, det_algorithm='DB', det_model_dir='/Users/omerozmen/.paddleocr/whl/det/en/en_PP-OCRv3_det_infer', det_limit_side_len=960, det_limit_type='max', det_box_type='quad', det_db_thresh=0.3, det_db_box_thresh=0.6, det_db_unclip_ratio=1.5, max_batch_size=10, use_dilation=False, det_db_score_mode='fast', det_east_score_thresh=0.8, det_east_cover_thresh=0.1, det_east_nms_thresh=0.2, det_sast_score_thresh=0.5, det_sast_nms_thresh=0.2, det_pse_thresh=0, det_pse_box_thresh=0.85, det_pse_min_area=16, det_pse_scale=1, scales=[8, 16, 32], alpha=1.0, beta=1.0, fourier_degree=5, rec_algorithm='SVTR_LCNet', rec_model_dir='/Users/omerozmen/.paddleocr/whl/rec/latin/latin_PP-OCRv3_rec_infer', rec_image_inverse=True, rec_image_shape='3, 48, 320', rec_batch_num=6, max_text_length=25, rec_char_dict_path='/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/.venv/lib/python3.12/site-packages/paddleocr/ppocr/utils/dict/latin_dict.txt', use_space_char=True, vis_font_path='./doc/fonts/simfang.ttf', drop_score=0.5, e2e_algorithm='PGNet', e2e_model_dir=None, e2e_limit_side_len=768, e2e_limit_type='max', e2e_pgnet_score_thresh=0.5, e2e_char_dict_path='./ppocr/utils/ic15_dict.txt', e2e_pgnet_valid_set='totaltext', e2e_pgnet_mode='fast', use_angle_cls=False, cls_model_dir='/Users/omerozmen/.paddleocr/whl/cls/ch_ppocr_mobile_v2.0_cls_infer', cls_image_shape='3, 48, 192', label_list=['0', '180'], cls_batch_num=6, cls_thresh=0.9, enable_mkldnn=False, cpu_threads=10, use_pdserving=False, warmup=False, sr_model_dir=None, sr_image_shape='3, 32, 128', sr_batch_num=1, draw_img_save_dir='./inference_results', save_crop_res=False, crop_res_save_dir='./output', use_mp=False, total_process_num=1, process_id=0, benchmark=False, save_log_path='./log_output/', show_log=True, use_onnx=False, output='./output', table_max_len=488, table_algorithm='TableAttn', table_model_dir=None, merge_no_span_structure=True, table_char_dict_path=None, layout_model_dir=None, layout_dict_path=None, layout_score_threshold=0.5, layout_nms_threshold=0.5, kie_algorithm='LayoutXLM', ser_model_dir=None, re_model_dir=None, use_visual_backbone=True, ser_dict_path='../train_data/XFUND/class_list_xfun.txt', ocr_order_method=None, mode='structure', image_orientation=False, layout=True, table=True, ocr=True, recovery=False, use_pdf2docx_api=False, invert=False, binarize=False, alphacolor=(255, 255, 255), lang='tr', det=True, rec=True, type='ocr', ocr_version='PP-OCRv4', structure_version='PP-StructureV2')
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:20:03] "POST /api/admin/integrations/init-db HTTP/1.1" 200 -
ERROR:routes.admin_integrations:Update VatanSMS config error: (sqlite3.OperationalError) no such column: notification_templates.email_from_name
[SQL: SELECT notification_templates.id AS notification_templates_id, notification_templates.name AS notification_templates_name, notification_templates.description AS notification_templates_description, notification_templates.title_template AS notification_templates_title_template, notification_templates.body_template AS notification_templates_body_template, notification_templates.channel AS notification_templates_channel, notification_templates.variables AS notification_templates_variables, notification_templates.email_from_name AS notification_templates_email_from_name, notification_templates.email_from_address AS notification_templates_email_from_address, notification_templates.email_to_type AS notification_templates_email_to_type, notification_templates.email_to_addresses AS notification_templates_email_to_addresses, notification_templates.email_subject AS notification_templates_email_subject, notification_templates.email_body_html AS notification_templates_email_body_html, notification_templates.email_body_text AS notification_templates_email_body_text, notification_templates.trigger_event AS notification_templates_trigger_event, notification_templates.trigger_conditions AS notification_templates_trigger_conditions, notification_templates.template_category AS notification_templates_template_category, notification_templates.is_active AS notification_templates_is_active, notification_templates.created_at AS notification_templates_created_at, notification_templates.updated_at AS notification_templates_updated_at 
FROM notification_templates 
WHERE notification_templates.trigger_event = ?
 LIMIT ? OFFSET ?]
[parameters: ('vatan_sms_document_uploaded', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:20:25] "[35m[1mPUT /api/admin/integrations/vatan-sms/config HTTP/1.1[0m" 500 -
ERROR:routes.admin_notifications:Init DB error: (sqlite3.OperationalError) no such column: notification_templates.email_from_name
[SQL: SELECT notification_templates.id AS notification_templates_id, notification_templates.name AS notification_templates_name, notification_templates.description AS notification_templates_description, notification_templates.title_template AS notification_templates_title_template, notification_templates.body_template AS notification_templates_body_template, notification_templates.channel AS notification_templates_channel, notification_templates.variables AS notification_templates_variables, notification_templates.email_from_name AS notification_templates_email_from_name, notification_templates.email_from_address AS notification_templates_email_from_address, notification_templates.email_to_type AS notification_templates_email_to_type, notification_templates.email_to_addresses AS notification_templates_email_to_addresses, notification_templates.email_subject AS notification_templates_email_subject, notification_templates.email_body_html AS notification_templates_email_body_html, notification_templates.email_body_text AS notification_templates_email_body_text, notification_templates.trigger_event AS notification_templates_trigger_event, notification_templates.trigger_conditions AS notification_templates_trigger_conditions, notification_templates.template_category AS notification_templates_template_category, notification_templates.is_active AS notification_templates_is_active, notification_templates.created_at AS notification_templates_created_at, notification_templates.updated_at AS notification_templates_updated_at 
FROM notification_templates 
WHERE notification_templates.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('welcome_message', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:20:41] "[35m[1mPOST /api/admin/notifications/init-db HTTP/1.1[0m" 500 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:10] "PUT /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:17] "GET /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:28] "GET /api/admin/notifications/templates HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:28] "[35m[1mPOST /api/admin/notifications/templates HTTP/1.1[0m" 201 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:38] "[35m[1mPOST /api/admin/notifications/send HTTP/1.1[0m" 201 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:49] "[31m[1mGET /api/admin/integrations/vatan-sms/config HTTP/1.1[0m" 401 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:21:49] "GET /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:22:02] "POST /api/admin/integrations/init-db HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:22:02] "POST /api/admin/notifications/init-db HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:22:02] "GET /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:22:02] "GET /api/admin/integrations/birfatura/config HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 23:22:02] "GET /api/admin/notifications/templates HTTP/1.1" 200 -
mail_from_address AS notification_templates_email_from_address, notification_templates.email_to_type AS notification_templates_email_to_type, notification_templates.email_to_addresses AS notification_templates_email_to_addresses, notification_templates.email_subject AS notification_templates_email_subject, notification_templates.email_body_html AS notification_templates_email_body_html, notification_templates.email_body_text AS notification_templates_email_body_text, notification_templates.trigger_event AS notification_templates_trigger_event, notification_templates.trigger_conditions AS notification_templates_trigger_conditions, notification_templates.template_category AS notification_templates_template_category, notification_templates.is_active AS notification_templates_is_active, notification_templates.created_at AS notification_templates_created_at, notification_templates.updated_at AS notification_templates_updated_at 
FROM notification_templates 
WHERE notification_templates.name = ?
 LIMIT ? OFFSET ?]
[parameters: ('welcome_message', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-03 23:20:41,061 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:20:41] "[35m[1mPOST /api/admin/notifications/init-db HTTP/1.1[0m" 500 -
2025-12-03 23:20:49,673 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-03 23:20:49,722 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-03 23:20:49,723 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-03 23:20:49,725 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:20:49,725 - app - INFO - Tenant security (global query filter) initialized
2025-12-03 23:20:50,110 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-03 23:20:50,118 - app - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-03 23:20:50,362 - app - INFO - Ensuring database tables exist (create_all)
2025-12-03 23:20:50,370 - app - INFO - Permission middleware initialized successfully
2025-12-03 23:20:50,374 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.settings.edit', 'admin.settings.view', 'admin.users.view', 'admin.system.logs', 'admin.users.delete', 'admin.tickets.edit', 'admin.users.create', 'admin.tickets.view', 'admin.users.edit', 'admin.tenants.manage', 'activity_logs.view', 'activity_logs.export', 'admin.tenants.view', 'admin.activity_logs.view', 'admin.system.view', 'admin.tenants.edit', 'admin.tenants.delete', 'admin.tickets.respond', 'admin.tenants.create', 'admin.tickets.create'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:20:50,374 - app - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.settings.edit', 'admin.settings.view', 'admin.users.view', 'admin.system.logs', 'admin.users.delete', 'admin.tickets.edit', 'admin.users.create', 'admin.tickets.view', 'admin.users.edit', 'admin.tenants.manage', 'activity_logs.view', 'activity_logs.export', 'admin.tenants.view', 'admin.activity_logs.view', 'admin.system.view', 'admin.tenants.edit', 'admin.tenants.delete', 'admin.tickets.respond', 'admin.tenants.create', 'admin.tickets.create'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:21:10,032 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:10] "PUT /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
2025-12-03 23:21:17,665 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:17] "GET /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
2025-12-03 23:21:28,156 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:28] "GET /api/admin/notifications/templates HTTP/1.1" 200 -
2025-12-03 23:21:28,171 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:28] "[35m[1mPOST /api/admin/notifications/templates HTTP/1.1[0m" 201 -
2025-12-03 23:21:38,836 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:38] "[35m[1mPOST /api/admin/notifications/send HTTP/1.1[0m" 201 -
2025-12-03 23:21:49,189 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:49] "[31m[1mGET /api/admin/integrations/vatan-sms/config HTTP/1.1[0m" 401 -
2025-12-03 23:21:49,207 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:21:49] "GET /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
2025-12-03 23:22:02,236 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:22:02] "POST /api/admin/integrations/init-db HTTP/1.1" 200 -
2025-12-03 23:22:02,277 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:22:02] "POST /api/admin/notifications/init-db HTTP/1.1" 200 -
2025-12-03 23:22:02,293 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:22:02] "GET /api/admin/integrations/vatan-sms/config HTTP/1.1" 200 -
2025-12-03 23:22:02,308 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:22:02] "GET /api/admin/integrations/birfatura/config HTTP/1.1" 200 -
2025-12-03 23:22:02,321 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:22:02] "GET /api/admin/notifications/templates HTTP/1.1" 200 -
2025-12-03 23:29:37,256 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:29:37] "GET /api/addons HTTP/1.1" 200 -
2025-12-03 23:29:37,258 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:29:37] "GET /api/sms/packages HTTP/1.1" 200 -
2025-12-03 23:29:37,259 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:29:37] "GET /api/plans HTTP/1.1" 200 -
2025-12-03 23:32:31,225 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 204 -
2025-12-03 23:32:31,231 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:32:31,231 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:32:31,366 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:32:31,389 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:32:31,426 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "GET /api/branches HTTP/1.1" 200 -
2025-12-03 23:32:31,431 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "GET /api/users HTTP/1.1" 200 -
2025-12-03 23:32:31,437 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "GET /api/branches HTTP/1.1" 200 -
2025-12-03 23:32:31,442 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:32:31,571 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:31] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:32:32,455 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-03 23:32:32,481 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:32:32,484 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:32:32,504 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-03 23:32:32,505 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:32:32,607 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-03 23:32:32,608 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:32:32,667 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:32] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-03 23:32:39,992 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:39] "[35m[1mOPTIONS /api/inventory/stats HTTP/1.1[0m" 204 -
2025-12-03 23:32:39,993 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:39] "[35m[1mOPTIONS /api/inventory/brands HTTP/1.1[0m" 204 -
2025-12-03 23:32:39,994 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:39] "[35m[1mOPTIONS /api/inventory?per_page=100 HTTP/1.1[0m" 204 -
2025-12-03 23:32:39,995 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:39] "[35m[1mOPTIONS /api/inventory/stats HTTP/1.1[0m" 204 -
2025-12-03 23:32:39,995 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:39] "[35m[1mOPTIONS /api/inventory/brands HTTP/1.1[0m" 204 -
2025-12-03 23:32:39,996 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:39] "[35m[1mOPTIONS /api/inventory?per_page=100 HTTP/1.1[0m" 204 -
2025-12-03 23:32:40,271 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-03 23:32:40,273 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory/brands HTTP/1.1" 200 -
2025-12-03 23:32:40,282 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory/stats HTTP/1.1" 200 -
2025-12-03 23:32:40,282 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:32:40,284 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-03 23:32:40,284 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory/brands HTTP/1.1" 200 -
2025-12-03 23:32:40,292 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-03 23:32:40,292 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:32:40,295 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory/stats HTTP/1.1" 200 -
2025-12-03 23:32:40,299 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/inventory?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-03 23:32:40,918 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:40] "GET /api/suppliers?params[search]=&params[page]=1&params[per_page]=20 HTTP/1.1" 200 -
2025-12-03 23:32:41,677 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:41] "GET /api/cash-records HTTP/1.1" 200 -
2025-12-03 23:32:43,572 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:43] "GET /api/sms/headers HTTP/1.1" 200 -
2025-12-03 23:32:43,572 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:32:43] "GET /api/sms/credit HTTP/1.1" 200 -
2025-12-03 23:33:00,699 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:00] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:33:00,708 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:00] "GET /api/sms/packages HTTP/1.1" 200 -
2025-12-03 23:33:00,709 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:00] "GET /api/addons HTTP/1.1" 200 -
2025-12-03 23:33:05,050 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:05] "GET /api/branches HTTP/1.1" 200 -
2025-12-03 23:33:05,065 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:05] "GET /api/branches HTTP/1.1" 200 -
2025-12-03 23:33:05,068 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:05] "GET /api/users HTTP/1.1" 200 -
2025-12-03 23:33:07,238 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:07] "GET /api/permissions HTTP/1.1" 200 -
2025-12-03 23:33:07,238 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:07] "GET /api/permissions/role/odyolog HTTP/1.1" 200 -
2025-12-03 23:33:09,186 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-03 23:33:09,201 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:09] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-03 23:33:10,213 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-03 23:33:10,216 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:10] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-03 23:33:12,237 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-03 23:33:12,241 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:33:12] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-03 23:45:24,150 - routes.auth - INFO - Login attempt with data: {'email': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:45:24,151 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:45:24,226 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:24] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:45:32,807 - routes.auth - INFO - Login attempt with data: {'email': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:45:32,808 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:45:32,878 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:32] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:45:37,572 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:37] "POST /api/admin/auth/login HTTP/1.1" 200 -
2025-12-03 23:45:46,147 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:46] "GET /api/patients?page=1 HTTP/1.1" 200 -
2025-12-03 23:45:46,252 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:46] "GET /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:45:46,383 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:46] "[31m[1mPOST /api/patients HTTP/1.1[0m" 400 -
2025-12-03 23:45:46,521 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:46] "[31m[1mPUT /api/patients/pat_7931397d HTTP/1.1[0m" 400 -
2025-12-03 23:45:46,639 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:45:46] "[33mDELETE /api/patients/nonexistent HTTP/1.1[0m" 404 -
2025-12-03 23:46:21,316 - routes.auth - INFO - Login attempt with data: {'email': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:46:21,317 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:46:21,389 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:46:21,464 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "POST /api/admin/auth/login HTTP/1.1" 200 -
2025-12-03 23:46:21,499 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/patients?page=1 HTTP/1.1" 200 -
2025-12-03 23:46:21,515 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:46:21,529 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[31m[1mPOST /api/patients HTTP/1.1[0m" 400 -
2025-12-03 23:46:21,542 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[31m[1mPUT /api/patients/pat_7931397d HTTP/1.1[0m" 400 -
2025-12-03 23:46:21,560 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[33mDELETE /api/patients/nonexistent HTTP/1.1[0m" 404 -
2025-12-03 23:46:21,596 - routes.sales - ERROR - Get sales error: name 'User' is not defined
2025-12-03 23:46:21,597 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[35m[1mGET /api/sales?page=1 HTTP/1.1[0m" 500 -
2025-12-03 23:46:21,615 - __main__ - ERROR - Unhandled exception: 405 Method Not Allowed: The method is not allowed for the requested URL.
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 891, in dispatch_request
    self.raise_routing_exception(req)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 500, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/werkzeug/routing/map.py", line 624, in match
    raise MethodNotAllowed(valid_methods=list(e.have_match_for)) from None
werkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.
2025-12-03 23:46:21,619 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[35m[1mPOST /api/sales HTTP/1.1[0m" 500 -
2025-12-03 23:46:21,647 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/activity-logs?page=1 HTTP/1.1" 200 -
2025-12-03 23:46:21,665 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[33mGET /api/activity-logs/stats HTTP/1.1[0m" 404 -
2025-12-03 23:46:21,684 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-03 23:46:21,712 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/activity-logs?page=1 HTTP/1.1" 200 -
2025-12-03 23:46:21,727 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/activity-logs/stats HTTP/1.1" 200 -
2025-12-03 23:46:21,742 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-03 23:46:21,761 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/users HTTP/1.1" 200 -
2025-12-03 23:46:21,784 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/users/all HTTP/1.1" 200 -
2025-12-03 23:46:21,798 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/tickets HTTP/1.1" 200 -
2025-12-03 23:46:21,822 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "GET /api/admin/activity-logs HTTP/1.1" 200 -
2025-12-03 23:46:21,834 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[31m[1mGET /api/patients HTTP/1.1[0m" 422 -
2025-12-03 23:46:21,846 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:21] "[31m[1mGET /api/admin/activity-logs HTTP/1.1[0m" 422 -
2025-12-03 23:46:32,576 - routes.sales - ERROR - Get sales error: name 'User' is not defined
2025-12-03 23:46:32,577 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:32] "[35m[1mGET /api/sales?page=1 HTTP/1.1[0m" 500 -
2025-12-03 23:46:38,727 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:46:38] "[33mGET /api/activity-logs/stats HTTP/1.1[0m" 404 -
2025-12-03 23:48:19,330 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:48:19] "[31m[1mPUT /api/patients/pat_7931397d HTTP/1.1[0m" 400 -
2025-12-03 23:48:25,814 - utils.optimistic_locking - WARNING - No If-Match header provided for optimistic locking
2025-12-03 23:48:25,826 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:48:25,826 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-03 23:48:25,826 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-03 23:48:25,827 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-03 23:48:25,827 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-03 23:48:25,828 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:48:25,828 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:48:25,828 - app - WARNING - Prometheus initialization skipped: Duplicated timeseries in CollectorRegistry: {'http_requests_total', 'http_requests', 'http_requests_created'}
2025-12-03 23:48:25,828 - app - WARNING - Prometheus initialization skipped: Duplicated timeseries in CollectorRegistry: {'http_requests_total', 'http_requests', 'http_requests_created'}
2025-12-03 23:48:25,890 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-03 23:48:25,890 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-03 23:48:25,894 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.users.delete', 'admin.tickets.respond', 'admin.activity_logs.view', 'admin.tenants.manage', 'activity_logs.export', 'admin.tickets.edit', 'admin.tickets.create', 'admin.tenants.create', 'admin.settings.edit', 'admin.users.create', 'admin.system.logs', 'admin.system.view', 'admin.tenants.delete', 'admin.tenants.view', 'admin.users.edit', 'admin.settings.view', 'admin.tenants.edit', 'admin.users.view', 'activity_logs.view', 'admin.tickets.view'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:48:25,894 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.users.delete', 'admin.tickets.respond', 'admin.activity_logs.view', 'admin.tenants.manage', 'activity_logs.export', 'admin.tickets.edit', 'admin.tickets.create', 'admin.tenants.create', 'admin.settings.edit', 'admin.users.create', 'admin.system.logs', 'admin.system.view', 'admin.tenants.delete', 'admin.tenants.view', 'admin.users.edit', 'admin.settings.view', 'admin.tenants.edit', 'admin.users.view', 'activity_logs.view', 'admin.tickets.view'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:48:25,899 - app - WARNING - DB commit successful for idempotency key=test-update-patient-1764794905-random endpoint=patients.update_patient status=200
2025-12-03 23:48:25,899 - app - WARNING - DB commit successful for idempotency key=test-update-patient-1764794905-random endpoint=patients.update_patient status=200
2025-12-03 23:48:25,899 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:48:25] "PUT /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:48:25,899 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:48:25] "PUT /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:48:39,249 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-03 23:48:39,338 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-03 23:48:39,338 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-03 23:48:39,339 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:48:39,339 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-03 23:48:39,965 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-03 23:48:39,974 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-03 23:48:40,493 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-03 23:48:40,503 - __main__ - INFO - Permission middleware initialized successfully
2025-12-03 23:48:40,505 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.system.logs', 'admin.system.view', 'admin.tickets.respond', 'admin.tickets.edit', 'admin.tenants.edit', 'admin.users.edit', 'admin.users.create', 'admin.tenants.view', 'admin.settings.view', 'admin.users.view', 'activity_logs.export', 'admin.tickets.create', 'admin.tenants.manage', 'activity_logs.view', 'admin.tenants.create', 'admin.settings.edit', 'admin.tickets.view', 'admin.users.delete', 'admin.activity_logs.view', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:48:40,505 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.system.logs', 'admin.system.view', 'admin.tickets.respond', 'admin.tickets.edit', 'admin.tenants.edit', 'admin.users.edit', 'admin.users.create', 'admin.tenants.view', 'admin.settings.view', 'admin.users.view', 'activity_logs.export', 'admin.tickets.create', 'admin.tenants.manage', 'activity_logs.view', 'admin.tenants.create', 'admin.settings.edit', 'admin.tickets.view', 'admin.users.delete', 'admin.activity_logs.view', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:48:40,506 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-03 23:48:40,511 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5003
 * Running on http://192.168.1.133:5003
2025-12-03 23:48:40,511 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-12-03 23:48:41,407 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-03 23:48:42,973 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:48:42] "GET /api/health HTTP/1.1" 200 -
2025-12-03 23:48:43,284 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:48:43] "GET /api/health HTTP/1.1" 200 -
2025-12-03 23:49:31,877 - routes.auth - INFO - Login attempt with data: {'email': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:49:31,877 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:49:31,965 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:31] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:49:32,038 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "POST /api/admin/auth/login HTTP/1.1" 200 -
2025-12-03 23:49:32,059 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/patients?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,074 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:49:32,099 - app - WARNING - DB commit successful for idempotency key=test-create-patient-12345 endpoint=patients.create_patient status=400
2025-12-03 23:49:32,099 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[31m[1mPOST /api/patients HTTP/1.1[0m" 400 -
2025-12-03 23:49:32,114 - utils.optimistic_locking - WARNING - No If-Match header provided for optimistic locking
2025-12-03 23:49:32,121 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:49:32,121 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-03 23:49:32,121 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-03 23:49:32,122 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-03 23:49:32,122 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-03 23:49:32,123 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:49:32,123 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-03 23:49:32,123 - app - WARNING - Prometheus initialization skipped: Duplicated timeseries in CollectorRegistry: {'http_requests', 'http_requests_created', 'http_requests_total'}
2025-12-03 23:49:32,123 - app - WARNING - Prometheus initialization skipped: Duplicated timeseries in CollectorRegistry: {'http_requests', 'http_requests_created', 'http_requests_total'}
2025-12-03 23:49:32,182 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-03 23:49:32,182 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-03 23:49:32,188 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.system.logs', 'admin.system.view', 'admin.tickets.respond', 'admin.tickets.edit', 'admin.tenants.edit', 'admin.users.edit', 'admin.users.create', 'admin.tenants.view', 'admin.settings.view', 'admin.users.view', 'activity_logs.export', 'admin.tickets.create', 'admin.tenants.manage', 'activity_logs.view', 'admin.tenants.create', 'admin.settings.edit', 'admin.tickets.view', 'admin.users.delete', 'admin.activity_logs.view', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:49:32,188 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.system.logs', 'admin.system.view', 'admin.tickets.respond', 'admin.tickets.edit', 'admin.tenants.edit', 'admin.users.edit', 'admin.users.create', 'admin.tenants.view', 'admin.settings.view', 'admin.users.view', 'activity_logs.export', 'admin.tickets.create', 'admin.tenants.manage', 'activity_logs.view', 'admin.tenants.create', 'admin.settings.edit', 'admin.tickets.view', 'admin.users.delete', 'admin.activity_logs.view', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-03 23:49:32,192 - app - WARNING - DB commit successful for idempotency key=test-update-patient-12345 endpoint=patients.update_patient status=200
2025-12-03 23:49:32,192 - app - WARNING - DB commit successful for idempotency key=test-update-patient-12345 endpoint=patients.update_patient status=200
2025-12-03 23:49:32,193 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "PUT /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:49:32,193 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "PUT /api/patients/pat_7931397d HTTP/1.1" 200 -
2025-12-03 23:49:32,209 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[33mDELETE /api/patients/nonexistent HTTP/1.1[0m" 404 -
2025-12-03 23:49:32,209 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[33mDELETE /api/patients/nonexistent HTTP/1.1[0m" 404 -
2025-12-03 23:49:32,229 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/sales?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,229 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/sales?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,398 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/activity-logs?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,398 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/activity-logs?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,420 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-03 23:49:32,420 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-03 23:49:32,447 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/activity-logs?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,447 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/activity-logs?page=1 HTTP/1.1" 200 -
2025-12-03 23:49:32,465 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/activity-logs/stats HTTP/1.1" 200 -
2025-12-03 23:49:32,465 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/activity-logs/stats HTTP/1.1" 200 -
2025-12-03 23:49:32,481 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-03 23:49:32,481 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-03 23:49:32,496 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/users HTTP/1.1" 200 -
2025-12-03 23:49:32,496 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/users HTTP/1.1" 200 -
2025-12-03 23:49:32,510 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/tickets HTTP/1.1" 200 -
2025-12-03 23:49:32,510 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "GET /api/admin/tickets HTTP/1.1" 200 -
2025-12-03 23:49:32,524 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[31m[1mGET /api/patients HTTP/1.1[0m" 422 -
2025-12-03 23:49:32,524 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[31m[1mGET /api/patients HTTP/1.1[0m" 422 -
2025-12-03 23:49:32,536 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[31m[1mGET /api/admin/activity-logs HTTP/1.1[0m" 422 -
2025-12-03 23:49:32,536 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:49:32] "[31m[1mGET /api/admin/activity-logs HTTP/1.1[0m" 422 -
2025-12-03 23:51:21,961 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:21] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-03 23:51:21,961 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:21] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-03 23:51:22,013 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:22] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-03 23:51:22,013 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:22] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-03 23:51:26,326 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:51:26,326 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:51:26,326 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:51:26,326 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:51:26,407 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:51:26,407 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:51:26,413 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:26,413 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:26,439 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:51:26,439 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:51:26,490 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:26,490 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:26,998 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-03 23:51:26,998 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:26] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-03 23:51:27,004 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:27,004 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:27,014 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:27,014 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:51:27,015 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-03 23:51:27,015 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-03 23:51:27,017 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:51:27,017 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:51:27,056 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:51:27,056 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:51:27,091 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-03 23:51:27,091 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-03 23:51:27,105 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-03 23:51:27,105 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:51:27] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-03 23:52:06,169 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,169 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,701 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,701 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,711 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,711 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,713 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,713 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,716 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/admin/debug/available-roles HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,716 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/admin/debug/available-roles HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,786 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-03 23:52:06,786 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:06] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-03 23:52:07,958 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:07] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-03 23:52:07,958 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:07] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-03 23:52:07,976 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:07] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-03 23:52:07,976 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:07] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-03 23:52:15,023 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:52:15,023 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-03 23:52:15,024 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:52:15,024 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-03 23:52:15,118 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:52:15,118 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-03 23:52:15,123 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,123 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,139 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:52:15,139 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:52:15,172 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,172 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,605 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-03 23:52:15,605 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-03 23:52:15,608 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,608 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,616 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,616 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:52:15,618 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-03 23:52:15,618 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-03 23:52:15,619 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:52:15,619 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-03 23:52:15,679 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:52:15,679 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-03 23:52:15,680 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-03 23:52:15,680 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-03 23:52:15,682 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-03 23:52:15,682 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:52:15] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-03 23:55:13,149 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:55:13] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-03 23:55:13,149 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:55:13] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-03 23:55:13,352 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:55:13] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-03 23:55:13,352 - werkzeug - INFO - 127.0.0.1 - - [03/Dec/2025 23:55:13] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 12:56:33,444 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 12:56:33,524 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 12:56:33,525 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 12:56:33,525 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 12:56:33,525 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-04 12:56:34,211 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 12:56:34,220 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 12:56:34,720 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-04 12:56:34,727 - __main__ - INFO - Permission middleware initialized successfully
2025-12-04 12:56:34,729 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.tenants.edit', 'admin.system.view', 'admin.activity_logs.view', 'admin.tenants.view', 'activity_logs.view', 'admin.users.delete', 'admin.settings.edit', 'admin.system.logs', 'activity_logs.export', 'admin.tickets.respond', 'admin.users.create', 'admin.tickets.view', 'admin.tenants.manage', 'admin.users.view', 'admin.tickets.create', 'admin.tickets.edit', 'admin.settings.view', 'admin.users.edit', 'admin.tenants.create', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 12:56:34,729 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.tenants.edit', 'admin.system.view', 'admin.activity_logs.view', 'admin.tenants.view', 'activity_logs.view', 'admin.users.delete', 'admin.settings.edit', 'admin.system.logs', 'activity_logs.export', 'admin.tickets.respond', 'admin.users.create', 'admin.tickets.view', 'admin.tenants.manage', 'admin.users.view', 'admin.tickets.create', 'admin.tickets.edit', 'admin.settings.view', 'admin.users.edit', 'admin.tenants.create', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 12:56:34,729 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-04 12:56:34,737 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5003
 * Running on http://172.20.10.3:5003
2025-12-04 12:56:34,737 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-12-04 12:56:35,780 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-04 12:56:36,889 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:36] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 12:56:36,944 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:36] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 12:56:47,762 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:47] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 204 -
2025-12-04 12:56:47,765 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-04 12:56:47,765 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-04 12:56:47,854 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:47] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-04 12:56:47,862 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:47] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 12:56:47,912 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:47] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 12:56:47,928 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:47] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-04 12:56:48,005 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:48] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 12:56:49,025 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 12:56:49,069 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 12:56:49,074 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 12:56:49,081 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-04 12:56:49,083 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 12:56:49,206 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 12:56:49,206 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 12:56:49,247 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 12:56:49] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-04 13:09:45,464 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:45] "GET /api/sms/headers HTTP/1.1" 200 -
2025-12-04 13:09:45,465 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:45] "GET /api/sms/credit HTTP/1.1" 200 -
2025-12-04 13:09:45,468 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-04 13:09:45,486 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:45] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-04 13:09:46,500 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-04 13:09:46,503 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:46] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-04 13:09:48,523 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-04 13:09:48,527 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:48] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-04 13:09:55,126 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:55] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:09:55,139 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:55] "GET /api/addons HTTP/1.1" 200 -
2025-12-04 13:09:55,139 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:55] "GET /api/sms/packages HTTP/1.1" 200 -
2025-12-04 13:09:59,791 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:59] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:09:59,800 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:09:59] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:11:12,993 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:12] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:13,129 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:13,876 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:13,924 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:13,936 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:13,936 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:13,936 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:13,939 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:13,939 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:13,942 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:13] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:14,029 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:14] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:14,050 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:14] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:16,287 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:16,361 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:16,748 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:16,753 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:16,757 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:16,763 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=secretary, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:16,763 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=secretary, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:16,763 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:16,764 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:16,767 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:16,845 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:16,938 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:16] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:17,806 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:17] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:17,856 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:17] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:18,264 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:18,268 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:18,286 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:18,331 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:18,334 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:11:18,339 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:11:18,390 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:18,403 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:18] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:19,901 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:19] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:19,959 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:19] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:20,323 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:20,325 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:20,328 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:20,331 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyolog, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:20,332 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:20,332 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyolog, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:20,333 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:20,336 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:20,434 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:20,466 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:20] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:21,978 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:21] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:22,038 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:22,376 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:22,381 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:22,385 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:22,386 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyometrist, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:22,387 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:22,388 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyometrist, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:22,389 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:22,390 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:22,484 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:22,514 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:22] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:23,881 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:23] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:23,942 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:23] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:24,299 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:24,306 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:24,311 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=user, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:24,312 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:24,312 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:24,318 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=user, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:24,318 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:24,320 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:24,417 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:24,443 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:24] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:25,301 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:25,354 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:25,715 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:25,719 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:25,725 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:25,880 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:25,903 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:25,906 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:25,907 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:11:25,912 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:25] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:11:27,038 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:27,093 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:27,438 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:27,441 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:27,447 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:27,447 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=tenant_user, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:27,448 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:27,449 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=tenant_user, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:27,449 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:27,456 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:27,599 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:27,610 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:27] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:11:28,631 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:28] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:28,676 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:28] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:29,046 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=TestRole, path=/api/appointments/list, method=GET, required=patients.view
2025-12-04 13:11:29,046 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 403 -
2025-12-04 13:11:29,055 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:29,060 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:29,061 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=TestRole, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:11:29,062 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:11:29,064 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=TestRole, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:11:29,065 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:11:29,067 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:29,163 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=TestRole, path=/api/patients, method=GET, required=patients.view
2025-12-04 13:11:29,163 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:29] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 403 -
2025-12-04 13:11:30,844 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:30] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:11:30,899 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:30] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:31,265 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:31,265 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:11:31,272 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:11:31,284 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:11:31,288 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:11:31,294 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:11:31,388 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:11:31,400 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:11:31] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:13:50,211 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:50] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:13:50,310 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:50] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:51,022 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:51] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:13:51,035 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:51] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:51,038 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:51] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:51,045 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:51] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:13:51,119 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:51] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:13:51,187 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:51] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:13:52,922 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:52] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:13:52,978 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:52] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:53,337 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:53] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:13:53,343 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:53] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:53,345 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:53] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:53,350 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:53] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:13:53,464 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:53] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:13:53,482 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:53] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:13:55,814 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:55] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:13:55,871 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:55] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:56,236 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:56] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:13:56,250 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:56] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:56,255 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:56] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:56,257 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:56] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:13:56,408 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:56] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:13:56,441 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:56] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:13:58,596 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:58] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:13:58,651 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:58] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:59,048 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:59] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:13:59,060 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:59] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:59,063 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:59] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:13:59,065 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:59] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:13:59,166 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:59] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:13:59,198 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:13:59] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:14:08,232 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:14:08,307 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:14:08,723 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:14:08,729 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:14:08,732 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:14:08,739 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:14:08,849 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:14:08,855 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:08] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:14:11,529 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:11] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:14:11,625 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:11] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:14:11,998 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:11] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:14:12,000 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:12] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:14:12,003 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:12] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:14:12,008 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:12] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:14:12,121 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:12] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:14:12,130 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:14:12] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:15:36,603 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 13:15:36,693 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 13:15:36,694 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 13:15:36,695 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 13:15:36,695 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-04 13:15:37,364 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 13:15:37,374 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 13:15:37,959 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-04 13:15:37,966 - __main__ - INFO - Permission middleware initialized successfully
2025-12-04 13:15:37,969 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.system.logs', 'admin.tickets.create', 'admin.tenants.delete', 'admin.tenants.manage', 'admin.tenants.edit', 'admin.system.view', 'admin.users.delete', 'admin.settings.view', 'admin.settings.edit', 'admin.users.edit', 'admin.users.create', 'admin.tenants.view', 'admin.tickets.respond', 'activity_logs.view', 'admin.users.view', 'admin.activity_logs.view', 'activity_logs.export', 'admin.tenants.create', 'admin.tickets.edit', 'admin.tickets.view'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:15:37,969 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.system.logs', 'admin.tickets.create', 'admin.tenants.delete', 'admin.tenants.manage', 'admin.tenants.edit', 'admin.system.view', 'admin.users.delete', 'admin.settings.view', 'admin.settings.edit', 'admin.users.edit', 'admin.users.create', 'admin.tenants.view', 'admin.tickets.respond', 'activity_logs.view', 'admin.users.view', 'admin.activity_logs.view', 'activity_logs.export', 'admin.tenants.create', 'admin.tickets.edit', 'admin.tickets.view'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:15:37,969 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-04 13:15:37,994 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5003
 * Running on http://172.20.10.3:5003
2025-12-04 13:15:37,994 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-12-04 13:15:38,029 - werkzeug - INFO -  * Restarting with watchdog (fsevents)
2025-12-04 13:15:38,297 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 13:15:38,342 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 13:15:38,343 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 13:15:38,344 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 13:15:38,344 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-04 13:15:38,710 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 13:15:38,716 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 13:15:38,945 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-04 13:15:38,976 - __main__ - INFO - Permission middleware initialized successfully
2025-12-04 13:15:38,979 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.tenants.edit', 'admin.system.logs', 'admin.tickets.respond', 'admin.users.delete', 'admin.tenants.view', 'admin.tenants.manage', 'admin.settings.edit', 'admin.users.edit', 'activity_logs.view', 'admin.activity_logs.view', 'admin.system.view', 'admin.tickets.view', 'admin.tickets.create', 'admin.tenants.create', 'admin.users.create', 'admin.tickets.edit', 'activity_logs.export', 'admin.users.view', 'admin.settings.view'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:15:38,979 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.tenants.edit', 'admin.system.logs', 'admin.tickets.respond', 'admin.users.delete', 'admin.tenants.view', 'admin.tenants.manage', 'admin.settings.edit', 'admin.users.edit', 'activity_logs.view', 'admin.activity_logs.view', 'admin.system.view', 'admin.tickets.view', 'admin.tickets.create', 'admin.tenants.create', 'admin.users.create', 'admin.tickets.edit', 'activity_logs.export', 'admin.users.view', 'admin.settings.view'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:15:38,979 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-04 13:15:39,006 - werkzeug - WARNING -  * Debugger is active!
2025-12-04 13:15:39,017 - werkzeug - INFO -  * Debugger PIN: 142-890-432
2025-12-04 13:17:29,486 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 13:17:29,572 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 13:17:29,573 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 13:17:29,573 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 13:17:29,573 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-04 13:17:30,115 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 13:17:30,125 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 13:17:30,663 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-04 13:17:30,674 - __main__ - INFO - Permission middleware initialized successfully
2025-12-04 13:17:30,676 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.activity_logs.view', 'activity_logs.export', 'admin.tenants.delete', 'admin.tenants.edit', 'admin.users.create', 'admin.tickets.create', 'admin.tickets.edit', 'admin.users.view', 'admin.settings.edit', 'admin.tenants.manage', 'admin.users.delete', 'activity_logs.view', 'admin.system.view', 'admin.settings.view', 'admin.tickets.view', 'admin.tenants.view', 'admin.system.logs', 'admin.tickets.respond', 'admin.tenants.create', 'admin.users.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:17:30,676 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.activity_logs.view', 'activity_logs.export', 'admin.tenants.delete', 'admin.tenants.edit', 'admin.users.create', 'admin.tickets.create', 'admin.tickets.edit', 'admin.users.view', 'admin.settings.edit', 'admin.tenants.manage', 'admin.users.delete', 'activity_logs.view', 'admin.system.view', 'admin.settings.view', 'admin.tickets.view', 'admin.tenants.view', 'admin.system.logs', 'admin.tickets.respond', 'admin.tenants.create', 'admin.users.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:17:30,676 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-04 13:18:54,753 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 13:18:54,835 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 13:18:54,835 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 13:18:54,836 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 13:18:54,836 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-04 13:18:55,338 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 13:18:55,346 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 13:18:55,812 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-04 13:18:55,817 - __main__ - INFO - Permission middleware initialized successfully
2025-12-04 13:18:55,819 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.users.create', 'admin.tenants.create', 'admin.tickets.view', 'admin.users.edit', 'admin.tickets.edit', 'activity_logs.export', 'admin.tickets.respond', 'admin.users.delete', 'admin.settings.view', 'admin.system.view', 'admin.tenants.view', 'admin.tenants.manage', 'admin.system.logs', 'admin.tenants.edit', 'admin.activity_logs.view', 'admin.settings.edit', 'admin.users.view', 'activity_logs.view', 'admin.tickets.create', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:18:55,819 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.users.create', 'admin.tenants.create', 'admin.tickets.view', 'admin.users.edit', 'admin.tickets.edit', 'activity_logs.export', 'admin.tickets.respond', 'admin.users.delete', 'admin.settings.view', 'admin.system.view', 'admin.tenants.view', 'admin.tenants.manage', 'admin.system.logs', 'admin.tenants.edit', 'admin.activity_logs.view', 'admin.settings.edit', 'admin.users.view', 'activity_logs.view', 'admin.tickets.create', 'admin.tenants.delete'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:18:55,819 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-04 13:18:55,830 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5003
 * Running on http://172.20.10.3:5003
2025-12-04 13:18:55,830 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-12-04 13:18:56,539 - services.ocr_service - WARNING - PaddleOCR not available: No module named 'imghdr'
2025-12-04 13:19:00,953 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 13:19:01,036 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 13:19:01,037 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 13:19:01,037 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 13:19:01,038 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-04 13:19:01,415 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 13:19:01,423 - __main__ - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 13:19:01,628 - __main__ - INFO - Ensuring database tables exist (create_all)
2025-12-04 13:19:01,635 - __main__ - INFO - Permission middleware initialized successfully
2025-12-04 13:19:01,637 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.users.delete', 'admin.system.logs', 'admin.tickets.view', 'admin.tenants.view', 'admin.users.view', 'admin.tickets.create', 'activity_logs.view', 'admin.users.edit', 'activity_logs.export', 'admin.tenants.create', 'admin.users.create', 'admin.tickets.respond', 'admin.tickets.edit', 'admin.tenants.edit', 'admin.settings.view', 'admin.system.view', 'admin.tenants.manage', 'admin.activity_logs.view', 'admin.settings.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:19:01,637 - __main__ - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.users.delete', 'admin.system.logs', 'admin.tickets.view', 'admin.tenants.view', 'admin.users.view', 'admin.tickets.create', 'activity_logs.view', 'admin.users.edit', 'activity_logs.export', 'admin.tenants.create', 'admin.users.create', 'admin.tickets.respond', 'admin.tickets.edit', 'admin.tenants.edit', 'admin.settings.view', 'admin.system.view', 'admin.tenants.manage', 'admin.activity_logs.view', 'admin.settings.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:19:01,638 - __main__ - INFO - Starting Flask development server on 0.0.0.0:5003
2025-12-04 13:19:07,592 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:07] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:19:07,670 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:07] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:19:08,713 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:08] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:19:08,760 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:08] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:19:13,315 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:13] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:19:13,369 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:13] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:19:24,068 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:24] "[35m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 204 -
2025-12-04 13:19:24,072 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-04 13:19:24,073 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-04 13:19:24,168 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:24] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-04 13:19:24,178 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:24] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:19:24,234 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:24] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:19:24,247 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:24] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-04 13:19:24,309 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:24] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:19:25,249 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:19:25,284 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:19:25,297 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:19:25,325 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:19:25,325 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-04 13:19:25,326 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:19:25,330 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:19:25,503 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:25] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-04 13:19:32,775 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:32] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:19:32,786 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:19:32] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:21:11,566 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-04 13:21:11,572 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:11] "GET /api/sms/credit HTTP/1.1" 200 -
2025-12-04 13:21:11,573 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:11] "GET /api/sms/headers HTTP/1.1" 200 -
2025-12-04 13:21:11,586 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:11] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-04 13:21:13,800 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:13] "GET /api/branches HTTP/1.1" 200 -
2025-12-04 13:21:13,807 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:13] "GET /api/users HTTP/1.1" 200 -
2025-12-04 13:21:13,808 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:13] "GET /api/branches HTTP/1.1" 200 -
2025-12-04 13:21:14,743 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:14] "GET /api/permissions HTTP/1.1" 200 -
2025-12-04 13:21:14,744 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:14] "GET /api/permissions/role/odyolog HTTP/1.1" 200 -
2025-12-04 13:21:22,858 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:22] "GET /api/permissions/role/odyometrist HTTP/1.1" 200 -
2025-12-04 13:21:26,213 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:26] "GET /api/permissions/role/secretary HTTP/1.1" 200 -
2025-12-04 13:21:27,808 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:27] "GET /api/permissions/role/user HTTP/1.1" 200 -
2025-12-04 13:21:30,244 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:21:30] "GET /api/permissions/role/admin HTTP/1.1" 200 -
2025-12-04 13:36:00,847 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:00] "GET /api/health HTTP/1.1" 200 -
2025-12-04 13:36:04,519 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:04] "GET /api/health HTTP/1.1" 200 -
2025-12-04 13:36:36,370 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:36] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:36:36,430 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:36] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:36:40,494 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-04 13:36:40,495 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-04 13:36:40,583 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:40] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-04 13:36:40,591 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:40] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:36:40,617 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:40] "GET /api/branches HTTP/1.1" 200 -
2025-12-04 13:36:40,622 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:40] "GET /api/users HTTP/1.1" 200 -
2025-12-04 13:36:40,625 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:40] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:36:40,667 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:40] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:36:41,172 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:36:41,187 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:36:41,194 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:36:41,197 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-04 13:36:41,198 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:36:41,232 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-04 13:36:41,252 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:36:41,314 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:41] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:36:43,546 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:43] "[35m[1mOPTIONS /api/permissions/my HTTP/1.1[0m" 204 -
2025-12-04 13:36:43,565 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:43] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:36:43,586 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:43] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:36:43,586 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:43] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:36:46,103 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:46] "GET /api/reports/patients?days=30 HTTP/1.1" 200 -
2025-12-04 13:36:47,896 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:47] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:36:47,904 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:36:47] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:37:03,471 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:37:03,531 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:03,969 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:37:03,975 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:03,982 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:03,983 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:37:03,985 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:03] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:37:04,107 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:37:04,107 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:04] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:37:04,107 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:37:04,108 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:04] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:37:04,108 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:04] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:37:04,115 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:04] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:37:06,589 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:06] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:37:06,640 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:06] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:07,045 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:37:07,053 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:07,058 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:07,060 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:37:07,062 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:37:07,214 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:37:07,215 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyometrist, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:37:07,215 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:37:07,215 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyometrist, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:37:07,215 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:37:07,222 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:07] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:37:08,405 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:37:08,459 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:08,829 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:37:08,832 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:08,837 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:08,839 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:37:08,841 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:37:08,940 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:37:08,940 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:37:08,940 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:37:08,941 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:37:08,941 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:37:08,945 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:08] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:37:10,707 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:10] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:37:10,766 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:10] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:11,127 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:37:11,131 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:11,136 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:11,137 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:37:11,139 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:37:11,291 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:37:11,302 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:37:11,308 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:37:11,318 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:11] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:37:14,466 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:37:14,521 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:14,872 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:37:14,878 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:14,884 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:37:14,884 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:37:14,887 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:37:14,979 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:37:14,990 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:37:14,995 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:14] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:37:15,003 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:37:15] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:41:43,327 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:43] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:41:43,328 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:43] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:41:45,317 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:45] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:41:45,404 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:45] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:46,159 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:41:46,175 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:46,178 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:46,185 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:41:46,186 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:41:46,249 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:41:46,300 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:41:46,301 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:41:46,324 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:46] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:41:48,348 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-04 13:41:48,350 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:48] "GET /api/sms/credit HTTP/1.1" 200 -
2025-12-04 13:41:48,352 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:48] "GET /api/sms/headers HTTP/1.1" 200 -
2025-12-04 13:41:48,356 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:48] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-04 13:41:49,370 - __main__ - ERROR - Unhandled exception: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: sms_provider_configs.documents_email

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/routes/sms_integration.py", line 30, in get_sms_config
    config = SMSProviderConfig.query.filter_by(tenant_id=user.tenant_id).first()
  File "/Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/models/base.py", line 193, in first
    return BaseQuery.first(q)
           ~~~~~~~~~~~~~~~^^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/omerozmen/Desktop/x-ear web app/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: sms_provider_configs.documents_email
[SQL: SELECT sms_provider_configs.id AS sms_provider_configs_id, sms_provider_configs.tenant_id AS sms_provider_configs_tenant_id, sms_provider_configs.api_username AS sms_provider_configs_api_username, sms_provider_configs.api_password AS sms_provider_configs_api_password, sms_provider_configs.documents_email AS sms_provider_configs_documents_email, sms_provider_configs.documents AS sms_provider_configs_documents, sms_provider_configs.is_active AS sms_provider_configs_is_active, sms_provider_configs.created_at AS sms_provider_configs_created_at, sms_provider_configs.updated_at AS sms_provider_configs_updated_at 
FROM sms_provider_configs 
WHERE sms_provider_configs.tenant_id = ?
 LIMIT ? OFFSET ?]
[parameters: ('138283aa-249a-44e7-9600-257997ecd789', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-12-04 13:41:49,372 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:49] "[35m[1mGET /api/sms/config HTTP/1.1[0m" 500 -
2025-12-04 13:41:49,996 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/branches, method=GET, required=settings.view
2025-12-04 13:41:49,997 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:49] "[31m[1mGET /api/branches HTTP/1.1[0m" 403 -
2025-12-04 13:41:50,009 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/users, method=GET, required=team.view
2025-12-04 13:41:50,010 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:50] "[31m[1mGET /api/users HTTP/1.1[0m" 403 -
2025-12-04 13:41:50,011 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/branches, method=GET, required=settings.view
2025-12-04 13:41:50,011 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:50] "[31m[1mGET /api/branches HTTP/1.1[0m" 403 -
2025-12-04 13:41:51,466 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/permissions/role/odyolog, method=GET, required=team.permissions
2025-12-04 13:41:51,466 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/permissions, method=GET, required=team.permissions
2025-12-04 13:41:51,467 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:51] "[31m[1mGET /api/permissions/role/odyolog HTTP/1.1[0m" 403 -
2025-12-04 13:41:51,467 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:51] "[31m[1mGET /api/permissions HTTP/1.1[0m" 403 -
2025-12-04 13:41:52,735 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/branches, method=GET, required=settings.view
2025-12-04 13:41:52,735 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:52] "[31m[1mGET /api/branches HTTP/1.1[0m" 403 -
2025-12-04 13:41:52,735 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/users, method=GET, required=team.view
2025-12-04 13:41:52,736 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:52] "[31m[1mGET /api/users HTTP/1.1[0m" 403 -
2025-12-04 13:41:52,740 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/branches, method=GET, required=settings.view
2025-12-04 13:41:52,741 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:52] "[31m[1mGET /api/branches HTTP/1.1[0m" 403 -
2025-12-04 13:41:53,017 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,378 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,385 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,387 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,388 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/branches HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,389 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/admin/debug/available-roles HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,389 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/users HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,390 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/branches HTTP/1.1[0m" 401 -
2025-12-04 13:41:53,480 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:53] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:41:55,536 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:55] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:41:55,567 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:55] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:41:59,241 - routes.auth - INFO - Login attempt with data: {'username': 'admin@x-ear.com', 'password': 'admin123'}
2025-12-04 13:41:59,241 - routes.auth - INFO - Login attempt - identifier: admin@x-ear.com, password_provided: True
2025-12-04 13:41:59,321 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "POST /api/auth/login HTTP/1.1" 200 -
2025-12-04 13:41:59,328 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:59,350 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/branches HTTP/1.1" 200 -
2025-12-04 13:41:59,352 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/users HTTP/1.1" 200 -
2025-12-04 13:41:59,354 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:41:59,379 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:59,762 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:41:59,776 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:59,780 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:41:59,781 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/dashboard HTTP/1.1" 200 -
2025-12-04 13:41:59,783 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:41:59,872 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/dashboard/charts/patient-distribution HTTP/1.1" 200 -
2025-12-04 13:41:59,873 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:41:59,895 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:41:59] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:42:05,130 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:05] "GET /api/branches HTTP/1.1" 200 -
2025-12-04 13:42:05,132 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:05] "GET /api/users HTTP/1.1" 200 -
2025-12-04 13:42:05,134 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:05] "GET /api/branches HTTP/1.1" 200 -
2025-12-04 13:42:06,820 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:06] "GET /api/permissions/role/odyolog HTTP/1.1" 200 -
2025-12-04 13:42:06,827 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:06] "GET /api/permissions HTTP/1.1" 200 -
2025-12-04 13:42:10,376 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:10] "GET /api/permissions/role/admin HTTP/1.1" 200 -
2025-12-04 13:42:12,774 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:12] "GET /api/permissions/role/odyometrist HTTP/1.1" 200 -
2025-12-04 13:42:14,054 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:14] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:42:14,073 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:14] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:42:14,073 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:42:14] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:44:50,542 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:44:50] "GET /api/reports/overview HTTP/1.1" 200 -
2025-12-04 13:45:28,776 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:45:28] "GET /api/reports/financial HTTP/1.1" 200 -
2025-12-04 13:45:49,446 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:45:49] "GET /api/reports/patients HTTP/1.1" 200 -
2025-12-04 13:47:25,637 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:47:25] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:47:55,358 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:47:55] "GET /api/reports/patients?days=30 HTTP/1.1" 200 -
2025-12-04 13:47:56,761 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:47:56] "GET /api/activity-logs/filter-options HTTP/1.1" 200 -
2025-12-04 13:47:56,766 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:47:56] "GET /api/activity-logs?page=1&per_page=20 HTTP/1.1" 200 -
2025-12-04 13:48:00,717 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:48:00] "GET /api/cash-records HTTP/1.1" 200 -
2025-12-04 13:50:38,951 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:38] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 13:50:39,232 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:39] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 13:50:39,318 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:39] "[35m[1mOPTIONS /api/permissions/my HTTP/1.1[0m" 204 -
2025-12-04 13:50:39,320 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:39] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 13:50:39,322 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:39] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:50:39,331 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:39] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 13:50:39,338 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:39] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 13:50:40,329 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:40] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:50:42,334 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:50:42] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:51:16,157 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:16] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:16,304 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:16] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:17,102 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:17,122 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:17,130 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:17,141 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:17,148 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:17,230 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:17,290 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyometrist, path=/api/reports/overview, method=GET, required=reports.view
2025-12-04 13:51:17,290 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=odyometrist, path=/api/reports/financial, method=GET, required=reports.view
2025-12-04 13:51:17,291 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "[31m[1mGET /api/reports/overview?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:17,291 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "[31m[1mGET /api/reports/financial?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:17,309 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:17] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:18,952 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:18] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:19,011 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:19,395 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:19,402 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:19,408 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:19,409 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:19,411 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:19,463 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:19,502 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:19,503 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:19,545 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:19] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:22,444 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:22,498 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:22,840 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:22,845 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:22,850 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:22,851 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:22,853 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:22,952 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:22,976 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=tenant_user, path=/api/reports/overview, method=GET, required=reports.view
2025-12-04 13:51:22,977 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "[31m[1mGET /api/reports/overview?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:22,977 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=tenant_user, path=/api/reports/financial, method=GET, required=reports.view
2025-12-04 13:51:22,977 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "[31m[1mGET /api/reports/financial?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:22,988 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:22] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:24,766 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:24] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:24,823 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:24] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:25,206 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:25,212 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:25,217 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:25,219 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:25,220 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:25,318 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:25,318 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=secretary, path=/api/reports/overview, method=GET, required=reports.view
2025-12-04 13:51:25,319 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=secretary, path=/api/reports/financial, method=GET, required=reports.view
2025-12-04 13:51:25,319 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "[31m[1mGET /api/reports/overview?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:25,319 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "[31m[1mGET /api/reports/financial?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:25,337 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:25] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:27,194 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:27,242 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:27,589 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:27,593 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:27,599 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:27,600 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:27,602 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:27,696 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:27,715 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:27,715 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:27,721 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:27] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:30,302 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:30,358 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:30,711 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:30,717 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:30,722 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:30,725 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:30,727 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:30,879 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:30,883 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=secretary, path=/api/reports/financial, method=GET, required=reports.view
2025-12-04 13:51:30,883 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "[31m[1mGET /api/reports/financial?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:30,909 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:30] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:32,099 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:32,152 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:32,511 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:32,514 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:32,520 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:32,521 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:32,523 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:32,664 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:32,667 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:32,691 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:32] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:33,150 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:33] "GET /api/reports/patients?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:34,904 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:34] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:34,962 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:34] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:35,310 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:35,314 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:35,319 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:35,320 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:35,322 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:35,411 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:35,415 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=secretary, path=/api/reports/patients, method=GET, required=reports.view
2025-12-04 13:51:35,415 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "[31m[1mGET /api/reports/patients?days=30 HTTP/1.1[0m" 403 -
2025-12-04 13:51:35,423 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:35] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:37,159 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "POST /api/admin/debug/switch-role HTTP/1.1" 200 -
2025-12-04 13:51:37,212 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:37,575 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/appointments/list?page=1&per_page=1000 HTTP/1.1" 200 -
2025-12-04 13:51:37,578 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:37,582 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/subscriptions/current HTTP/1.1" 200 -
2025-12-04 13:51:37,586 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/permissions/my HTTP/1.1" 200 -
2025-12-04 13:51:37,588 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/admin/debug/available-roles HTTP/1.1" 200 -
2025-12-04 13:51:37,678 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/patients?per_page=100 HTTP/1.1" 200 -
2025-12-04 13:51:37,686 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/reports/patients?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:37,693 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:37] "GET /api/patients?params[page]=1&params[per_page]=1000 HTTP/1.1" 200 -
2025-12-04 13:51:42,752 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:51:42,753 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:42] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:51:42,756 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:51:42,756 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:42] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:51:53,253 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:53] "GET /api/reports/overview?days=30 HTTP/1.1" 200 -
2025-12-04 13:51:53,253 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:51:53] "GET /api/reports/financial?days=30 HTTP/1.1" 200 -
2025-12-04 13:52:03,806 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs, method=GET, required=activity_logs.view
2025-12-04 13:52:03,807 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:03] "[31m[1mGET /api/activity-logs?page=1&per_page=20 HTTP/1.1[0m" 403 -
2025-12-04 13:52:03,807 - middleware.permission_middleware - WARNING - Permission denied [MIDDLEWARE]: user=usr_admin, role=doctor, path=/api/activity-logs/filter-options, method=GET, required=activity_logs.view
2025-12-04 13:52:03,808 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:03] "[31m[1mGET /api/activity-logs/filter-options HTTP/1.1[0m" 403 -
2025-12-04 13:52:15,749 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:15] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:52:16,755 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:16] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:52:18,758 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:18] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:52:46,442 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:46] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:52:47,446 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:47] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:52:49,449 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:49] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 13:52:52,409 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:52] "GET /api/reports/overview HTTP/1.1" 200 -
2025-12-04 13:52:59,623 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:52:59] "GET /api/reports/financial HTTP/1.1" 200 -
2025-12-04 13:53:16,368 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 13:53:16] "GET /api/reports/patients HTTP/1.1" 200 -
2025-12-04 13:53:31,466 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-04 13:53:31,548 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-04 13:53:31,549 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-04 13:53:31,549 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-04 13:53:31,550 - app - INFO - Tenant security (global query filter) initialized
2025-12-04 13:53:32,207 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-04 13:53:32,218 - app - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-04 13:53:32,770 - app - INFO - Ensuring database tables exist (create_all)
2025-12-04 13:53:32,781 - app - INFO - Permission middleware initialized successfully
2025-12-04 13:53:32,785 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.tickets.view', 'admin.settings.view', 'admin.tenants.view', 'admin.system.logs', 'admin.users.create', 'admin.tickets.create', 'admin.tenants.create', 'admin.tickets.respond', 'admin.tickets.edit', 'activity_logs.export', 'admin.activity_logs.view', 'admin.users.view', 'activity_logs.view', 'admin.system.view', 'admin.users.delete', 'admin.settings.edit', 'admin.tenants.manage', 'admin.tenants.edit', 'admin.users.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 13:53:32,785 - app - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.tenants.delete', 'admin.tickets.view', 'admin.settings.view', 'admin.tenants.view', 'admin.system.logs', 'admin.users.create', 'admin.tickets.create', 'admin.tenants.create', 'admin.tickets.respond', 'admin.tickets.edit', 'activity_logs.export', 'admin.activity_logs.view', 'admin.users.view', 'activity_logs.view', 'admin.system.view', 'admin.users.delete', 'admin.settings.edit', 'admin.tenants.manage', 'admin.tenants.edit', 'admin.users.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-04 14:12:18,615 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:18] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:12:20,295 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:20] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:12:20,320 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:20] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:12:20,322 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:20] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:12:20,327 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:20] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:12:20,470 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:20] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:12:21,206 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:21] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:12:21,287 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:21] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:12:21,330 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:21] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:12:23,338 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:12:23] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:13:52,405 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:52] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:13:54,202 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:54] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:13:54,219 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:54] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:13:54,226 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:54] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:13:54,415 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:54] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:13:54,466 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:54] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:13:55,405 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:55] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:13:55,588 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:55] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:13:55,684 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:55] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:13:57,412 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:13:57] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:15:30,097 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:30] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,534 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,556 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,566 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,567 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,726 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,887 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:15:31,961 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:31] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:15:32,599 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:32] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:15:34,606 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:15:34] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:16:43,705 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:43] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:16:44,942 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:44] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:16:44,969 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:44] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:16:44,969 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:44] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:16:44,972 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:44] "[31m[1mGET /api/subscriptions/current HTTP/1.1[0m" 401 -
2025-12-04 14:16:45,085 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:45] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:16:45,122 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:45] "[31m[1mGET /api/appointments/list?page=1&per_page=1000 HTTP/1.1[0m" 401 -
2025-12-04 14:16:45,164 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:45] "[31m[1mGET /api/patients?per_page=100 HTTP/1.1[0m" 401 -
2025-12-04 14:16:45,980 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:45] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-04 14:16:47,985 - werkzeug - INFO - 127.0.0.1 - - [04/Dec/2025 14:16:47] "[31m[1mGET /api/permissions/my HTTP/1.1[0m" 401 -
2025-12-06 22:33:10,519 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-06 22:33:10,598 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-06 22:33:10,599 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-06 22:33:10,599 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-06 22:33:10,600 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-06 22:33:31,252 - __main__ - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-06 22:33:31,314 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-06 22:33:31,315 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-06 22:33:31,315 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-06 22:33:31,316 - __main__ - INFO - Tenant security (global query filter) initialized
2025-12-06 22:51:14,055 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-06 22:51:14,127 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-06 22:51:14,127 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-06 22:51:14,128 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-06 22:51:14,128 - app - INFO - Tenant security (global query filter) initialized
2025-12-06 22:52:34,421 - app - WARNING - Development environment detected: overriding DATABASE_URL sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/backend/xear_crm.db -> sqlite:////Users/omerozmen/Desktop/x-ear web app/x-ear/apps/backend/instance/xear_crm.db
2025-12-06 22:52:34,482 - app - DEBUG - REDIS_URL present; skipping local Redis auto-start.
2025-12-06 22:52:34,483 - app - WARNING - Failed to initialize Redis client for idempotency: Error 61 connecting to localhost:6379. Connection refused.
2025-12-06 22:52:34,483 - services.otp_store - WARNING - Redis available at REDIS_URL but ping failed; falling back to in-memory OTP store
2025-12-06 22:52:34,484 - app - INFO - Tenant security (global query filter) initialized
2025-12-06 22:52:34,918 - services.s3_service - WARNING - S3Service running in mock mode - no actual S3 operations will be performed
2025-12-06 22:52:34,927 - app - INFO - Scheduling OCR/NLP service pre-warm in background
2025-12-06 22:52:35,381 - app - INFO - Ensuring database tables exist (create_all)
2025-12-06 22:52:35,389 - app - INFO - Permission middleware initialized successfully
2025-12-06 22:52:35,392 - middleware.permission_middleware - WARNING - Permission map validation WARNINGS: ["Permissions in map but not in DB (will be created): {'admin.system.view', 'activity_logs.export', 'admin.tickets.create', 'activity_logs.view', 'admin.users.delete', 'admin.activity_logs.view', 'admin.tenants.delete', 'admin.users.create', 'admin.tenants.create', 'admin.tenants.manage', 'admin.tickets.view', 'admin.tickets.respond', 'admin.tenants.edit', 'admin.tenants.view', 'admin.settings.view', 'admin.system.logs', 'admin.tickets.edit', 'admin.users.view', 'admin.users.edit', 'admin.settings.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
2025-12-06 22:52:35,392 - app - INFO - Permission map validation passed. Warnings: ["Permissions in map but not in DB (will be created): {'admin.system.view', 'activity_logs.export', 'admin.tickets.create', 'activity_logs.view', 'admin.users.delete', 'admin.activity_logs.view', 'admin.tenants.delete', 'admin.users.create', 'admin.tenants.create', 'admin.tenants.manage', 'admin.tickets.view', 'admin.tickets.respond', 'admin.tenants.edit', 'admin.tenants.view', 'admin.settings.view', 'admin.system.logs', 'admin.tickets.edit', 'admin.users.view', 'admin.users.edit', 'admin.settings.edit'}", "Permissions in DB but not used in map: {'sales.approve'}"]
