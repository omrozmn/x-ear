/**
 * Generated by orval v7.15.0 ðŸº
 * Do not edit manually.
 * X-Ear Admin API
 * API for X-Ear Admin Panel
 * OpenAPI spec version: 1.0.0
 */
import {
    useMutation,
    useQuery
} from '@tanstack/react-query';
import type {
    DataTag,
    DefinedInitialDataOptions,
    DefinedUseQueryResult,
    MutationFunction,
    QueryClient,
    QueryFunction,
    QueryKey,
    UndefinedInitialDataOptions,
    UseMutationOptions,
    UseMutationResult,
    UseQueryOptions,
    UseQueryResult
} from '@tanstack/react-query';
import { adminApi } from '../../apiMutator';

export interface Affiliate {
    id: number;
    email: string;
    iban?: string;
    account_holder_name?: string;
    phone_number?: string;
    display_id?: string;
    code?: string;
    is_active: boolean;
    created_at?: string;
}

export interface AffiliateRegisterRequest {
    email: string;
    password?: string;
    iban?: string;
}

export interface AffiliateLoginRequest {
    email: string;
    password?: string;
}

export interface AffiliateUpdateRequest {
    iban?: string;
    account_holder_name?: string;
    phone_number?: string;
}

// REGISTER
export const registerAffiliate = (data: AffiliateRegisterRequest) => {
    return adminApi<Affiliate>({
        url: `/affiliate/register`,
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        data
    });
};

export const useRegisterAffiliate = <TError = unknown, TContext = unknown>(
    options?: { mutation?: UseMutationOptions<Affiliate, TError, AffiliateRegisterRequest, TContext> }
) => {
    const { mutation: mutationOptions } = options ?? {};
    return useMutation({
        mutationFn: registerAffiliate,
        ...mutationOptions
    });
};

// LOGIN
export const loginAffiliate = (data: AffiliateLoginRequest) => {
    return adminApi<Affiliate>({
        url: `/affiliate/login`,
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        data
    });
};

export const useLoginAffiliate = <TError = unknown, TContext = unknown>(
    options?: { mutation?: UseMutationOptions<Affiliate, TError, AffiliateLoginRequest, TContext> }
) => {
    const { mutation: mutationOptions } = options ?? {};
    return useMutation({
        mutationFn: loginAffiliate,
        ...mutationOptions
    });
};

// GET PROFILE
export const getAffiliate = (affiliate_id: number, signal?: AbortSignal) => {
    return adminApi<Affiliate>({
        url: `/affiliate/me`,
        method: 'GET',
        params: { affiliate_id },
        signal
    });
};

export const getGetAffiliateQueryKey = (affiliate_id: number) => [`/affiliate/me`, affiliate_id] as const;

export const useGetAffiliate = <TData = Affiliate, TError = unknown>(
    affiliate_id: number,
    options?: { query?: UseQueryOptions<Affiliate, TError, TData> }
) => {
    const { query: queryOptions } = options ?? {};
    const queryKey = queryOptions?.queryKey ?? getGetAffiliateQueryKey(affiliate_id);
    const queryFn: QueryFunction<Affiliate> = ({ signal }) => getAffiliate(affiliate_id, signal);
    return useQuery({ queryKey, queryFn, ...queryOptions });
};

// UPDATE PAYMENT INFO
export const updateAffiliate = (affiliate_id: number, data: AffiliateUpdateRequest) => {
    return adminApi<Affiliate>({
        url: `/affiliate/${affiliate_id}`,
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        data
    });
};

export const useUpdateAffiliate = <TError = unknown, TContext = unknown>(
    options?: { mutation?: UseMutationOptions<Affiliate, TError, { affiliate_id: number; data: AffiliateUpdateRequest }, TContext> }
) => {
    const { mutation: mutationOptions } = options ?? {};
    return useMutation({
        mutationFn: ({ affiliate_id, data }) => updateAffiliate(affiliate_id, data),
        ...mutationOptions
    });
};

// GET COMMISSIONS
export interface Commission {
    id: number;
    event: string;
    status: string;
    amount: number;
    created_at?: string;
}

export const getAffiliateCommissions = (affiliate_id: number, signal?: AbortSignal) => {
    return adminApi<Commission[]>({
        url: `/affiliate/${affiliate_id}/commissions`,
        method: 'GET',
        signal
    });
};

export const useGetAffiliateCommissions = <TData = Commission[], TError = unknown>(
    affiliate_id: number,
    options?: { query?: UseQueryOptions<Commission[], TError, TData> }
) => {
    const { query: queryOptions } = options ?? {};
    const queryKey = [`/affiliate/${affiliate_id}/commissions`];
    const queryFn: QueryFunction<Commission[]> = ({ signal }) => getAffiliateCommissions(affiliate_id, signal);
    return useQuery({ queryKey, queryFn, ...queryOptions });
};

// LIST
export const listAffiliates = (params?: { skip?: number; limit?: number }, signal?: AbortSignal) => {
    return adminApi<Affiliate[]>({
        url: `/affiliate/list`,
        method: 'GET',
        params,
        signal
    });
};

export const getListAffiliatesQueryKey = (params?: { skip?: number; limit?: number }) => [`/affiliate/list`, ...(params ? [params] : [])] as const;

export const useListAffiliates = <TData = Affiliate[], TError = unknown>(
    params?: { skip?: number; limit?: number },
    options?: { query?: UseQueryOptions<Affiliate[], TError, TData> }
) => {
    const { query: queryOptions } = options ?? {};
    const queryKey = queryOptions?.queryKey ?? getListAffiliatesQueryKey(params);
    const queryFn: QueryFunction<Affiliate[]> = ({ signal }) => listAffiliates(params, signal);
    return useQuery({ queryKey, queryFn, ...queryOptions });
};
