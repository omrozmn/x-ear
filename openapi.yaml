openapi: 3.0.3
info:
  title: X-Ear CRM API
  version: 1.0.0
  description: 'Merged: manual schemas + auto-generated endpoints'
  contact:
    name: X-Ear Web App Support
    email: support@x-ear.com
    url: https://x-ear.com/support
servers:
- url: http://localhost:5003
tags:
- name: Appointments
  description: Appointment management operations
- name: Automation
  description: Automation and workflow operations
- name: Campaigns
  description: Marketing campaign operations
- name: Communications
  description: Communication templates and messaging operations
- name: Config
  description: Configuration management
- name: Dashboard
  description: Dashboard and analytics operations
- name: Devices
  description: Device management operations
- name: Health
  description: Health check operations
- name: Sales
  description: Sales management operations
- name: Settings
  description: Application settings operations
- name: Sgk
  description: SGK (Social Security) operations
- name: Sms
  description: SMS operations
- name: Suppliers
  description: Supplier management operations
- name: Entities
  description: Entity extraction operations
- name: Extract_patient
  description: Patient extraction from documents
- name: Init_db
  description: Service initialization operations
- name: Process
  description: Document processing operations
- name: Similarity
  description: Document similarity operations
- name: Swagger.html
  description: Swagger UI operations
- name: Register-phone
  description: Phone registration operations
- name: Verify-registration-otp
  description: Registration OTP verification operations
- name: Users
  description: User management operations
- name: Pricing-preview
  description: Pricing preview operations
- name: Product-suppliers
  description: Product supplier relationship operations
- name: Openapi.yaml
  description: OpenAPI specification serving operations
paths:
  /api/appointments:
    get:
      summary: Get list of appointments
      operationId: appointmentsListAppointments
      tags:
      - Appointments
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
        description: Page number for pagination
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
          minimum: 1
          maximum: 200
        description: Number of items per page (max 200)
      - name: patient_id
        in: query
        required: false
        schema:
          type: string
        description: Filter by patient ID
      - name: date_from
        in: query
        required: false
        schema:
          type: string
          format: date
        description: Filter appointments from this date
      - name: date_to
        in: query
        required: false
        schema:
          type: string
          format: date
        description: Filter appointments to this date
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum:
          - SCHEDULED
          - CONFIRMED
          - IN_PROGRESS
          - COMPLETED
          - CANCELLED
          - NO_SHOW
          - RESCHEDULED
        description: Filter by appointment status
      - name: branch_id
        in: query
        required: false
        schema:
          type: string
        description: Filter by branch ID
      responses:
        '200':
          description: Success
    post:
      summary: Create a new appointment
      operationId: appointmentsCreateAppointment
      tags:
      - Appointments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                patient_id:
                  type: string
                  description: Patient ID
                date:
                  type: string
                  format: date
                  description: Appointment date
                time:
                  type: string
                  format: time
                  description: Appointment time
                duration:
                  type: integer
                  description: Duration in minutes
                  default: 30
                type:
                  type: string
                  description: Appointment type
                notes:
                  type: string
                  description: Additional notes
              required:
              - patient_id
              - date
              - time
      responses:
        '201':
          description: Appointment created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Appointment'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/communications/messages:
    get:
      summary: Get list of communication messages (SMS and Email)
      operationId: communicationsGetMessages
      tags:
      - Communications
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
        description: Page number for pagination
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
          maximum: 100
        description: Number of items per page (max 100)
      - name: type
        in: query
        required: false
        schema:
          type: string
          enum:
          - sms
          - email
        description: Filter by message type
      - name: status
        in: query
        required: false
        schema:
          type: string
        description: Filter by message status
      - name: patient_id
        in: query
        required: false
        schema:
          type: string
        description: Filter by patient ID
      - name: campaign_id
        in: query
        required: false
        schema:
          type: string
        description: Filter by campaign ID
      - name: date_from
        in: query
        required: false
        schema:
          type: string
          format: date-time
        description: Filter messages from this date
      - name: date_to
        in: query
        required: false
        schema:
          type: string
          format: date-time
        description: Filter messages to this date
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search in message content, phone number, or email
      responses:
        '200':
          description: List of communication messages
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CommunicationMessage'
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      perPage:
                        type: integer
                      totalPages:
                        type: integer
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/communications/templates:
    get:
      summary: Get list of communication templates
      operationId: communicationsListTemplates
      tags:
      - Communications
      parameters:
      - name: type
        in: query
        required: false
        schema:
          type: string
          enum:
          - sms
          - email
        description: Filter by template type
      - name: category
        in: query
        required: false
        schema:
          type: string
        description: Filter by template category
      - name: active
        in: query
        required: false
        schema:
          type: boolean
        description: Filter by active status
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search in template name and description
      responses:
        '200':
          description: List of communication templates
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CommunicationTemplate'
                  meta:
                    type: object
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
    post:
      summary: Create a new communication template
      operationId: communicationsCreateTemplate
      tags:
      - Communications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommunicationTemplateCreate'
      responses:
        '201':
          description: Template created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/CommunicationTemplate'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
  /api/communications/templates/{template_id}:
    get:
      summary: Get a specific communication template
      operationId: communicationsGetTemplate
      tags:
      - Communications
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
        description: Template ID
      responses:
        '200':
          description: Communication template details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/CommunicationTemplate'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
    put:
      summary: Update a communication template
      operationId: communicationsUpdateTemplate
      tags:
      - Communications
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
        description: Template ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommunicationTemplateUpdate'
      responses:
        '200':
          description: Template updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/CommunicationTemplate'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
    delete:
      summary: Delete a communication template
      operationId: communicationsDeleteTemplate
      tags:
      - Communications
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
        description: Template ID
      responses:
        '200':
          description: Template deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/appointments/{appointment_id}:
    delete:
      summary: DELETE /api/appointments/{appointment_id}
      operationId: appointmentsDeleteAppointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
      description: Delete an existing appointment by its unique identifier
  /api/appointments/{appointment_id}/cancel:
    post:
      summary: POST /api/appointments/{appointment_id}/cancel
      operationId: appointmentsCancelAppointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Cancel an appointment and optionally provide cancellation reason
  /api/appointments/{appointment_id}/complete:
    post:
      summary: POST /api/appointments/{appointment_id}/complete
      operationId: appointmentsCompleteAppointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Mark an appointment as completed and add completion notes
  /api/appointments/{appointment_id}/reschedule:
    post:
      summary: POST /api/appointments/{appointment_id}/reschedule
      operationId: appointmentsRescheduleAppointment
      tags:
      - Appointments
      parameters:
      - name: appointment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Reschedule an existing appointment to a new date and time
  /api/appointments/availability:
    get:
      summary: GET /api/appointments/availability
      operationId: appointmentsGetAvailability
      tags:
      - Appointments
      responses:
        '200':
          description: Success
      description: Get available appointment slots for scheduling
  /api/appointments/list:
    get:
      summary: GET /api/appointments/list
      operationId: appointmentsGetAppointments
      tags:
      - Appointments
      parameters:
      - name: start_date
        in: query
        schema:
          type: string
      - name: end_date
        in: query
        schema:
          type: string
      - name: patient_id
        in: query
        schema:
          type: string
      - name: status
        in: query
        schema:
          type: string
      - name: page
        in: query
        schema:
          type: integer
          default: 1
      - name: per_page
        in: query
        schema:
          type: integer
          default: 20
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Appointment'
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      perPage:
                        type: integer
                      totalPages:
                        type: integer
      description: Retrieve a list of appointments with optional filtering
  /api/automation/backup:
    post:
      summary: Trigger system backup
      operationId: automationTriggerBackup
      tags:
      - Automation
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Trigger automated system backup process
  /api/automation/logs:
    get:
      summary: Get automation logs
      operationId: automationGetAutomationLogs
      tags:
      - Automation
      responses:
        '200':
          description: Success
      description: Retrieve logs from automated processes and tasks
  /api/automation/sgk/process:
    post:
      summary: Trigger SGK document processing
      operationId: automationTriggerSgkProcessing
      tags:
      - Automation
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Trigger automated SGK document processing workflow
  /api/automation/status:
    get:
      summary: Get automation system status
      operationId: automationGetAutomationStatus
      tags:
      - Automation
      responses:
        '200':
          description: Success
      description: Retrieve status information
  /api/branches:
    get:
      summary: Get all branches for current tenant
      operationId: branchesGetBranches
      tags:
      - Branches
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        address:
                          type: string
                        phone:
                          type: string
                        email:
                          type: string
      description: Retrieve list of branches for the current tenant
    post:
      summary: POST /api/branches
      operationId: branchesCreateBranch
      tags:
      - Branches
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/campaigns:
    get:
      summary: List all campaigns
      operationId: campaignsGetCampaigns
      tags:
      - Campaigns
      parameters:
      - name: page
        in: query
        schema:
          type: integer
          default: 1
      - name: per_page
        in: query
        schema:
          type: integer
          default: 20
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  campaigns:
                    type: array
                    items:
                      $ref: '#/components/schemas/Campaign'
                  meta:
                    $ref: '#/components/schemas/PaginationInfo'
      description: Retrieve a list of marketing campaigns
    post:
      summary: POST /api/campaigns
      operationId: campaignsCreateCampaign
      tags:
      - Campaigns
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Campaign'
      description: Create a new marketing campaign with target audience and content
  /api/dashboard:
    get:
      summary: Get dashboard data
      operationId: dashboardGetDashboard
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalPatients:
                    type: integer
                    description: Total number of patients
                  totalDevices:
                    type: integer
                    description: Total number of devices
                  totalAppointments:
                    type: integer
                    description: Total number of appointments
                  totalSales:
                    type: number
                    format: float
                    description: Total sales amount
                  recentAppointments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Appointment'
                    description: Recent appointments
                  recentSales:
                    type: array
                    items:
                      $ref: '#/components/schemas/Sale'
                    description: Recent sales
                  monthlyStats:
                    type: object
                    properties:
                      patients:
                        type: integer
                      appointments:
                        type: integer
                      sales:
                        type: number
                        format: float
                    description: Monthly statistics
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve dashboard overview data including statistics and recent
        activities
  /api/campaigns/{campaign_id}/send:
    post:
      summary: POST /api/campaigns/{campaign_id}/send
      operationId: campaignsSendCampaign
      tags:
      - Campaigns
      parameters:
      - name: campaign_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new send
  /api/config/turnstile:
    get:
      summary: GET /api/config/turnstile
      operationId: registrationGetTurnstileConfig
      tags:
      - Config
      responses:
        '200':
          description: Success
      description: Retrieve turnstile information
  /api/dashboard/charts/patient-trends:
    get:
      summary: GET /api/dashboard/charts/patient-trends
      operationId: dashboardPatientTrends
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
      description: Retrieve patient-trends information
  /api/dashboard/charts/revenue-trends:
    get:
      summary: GET /api/dashboard/charts/revenue-trends
      operationId: dashboardRevenueTrends
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
      description: Retrieve revenue-trends information
  /api/dashboard/kpis:
    get:
      summary: GET /api/dashboard/kpis
      operationId: dashboardGetKpis
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
      description: Retrieve kpis information
  /api/dashboard/recent-activity:
    get:
      summary: GET /api/dashboard/recent-activity
      operationId: dashboardRecentActivity
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
      description: Retrieve recent-activity information
  /api/devices:
    get:
      summary: Get list of devices
      operationId: devicesGetDevices
      tags:
      - Devices
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
        description: Page number for pagination
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
          minimum: 1
          maximum: 200
        description: Number of items per page (max 200)
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search term for filtering devices
      - name: brand
        in: query
        required: false
        schema:
          type: string
        description: Filter by device brand
      - name: category
        in: query
        required: false
        schema:
          type: string
        description: Filter by device category
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum:
          - IN_STOCK
          - ASSIGNED
          - TRIAL
          - DEFECTIVE
          - LOST
          - RETURNED
        description: Filter by device status
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Device'
                  pagination:
                    $ref: '#/components/schemas/PaginationInfo'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve a list of devices with optional filtering and pagination
    post:
      summary: Create a new device
      operationId: devicesCreateDevice
      tags:
      - Devices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
      description: Register a new hearing aid device in the system
  /api/devices/{device_id}:
    delete:
      summary: Delete a device
      operationId: devicesDeleteDevice
      tags:
      - Devices
      parameters:
      - name: device_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
      description: Remove a device from the system
  /api/devices/{device_id}/stock-update:
    post:
      summary: Update device stock levels (simplified).
      description: 'This endpoint is intentionally permissive for tests — real inventory
        logic

        should live in a dedicated inventory table/service.'
      operationId: devicesUpdateDeviceStock
      tags:
      - Devices
      parameters:
      - name: device_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/devices/brands:
    get:
      summary: Get available device brands
      operationId: devicesGetDeviceBrands
      tags:
      - Devices
      responses:
        '200':
          description: Success
      description: Retrieve brands information
    post:
      summary: Create a new device brand
      operationId: devicesCreateDeviceBrand
      tags:
      - Devices
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              properties:
                name:
                  type: string
                  description: Brand name
      responses:
        '201':
          description: Brand created successfully
        '400':
          description: Invalid request data
        '409':
          description: Brand already exists
        '500':
          description: Internal server error
      description: Create a new device brand
  /api/devices/categories:
    get:
      summary: Get available device categories
      operationId: devicesGetDeviceCategories
      tags:
      - Devices
      responses:
        '200':
          description: Success
      description: Retrieve categories information
    post:
      summary: Create a new device category
      operationId: devicesCreateDeviceCategory
      tags:
      - Devices
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              properties:
                name:
                  type: string
                  description: Category name
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      name:
                        type: string
                  message:
                    type: string
                  requestId:
                    type: string
                  timestamp:
                    type: string
        '400':
          description: Bad request
        '409':
          description: Category already exists
        '500':
          description: Internal server error
      description: Create a new device category
  /api/devices/low-stock:
    get:
      summary: Get devices with low stock levels
      operationId: devicesGetLowStockDevices
      tags:
      - Devices
      responses:
        '200':
          description: Success
      description: Retrieve low-stock information
  /api/health:
    get:
      summary: Health endpoint exposing overall status and DB read/write check results.
      description: Returns 200 when read+write ok, 503 when write fails, and 500 when
        other errors occur.
      operationId: healthCheck
      tags:
      - Health
      responses:
        '200':
          description: Success
  /api/inventory:
    get:
      summary: Get list of inventory items
      operationId: inventoryGetInventoryItems
      tags:
      - Inventory
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
        description: Page number for pagination
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
          minimum: 1
          maximum: 200
        description: Number of items per page (max 200)
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search term for filtering items
      - name: category
        in: query
        required: false
        schema:
          type: string
        description: Filter by item category
      - name: lowStock
        in: query
        required: false
        schema:
          type: boolean
        description: Filter items with low stock
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum:
          - IN_STOCK
          - ASSIGNED
          - TRIAL
          - DEFECTIVE
          - LOST
          - RETURNED
        description: Filter by item status
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/InventoryItem'
                  pagination:
                    $ref: '#/components/schemas/PaginationInfo'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve a list of inventory items with optional filtering and
        pagination
    post:
      summary: Create a new inventory item
      operationId: inventoryCreateInventoryItem
      tags:
      - Inventory
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryItem'
      description: Add a new item to inventory with quantity and details
  /api/inventory/{item_id}:
    get:
      summary: Get a single inventory item by ID
      operationId: inventoryGetInventoryItem
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/InventoryItem'
        '404':
          description: Inventory item not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve a single inventory item by its ID
    delete:
      summary: Delete an inventory item
      operationId: inventoryDeleteInventoryItem
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
      description: Remove an item from inventory
    put:
      summary: Update an inventory item
      operationId: inventoryUpdateInventoryItem
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventoryItem'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/InventoryItem'
  /api/inventory/{item_id}/activity:
    get:
      summary: Get activity log for an inventory item
      operationId: inventoryGetInventoryActivities
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
      description: Retrieve activity information
  /api/inventory/{item_id}/assign:
    post:
      summary: Assign inventory item to a patient (reduces stock)
      operationId: inventoryAssignToPatient
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new assign
  /api/inventory/{item_id}/serials:
    post:
      summary: Add serial numbers to an inventory item
      operationId: inventoryAddSerialNumbers
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new serials
  /api/inventory/low-stock:
    get:
      summary: Get all items with low stock levels
      operationId: inventoryGetLowStockItems
      tags:
      - Inventory
      responses:
        '200':
          description: Success
      description: Retrieve low-stock information
  /api/inventory/stats:
    get:
      summary: Get inventory statistics
      operationId: inventoryGetInventoryStats
      tags:
      - Inventory
      responses:
        '200':
          description: Success
      description: Get inventory statistics including low stock alerts
  /api/inventory/categories:
    get:
      summary: Get all inventory categories
      operationId: inventoryGetCategories
      tags:
      - Inventory
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      categories:
                        type: array
                        items:
                          type: string
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Get list of all available inventory categories
    post:
      summary: Create new inventory category
      operationId: inventoryCreateCategory
      tags:
      - Inventory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                category:
                  type: string
                  description: Category name to create
              required:
              - category
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      category:
                        type: string
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Category already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Create a new inventory category
  /api/invoices:
    post:
      summary: Create a new invoice
      operationId: invoicesCreateInvoice
      tags:
      - Invoices
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                patientId:
                  type: string
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      description:
                        type: string
                      quantity:
                        type: integer
                      unitPrice:
                        type: number
                      total:
                        type: number
                totalAmount:
                  type: number
                taxAmount:
                  type: number
                discountAmount:
                  type: number
              required:
              - patientId
              - items
              - totalAmount
      responses:
        '201':
          description: Invoice created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      invoice_id:
                        type: string
                      invoice_number:
                        type: string
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Create a new invoice for a patient
  /api/invoices/{invoice_id}:
    get:
      summary: Get invoice by ID
      operationId: invoicesGetInvoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Invoice retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      invoice_id:
                        type: string
                      invoice_number:
                        type: string
                      patientId:
                        type: string
                      items:
                        type: array
                        items:
                          type: object
                      totalAmount:
                        type: number
                      taxAmount:
                        type: number
                      discountAmount:
                        type: number
                      created_at:
                        type: string
                        format: date-time
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Invoice not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve an invoice by its ID
    delete:
      summary: Delete invoice by ID
      operationId: invoicesDeleteInvoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Invoice deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Invoice not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Delete an invoice by its ID
  /api/invoices/{invoice_id}/pdf:
    get:
      summary: Generate invoice PDF
      operationId: invoicesActionsServeInvoicePdf
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Invoice PDF generated successfully
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '404':
          description: Invoice not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Generate and download a PDF for the specified invoice
  /api/invoices/{invoice_id}/send-to-gib:
    post:
      summary: Send invoice to GİB
      operationId: invoicesSendInvoiceToGibMock
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Invoice sent to GİB successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                      gib_response:
                        type: object
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Invoice not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Send the invoice to GİB (Turkish Revenue Administration)
  /api/notifications:
    get:
      summary: GET /api/notifications
      operationId: notificationsGetNotifications
      tags:
      - Notifications
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
      description: Retrieve notifications information
  /api/notifications/{notification_id}:
    delete:
      summary: DELETE /api/notifications/{notification_id}
      operationId: notificationsDeleteNotification
      tags:
      - Notifications
      parameters:
      - name: notification_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
      description: Delete a specific notification
  /api/notifications/{notification_id}/read:
    put:
      summary: PUT /api/notifications/{notification_id}/read
      operationId: notificationsMarkNotificationRead
      tags:
      - Notifications
      parameters:
      - name: notification_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
      description: Update read information
  /api/notifications/stats:
    get:
      summary: GET /api/notifications/stats
      operationId: notificationsNotificationStats
      tags:
      - Notifications
      responses:
        '200':
          description: Success
      description: Retrieve stats information
  /api/openapi.yaml:
    get:
      summary: Serve the canonical OpenAPI contract for frontend/back-end sync and
        respond to CORS preflight.
      description: 'Returns CORS headers so the static Swagger UI served from a different
        origin (e.g. localhost:8080)

        can fetch the YAML without browser CORS errors.'
      operationId: serveOpenapiYaml
      tags:
      - Openapi.yaml
      responses:
        '200':
          description: Success
  /api/patients:
    get:
      summary: Get list of patients
      operationId: patientsGetPatients
      tags:
      - Patients
      x-storage-keys:
      - key: PATIENTS_DATA
        description: Cached patient list data
        type: array
      - key: PATIENT_SEARCH_FILTERS
        description: User's search filter preferences
        type: object
      - key: PATIENT_PAGINATION_STATE
        description: Current pagination state
        type: object
      - key: PATIENT_SORT_PREFERENCES
        description: User's sorting preferences
        type: object
      - key: PATIENT_VIEW_MODE
        description: List/grid view mode preference
        type: string
      - key: PATIENT_SELECTED_COLUMNS
        description: User's column visibility preferences
        type: array
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
        description: Page number for pagination
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
          minimum: 1
          maximum: 200
        description: Number of items per page (max 200)
      - name: cursor
        in: query
        required: false
        schema:
          type: string
        description: Cursor for cursor-based pagination (for large datasets)
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search term for filtering patients
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum:
          - ACTIVE
          - INACTIVE
          - LEAD
          - TRIAL
          - CUSTOMER
        description: Filter by patient status
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Patient'
                  pagination:
                    $ref: '#/components/schemas/PaginationInfo'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve a list of patients with optional filtering and pagination
    post:
      summary: POST /api/patients
      operationId: patientsCreatePatient
      tags:
      - Patients
      x-storage-keys:
      - key: PATIENT_FORM_VALIDATION_STATE
        description: Form validation state and errors
        type: object
      - key: PATIENT_FORM_DRAFT
        description: Draft form data for auto-save
        type: object
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
      description: Register a new patient with personal and medical information
  /api/patients/{patient_id}:
    get:
      summary: Get a specific patient by ID
      operationId: patientsGetPatient
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
      description: Retrieve detailed information about a specific patient
    put:
      summary: Update a patient
      operationId: patientsUpdatePatient
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Patient'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
      description: Update an existing patient's information
    delete:
      summary: DELETE /api/patients/{patient_id}
      operationId: patientsDeletePatient
      tags:
      - Patients
      x-storage-keys:
      - key: PATIENT_DETAILS_TAB
        description: Active tab in patient details view
        type: string
      - key: PATIENT_BULK_ACTIONS_STATE
        description: Bulk actions selection state
        type: object
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
      description: Remove a patient record from the system
  /api/patients/{patient_id}/assign-devices-extended:
    post:
      summary: POST /api/patients/{patient_id}/assign-devices-extended
      operationId: salesAssignDevicesExtended
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new assign-devices-extended
  /api/patients/{patient_id}/devices:
    get:
      summary: Get all devices assigned to a specific patient
      operationId: patientSubresourcesGetPatientDevices
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Device'
                  meta:
                    type: object
                    properties:
                      patientId:
                        type: string
                      patientName:
                        type: string
                      deviceCount:
                        type: integer
                  timestamp:
                    type: string
                    format: date-time
      description: Get all devices assigned to a specific patient
  /api/patients/{patient_id}/ereceipts:
    post:
      summary: POST /api/patients/{patient_id}/ereceipts
      operationId: patientSubresourcesCreatePatientEreceipt
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new ereceipts
  /api/patients/{patient_id}/ereceipts/{ereceipt_id}:
    delete:
      summary: DELETE /api/patients/{patient_id}/ereceipts/{ereceipt_id}
      operationId: patientSubresourcesDeletePatientEreceipt
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: ereceipt_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
      description: Delete {ereceipt_id}
  /api/patients/{patient_id}/hearing-tests:
    post:
      summary: POST /api/patients/{patient_id}/hearing-tests
      operationId: patientSubresourcesAddPatientHearingTest
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new hearing-tests
  /api/patients/{patient_id}/hearing-tests/{test_id}:
    delete:
      summary: DELETE /api/patients/{patient_id}/hearing-tests/{test_id}
      operationId: patientSubresourcesDeletePatientHearingTest
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: test_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
      description: Delete {test_id}
  /api/patients/{patient_id}/notes:
    get:
      summary: Get all notes for a patient
      description: Retrieves all notes for a specific patient
      operationId: patientSubresourcesGetPatientNotes
      tags:
      - Patient-subresources
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Notes retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        patientId:
                          type: string
                        authorId:
                          type: string
                        noteType:
                          type: string
                        category:
                          type: string
                        title:
                          type: string
                        content:
                          type: string
                        isPrivate:
                          type: boolean
                        tags:
                          type: array
                          items:
                            type: string
                        createdAt:
                          type: string
                          format: date-time
                        updatedAt:
                          type: string
                          format: date-time
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Patient not found
    post:
      summary: POST /api/patients/{patient_id}/notes
      operationId: patientSubresourcesCreatePatientNote
      tags:
      - Patient-subresources
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  description: Note content
                type:
                  type: string
                  description: Note type (e.g., 'genel')
                category:
                  type: string
                  description: Note category
                isPrivate:
                  type: boolean
                  description: Whether the note is private
                createdBy:
                  type: string
                  description: Author ID
              required:
                - content
      responses:
        '201':
          description: Note created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Invalid data
        '404':
          description: Patient not found
      description: Create new notes
  /api/patients/{patient_id}/notes/{note_id}:
    put:
      summary: Update a patient note
      description: Updates an existing note for a patient
      operationId: patientSubresourcesUpdatePatientNote
      tags:
      - Patient-subresources
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: note_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                title:
                  type: string
                noteType:
                  type: string
                category:
                  type: string
                isPrivate:
                  type: boolean
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Note updated successfully
        '404':
          description: Patient or note not found
    delete:
      summary: DELETE /api/patients/{patient_id}/notes/{note_id}
      operationId: patientSubresourcesDeletePatientNote
      tags:
      - Patient-subresources
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: note_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
      description: Delete {note_id}
  /api/patients/{patient_id}/promissory-notes:
    get:
      summary: Get all promissory notes for a patient
      operationId: paymentsGetPatientPromissoryNotes
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/sales:
    get:
      summary: GET /api/patients/{patient_id}/sales
      operationId: salesGetPatientSales
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Sale'
      description: Retrieve sales information
  /api/patients/{patient_id}/sgk-documents:
    get:
      summary: GET /api/patients/{patient_id}/sgk-documents
      operationId: sgkGetPatientSgkDocuments
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
      description: Retrieve sgk-documents information
  /api/patients/{patient_id}/timeline:
    get:
      summary: Get timeline events for a patient
      description: Retrieves all timeline events for a specific patient, including
        events from both custom data and activity logs
      operationId: timelineGetPatientTimeline
      tags:
      - Timeline
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Timeline events retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        patientId:
                          type: string
                        type:
                          type: string
                        title:
                          type: string
                        description:
                          type: string
                        timestamp:
                          type: string
                          format: date-time
                        user:
                          type: string
                        source:
                          type: string
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                      patient_id:
                        type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Patient not found
        '500':
          description: Internal server error
    post:
      summary: Add a new timeline event for a patient
      description: Creates a new timeline event for a specific patient and logs it
        to both custom data and activity logs
      operationId: timelineAddTimelineEvent
      tags:
      - Timeline
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - type
              - title
              properties:
                type:
                  type: string
                  description: Event type (e.g., 'appointment', 'sale', 'note', 'device_assigned')
                title:
                  type: string
                  description: Event title
                description:
                  type: string
                  description: Event description
                details:
                  type: object
                  description: Additional event details
                timestamp:
                  type: string
                  format: date-time
                  description: Event timestamp (defaults to current time)
                date:
                  type: string
                  description: Event date in DD.MM.YYYY format
                time:
                  type: string
                  description: Event time in HH:MM format
                user:
                  type: string
                  description: User who created the event (defaults to 'system')
                icon:
                  type: string
                  description: FontAwesome icon class (defaults to 'fa-circle')
                color:
                  type: string
                  description: Event color (defaults to 'blue')
                category:
                  type: string
                  description: Event category (defaults to 'general')
      responses:
        '201':
          description: Timeline event created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      patientId:
                        type: string
                      type:
                        type: string
                      title:
                        type: string
                      description:
                        type: string
                      timestamp:
                        type: string
                        format: date-time
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad request - missing required fields
        '404':
          description: Patient not found
        '500':
          description: Internal server error
  /api/patients/{patient_id}/timeline/{event_id}:
    delete:
      summary: Delete a timeline event
      description: Removes a specific timeline event from a patient's timeline
      operationId: timelineDeleteTimelineEvent
      tags:
      - Timeline
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: event_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Timeline event deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Patient or timeline event not found
        '500':
          description: Internal server error
  /api/patients/{patient_id}/documents:
    get:
      summary: Get all documents for a patient
      description: Retrieves all documents stored in patient's custom_data field
      operationId: documentsGetPatientDocuments
      tags:
      - Documents
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Documents retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        patientId:
                          type: string
                        fileName:
                          type: string
                        originalName:
                          type: string
                        type:
                          type: string
                        content:
                          type: string
                        metadata:
                          type: object
                        mimeType:
                          type: string
                        size:
                          type: integer
                        uploadedAt:
                          type: string
                          format: date-time
                        createdBy:
                          type: string
                        status:
                          type: string
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                      patient_id:
                        type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Patient not found
        '500':
          description: Internal server error
    post:
      summary: Add a new document to patient
      description: Creates a new document in patient's custom_data field
      operationId: documentsAddPatientDocument
      tags:
      - Documents
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - fileName
              - type
              - content
              properties:
                id:
                  type: string
                fileName:
                  type: string
                originalName:
                  type: string
                type:
                  type: string
                content:
                  type: string
                metadata:
                  type: object
                mimeType:
                  type: string
                size:
                  type: integer
                uploadedAt:
                  type: string
                  format: date-time
                createdBy:
                  type: string
                status:
                  type: string
      responses:
        '201':
          description: Document created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      patientId:
                        type: string
                      fileName:
                        type: string
                      originalName:
                        type: string
                      type:
                        type: string
                      content:
                        type: string
                      metadata:
                        type: object
                      mimeType:
                        type: string
                      size:
                        type: integer
                      uploadedAt:
                        type: string
                        format: date-time
                      createdBy:
                        type: string
                      status:
                        type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad request - missing required fields
        '404':
          description: Patient not found
        '500':
          description: Internal server error
  /api/patients/{patient_id}/documents/{document_id}:
    get:
      summary: Get a specific document
      description: Retrieves a specific document by ID
      operationId: documentsGetPatientDocument
      tags:
      - Documents
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: document_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Document retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Patient or document not found
        '500':
          description: Internal server error
    delete:
      summary: Delete a document
      description: Removes a specific document from patient's custom_data
      operationId: documentsDeletePatientDocument
      tags:
      - Documents
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: document_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Document deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Patient or document not found
        '500':
          description: Internal server error
  /api/patients/{patient_id}/activities:
    post:
      summary: Log an activity for a patient (alias for timeline event)
      description: Alternative endpoint for adding timeline events, provides the same
        functionality as POST /api/patients/{patient_id}/timeline
      operationId: timelineLogPatientActivity
      tags:
      - Timeline
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - type
              - title
              properties:
                type:
                  type: string
                title:
                  type: string
                description:
                  type: string
                details:
                  type: object
      responses:
        '201':
          description: Activity logged successfully
        '400':
          description: Bad request
        '404':
          description: Patient not found
        '500':
          description: Internal server error
  /api/patients/bulk_upload:
    post:
      summary: Accept a multipart/form-data CSV file containing patients and upsert
        them into the DB.
      description: 'This endpoint is intentionally forgiving: it returns a summary
        of created/updated rows

        and reports per-row errors without aborting the entire batch.

        Authentication is optional for uploads in many workflows; we still log the
        actor when present.'
      operationId: patientsBulkUploadPatients
      tags:
      - Patients
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/count:
    get:
      summary: Count patients with optional filters for SMS campaigns
      description: 'Count patients matching the given filters. Only counts patients
        with valid phone numbers.

        Useful for SMS campaign target audience estimation.

        '
      operationId: patientsCountPatients
      tags:
      - Patients
      parameters:
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum:
          - active
          - passive
        description: Patient status filter
      - name: segment
        in: query
        required: false
        schema:
          type: string
        description: Patient segment filter (lead, potential, won, etc.)
      - name: acquisitionType
        in: query
        required: false
        schema:
          type: string
        description: How the patient was acquired (advertisement, referral, walk-in,
          etc.)
      - name: branchId
        in: query
        required: false
        schema:
          type: string
        description: Filter by specific branch ID
      - name: dateStart
        in: query
        required: false
        schema:
          type: string
          format: date-time
        description: Filter by acquisition date start (ISO format)
      - name: dateEnd
        in: query
        required: false
        schema:
          type: string
          format: date-time
        description: Filter by acquisition date end (ISO format)
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      count:
                        type: integer
                        description: Number of matching patients
  /api/subscriptions/current:
    get:
      summary: Get current tenant subscription
      description: Retrieve the authenticated tenant's subscription status, plan,
        and expiry info.
      operationId: subscriptionsGetCurrent
      tags:
      - Subscriptions
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      tenant:
                        type: object
                        description: Basic tenant subscription context
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          slug:
                            type: string
                          ownerEmail:
                            type: string
                          billingEmail:
                            type: string
                          status:
                            type: string
                          currentPlan:
                            type: string
                            nullable: true
                          currentPlanId:
                            type: string
                            nullable: true
                          subscriptionStartDate:
                            type: string
                            format: date-time
                            nullable: true
                          subscriptionEndDate:
                            type: string
                            format: date-time
                            nullable: true
                          featureUsage:
                            type: object
                            additionalProperties: true
                          maxUsers:
                            type: integer
                          currentUsers:
                            type: integer
                      plan:
                        type: object
                        nullable: true
                        description: Subscribed plan details when available
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          slug:
                            type: string
                          description:
                            type: string
                            nullable: true
                          planType:
                            type: string
                          price:
                            type: number
                            format: float
                          billingInterval:
                            type: string
                          features:
                            type: object
                            additionalProperties: true
                          maxUsers:
                            type: integer
                            nullable: true
                          maxStorageGb:
                            type: integer
                            nullable: true
                          isActive:
                            type: boolean
                          isPublic:
                            type: boolean
                          monthlyPrice:
                            type: number
                            format: float
                          yearlyPrice:
                            type: number
                            format: float
                      isExpired:
                        type: boolean
                        description: Indicates if the subscription has expired
                      daysRemaining:
                        type: integer
                        description: Days remaining until subscription expiration
                  timestamp:
                    type: string
                    format: date-time
                  requestId:
                    type: string
  /api/addons:
    get:
      summary: List active public add-ons
      description: Retrieve active add-ons that tenants can purchase as optional features.
      operationId: addonsGetAddons
      tags:
      - Addons
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        slug:
                          type: string
                        description:
                          type: string
                          nullable: true
                        addonType:
                          type: string
                          enum:
                          - PER_USER
                          - FLAT_FEE
                          - USAGE_BASED
                        price:
                          type: number
                          format: float
                        currency:
                          type: string
                          example: TRY
                        unitName:
                          type: string
                          nullable: true
                        limitAmount:
                          type: integer
                          nullable: true
                        isActive:
                          type: boolean
                        createdAt:
                          type: string
                          format: date-time
                        updatedAt:
                          type: string
                          format: date-time
                  timestamp:
                    type: string
                    format: date-time
                  requestId:
                    type: string
  /api/patients/export:
    get:
      summary: Export patients as CSV. Only admin users are allowed to perform exports.
      description: 'Supports optional query params: status, segment, q (search term).'
      operationId: patientsExportPatientsCsv
      tags:
      - Patients
      responses:
        '200':
          description: Success
  /api/patients/search:
    get:
      summary: GET /api/patients/search
      operationId: patientsSearchPatients
      tags:
      - Patients
      responses:
        '200':
          description: Success
      description: Retrieve search information
  /api/pricing-preview:
    post:
      summary: POST /api/pricing-preview
      operationId: salesPricingPreview
      tags:
      - Pricing-preview
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new pricing-preview
  /api/product-suppliers/{ps_id}:
    delete:
      summary: Delete a product-supplier relationship
      operationId: suppliersDeleteProductSupplier
      tags:
      - Product-suppliers
      parameters:
      - name: ps_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
      description: Delete {ps_id}
  /api/products/{product_id}/suppliers:
    post:
      summary: Add a supplier to a product
      operationId: suppliersAddProductSupplier
      tags:
      - Products
      parameters:
      - name: product_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new suppliers
  /api/promissory-notes:
    post:
      summary: Create multiple promissory notes
      operationId: paymentsCreatePromissoryNotes
      tags:
      - Promissory-notes
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/promissory-notes/{note_id}:
    patch:
      summary: Update a promissory note
      operationId: paymentsUpdatePromissoryNote
      tags:
      - Promissory-notes
      parameters:
      - name: note_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/promissory-notes/{note_id}/collect:
    post:
      summary: Collect payment for a promissory note (full or partial)
      operationId: paymentsCollectPromissoryNote
      tags:
      - Promissory-notes
      parameters:
      - name: note_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/register-phone:
    post:
      summary: POST /api/register-phone
      operationId: registrationRegisterPhone
      tags:
      - Register-phone
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new register-phone
  /api/reports/appointments:
    get:
      summary: GET /api/reports/appointments
      operationId: reportsReportAppointments
      tags:
      - Reports
      responses:
        '200':
          description: Success
      description: Retrieve appointments information
  /api/reports/campaigns:
    get:
      summary: Kampanya raporu
      operationId: reportsReportCampaigns
      tags:
      - Reports
      responses:
        '200':
          description: Success
      description: Retrieve campaigns information
  /api/reports/financial:
    get:
      summary: Mali rapor
      operationId: reportsReportFinancial
      tags:
      - Reports
      responses:
        '200':
          description: Success
      description: Retrieve financial information
  /api/reports/overview:
    get:
      summary: Genel rapor özeti
      operationId: reportsReportOverview
      tags:
      - Reports
      responses:
        '200':
          description: Success
      description: Retrieve overview information
  /api/reports/patients:
    get:
      summary: Hasta analizi raporu
      operationId: reportsReportPatients
      tags:
      - Reports
      responses:
        '200':
          description: Success
      description: Retrieve patients information
  /api/reports/revenue:
    get:
      summary: GET /api/reports/revenue
      operationId: reportsReportRevenue
      tags:
      - Reports
      responses:
        '200':
          description: Success
      description: Retrieve revenue information
  /api/sales:
    get:
      summary: GET /api/sales
      operationId: salesListSales
      tags:
      - Sales
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Sale'
      description: Retrieve a list of all sales
    post:
      summary: POST /api/sales
      operationId: salesCreateSale
      tags:
      - Sales
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sale'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Create a new sale
  /api/sales/{sale_id}:
    get:
      summary: GET /api/sales/{sale_id}
      operationId: salesGetSale
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sale'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Get sale details by ID
    put:
      summary: PUT /api/sales/{sale_id}
      operationId: salesUpdateSale
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sale'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Update sale information
    delete:
      summary: DELETE /api/sales/{sale_id}
      operationId: salesDeleteSale
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: No Content
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Delete a sale
    patch:
      summary: Update sale details, specifically pricing and financial info.
      description: Used when device assignments are edited (price change, discount
        change).
      operationId: salesUpdateSale
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sales/{sale_id}/payment-plan:
    post:
      summary: POST /api/sales/{sale_id}/payment-plan
      operationId: salesCreateSalePaymentPlan
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentRecord'
      description: Create new payment-plan
  /api/sales/{sale_id}/promissory-notes:
    get:
      summary: Get all promissory notes for a specific sale
      operationId: paymentsGetSalePromissoryNotes
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sales/{sale_id}/invoice:
    post:
      summary: Create invoice for sale
      operationId: salesCreateSaleInvoice
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                invoice_type:
                  type: string
                  enum:
                  - standard
                  - proforma
                additional_notes:
                  type: string
      responses:
        '201':
          description: Invoice created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      invoice_id:
                        type: string
                      invoice_number:
                        type: string
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Sale not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Create an invoice for the specified sale
    get:
      summary: Get invoice for sale
      operationId: invoicesGetSaleInvoice
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Invoice retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      invoice_id:
                        type: string
                      invoice_number:
                        type: string
                      sale_id:
                        type: string
                      items:
                        type: array
                        items:
                          type: object
                      total_amount:
                        type: number
                      tax_amount:
                        type: number
                      created_at:
                        type: string
                        format: date-time
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Sale or invoice not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve the invoice for the specified sale
  /api/sales/{sale_id}/invoice/pdf:
    get:
      summary: Generate sale invoice PDF
      operationId: invoicesGenerateSaleInvoicePdf
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Sale invoice PDF generated successfully
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '404':
          description: Sale or invoice not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Generate and download a PDF for the specified sale invoice
  /api/settings:
    put:
      summary: Update system settings
      operationId: updateSettings
      tags:
      - Settings
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
      description: Update settings information
    patch:
      summary: Apply partial updates to system settings using dot-path notation.
      description: 'Request body: { "updates": { "company.name": "New", "system.timezone":
        "Europe/London" } }'
      operationId: patchSettings
      tags:
      - Settings
      responses:
        '200':
          description: Success
  /api/sgk/documents:
    post:
      summary: POST /api/sgk/documents
      operationId: sgkUploadSgkDocument
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new documents
  /api/sgk/documents/{document_id}:
    delete:
      summary: DELETE /api/sgk/documents/{document_id}
      operationId: sgkDeleteSgkDocument
      tags:
      - Sgk
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
      description: Delete {document_id}
  /api/sms/headers:
    get:
      summary: Get SMS headers
      operationId: smsGetHeaders
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  headers:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        status:
                          type: string
      description: Retrieve list of SMS headers
    post:
      summary: Create SMS header
      operationId: smsIntegrationRequestSmsHeader
      tags:
      - Sms
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
      responses:
        '201':
          description: Success
      description: Create a new SMS header
  /api/sms/audiences:
    get:
      summary: Get SMS audiences
      operationId: smsGetAudiences
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  audiences:
                    type: array
                    items:
                      type: object
      description: Retrieve list of SMS audiences
    post:
      summary: Create SMS audience
      operationId: smsIntegrationCreateTargetAudience
      tags:
      - Sms
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create a new SMS audience
  /api/sms/audiences/upload:
    post:
      summary: Upload SMS audience file
      operationId: smsIntegrationUploadAudienceExcel
      tags:
      - Sms
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: Success
      description: Upload a file to create SMS audience
  /api/sms/config:
    get:
      summary: Get SMS configuration
      operationId: smsGetConfig
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
      description: Retrieve SMS configuration settings
    put:
      summary: Update SMS configuration
      operationId: smsIntegrationUpdateSmsConfig
      tags:
      - Sms
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
      description: Update SMS configuration settings
  /api/sms/packages:
    get:
      summary: Get SMS packages
      operationId: smsIntegrationGetSmsPackages
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        description:
                          type: string
                          nullable: true
                        smsCount:
                          type: integer
                        price:
                          type: number
                        currency:
                          type: string
                        isActive:
                          type: boolean
                  timestamp:
                    type: string
                    format: date-time
                  requestId:
                    type: string
      description: Retrieve available SMS packages
  /api/sms/credit:
    get:
      summary: Get SMS credit balance
      operationId: smsIntegrationGetSmsCredit
      tags:
      - Sms
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      tenantId:
                        type: string
                      balance:
                        type: integer
                      totalPurchased:
                        type: integer
                      totalUsed:
                        type: integer
                  timestamp:
                    type: string
                    format: date-time
                  requestId:
                    type: string
      description: Retrieve current SMS credit balance
  /api/sms/upload:
    post:
      summary: Upload SMS document
      operationId: smsUploadDocument
      tags:
      - Sms
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '201':
          description: Success
      description: Upload SMS-related document
  /api/sms/documents/{documentType}/download:
    get:
      summary: Download SMS document
      operationId: smsDownloadDocument
      tags:
      - Sms
      parameters:
      - name: documentType
        in: path
        required: true
        schema:
          type: string
        description: Document type identifier
      responses:
        '200':
          description: Success
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
      description: Download SMS-related document
  /api/sms/documents/{documentType}:
    delete:
      summary: Delete SMS document
      operationId: smsDeleteDocument
      tags:
      - Sms
      parameters:
      - name: documentType
        in: path
        required: true
        schema:
          type: string
        description: Document type identifier
      responses:
        '200':
          description: Success
      description: Delete SMS-related document
  /api/sms/monitoring:
    get:
      summary: GET /api/sms/monitoring
      operationId: smsMonitoring
      tags:
      - Sms
      responses:
        '200':
          description: Success
      description: Retrieve monitoring information
  /api/suppliers:
    get:
      summary: Get list of suppliers
      operationId: suppliersGetSuppliers
      tags:
      - Suppliers
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
        description: Page number for pagination
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
        description: Number of items per page
      - name: search
        in: query
        required: false
        schema:
          type: string
        description: Search term for filtering suppliers
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum:
          - ACTIVE
          - INACTIVE
          - PENDING
        description: Filter by supplier status
      - name: category
        in: query
        required: false
        schema:
          type: string
        description: Filter by supplier category
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Supplier'
                  pagination:
                    $ref: '#/components/schemas/PaginationInfo'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve a list of suppliers with optional filtering and pagination
    post:
      summary: Create a new supplier
      operationId: suppliersCreateSupplier
      tags:
      - Suppliers
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
      description: Register a new supplier with contact and business information
  /api/suppliers/{supplier_id}:
    delete:
      summary: Delete a supplier (soft delete by setting is_active=False)
      operationId: suppliersDeleteSupplier
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
      description: Remove a supplier from the system
    put:
      summary: Update supplier details
      operationId: suppliersUpdateSupplier
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                contactName:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Supplier'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Update an existing supplier's information
  /api/suppliers/{supplier_id}/products:
    get:
      summary: Get all products for a specific supplier
      operationId: suppliersGetSupplierProducts
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
      description: Get list of products available from a specific supplier
  /api/suppliers/stats:
    get:
      summary: Get supplier statistics
      operationId: suppliersGetSupplierStats
      tags:
      - Suppliers
      responses:
        '200':
          description: Success
      description: Get supplier statistics including order history
  /api/verify-registration-otp:
    post:
      summary: POST /api/verify-registration-otp
      operationId: registrationVerifyRegistrationOtp
      tags:
      - Verify-registration-otp
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new verify-registration-otp
  /api/users:
    get:
      summary: GET /api/users
      operationId: usersListUsers
      tags:
      - Users
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
      description: Retrieve a list of all users
    post:
      summary: POST /api/users
      operationId: usersCreateUser
      tags:
      - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Create a new user
  /api/users/{user_id}:
    get:
      summary: GET /api/users/{user_id}
      operationId: usersGetUser
      tags:
      - Users
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Get user details by ID
    put:
      summary: PUT /api/users/{user_id}
      operationId: usersUpdateUser
      tags:
      - Users
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Update user information
    delete:
      summary: DELETE /api/users/{user_id}
      operationId: usersDeleteUser
      tags:
      - Users
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: No Content
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Delete a user
  /api/users/me:
    get:
      summary: GET /api/users/me
      operationId: usersGetCurrentUser
      tags:
      - Users
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Get current authenticated user information
    put:
      summary: Update current user profile
      operationId: usersUpdateMe
      tags:
      - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                firstName:
                  type: string
                lastName:
                  type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
  /api/users/me/password:
    post:
      summary: Change current user password
      operationId: usersChangePassword
      tags:
      - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentPassword:
                  type: string
                newPassword:
                  type: string
              required:
              - currentPassword
              - newPassword
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
  /api/tenant/users:
    get:
      summary: List tenant users
      operationId: tenantUsersList
      tags:
      - Tenant Users
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
    post:
      summary: Invite/Create tenant user
      operationId: tenantUsersInviteTenantUser
      tags:
      - Tenant Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                firstName:
                  type: string
                lastName:
                  type: string
                role:
                  type: string
              required:
              - email
              - firstName
              - lastName
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/User'
  /api/tenant/users/{user_id}:
    delete:
      summary: Delete tenant user
      operationId: tenantUsersDelete
      tags:
      - Tenant Users
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
    put:
      summary: Update a user in the tenant.
      operationId: tenantUsersUpdateTenantUser
      tags:
      - Tenant
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /entities:
    post:
      summary: Extract entities from image using OCR
      operationId: ocrExtractEntities
      tags:
      - Entities
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Create new entities
  /extract_patient:
    post:
      summary: Extract patient name from image using OCR
      operationId: ocrExtractPatientName
      tags:
      - Extract_patient
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Extract patient name from document image using OCR
  /health:
    get:
      summary: Health check endpoint (moved from app.py)
      operationId: ocrHealthCheck
      tags:
      - Health
      responses:
        '200':
          description: Success
      description: Health check for OCR service availability
  /init-db:
    post:
      summary: Initialize database and create tables
      operationId: ocrInitDatabase
      tags:
      - Init-db
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Initialize OCR service database and create required tables
  /initialize:
    post:
      summary: Initialize NLP/OCR service
      operationId: ocrInitializeNlpEndpoint
      tags:
      - Initialize
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Initialize NLP/OCR processing service
  /process:
    post:
      summary: Process document with OCR
      operationId: ocrProcessDocument
      tags:
      - Process
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Process document using OCR to extract text and data
  /similarity:
    post:
      summary: Calculate similarity between two images using OCR text
      operationId: ocrCalculateSimilarity
      tags:
      - Similarity
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
      description: Calculate similarity between documents using OCR text analysis
  /swagger.html:
    get:
      summary: Serve the static Swagger UI page from the repository `public/` folder.
      description: 'This helps local development: visit http://<backend-host>:<port>/swagger.html
        so the

        Swagger UI and `/api/openapi.yaml` are on the same origin and no CORS overrides
        are needed.'
      operationId: serveSwaggerUi
      tags:
      - Swagger.html
      responses:
        '200':
          description: Success
  /api/suppliers/{supplier_id}/invoices:
    get:
      summary: Get supplier purchase invoices (incoming and outgoing)
      operationId: suppliersGetSupplierInvoices
      tags:
      - Suppliers
      parameters:
      - name: supplier_id
        in: path
        required: true
        schema:
          type: string
      - name: page
        in: query
        required: false
        schema:
          type: integer
          default: 1
      - name: per_page
        in: query
        required: false
        schema:
          type: integer
          default: 20
          minimum: 1
          maximum: 200
      - name: type
        in: query
        required: false
        schema:
          type: string
          enum:
          - incoming
          - outgoing
          - all
          default: all
      - name: start_date
        in: query
        required: false
        schema:
          type: string
          format: date-time
      - name: end_date
        in: query
        required: false
        schema:
          type: string
          format: date-time
      responses:
        '200':
          description: Supplier invoices retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      invoices:
                        type: array
                        items:
                          $ref: '#/components/schemas/PurchaseInvoice'
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          perPage:
                            type: integer
                          total:
                            type: integer
                          totalPages:
                            type: integer
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Supplier not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve purchase invoices for the specified supplier
  /api/suppliers/suggested:
    get:
      summary: Get suggested suppliers (pending approval)
      operationId: suppliersGetSuggestedSuppliers
      tags:
      - Suppliers
      responses:
        '200':
          description: Suggested suppliers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      suggestedSuppliers:
                        type: array
                        items:
                          $ref: '#/components/schemas/SuggestedSupplier'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Retrieve a list of suggested suppliers based on incoming invoices
  /api/suppliers/suggested/{suggested_id}/accept:
    post:
      summary: Accept suggested supplier and create/link supplier record
      operationId: suppliersAcceptSuggestedSupplier
      tags:
      - Suppliers
      parameters:
      - name: suggested_id
        in: path
        required: true
        schema:
          type: string
      - name: Idempotency-Key
        in: header
        required: true
        schema:
          type: string
      responses:
        '201':
          description: Suggested supplier accepted and supplier created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      supplier:
                        $ref: '#/components/schemas/Supplier'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '200':
          description: Suggested supplier linked to existing supplier
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      supplier:
                        $ref: '#/components/schemas/Supplier'
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Accept a suggested supplier and create or link to a supplier by
        tax number
  /api/suppliers/suggested/{suggested_id}:
    delete:
      summary: Reject a suggested supplier
      operationId: suppliersRejectSuggestedSupplier
      tags:
      - Suppliers
      parameters:
      - name: suggested_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Suggested supplier rejected
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '404':
          description: Suggested supplier not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Reject and mark a suggested supplier as rejected
  /api/birfatura/sync-invoices:
    post:
      summary: Sync invoices from BirFatura provider
      operationId: birfaturaSyncInvoices
      tags:
      - BirFatura
      parameters:
      - name: Idempotency-Key
        in: header
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                start_date:
                  type: string
                  format: date-time
                end_date:
                  type: string
                  format: date-time
      responses:
        '200':
          description: Sync completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      imported:
                        type: object
                        properties:
                          incoming:
                            type: integer
                          outgoing:
                            type: integer
                          duplicates:
                            type: integer
                          errors:
                            type: integer
                  requestId:
                    type: string
                  timestamp:
                    type: string
                    format: date-time
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      description: Trigger invoice synchronization from integrator to local database
  /api/affiliate/login:
    post:
      summary: POST /api/affiliate/login
      operationId: affiliateLoginAffiliate
      tags:
      - Affiliate
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/EFatura/Retry/{invoice_id}:
    post:
      summary: Retry sending a failed invoice to GİB
      operationId: birfaturaRetryInvoice
      tags:
      - Efatura
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/workflow/{workflow_id}/update:
    put:
      summary: SGK workflow güncelleme endpoint'i
      operationId: sgkUpdateSgkWorkflow
      tags:
      - Sgk
      parameters:
      - name: workflow_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/auth/reset-password:
    post:
      summary: Reset password using verified OTP
      operationId: authResetPassword
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/suppliers/search:
    get:
      summary: Fast supplier search for autocomplete
      operationId: suppliersSearchSuppliers
      tags:
      - Suppliers
      responses:
        '200':
          description: Success
  /api/inventory/brands:
    post:
      summary: Create a new brand
      operationId: inventoryCreateBrand
      tags:
      - Inventory
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/copy-cancel:
    post:
      summary: POST /api/invoices/{invoice_id}/copy-cancel
      operationId: invoicesActionsCopyInvoiceCancel
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/payments/pos/transactions:
    get:
      summary: Report Endpoint for POS Transactions
      operationId: paymentIntegrationsGetPosTransactions
      tags:
      - Payments
      responses:
        '200':
          description: Success
  /api/pos/commission/installment-options:
    post:
      summary: Get installment options with calculated amounts for each
      operationId: posCommissionGetInstallmentOptions
      tags:
      - Pos
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/suppliers/{id}:
    delete:
      summary: DELETE /api/admin/suppliers/{id}
      operationId: adminSuppliersDeleteSupplier
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/sgk/workflows/{workflow_id}/status:
    put:
      summary: Mock endpoint to update workflow status.
      description: Required by frontend `sgk.service.ts` > updateWorkflowStatus
      operationId: sgkUpdateWorkflowStatus
      tags:
      - Sgk
      parameters:
      - name: workflow_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/debug/available-roles:
    get:
      summary: Get all available roles for debugging.
      description: Only available to admin@x-ear.com user.
      operationId: adminDebugAvailableRoles
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/sales/logs:
    post:
      summary: Create a sales log entry for cashflow.html page
      operationId: salesCreateSalesLog
      tags:
      - Sales
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/brands_old:
    get:
      summary: Get all available product brands with counts and categories
      operationId: inventoryGetBrandsOld
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/admin/roles:
    post:
      summary: Yeni rol oluştur
      description: 'Body:

        name: str - Rol adı (unique)

        description: str - Açıklama

        permissions: list[str] - İzin kodları'
      operationId: adminRolesCreateAdminRole
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/admin-users/{user_id}:
    get:
      summary: Admin kullanıcı detayı
      operationId: adminRolesGetAdminUserDetail
      tags:
      - Admin
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/notifications/templates/{template_id}:
    delete:
      summary: Delete a notification template
      operationId: adminNotificationsDeleteTemplate
      tags:
      - Admin
      parameters:
      - name: template_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/api-keys/{key_id}:
    delete:
      summary: Revoke (delete) an API key
      operationId: adminApiKeysRevokeApiKey
      tags:
      - Admin
      parameters:
      - name: key_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/notifications/init-db:
    post:
      summary: Initialize notification tables
      operationId: adminNotificationsInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/activity-logs/{log_id}:
    get:
      summary: Get a single activity log entry with full details
      operationId: activityLogsGetActivityLogDetail
      tags:
      - Activity-logs
      parameters:
      - name: log_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/activity-logs:
    get:
      summary: Get all activity logs for platform admin.
      description: 'Query params:

        page: int - Page number (default 1)

        page_size: int - Items per page (default 20, max 100)

        tenant_id: str - Filter by tenant

        branch_id: str - Filter by branch

        user_id: str - Filter by user

        role: str - Filter by role

        action: str - Filter by exact action

        action_type: str - Filter by action prefix (e.g., "patient", "invoice")

        date_from: str - ISO date string

        date_to: str - ISO date string

        critical_only: bool - Only show critical actions

        search: str - Search in message, action, entity_id

        Returns:

        {

        success: true,

        data: {

        logs: [...],

        meta: { total, page, pageSize, totalPages }

        }

        }'
      operationId: activityLogsAdminGetActivityLogs
      tags:
      - Admin
      parameters:
      - name: page
        in: query
        schema:
          type: integer
          default: 1
      - name: page_size
        in: query
        schema:
          type: integer
          default: 20
      - name: branch_id
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      logs:
                        type: array
                        items:
                          type: object
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                          page:
                            type: integer
                          pageSize:
                            type: integer
                          totalPages:
                            type: integer
  /api/auth/login:
    post:
      summary: POST /api/auth/login
      operationId: authLogin
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/invoices/{id}/payment:
    post:
      summary: POST /api/admin/invoices/{id}/payment
      operationId: adminInvoicesRecordPayment
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/reports/promissory-notes/by-patient:
    get:
      summary: Hasta bazlı senet özeti - hangi hastanın kaç senedi kalmış
      operationId: reportsReportPromissoryNotesByPatient
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/admin/inventory:
    get:
      summary: Get list of ALL devices/inventory from ALL tenants
      operationId: adminInventoryGetAllInventory
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/activity-logs/filter-options:
    get:
      summary: Get available filter options for activity logs
      operationId: activityLogsGetFilterOptions
      tags:
      - Activity-logs
      responses:
        '200':
          description: Success
  /api/activity-logs:
    post:
      summary: Create a new activity log entry (legacy endpoint)
      operationId: activityLogsCreateActivityLog
      tags:
      - Activity-logs
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/invoices/{id}/pdf:
    get:
      summary: GET /api/admin/invoices/{id}/pdf
      operationId: adminInvoicesGetInvoicePdf
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/reports/pos-movements:
    get:
      summary: POS Hareketleri Raporu
      operationId: reportsReportPosMovements
      tags:
      - Reports
      parameters:
      - name: page
        in: query
        schema:
          type: integer
          default: 1
      - name: per_page
        in: query
        schema:
          type: integer
          default: 20
      - name: days
        in: query
        schema:
          type: integer
          default: 30
      - name: status
        in: query
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                  summary:
                    type: object
                    properties:
                      total_volume:
                        type: number
                      success_count:
                        type: integer
                      fail_count:
                        type: integer
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                      page:
                        type: integer
                      per_page:
                        type: integer
                      total_pages:
                        type: integer
                  timestamp:
                    type: string
  /api/admin/permissions:
    get:
      summary: Tüm izinleri listele
      description: 'Query params:

        category: str - Kategoriye göre filtrele'
      operationId: adminRolesGetAdminPermissions
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/users:
    get:
      summary: Get list of admin users
      operationId: adminGetAdminUsers
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/appointments:
    get:
      summary: Get list of ALL appointments from ALL tenants
      operationId: adminAppointmentsGetAllAppointments
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/sms/packages/{pkg_id}:
    put:
      summary: PUT /api/admin/sms/packages/{pkg_id}
      operationId: smsIntegrationAdminUpdatePackage
      tags:
      - Admin
      parameters:
      - name: pkg_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/campaigns/{id}:
    delete:
      summary: DELETE /api/admin/campaigns/{id}
      operationId: adminCampaignsDeleteCampaign
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/patients:
    get:
      summary: Get list of ALL patients from ALL tenants
      operationId: adminPatientsGetAllPatients
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/tenant/company:
    put:
      summary: Update the current tenant's company information.
      description: Only tenant_admin can update company info.
      operationId: tenantUsersUpdateTenantCompany
      tags:
      - Tenant
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/invoices/{invoice_id}/copy:
    post:
      summary: POST /api/invoices/{invoice_id}/copy
      operationId: invoicesActionsCopyInvoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles:
    post:
      summary: Create a new role
      description: '---

        tags:

        - Roles

        parameters:

        - name: body

        in: body

        required: true

        schema:

        type: object

        properties:

        name:

        type: string

        description:

        type: string

        responses:

        201:

        description: Role created'
      operationId: rolesCreateRole
      tags:
      - Roles
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sms/documents/{document_type}/download:
    get:
      summary: Generate presigned URL for document download
      operationId: smsIntegrationDownloadSmsDocument
      tags:
      - Sms
      parameters:
      - name: document_type
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/plans/admin:
    get:
      summary: Get all plans for admin (including inactive/private)
      operationId: plansGetAdminPlans
      tags:
      - Plans
      responses:
        '200':
          description: Success
  /api/admin/roles/{role_id}/permissions:
    put:
      summary: Rol izinlerini güncelle
      description: 'Body:

        permissions: list[str] - İzin kodları

        Not: SuperAdmin rolünün izinleri değiştirilemez'
      operationId: adminRolesUpdateAdminRolePermissions
      tags:
      - Admin
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tenants:
    post:
      summary: Create tenant
      operationId: adminTenantsCreateTenant
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings/cache/clear:
    post:
      summary: Clear system cache (Mock)
      operationId: adminSettingsClearCache
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tickets/{ticket_id}:
    put:
      summary: Update support ticket (placeholder)
      operationId: adminUpdateAdminTicket
      tags:
      - Admin
      parameters:
      - name: ticket_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/sms/headers:
    get:
      summary: GET /api/admin/sms/headers
      operationId: smsIntegrationAdminListHeaders
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/EFatura/sendBasicInvoice:
    post:
      summary: POST /api/EFatura/sendBasicInvoice
      operationId: birfaturaSendBasicInvoice
      tags:
      - Efatura
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles/{role_id}/permissions/{permission_id}:
    delete:
      summary: Remove permission from role
      description: '---

        tags:

        - Roles

        parameters:

        - name: role_id

        in: path

        type: string

        required: true

        - name: permission_id

        in: path

        type: string

        required: true

        responses:

        200:

        description: Permission removed'
      operationId: rolesRemovePermissionFromRole
      tags:
      - Roles
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      - name: permission_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/affiliate/{affiliate_id}:
    patch:
      summary: PATCH /api/affiliate/{affiliate_id}
      operationId: affiliateUpdateAffiliateIban
      tags:
      - Affiliate
      parameters:
      - name: affiliate_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sgk/patient-rights/query:
    post:
      summary: SGK hasta hakları sorgulama endpoint'i
      operationId: sgkQueryPatientRights
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/proformas/{proforma_id}/convert:
    post:
      summary: 'Convert a proforma into a sale: create Sale and DeviceAssignment records
        and mark proforma converted.'
      operationId: proformasConvertProformaToSale
      tags:
      - Proformas
      parameters:
      - name: proforma_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/{patient_id}/invoices:
    get:
      summary: Get all invoices for a patient
      operationId: invoicesGetPatientInvoices
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sales/{sale_id}/installments/{installment_id}/pay:
    post:
      summary: Pay a specific installment
      operationId: salesPayInstallment
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      - name: installment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/{item_id}/movements:
    get:
      summary: Get stock movement history for an item
      operationId: inventoryGetInventoryMovements
      tags:
      - Inventory
      parameters:
      - name: item_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sgk/e-receipts/{receipt_id}/download-patient-form:
    get:
      summary: Mock endpoint for downloading form
      operationId: sgkDownloadPatientForm
      tags:
      - Sgk
      parameters:
      - name: receipt_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/tenants/{tenant_id}:
    delete:
      summary: Delete tenant (soft delete)
      operationId: adminTenantsDeleteTenant
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/communications/messages/send-email:
    post:
      summary: Send Email message
      operationId: communicationsSendEmail
      tags:
      - Communications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/reports/remaining-payments:
    get:
      summary: Kalan ödemeler raporu - hangi hastanın ne kadar ödemesi kalmış
      operationId: reportsReportRemainingPayments
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/invoices/{invoice_id}/shipping-pdf:
    get:
      summary: GET /api/invoices/{invoice_id}/shipping-pdf
      operationId: invoicesActionsServeShippingPdf
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/tickets:
    post:
      summary: POST /api/admin/tickets
      operationId: adminTicketsCreateAdminTicket
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/status:
    put:
      summary: Update tenant status
      operationId: adminTenantsUpdateTenantStatus
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/reports/promissory-notes:
    get:
      summary: Senet raporları - aylık sayı, gelir ve özet
      operationId: reportsReportPromissoryNotes
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/admin/marketplaces/integrations/{id}/sync:
    post:
      summary: Trigger sync for an integration (Mock)
      operationId: adminMarketplacesSyncIntegration
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/categories_old:
    get:
      summary: Get all available product categories with counts
      operationId: inventoryGetCategoriesOld
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/admin/production/orders/{id}/status:
    put:
      summary: Update order status
      operationId: adminProductionUpdateOrderStatus
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/communications/stats:
    get:
      summary: Get communication statistics
      operationId: communicationsCommunicationStats
      tags:
      - Communications
      responses:
        '200':
          description: Success
  /api/invoices/{invoice_id}/issue:
    post:
      summary: POST /api/invoices/{invoice_id}/issue
      operationId: invoicesActionsIssueInvoice
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/analytics:
    get:
      summary: Get admin analytics data
      operationId: adminAnalyticsGetAdminAnalytics
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/permissions:
    post:
      summary: POST /api/permissions
      operationId: permissionsCreatePermission
      tags:
      - Permissions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/config:
    get:
      summary: GET /api/config
      operationId: configGetConfig
      tags:
      - Config
      responses:
        '200':
          description: Success
  /api/plans/{plan_id}:
    put:
      summary: Update a plan (Super Admin only)
      operationId: plansUpdatePlan
      tags:
      - Plans
      parameters:
      - name: plan_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/permissions/coverage:
    get:
      summary: Permission coverage raporunu döndürür.
      operationId: permissionAdminGetPermissionCoverage
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/auth/send-verification-otp:
    post:
      summary: Send OTP to the user's phone number (requires pre-auth token)
      operationId: authSendVerificationOtp
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/birfatura/logs:
    get:
      summary: Get BirFatura related logs
      operationId: adminBirfaturaGetLogs
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/addons:
    post:
      summary: Create a new add-on
      operationId: adminAddonsCreateAddon
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles/{role_id}/permissions:
    post:
      summary: Add permission to role
      description: '---

        tags:

        - Roles

        parameters:

        - name: role_id

        in: path

        type: string

        required: true

        - name: body

        in: body

        schema:

        type: object

        responses:

        200:

        description: Permission added'
      operationId: rolesAddPermissionToRole
      tags:
      - Roles
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/permissions/check/{endpoint_path}:
    get:
      summary: Belirli bir endpoint için gerekli permission'ı döndürür.
      operationId: permissionAdminCheckEndpointPermission
      tags:
      - Admin
      parameters:
      - name: endpoint_path
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/pos/commission/calculate:
    post:
      summary: Calculate commission for given amount and installments
      operationId: posCommissionCalculateCommissionEndpoint
      tags:
      - Pos
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/subscriptions/subscribe:
    post:
      summary: Subscribe to a plan (Mock Payment)
      operationId: subscriptionsSubscribe
      tags:
      - Subscriptions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/payment-records:
    post:
      summary: Create a new payment record
      operationId: paymentsCreatePaymentRecord
      tags:
      - Payment-records
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/api-keys/init-db:
    post:
      summary: Initialize API Key table
      operationId: adminApiKeysInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/birfatura/stats:
    get:
      summary: Get BirFatura statistics
      operationId: adminBirfaturaGetStats
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/auth/login:
    post:
      summary: Admin login endpoint
      operationId: adminAdminLogin
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/pos/commission/rates/system:
    put:
      summary: Update system-wide default rates (super admin only)
      operationId: posCommissionUpdateSystemRates
      tags:
      - Pos
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/sales/recalc:
    post:
      summary: Satış kayıtlarının SGK ve hasta ödeme tutarlarını yeniden hesaplarken
        kalıcı olarak günceller.
      description: 'İsteğe bağlı filtreler: body veya query içinde `patientId`, `saleId`,
        `limit`.'
      operationId: salesRecalcSales
      tags:
      - Sales
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/permissions/my:
    get:
      summary: Get current user's permissions based on their role
      operationId: permissionsGetMyPermissions
      tags:
      - Permissions
      responses:
        '200':
          description: Success
  /api/proformas:
    post:
      summary: Create a new proforma
      operationId: proformasCreateProforma
      tags:
      - Proformas
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/batch-generate:
    post:
      summary: Generate multiple invoices at once
      operationId: invoicesBatchGenerateInvoices
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/admin-users:
    get:
      summary: Admin kullanıcıları rolleriyle birlikte listele
      operationId: adminRolesGetAdminUsersWithRoles
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/tenant/company/upload/{asset_type}:
    delete:
      summary: Delete a company asset (logo, stamp, or signature).
      operationId: tenantUsersDeleteTenantAsset
      tags:
      - Tenant
      parameters:
      - name: asset_type
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/permissions/role/{role_name}:
    get:
      summary: Get permissions for a role
      operationId: permissionsGetRolePermissions
      tags:
      - Permissions
      parameters:
      - name: role_name
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  permissions:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        description:
                          type: string
    put:
      summary: Update permissions for a role (bulk update)
      operationId: permissionsUpdateRolePermissions
      tags:
      - Permissions
      parameters:
      - name: role_name
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/dashboard/metrics:
    get:
      summary: Get dashboard metrics
      operationId: adminDashboardGetDashboardMetrics
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/sgk/e-receipt/query:
    post:
      summary: E-reçete sorgulama endpoint'i
      operationId: sgkQueryEReceipt
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/invoices:
    post:
      summary: POST /api/admin/invoices
      operationId: adminInvoicesCreateAdminInvoice
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/auth/verify-otp:
    post:
      summary: POST /api/auth/verify-otp
      operationId: authVerifyOtp
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/payment-records/{record_id}:
    patch:
      summary: Update a payment record
      operationId: paymentsUpdatePaymentRecord
      tags:
      - Payment-records
      parameters:
      - name: record_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/marketplaces/integrations:
    post:
      summary: Create a new marketplace integration
      operationId: adminMarketplacesCreateIntegration
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/users/all/{user_id}:
    put:
      summary: Update any tenant user (Admin Panel)
      operationId: adminUpdateAnyTenantUser
      tags:
      - Admin
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/replacements/{replacement_id}/status:
    patch:
      summary: PATCH /api/replacements/{replacement_id}/status
      operationId: replacementsPatchReplacementStatus
      tags:
      - Replacements
      parameters:
      - name: replacement_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/pos/commission/rates/tenant/{tenant_id}:
    put:
      summary: Update tenant-specific rates (admin only)
      operationId: posCommissionUpdateTenantRatesAdmin
      tags:
      - Pos
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/invoices/print-queue:
    post:
      summary: Add invoices to print queue
      operationId: invoicesAddToPrintQueue
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/roles/{role_id}:
    delete:
      summary: Delete a role
      description: '---

        tags:

        - Roles

        parameters:

        - name: role_id

        in: path

        type: string

        required: true

        responses:

        200:

        description: Role deleted'
      operationId: rolesDeleteRole
      tags:
      - Roles
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/OutEBelgeV2/SendDocument:
    post:
      summary: POST /api/OutEBelgeV2/SendDocument
      operationId: birfaturaOutSendDocument
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/affiliate/register:
    post:
      summary: POST /api/affiliate/register
      operationId: affiliateRegisterAffiliate
      tags:
      - Affiliate
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/upload/presigned:
    post:
      summary: Get a presigned URL for direct S3 upload
      description: 'Request Body:

        filename (str): Original filename

        folder (str): Target folder (e.g., ''sms_documents'', ''invoices'')

        content_type (str): File content type (optional)

        Returns:

        JSON: {

        ''url'': str,

        ''fields'': dict,

        ''key'': str

        }'
      operationId: uploadGetPresignedUploadUrl
      tags:
      - Upload
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sales/{sale_id}/payments:
    post:
      summary: Record a new payment for a sale
      operationId: salesRecordSalePayment
      tags:
      - Sales
      parameters:
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/unified-cash-records:
    get:
      summary: Birleşik cash records endpoint'i - tüm finansal kayıtları tek yerden
        döndürür.
      description: 'Şu kaynak türlerini birleştirir:

        - Sales (satışlar)

        - PaymentRecords (ödeme kayıtları)

        - Cash Records (nakit kayıtları)

        Query parametreleri:

        - limit: maksimum kayıt sayısı (varsayılan: 200)

        - start_date, end_date: tarih filtreleri (ISO format)

        - record_type: kayıt türü filtresi (sale, payment, cash)

        - patient_id: hasta ID filtresi

        - status: durum filtresi (paid, pending, partial)'
      operationId: unifiedCashGetUnifiedCashRecords
      tags:
      - Unified-cash-records
      responses:
        '200':
          description: Success
  /api/invoices/templates:
    post:
      summary: Create a custom invoice template
      operationId: invoicesCreateInvoiceTemplate
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/EFatura/Create:
    post:
      summary: Create invoice (draft mode, not sent to GİB yet)
      operationId: birfaturaCreateInvoice
      tags:
      - Efatura
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/proformas/{proforma_id}:
    get:
      summary: Get a specific proforma
      operationId: proformasGetProforma
      tags:
      - Proformas
      parameters:
      - name: proforma_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/affiliate/list:
    get:
      summary: GET /api/affiliate/list
      operationId: affiliateGetAffiliates
      tags:
      - Affiliate
      responses:
        '200':
          description: Success
  /api/admin/production/init-db:
    post:
      summary: Initialize Production Orders table
      operationId: adminProductionInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/unified-cash-records/summary:
    get:
      summary: Finansal özet bilgileri döndürür.
      description: 'Query parametreleri:

        - period: özet dönemi (today, week, month, year)

        - start_date, end_date: özel tarih aralığı'
      operationId: unifiedCashGetCashSummary
      tags:
      - Unified-cash-records
      responses:
        '200':
          description: Success
  /api/admin/integrations/init-db:
    post:
      summary: Initialize integration config tables
      operationId: adminIntegrationsInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/plans:
    post:
      summary: Create a new plan
      operationId: adminPlansCreatePlan
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/subscribe:
    post:
      summary: Subscribe tenant to a plan (Admin override)
      operationId: adminTenantsSubscribeTenant
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/integrations/birfatura/config:
    put:
      summary: Update BirFatura integration configuration
      operationId: adminIntegrationsUpdateBirfaturaConfig
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/checkout/confirm:
    post:
      summary: Mock endpoint to confirm a payment (simulating a webhook or successful
        callback).
      operationId: checkoutConfirmPayment
      tags:
      - Checkout
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/scan-queue/{id}/retry:
    post:
      summary: Retry a failed scan
      operationId: adminScanQueueRetryScan
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/features:
    patch:
      summary: 'Patch feature flags. Body: { features: { ''integrations_ui'': true
        } }'
      description: 'Authorization: user must have `settings.update` or `features.toggle`.'
      operationId: adminPatchFeatures
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/replacements/{replacement_id}/invoice:
    post:
      summary: Create a supplier return invoice record linked to a replacement.
      description: This implementation stores invoice metadata on the Replacement
        row (legacy-compatible).
      operationId: replacementsCreateReturnInvoice
      tags:
      - Replacements
      parameters:
      - name: replacement_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/reports/cashflow-summary:
    get:
      summary: Kasa özeti raporu - tahsilatlar (Sales tabanlı)
      operationId: reportsReportCashflowSummary
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/inventory/units:
    get:
      summary: Get all available unit types for inventory items
      operationId: inventoryGetUnits
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/invoices/{invoice_id}/xml:
    post:
      summary: Upload an XML (e.g., from birfatura) and save it for this invoice.
      operationId: invoicesUploadInvoiceXml
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/return-invoices/{invoice_id}/send-to-gib:
    post:
      summary: Mark return invoice as sent to GIB. In legacy flow GİB send triggers
        replacement completion and stock effects.
      description: Here we mark gib_sent and update replacement status. Actual EFatura/GİB
        integration should be added server-side.
      operationId: replacementsSendInvoiceToGib
      tags:
      - Return-invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/EFatura/sendDocument:
    post:
      summary: POST /api/EFatura/sendDocument
      operationId: birfaturaSendDocument
      tags:
      - Efatura
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tickets/{id}:
    put:
      summary: PUT /api/admin/tickets/{id}
      operationId: adminTicketsUpdateAdminTicket
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/replacements/{replacement_id}:
    get:
      summary: GET /api/replacements/{replacement_id}
      operationId: replacementsGetReplacement
      tags:
      - Replacements
      parameters:
      - name: replacement_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/inventory/features:
    get:
      summary: Get all available product features with counts
      operationId: inventoryGetFeatures
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/admin/plans/{plan_id}:
    delete:
      summary: Delete plan (soft delete by setting is_active=False)
      operationId: adminPlansDeletePlan
      tags:
      - Admin
      parameters:
      - name: plan_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/admin/my-permissions:
    get:
      summary: Mevcut admin kullanıcısının izinlerini döndürür.
      description: Frontend için - sidebar, buton gizleme vb.
      operationId: adminRolesGetMyAdminPermissions
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/campaigns:
    post:
      summary: POST /api/admin/campaigns
      operationId: adminCampaignsCreateCampaign
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/activity-logs/filter-options:
    get:
      summary: Get filter options for admin panel activity logs
      operationId: activityLogsAdminGetFilterOptions
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/permissions/map:
    get:
      summary: Tüm endpoint-permission mapping'ini döndürür.
      operationId: permissionAdminGetPermissionMap
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/subscriptions/register-and-subscribe:
    post:
      summary: Register new tenant and subscribe (Public)
      operationId: subscriptionsRegisterAndSubscribe
      tags:
      - Subscriptions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /metrics:
    get:
      summary: GET /metrics
      operationId: metrics
      tags:
      - Metrics
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/sales/{sale_id}:
    patch:
      summary: Partially update a Sale resource. Supports updating status, notes,
        total_amount, and paid_amount.
      description: 'Expected payload: { "status": "cancelled", "total_amount": 1000.0,
        "paid_amount": 500.0, "notes": "Updated notes" }'
      operationId: salesUpdateSalePartial
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      - name: sale_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/checkout/session:
    post:
      summary: Initiates a checkout session for a plan purchase.
      description: 'In a real scenario, this would create a Stripe Checkout Session.

        For now, it simulates the process and returns a success URL or mock payment
        data.'
      operationId: checkoutCreateCheckoutSession
      tags:
      - Checkout
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/invoices/{id}:
    get:
      summary: GET /api/admin/invoices/{id}
      operationId: adminInvoicesGetAdminInvoice
      tags:
      - Admin
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/settings/init-db:
    post:
      summary: Initialize System Settings table
      operationId: adminSettingsInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/EFatura/Cancel/{invoice_id}:
    post:
      summary: Cancel an invoice (send cancellation to GİB)
      operationId: birfaturaCancelInvoice
      tags:
      - Efatura
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/notifications/send:
    post:
      summary: Send a notification to tenants
      operationId: adminNotificationsSendNotification
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/admin-users/{user_id}/roles:
    put:
      summary: Kullanıcıya rol ata
      description: 'Body:

        role_ids: list[str] - Rol ID''leri

        Not: admin@x-ear.com kullanıcısından SuperAdmin rolü kaldırılamaz'
      operationId: adminRolesUpdateAdminUserRoles
      tags:
      - Admin
      parameters:
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/sms/documents/{document_type}:
    delete:
      summary: Delete an uploaded document
      operationId: smsIntegrationDeleteSmsDocument
      tags:
      - Sms
      parameters:
      - name: document_type
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/sgk/seed-test-patients:
    post:
      summary: 'Development helper: for each image in the repo images/ folder, run
        OCR, extract name and tc_partial,'
      description: 'then insert a Patient record with a generated valid TC that contains
        the partial substring.

        This endpoint is intended for local/dev only and makes a best-effort to avoid
        duplicate inserts.'
      operationId: sgkSeedTestPatients
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/notifications:
    get:
      summary: Get list of notifications
      operationId: adminNotificationsGetNotifications
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/device-assignments/{assignment_id}/return-loaner:
    post:
      summary: Return a loaner device to stock.
      operationId: salesReturnLoanerToStock
      tags:
      - Device-assignments
      parameters:
      - name: assignment_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings/backup:
    post:
      summary: Trigger database backup (Mock)
      operationId: adminSettingsTriggerBackup
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/users/{user_id}:
    put:
      summary: Update a tenant user
      operationId: adminTenantsUpdateTenantUser
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      - name: user_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/users/all:
    get:
      summary: Get list of ALL users from ALL tenants
      operationId: adminGetAllTenantUsers
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/auth/refresh:
    post:
      summary: Refresh access token using refresh token
      operationId: authRefresh
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/debug/switch-role:
    post:
      summary: Switch to a different role for debugging purposes.
      description: 'Only available to admin@x-ear.com user.

        Returns a new JWT with the selected role''s permissions.'
      operationId: adminDebugSwitchRole
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/{invoice_id}/update-gib-status:
    post:
      summary: Update invoice status from Birfatura.
      description: Called to check if GİB has approved/rejected the invoice and fetch
        PDF if available.
      operationId: invoicesUpdateInvoiceGibStatus
      tags:
      - Invoices
      parameters:
      - name: invoice_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/invoices/bulk_upload:
    post:
      summary: Bulk upload invoices from CSV/XLSX. Returns {created, updated, errors}.
      operationId: invoicesBulkUploadInvoices
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/timeline:
    get:
      summary: Get all timeline events across all patients
      operationId: timelineGetTimeline
      tags:
      - Timeline
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/replacements:
    post:
      summary: Create a replacement for a patient. Request body mirrors legacy fields.
      operationId: replacementsCreatePatientReplacement
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/integrations/vatan-sms/config:
    put:
      summary: Update VatanSMS integration configuration
      operationId: adminIntegrationsUpdateVatanSmsConfig
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/scan-queue/init-db:
    post:
      summary: Initialize Scan Queue table
      operationId: adminScanQueueInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/production/orders:
    get:
      summary: Get production orders
      operationId: adminProductionGetOrders
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/notifications/settings:
    put:
      summary: PUT /api/notifications/settings
      operationId: notificationsSetUserNotificationSettings
      tags:
      - Notifications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/addons/{addon_id}:
    delete:
      summary: Delete add-on (soft delete by setting is_active=False)
      operationId: adminAddonsDeleteAddon
      tags:
      - Admin
      parameters:
      - name: addon_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/inventory/bulk_upload:
    post:
      summary: Bulk upload inventory items from CSV/XLSX. Returns {created, updated,
        errors}.
      operationId: inventoryBulkUploadInventory
      tags:
      - Inventory
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/debug/page-permissions/{page_key}:
    get:
      summary: Get permissions for a specific page based on the effective role.
      description: Only available to admin@x-ear.com user.
      operationId: adminDebugPagePermissions
      tags:
      - Admin
      parameters:
      - name: page_key
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/appointments:
    get:
      summary: Get all appointments for a specific patient
      operationId: patientSubresourcesGetPatientAppointments
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/settings/pricing:
    get:
      summary: Get pricing settings specifically
      operationId: getPricingSettings
      tags:
      - Settings
      responses:
        '200':
          description: Success
  /api/pos/commission/rates:
    get:
      summary: Get commission rates for current tenant
      operationId: posCommissionGetCommissionRates
      tags:
      - Pos
      responses:
        '200':
          description: Success
  /api/admin/scan-queue:
    get:
      summary: Get scan queue items
      operationId: adminScanQueueGetScanQueue
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/admin/suppliers:
    post:
      summary: POST /api/admin/suppliers
      operationId: adminSuppliersCreateSupplier
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/roles/{role_id}:
    delete:
      summary: Rol sil
      description: 'Not: System role''ler silinemez'
      operationId: adminRolesDeleteAdminRole
      tags:
      - Admin
      parameters:
      - name: role_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/payments/pos/paytr/initiate:
    post:
      summary: Initiate PayTR Payment
      description: Supports Sale-linked or Standalone
      operationId: paymentIntegrationsInitiatePaytrPayment
      tags:
      - Payments
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  token:
                    type: string
                  iframe_url:
                    type: string
                  payment_record_id:
                    type: integer
        '400':
          description: Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  /api/sms/documents/upload:
    post:
      summary: Upload SMS document to S3
      operationId: smsIntegrationUploadSmsDocument
      tags:
      - Sms
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/sms/headers/{header_id}/status:
    put:
      summary: PUT /api/admin/sms/headers/{header_id}/status
      operationId: smsIntegrationAdminUpdateHeaderStatus
      tags:
      - Admin
      parameters:
      - name: header_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tickets/{ticket_id}/responses:
    post:
      summary: Create response for support ticket (placeholder)
      operationId: adminCreateTicketResponse
      tags:
      - Admin
      parameters:
      - name: ticket_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/notifications/templates:
    post:
      summary: Create a new notification template
      operationId: adminNotificationsCreateTemplate
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/payments/pos/paytr/config:
    get:
      summary: Get Tenant PayTR Config
      operationId: paymentIntegrationsGetPaytrConfig
      tags:
      - Payments
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      merchant_id:
                        type: string
                      merchant_key_masked:
                        type: string
                      merchant_salt_masked:
                        type: string
                      test_mode:
                        type: boolean
                      enabled:
                        type: boolean
    put:
      summary: Update Tenant PayTR Config
      operationId: paymentIntegrationsUpdatePaytrConfig
      tags:
      - Payments
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Success
  /api/admin/tenants/{tenant_id}/users:
    post:
      summary: Create a user for a specific tenant
      operationId: adminTenantsCreateTenantUser
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/sms/packages:
    post:
      summary: POST /api/admin/sms/packages
      operationId: smsIntegrationAdminCreatePackage
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/inventory/search:
    get:
      summary: Advanced product search with comprehensive filtering
      operationId: inventoryAdvancedSearch
      tags:
      - Inventory
      responses:
        '200':
          description: Success
  /api/device-assignments/{assignment_id}:
    patch:
      summary: Update a device assignment (e.g., cancel, update serial numbers, pricing)
      operationId: salesUpdateDeviceAssignment
      tags:
      - Device-assignments
      parameters:
      - name: assignment_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/sgk/workflow/create:
    post:
      summary: SGK workflow oluşturma endpoint'i
      operationId: sgkCreateSgkWorkflow
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/tenant/assets/{tenant_id}/{filename}:
    get:
      summary: Serve tenant assets (logo, stamp, signature) publicly.
      description: These are needed for PDF generation and preview.
      operationId: tenantUsersServeTenantAsset
      tags:
      - Tenant
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      - name: filename
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/payments/pos/paytr/callback:
    post:
      summary: PayTR Server-to-Server Callback
      description: 'Idempotent: Checks if already paid.'
      operationId: paymentIntegrationsPaytrCallback
      tags:
      - Payments
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/communications/messages/send-sms:
    post:
      summary: Send SMS message
      operationId: communicationsSendSms
      tags:
      - Communications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/cash-records/{record_id}:
    delete:
      summary: Delete a cash record by ID.
      operationId: cashRecordsDeleteCashRecord
      tags:
      - Cash-records
      parameters:
      - name: record_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/patients/{patient_id}/proformas:
    get:
      summary: Get all proformas for a patient
      operationId: proformasGetPatientProformas
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/admin/birfatura/invoices:
    get:
      summary: Get invoices with BirFatura status
      operationId: adminBirfaturaGetInvoices
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/branches/{branch_id}:
    delete:
      summary: DELETE /api/branches/{branch_id}
      operationId: branchesDeleteBranch
      tags:
      - Branches
      parameters:
      - name: branch_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '204':
          description: Success
  /api/auth/forgot-password:
    post:
      summary: POST /api/auth/forgot-password
      operationId: authForgotPassword
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/workflow/{workflow_id}:
    get:
      summary: SGK workflow detayları endpoint'i
      operationId: sgkGetSgkWorkflow
      tags:
      - Sgk
      parameters:
      - name: workflow_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/invoices/efatura/submit:
    post:
      summary: Mock endpoint for manual e-fatura submission.
      description: Required by frontend `invoice.service.ts` > submitEFatura
      operationId: invoicesSubmitEfaturaManual
      tags:
      - Invoices
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/plans:
    post:
      summary: Create a new plan (Super Admin only)
      operationId: plansCreatePlan
      tags:
      - Plans
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/dashboard/charts/patient-distribution:
    get:
      summary: GET /api/dashboard/charts/patient-distribution
      operationId: dashboardPatientDistribution
      tags:
      - Dashboard
      responses:
        '200':
          description: Success
  /api/auth/lookup-phone:
    post:
      summary: POST /api/auth/lookup-phone
      operationId: authLookupPhone
      tags:
      - Auth
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/tenants/{tenant_id}/addons:
    post:
      summary: Add addon to tenant (Admin override)
      operationId: adminTenantsAddTenantAddon
      tags:
      - Admin
      parameters:
      - name: tenant_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/reports/promissory-notes/list:
    get:
      summary: Toplu senet listesi - modal için
      operationId: reportsReportPromissoryNotesList
      tags:
      - Reports
      responses:
        '200':
          description: Success
  /api/patients/{patient_id}/payment-records:
    get:
      summary: Get all payment records for a patient
      operationId: paymentsGetPatientPaymentRecords
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Success
  /api/affiliate/me:
    get:
      summary: GET /api/affiliate/me
      operationId: affiliateGetMe
      tags:
      - Affiliate
      responses:
        '200':
          description: Success
  /api/communications/history:
    post:
      summary: Create a manual communication history entry
      operationId: communicationsCreateCommunicationHistory
      tags:
      - Communications
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/api-keys:
    post:
      summary: Create a new API key
      operationId: adminApiKeysCreateApiKey
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/settings:
    post:
      summary: Update system settings
      operationId: adminSettingsUpdateSettings
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/marketplaces/init-db:
    post:
      summary: Initialize Marketplace tables
      operationId: adminMarketplacesInitDb
      tags:
      - Admin
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/patients/{patient_id}/product-sales:
    post:
      summary: Create a new product sale from inventory
      operationId: salesCreateProductSale
      tags:
      - Patients
      parameters:
      - name: patient_id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/OutEBelgeV2/SendBasicInvoiceFromModel:
    post:
      summary: POST /api/OutEBelgeV2/SendBasicInvoiceFromModel
      operationId: birfaturaOutSendBasicInvoiceFromModel
      tags:
      - Outebelgev2
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/sgk/upload:
    post:
      summary: Accept multipart/form-data uploads under the 'files' field (multiple
        allowed).
      description: 'Saves files to a secure temporary path, runs OCR (worker-first)
        with auto_crop=True

        and returns per-file OCR results including patient_info.'
      operationId: sgkUploadAndProcessFiles
      tags:
      - Sgk
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/upload/files:
    delete:
      summary: Delete a file
      description: 'Query Params:

        key (str): S3 key of the file to delete'
      operationId: uploadDeleteFile
      tags:
      - Upload
      responses:
        '204':
          description: Success
  /api/cash-records:
    post:
      summary: Create a new cash record from cashflow.html form submission.
      operationId: cashRecordsCreateCashRecord
      tags:
      - Cash-records
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Success
  /api/admin/activity-logs/stats:
    get:
      summary: Get activity statistics for platform admin.
      description: Returns action counts, top users, etc.
      operationId: activityLogsAdminGetActivityStats
      tags:
      - Admin
      responses:
        '200':
          description: Success
  /api/ocr/debug_ner:
    post:
      summary: Debug endpoint to run HF NER and spaCy on provided text and return
        detailed outputs.
      description: 'Request JSON: { "text": "..." }

        Returns: { hf_ner: [...], spacy_entities: [...], tokens: [...] }'
      operationId: ocrDebugNer
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/entities:
    post:
      summary: Extract entities from image using OCR
      operationId: ocrExtractEntities
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/extract_patient:
    post:
      summary: Extract patient name from image using OCR
      operationId: ocrExtractPatientName
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/health:
    get:
      summary: Health check endpoint (moved from app.py)
      operationId: ocrHealthCheck
      tags:
      - Ocr
      responses:
        '200':
          description: Success
  /api/ocr/init-db:
    post:
      summary: Initialize database and create tables
      operationId: ocrInitDatabase
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/initialize:
    post:
      summary: Initialize NLP/OCR service (non-blocking).
      description: 'Starts model initialization in a background thread so the HTTP
        request

        can return quickly and heavy imports/downloads happen asynchronously.'
      operationId: ocrInitializeNlpEndpoint
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/jobs:
    post:
      summary: Create a new OCR job
      operationId: ocrCreateJob
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/process:
    post:
      summary: POST /api/ocr/process
      operationId: sgkProcessOcr
      tags:
      - Ocr
      responses:
        '201':
          description: Success
  /api/ocr/similarity:
    post:
      summary: Calculate similarity between two images or between two pieces of text
      description: Accepts either {'image_path1':..., 'image_path2':...} or {'text1':...,
        'text2':...}
      operationId: ocrCalculateSimilarity
      tags:
      - Ocr
      responses:
        '201':
          description: Success
components:
  schemas:
    Patient:
      type: object
      properties:
        id:
          type: string
          description: Unique patient identifier
        tcNumber:
          type: string
          description: Turkish citizenship number
        identityNumber:
          type: string
          description: Identity number
        firstName:
          type: string
          description: Patient's first name
        lastName:
          type: string
          description: Patient's last name
        phone:
          type: string
          description: Patient's phone number
        email:
          type: string
          format: email
          description: Patient's email address
        birthDate:
          type: string
          format: date
          description: Patient's birth date
        gender:
          type: string
          enum:
          - M
          - F
          description: Patient's gender
        addressCity:
          type: string
          description: Patient's city
        addressDistrict:
          type: string
          description: Patient's district
        addressFull:
          type: string
          description: Patient's full address
        status:
          type: string
          enum:
          - ACTIVE
          - INACTIVE
          - LEAD
          - TRIAL
          - CUSTOMER
          description: Patient status
        segment:
          type: string
          description: Patient segment
        acquisitionType:
          type: string
          description: How patient was acquired
        conversionStep:
          type: string
          description: Patient conversion step
        referredBy:
          type: string
          description: Who referred the patient
        priorityScore:
          type: integer
          description: Patient priority score
        tags:
          type: array
          items:
            type: string
          description: Patient tags
        sgkInfo:
          type: object
          description: SGK information
        customData:
          type: object
          description: Custom patient data
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - tcNumber
      - firstName
      - lastName
      - phone
    Appointment:
      type: object
      properties:
        id:
          type: string
          description: Unique appointment identifier
        patientId:
          type: string
          description: Patient ID
        clinicianId:
          type: string
          description: Clinician ID
        branchId:
          type: string
          description: Branch ID
        date:
          type: string
          format: date-time
          description: Appointment date
        time:
          type: string
          description: Appointment time
        duration:
          type: integer
          description: Duration in minutes
        appointmentType:
          type: string
          description: Type of appointment
        status:
          type: string
          enum:
          - SCHEDULED
          - CONFIRMED
          - COMPLETED
          - CANCELLED
          - NO_SHOW
          description: Appointment status
        notes:
          type: string
          description: Appointment notes
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - patientId
      - date
      - time
    Device:
      type: object
      properties:
        id:
          type: string
          description: Unique device identifier
        patientId:
          type: string
          description: Patient ID
        inventoryId:
          type: string
          description: Inventory ID
        serialNumber:
          type: string
          description: Device serial number (for single ear devices)
        serialNumberLeft:
          type: string
          description: Left ear device serial number
        serialNumberRight:
          type: string
          description: Right ear device serial number
        brand:
          type: string
          description: Device brand
        model:
          type: string
          description: Device model
        deviceType:
          type: string
          description: Type of device
        category:
          type: string
          description: Device category
        ear:
          type: string
          enum:
          - LEFT
          - RIGHT
          - BILATERAL
          description: Which ear the device is for
        status:
          type: string
          enum:
          - IN_STOCK
          - ASSIGNED
          - TRIAL
          - DEFECTIVE
          - LOST
          - RETURNED
          description: Device status
        trialStartDate:
          type: string
          format: date
          description: Trial start date
        trialEndDate:
          type: string
          format: date
          description: Trial end date
        trialExtendedUntil:
          type: string
          format: date
          description: Trial extended until date
        warrantyStartDate:
          type: string
          format: date
          description: Warranty start date
        warrantyEndDate:
          type: string
          format: date
          description: Warranty end date
        warrantyTerms:
          type: string
          description: Warranty terms
        price:
          type: number
          format: decimal
          description: Device price
        purchaseDate:
          type: string
          format: date
          description: Purchase date
        warrantyExpiry:
          type: string
          format: date
          description: Warranty expiry date
        notes:
          type: string
          description: Device notes
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - serialNumber
      - model
      - brand
    Sale:
      type: object
      properties:
        id:
          type: string
          description: Unique sale identifier
        patientId:
          type: string
          description: Patient ID
        productId:
          type: string
          description: Product ID
        saleDate:
          type: string
          format: date-time
          description: Sale date
        totalAmount:
          type: number
          format: decimal
          description: Total sale amount
        listPriceTotal:
          type: number
          format: decimal
          description: List price total
        discountAmount:
          type: number
          format: decimal
          description: Discount amount
        sgkCoverage:
          type: number
          format: decimal
          description: SGK coverage amount
        patientPayment:
          type: number
          format: decimal
          description: Patient payment amount
        paymentMethod:
          type: string
          description: Payment method
        status:
          type: string
          enum:
          - PENDING
          - COMPLETED
          - CANCELLED
          description: Sale status
        notes:
          type: string
          description: Sale notes
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - patientId
      - totalAmount
    InventoryItem:
      type: object
      properties:
        id:
          type: string
          description: Unique inventory item identifier
        name:
          type: string
          description: Product name
        brand:
          type: string
          description: Product brand
        model:
          type: string
          description: Product model
        category:
          type: string
          description: Product category
        barcode:
          type: string
          description: Product barcode
        supplier:
          type: string
          description: Supplier name
        description:
          type: string
          description: Product description
        availableInventory:
          type: integer
          description: Available inventory count
        totalInventory:
          type: integer
          description: Total inventory count
        usedInventory:
          type: integer
          description: Used inventory count
        inventory:
          type: integer
          description: Legacy field for available inventory
        onTrial:
          type: integer
          description: Items currently on trial
        reorderLevel:
          type: integer
          description: Minimum stock level for reordering
        minInventory:
          type: integer
          description: Legacy field for reorder level
        availableSerials:
          type: array
          items:
            type: string
          description: Available serial numbers
        features:
          type: array
          items:
            type: string
          description: Product features
        price:
          type: number
          format: float
          description: Unit price
        kdv:
          type: number
          format: float
          description: VAT/KDV rate percentage
          default: 20
        priceIncludesKdv:
          type: boolean
          description: Whether the listed price already includes VAT (KDV)
          default: false
        costIncludesKdv:
          type: boolean
          description: Whether the listed cost already includes VAT (KDV)
          default: false
        vatRate:
          type: number
          format: float
          description: VAT rate percentage (alias for kdv)
          default: 20
        vatIncludedPrice:
          type: number
          format: float
          description: Price including VAT/KDV
        stock:
          type: integer
          description: Current stock level (alias for availableInventory)
        serialNumber:
          type: string
          description: Product serial number
        direction:
          type: string
          enum:
          - LEFT
          - RIGHT
          - BILATERAL
          description: Hearing aid direction
        ear:
          type: string
          enum:
          - LEFT
          - RIGHT
          - BILATERAL
          description: Legacy field for direction
        warranty:
          type: integer
          description: Warranty period in months
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - name
      - brand
      - category
      - price
    Supplier:
      type: object
      properties:
        id:
          type: string
          description: Unique supplier identifier
        name:
          type: string
          description: Supplier name
        contactPerson:
          type: string
          description: Contact person name
        phone:
          type: string
          description: Supplier phone
        email:
          type: string
          format: email
          description: Supplier email
        address:
          type: string
          description: Supplier address
        taxNumber:
          type: string
          description: Tax number
        status:
          type: string
          enum:
          - ACTIVE
          - INACTIVE
          description: Supplier status
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - name
      - contactPerson
    Campaign:
      type: object
      properties:
        id:
          type: string
          description: Unique campaign identifier
        name:
          type: string
          description: Campaign name
        description:
          type: string
          description: Campaign description
        startDate:
          type: string
          format: date
          description: Campaign start date
        endDate:
          type: string
          format: date
          description: Campaign end date
        budget:
          type: number
          format: decimal
          description: Campaign budget
        status:
          type: string
          enum:
          - DRAFT
          - ACTIVE
          - PAUSED
          - COMPLETED
          description: Campaign status
        targetAudience:
          type: string
          description: Target audience
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - name
      - startDate
      - endDate
    Notification:
      type: object
      properties:
        id:
          type: string
          description: Unique notification identifier
        userId:
          type: string
          description: User ID
        title:
          type: string
          description: Notification title
        message:
          type: string
          description: Notification message
        type:
          type: string
          enum:
          - INFO
          - WARNING
          - ERROR
          - SUCCESS
          description: Notification type
        isRead:
          type: boolean
          description: Read status
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - userId
      - title
      - message
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Error message
        code:
          type: integer
          description: Error code
        details:
          type: object
          description: Additional error details
      required:
      - error
    SuccessResponse:
      type: object
      properties:
        message:
          type: string
          description: Success message
        data:
          type: object
          description: Response data
      required:
      - message
    PaginationInfo:
      type: object
      properties:
        page:
          type: integer
          description: Current page number (offset-based pagination)
        perPage:
          type: integer
          description: Items per page
        total:
          type: integer
          description: Total number of items (offset-based pagination)
        totalPages:
          type: integer
          description: Total number of pages (offset-based pagination)
        hasNext:
          type: boolean
          description: Whether there are more items available
        nextCursor:
          type: string
          description: Cursor for next page (cursor-based pagination)
        cursor:
          type: string
          description: Current cursor (cursor-based pagination)
      required:
      - page
      - perPage
      - total
      - totalPages
    PaymentRecord:
      type: object
      properties:
        id:
          type: string
          description: Unique payment record identifier
        patientId:
          type: string
          description: Patient ID
        saleId:
          type: string
          description: Sale ID
        promissoryNoteId:
          type: string
          description: Promissory note ID
        amount:
          type: number
          format: decimal
          description: Payment amount
        paymentDate:
          type: string
          format: date-time
          description: Payment date
        dueDate:
          type: string
          format: date
          description: Due date
        paymentMethod:
          type: string
          description: Payment method
        paymentType:
          type: string
          description: Payment type
        status:
          type: string
          enum:
          - PENDING
          - COMPLETED
          - CANCELLED
          - OVERDUE
          description: Payment status
        referenceNumber:
          type: string
          description: Reference number
        notes:
          type: string
          description: Payment notes
        deviceId:
          type: string
          description: Device ID
        ear:
          type: string
          enum:
          - LEFT
          - RIGHT
          - BILATERAL
          description: Which ear
        reason:
          type: string
          description: Payment reason
        fromInventory:
          type: boolean
          description: From inventory flag
        listPrice:
          type: number
          format: decimal
          description: List price
        salePrice:
          type: number
          format: decimal
          description: Sale price
        sgkScheme:
          type: string
          description: SGK scheme
        sgkSupport:
          type: number
          format: decimal
          description: SGK support amount
        discountType:
          type: string
          description: Discount type
        discountValue:
          type: number
          format: decimal
          description: Discount value
        netPayable:
          type: number
          format: decimal
          description: Net payable amount
        productId:
          type: string
          description: Product ID
        saleDate:
          type: string
          format: date-time
          description: Sale date
        listPriceTotal:
          type: number
          format: decimal
          description: List price total
        totalAmount:
          type: number
          format: decimal
          description: Total amount
        discountAmount:
          type: number
          format: decimal
          description: Discount amount
        finalAmount:
          type: number
          format: decimal
          description: Final amount
        paidAmount:
          type: number
          format: decimal
          description: Paid amount
        rightEarAssignmentId:
          type: string
          description: Right ear assignment ID
        leftEarAssignmentId:
          type: string
          description: Left ear assignment ID
        sgkCoverage:
          type: number
          format: decimal
          description: SGK coverage
        patientPayment:
          type: number
          format: decimal
          description: Patient payment
        planName:
          type: string
          description: Payment plan name
        installmentCount:
          type: integer
          description: Number of installments
        installmentAmount:
          type: number
          format: decimal
          description: Installment amount
        installmentNumber:
          type: integer
          description: Current installment number
        remainingBalance:
          type: number
          format: decimal
          description: Remaining balance
        interestRate:
          type: number
          format: decimal
          description: Interest rate
        totalInterest:
          type: number
          format: decimal
          description: Total interest
        processingFee:
          type: number
          format: decimal
          description: Processing fee amount
        startDate:
          type: string
          format: date-time
          description: Start date
        paymentPlanId:
          type: string
          description: Payment plan ID
        paidDate:
          type: string
          format: date-time
          description: Paid date
        lateFee:
          type: number
          format: decimal
          description: Late fee amount
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - patientId
      - amount
      - paymentDate
    User:
      type: object
      properties:
        id:
          type: string
          description: Unique user identifier
        username:
          type: string
          description: Username
        email:
          type: string
          format: email
          description: User email
        phone:
          type: string
          description: User phone number
        passwordHash:
          type: string
          description: Password hash
        firstName:
          type: string
          description: User first name
        lastName:
          type: string
          description: User last name
        role:
          type: string
          description: User role
        isActive:
          type: boolean
          description: User active status
        lastLogin:
          type: string
          format: date-time
          description: Last login date
        passwordResetToken:
          type: string
          description: Password reset token
        passwordResetExpires:
          type: string
          format: date-time
          description: Password reset expiry
        userId:
          type: string
          description: User ID for audit
        action:
          type: string
          description: User action
        entityType:
          type: string
          description: Entity type
        entityId:
          type: string
          description: Entity ID
        ipAddress:
          type: string
          description: IP address
        userAgent:
          type: string
          description: User agent
        details:
          type: object
          description: Additional details
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
      - username
      - email
    CommunicationTemplate:
      type: object
      properties:
        id:
          type: string
          description: Unique template identifier
        name:
          type: string
          description: Template name
        description:
          type: string
          description: Template description
        templateType:
          type: string
          enum:
          - sms
          - email
          description: Type of communication template
        category:
          type: string
          description: Template category (appointment_reminder, payment_due, welcome,
            etc.)
        subject:
          type: string
          description: Email subject (for email templates)
        bodyText:
          type: string
          description: Plain text content
        bodyHtml:
          type: string
          description: HTML content (for email templates)
        variables:
          type: array
          items:
            type: string
          description: Available template variables
        isActive:
          type: boolean
          description: Whether template is active
    CommunicationMessage:
      type: object
      properties:
        id:
          type: string
          description: Unique message identifier
        messageType:
          type: string
          enum:
          - sms
          - email
          description: Type of message (sms or email)
        patientId:
          type: string
          description: Patient ID
        campaignId:
          type: string
          description: Campaign ID (if part of a campaign)
        templateId:
          type: string
          description: Template ID used for this message
        status:
          type: string
          description: Message status (sent, delivered, failed, etc.)
        phoneNumber:
          type: string
          description: Phone number (for SMS messages)
        toEmail:
          type: string
          description: Recipient email address (for email messages)
        fromEmail:
          type: string
          description: Sender email address (for email messages)
        subject:
          type: string
          description: Email subject (for email messages)
        message:
          type: string
          description: Message content (for SMS)
        bodyText:
          type: string
          description: Plain text content (for email)
        bodyHtml:
          type: string
          description: HTML content (for email)
        sentAt:
          type: string
          format: date-time
          description: When the message was sent
        deliveredAt:
          type: string
          format: date-time
          description: When the message was delivered
        errorMessage:
          type: string
          description: Error message if sending failed
        cost:
          type: number
          format: float
          description: Cost of sending the message
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
        isSystem:
          type: boolean
          description: Whether template is a system template
        usageCount:
          type: integer
          description: Number of times template has been used
        lastUsedAt:
          type: string
          format: date-time
          description: Last time template was used
      required:
      - name
      - templateType
      - bodyText
    CommunicationTemplateCreate:
      type: object
      properties:
        name:
          type: string
          description: Template name
        description:
          type: string
          description: Template description
        templateType:
          type: string
          enum:
          - sms
          - email
          description: Type of communication template
        category:
          type: string
          description: Template category
        subject:
          type: string
          description: Email subject (for email templates)
        bodyText:
          type: string
          description: Plain text content
        bodyHtml:
          type: string
          description: HTML content (for email templates)
        variables:
          type: array
          items:
            type: string
          description: Available template variables
        isActive:
          type: boolean
          default: true
          description: Whether template is active
      required:
      - name
      - templateType
      - bodyText
    CommunicationTemplateUpdate:
      type: object
      properties:
        name:
          type: string
          description: Template name
        description:
          type: string
          description: Template description
        category:
          type: string
          description: Template category
        subject:
          type: string
          description: Email subject (for email templates)
        bodyText:
          type: string
          description: Plain text content
        bodyHtml:
          type: string
          description: HTML content (for email templates)
        variables:
          type: array
          items:
            type: string
          description: Available template variables
        isActive:
          type: boolean
          description: Whether template is active
    PurchaseInvoice:
      type: object
      properties:
        id:
          type: integer
        birfaturaUuid:
          type: string
        invoiceNumber:
          type: string
        invoiceDate:
          type: string
          format: date-time
        invoiceType:
          type: string
          enum:
          - INCOMING
          - OUTGOING
        senderName:
          type: string
        senderTaxNumber:
          type: string
        senderTaxOffice:
          type: string
        senderAddress:
          type: string
        senderCity:
          type: string
        supplierId:
          type: integer
          nullable: true
        currency:
          type: string
        subtotal:
          type: number
        taxAmount:
          type: number
        totalAmount:
          type: number
        status:
          type: string
        isMatched:
          type: boolean
        notes:
          type: string
          nullable: true
        itemsCount:
          type: integer
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          nullable: true
    SuggestedSupplier:
      type: object
      properties:
        id:
          type: integer
        companyName:
          type: string
        taxNumber:
          type: string
        taxOffice:
          type: string
        address:
          type: string
        city:
          type: string
        invoiceCount:
          type: integer
        totalAmount:
          type: number
        firstInvoiceDate:
          type: string
          format: date-time
          nullable: true
        lastInvoiceDate:
          type: string
          format: date-time
          nullable: true
        status:
          type: string
          enum:
          - PENDING
          - ACCEPTED
          - REJECTED
        acceptedAt:
          type: string
          format: date-time
          nullable: true
        acceptedBy:
          type: string
          nullable: true
        supplierId:
          type: integer
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          nullable: true
